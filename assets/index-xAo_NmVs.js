function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const u=Object.getOwnPropertyDescriptor(a,s);u&&Object.defineProperty(e,s,u.get?u:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,s,u){var c=null;if(u!==void 0&&(c=""+u),s.key!==void 0&&(c=""+s.key),"key"in s){u={};for(var h in s)h!=="key"&&(u[h]=s[h])}else u=s;return s=u.ref,{$$typeof:e,type:a,key:c,ref:s!==void 0?s:null,props:u}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),C=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=C&&B[C]||B["@@iterator"],typeof B=="function"?B:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function I(B,Z,ne){this.props=B,this.context=Z,this.refs=A,this.updater=ne||T}I.prototype.isReactComponent={},I.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},I.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function P(){}P.prototype=I.prototype;function N(B,Z,ne){this.props=B,this.context=Z,this.refs=A,this.updater=ne||T}var S=N.prototype=new P;S.constructor=N,R(S,I.prototype),S.isPureReactComponent=!0;var k=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function j(B,Z,ne,oe,ce,xe){return ne=xe.ref,{$$typeof:e,type:B,key:Z,ref:ne!==void 0?ne:null,props:xe}}function H(B,Z){return j(B.type,Z,void 0,void 0,void 0,B.props)}function X(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function K(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ne){return Z[ne]})}var re=/\/+/g;function F(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?K(""+B.key):Z.toString(36)}function J(){}function z(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(J,J):(B.status="pending",B.then(function(Z){B.status==="pending"&&(B.status="fulfilled",B.value=Z)},function(Z){B.status==="pending"&&(B.status="rejected",B.reason=Z)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function $(B,Z,ne,oe,ce){var xe=typeof B;(xe==="undefined"||xe==="boolean")&&(B=null);var de=!1;if(B===null)de=!0;else switch(xe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(B.$$typeof){case e:case t:de=!0;break;case _:return de=B._init,$(de(B._payload),Z,ne,oe,ce)}}if(de)return ce=ce(B),de=oe===""?"."+F(B,0):oe,k(ce)?(ne="",de!=null&&(ne=de.replace(re,"$&/")+"/"),$(ce,Z,ne,"",function(te){return te})):ce!=null&&(X(ce)&&(ce=H(ce,ne+(ce.key==null||B&&B.key===ce.key?"":(""+ce.key).replace(re,"$&/")+"/")+de)),Z.push(ce)),1;de=0;var G=oe===""?".":oe+":";if(k(B))for(var Y=0;Y<B.length;Y++)oe=B[Y],xe=G+F(oe,Y),de+=$(oe,Z,ne,xe,ce);else if(Y=b(B),typeof Y=="function")for(B=Y.call(B),Y=0;!(oe=B.next()).done;)oe=oe.value,xe=G+F(oe,Y++),de+=$(oe,Z,ne,xe,ce);else if(xe==="object"){if(typeof B.then=="function")return $(z(B),Z,ne,oe,ce);throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return de}function L(B,Z,ne){if(B==null)return B;var oe=[],ce=0;return $(B,oe,"","",function(xe){return Z.call(ne,xe,ce++)}),oe}function W(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(ne){(B._status===0||B._status===-1)&&(B._status=1,B._result=ne)},function(ne){(B._status===0||B._status===-1)&&(B._status=2,B._result=ne)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var U=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function V(){}return react_production.Children={map:L,forEach:function(B,Z,ne){L(B,function(){Z.apply(this,arguments)},ne)},count:function(B){var Z=0;return L(B,function(){Z++}),Z},toArray:function(B){return L(B,function(Z){return Z})||[]},only:function(B){if(!X(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},react_production.Component=I,react_production.Fragment=n,react_production.Profiler=s,react_production.PureComponent=N,react_production.StrictMode=a,react_production.Suspense=f,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(B){return D.H.useMemoCache(B)}},react_production.cache=function(B){return function(){return B.apply(null,arguments)}},react_production.cloneElement=function(B,Z,ne){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var oe=R({},B.props),ce=B.key,xe=void 0;if(Z!=null)for(de in Z.ref!==void 0&&(xe=void 0),Z.key!==void 0&&(ce=""+Z.key),Z)!M.call(Z,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Z.ref===void 0||(oe[de]=Z[de]);var de=arguments.length-2;if(de===1)oe.children=ne;else if(1<de){for(var G=Array(de),Y=0;Y<de;Y++)G[Y]=arguments[Y+2];oe.children=G}return j(B.type,ce,void 0,void 0,xe,oe)},react_production.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:u,_context:B},B},react_production.createElement=function(B,Z,ne){var oe,ce={},xe=null;if(Z!=null)for(oe in Z.key!==void 0&&(xe=""+Z.key),Z)M.call(Z,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ce[oe]=Z[oe]);var de=arguments.length-2;if(de===1)ce.children=ne;else if(1<de){for(var G=Array(de),Y=0;Y<de;Y++)G[Y]=arguments[Y+2];ce.children=G}if(B&&B.defaultProps)for(oe in de=B.defaultProps,de)ce[oe]===void 0&&(ce[oe]=de[oe]);return j(B,xe,void 0,void 0,null,ce)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(B){return{$$typeof:h,render:B}},react_production.isValidElement=X,react_production.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:W}},react_production.memo=function(B,Z){return{$$typeof:m,type:B,compare:Z===void 0?null:Z}},react_production.startTransition=function(B){var Z=D.T,ne={};D.T=ne;try{var oe=B(),ce=D.S;ce!==null&&ce(ne,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(V,U)}catch(xe){U(xe)}finally{D.T=Z}},react_production.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},react_production.use=function(B){return D.H.use(B)},react_production.useActionState=function(B,Z,ne){return D.H.useActionState(B,Z,ne)},react_production.useCallback=function(B,Z){return D.H.useCallback(B,Z)},react_production.useContext=function(B){return D.H.useContext(B)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(B,Z){return D.H.useDeferredValue(B,Z)},react_production.useEffect=function(B,Z,ne){var oe=D.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(B,Z)},react_production.useId=function(){return D.H.useId()},react_production.useImperativeHandle=function(B,Z,ne){return D.H.useImperativeHandle(B,Z,ne)},react_production.useInsertionEffect=function(B,Z){return D.H.useInsertionEffect(B,Z)},react_production.useLayoutEffect=function(B,Z){return D.H.useLayoutEffect(B,Z)},react_production.useMemo=function(B,Z){return D.H.useMemo(B,Z)},react_production.useOptimistic=function(B,Z){return D.H.useOptimistic(B,Z)},react_production.useReducer=function(B,Z,ne){return D.H.useReducer(B,Z,ne)},react_production.useRef=function(B){return D.H.useRef(B)},react_production.useState=function(B){return D.H.useState(B)},react_production.useSyncExternalStore=function(B,Z,ne){return D.H.useSyncExternalStore(B,Z,ne)},react_production.useTransition=function(){return D.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(e){function t(L,W){var U=L.length;L.push(W);e:for(;0<U;){var V=U-1>>>1,B=L[V];if(0<s(B,W))L[V]=W,L[U]=B,U=V;else break e}}function n(L){return L.length===0?null:L[0]}function a(L){if(L.length===0)return null;var W=L[0],U=L.pop();if(U!==W){L[0]=U;e:for(var V=0,B=L.length,Z=B>>>1;V<Z;){var ne=2*(V+1)-1,oe=L[ne],ce=ne+1,xe=L[ce];if(0>s(oe,U))ce<B&&0>s(xe,oe)?(L[V]=xe,L[ce]=U,V=ce):(L[V]=oe,L[ne]=U,V=ne);else if(ce<B&&0>s(xe,U))L[V]=xe,L[ce]=U,V=ce;else break e}}return W}function s(L,W){var U=L.sortIndex-W.sortIndex;return U!==0?U:L.id-W.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var f=[],m=[],_=1,C=null,b=3,T=!1,R=!1,A=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function k(L){for(var W=n(m);W!==null;){if(W.callback===null)a(m);else if(W.startTime<=L)a(m),W.sortIndex=W.expirationTime,t(f,W);else break;W=n(m)}}function D(L){if(A=!1,k(L),!R)if(n(f)!==null)R=!0,M||(M=!0,F());else{var W=n(m);W!==null&&$(D,W.startTime-L)}}var M=!1,j=-1,H=5,X=-1;function K(){return I?!0:!(e.unstable_now()-X<H)}function re(){if(I=!1,M){var L=e.unstable_now();X=L;var W=!0;try{e:{R=!1,A&&(A=!1,N(j),j=-1),T=!0;var U=b;try{t:{for(k(L),C=n(f);C!==null&&!(C.expirationTime>L&&K());){var V=C.callback;if(typeof V=="function"){C.callback=null,b=C.priorityLevel;var B=V(C.expirationTime<=L);if(L=e.unstable_now(),typeof B=="function"){C.callback=B,k(L),W=!0;break t}C===n(f)&&a(f),k(L)}else a(f);C=n(f)}if(C!==null)W=!0;else{var Z=n(m);Z!==null&&$(D,Z.startTime-L),W=!1}}break e}finally{C=null,b=U,T=!1}W=void 0}}finally{W?F():M=!1}}}var F;if(typeof S=="function")F=function(){S(re)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,z=J.port2;J.port1.onmessage=re,F=function(){z.postMessage(null)}}else F=function(){P(re,0)};function $(L,W){j=P(function(){L(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(L){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var U=b;b=W;try{return L()}finally{b=U}},e.unstable_requestPaint=function(){I=!0},e.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var U=b;b=L;try{return W()}finally{b=U}},e.unstable_scheduleCallback=function(L,W,U){var V=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?V+U:V):U=V,L){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=U+B,L={id:_++,callback:W,priorityLevel:L,startTime:U,expirationTime:B,sortIndex:-1},U>V?(L.sortIndex=U,t(m,L),n(f)===null&&L===n(m)&&(A?(N(j),j=-1):A=!0,$(D,U-V))):(L.sortIndex=B,t(f,L),R||T||(R=!0,M||(M=!0,F()))),L},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(L){var W=b;return function(){var U=b;b=W;try{return L.apply(this,arguments)}finally{b=U}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var e=requireReact();function t(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function u(f,m,_){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:C==null?null:""+C,children:f,containerInfo:m,implementation:_}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(f,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(f,m,null,_)},reactDom_production.flushSync=function(f){var m=c.T,_=a.p;try{if(c.T=null,a.p=2,f)return f()}finally{c.T=m,a.p=_,a.d.f()}},reactDom_production.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(f,m))},reactDom_production.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},reactDom_production.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var _=m.as,C=h(_,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?a.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:C,integrity:b,fetchPriority:T}):_==="script"&&a.d.X(f,{crossOrigin:C,integrity:b,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},reactDom_production.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);a.d.M(f,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(f)},reactDom_production.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,C=h(_,m.crossOrigin);a.d.L(f,_,{crossOrigin:C,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},reactDom_production.preloadModule=function(f,m){if(typeof f=="string")if(m){var _=h(m.as,m.crossOrigin);a.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(f)},reactDom_production.requestFormReset=function(f){a.d.r(f)},reactDom_production.unstable_batchedUpdates=function(f,m){return f(m)},reactDom_production.useFormState=function(f,m,_){return c.H.useFormState(f,m,_)},reactDom_production.useFormStatus=function(){return c.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var e=requireScheduler(),t=requireReact(),n=requireReactDom();function a(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function u(o){var l=o,d=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(d=l.return),o=l.return;while(o)}return l.tag===3?d:null}function c(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function h(o){if(u(o)!==o)throw Error(a(188))}function f(o){var l=o.alternate;if(!l){if(l=u(o),l===null)throw Error(a(188));return l!==o?null:o}for(var d=o,g=l;;){var E=d.return;if(E===null)break;var O=E.alternate;if(O===null){if(g=E.return,g!==null){d=g;continue}break}if(E.child===O.child){for(O=E.child;O;){if(O===d)return h(E),o;if(O===g)return h(E),l;O=O.sibling}throw Error(a(188))}if(d.return!==g.return)d=E,g=O;else{for(var q=!1,Q=E.child;Q;){if(Q===d){q=!0,d=E,g=O;break}if(Q===g){q=!0,g=E,d=O;break}Q=Q.sibling}if(!q){for(Q=O.child;Q;){if(Q===d){q=!0,d=O,g=E;break}if(Q===g){q=!0,g=O,d=E;break}Q=Q.sibling}if(!q)throw Error(a(189))}}if(d.alternate!==g)throw Error(a(190))}if(d.tag!==3)throw Error(a(188));return d.stateNode.current===d?o:l}function m(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=m(o),l!==null)return l;o=o.sibling}return null}var _=Object.assign,C=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),S=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=re&&o[re]||o["@@iterator"],typeof o=="function"?o:null)}var J=Symbol.for("react.client.reference");function z(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===J?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case R:return"Fragment";case I:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case X:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case S:return(o.displayName||"Context")+".Provider";case N:return(o._context.displayName||"Context")+".Consumer";case k:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case j:return l=o.displayName||null,l!==null?l:z(o.type)||"Memo";case H:l=o._payload,o=o._init;try{return z(o(l))}catch{}}return null}var $=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},V=[],B=-1;function Z(o){return{current:o}}function ne(o){0>B||(o.current=V[B],V[B]=null,B--)}function oe(o,l){B++,V[B]=o.current,o.current=l}var ce=Z(null),xe=Z(null),de=Z(null),G=Z(null);function Y(o,l){switch(oe(de,l),oe(xe,o),oe(ce,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Pp(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Pp(l),o=Gp(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ne(ce),oe(ce,o)}function te(){ne(ce),ne(xe),ne(de)}function ee(o){o.memoizedState!==null&&oe(G,o);var l=ce.current,d=Gp(l,o.type);l!==d&&(oe(xe,o),oe(ce,d))}function se(o){xe.current===o&&(ne(ce),ne(xe)),G.current===o&&(ne(G),ca._currentValue=U)}var ue=Object.prototype.hasOwnProperty,be=e.unstable_scheduleCallback,ye=e.unstable_cancelCallback,Re=e.unstable_shouldYield,Le=e.unstable_requestPaint,Oe=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,qe=e.unstable_ImmediatePriority,rt=e.unstable_UserBlockingPriority,He=e.unstable_NormalPriority,Ae=e.unstable_LowPriority,xt=e.unstable_IdlePriority,lt=e.log,Gt=e.unstable_setDisableYieldValue,ot=null,ze=null;function et(o){if(typeof lt=="function"&&Gt(o),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(ot,o)}catch{}}var Qe=Math.clz32?Math.clz32:Jt,Nt=Math.log,Xe=Math.LN2;function Jt(o){return o>>>=0,o===0?32:31-(Nt(o)/Xe|0)|0}var er=256,gr=4194304;function Ge(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function at(o,l,d){var g=o.pendingLanes;if(g===0)return 0;var E=0,O=o.suspendedLanes,q=o.pingedLanes;o=o.warmLanes;var Q=g&134217727;return Q!==0?(g=Q&~O,g!==0?E=Ge(g):(q&=Q,q!==0?E=Ge(q):d||(d=Q&~o,d!==0&&(E=Ge(d))))):(Q=g&~O,Q!==0?E=Ge(Q):q!==0?E=Ge(q):d||(d=g&~o,d!==0&&(E=Ge(d)))),E===0?0:l!==0&&l!==E&&(l&O)===0&&(O=E&-E,d=l&-l,O>=d||O===32&&(d&4194048)!==0)?l:E}function dt(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function tr(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(){var o=er;return er<<=1,(er&4194048)===0&&(er=256),o}function Un(){var o=gr;return gr<<=1,(gr&62914560)===0&&(gr=4194304),o}function en(o){for(var l=[],d=0;31>d;d++)l.push(o);return l}function Et(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function jt(o,l,d,g,E,O){var q=o.pendingLanes;o.pendingLanes=d,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=d,o.entangledLanes&=d,o.errorRecoveryDisabledLanes&=d,o.shellSuspendCounter=0;var Q=o.entanglements,ie=o.expirationTimes,ve=o.hiddenUpdates;for(d=q&~d;0<d;){var Ee=31-Qe(d),Te=1<<Ee;Q[Ee]=0,ie[Ee]=-1;var me=ve[Ee];if(me!==null)for(ve[Ee]=null,Ee=0;Ee<me.length;Ee++){var _e=me[Ee];_e!==null&&(_e.lane&=-536870913)}d&=~Te}g!==0&&Dt(o,g,0),O!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=O&~(q&~l))}function Dt(o,l,d){o.pendingLanes|=l,o.suspendedLanes&=~l;var g=31-Qe(l);o.entangledLanes|=l,o.entanglements[g]=o.entanglements[g]|1073741824|d&4194090}function Yt(o,l){var d=o.entangledLanes|=l;for(o=o.entanglements;d;){var g=31-Qe(d),E=1<<g;E&l|o[g]&l&&(o[g]|=l),d&=~E}}function Ut(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Bt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ae(){var o=W.p;return o!==0?o:(o=window.event,o===void 0?32:rd(o.type))}function he(o,l){var d=W.p;try{return W.p=o,l()}finally{W.p=d}}var ge=Math.random().toString(36).slice(2),Se="__reactFiber$"+ge,we="__reactProps$"+ge,De="__reactContainer$"+ge,Ne="__reactEvents$"+ge,Ie="__reactListeners$"+ge,Me="__reactHandles$"+ge,Fe="__reactResources$"+ge,ke="__reactMarker$"+ge;function Be(o){delete o[Se],delete o[we],delete o[Ne],delete o[Ie],delete o[Me]}function Ze(o){var l=o[Se];if(l)return l;for(var d=o.parentNode;d;){if(l=d[De]||d[Se]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(o=jp(o);o!==null;){if(d=o[Se])return d;o=jp(o)}return l}o=d,d=o.parentNode}return null}function ct(o){if(o=o[Se]||o[De]){var l=o.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return o}return null}function St(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(a(33))}function Rt(o){var l=o[Fe];return l||(l=o[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ye(o){o[ke]=!0}var gt=new Set,Dr={};function sr(o,l){Qt(o,l),Qt(o+"Capture",l)}function Qt(o,l){for(Dr[o]=l,o=0;o<l.length;o++)gt.add(l[o])}var vr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hn={},tn={};function Pr(o){return ue.call(tn,o)?!0:ue.call(Hn,o)?!1:vr.test(o)?tn[o]=!0:(Hn[o]=!0,!1)}function Gr(o,l,d){if(Pr(l))if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+d)}}function Br(o,l,d){if(d===null)o.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+d)}}function Ke(o,l,d,g){if(g===null)o.removeAttribute(d);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(d);return}o.setAttributeNS(l,d,""+g)}}var Mt,zr;function rr(o){if(Mt===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Mt=l&&l[1]||"",zr=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+o+zr}var Tt=!1;function rn(o,l){if(!o||Tt)return"";Tt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(_e){var me=_e}Reflect.construct(o,[],Te)}else{try{Te.call()}catch(_e){me=_e}o.call(Te.prototype)}}else{try{throw Error()}catch(_e){me=_e}(Te=o())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(_e){if(_e&&me&&typeof _e.stack=="string")return[_e.stack,me.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=g.DetermineComponentFrameRoot(),q=O[0],Q=O[1];if(q&&Q){var ie=q.split(`
`),ve=Q.split(`
`);for(E=g=0;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;for(;E<ve.length&&!ve[E].includes("DetermineComponentFrameRoot");)E++;if(g===ie.length||E===ve.length)for(g=ie.length-1,E=ve.length-1;1<=g&&0<=E&&ie[g]!==ve[E];)E--;for(;1<=g&&0<=E;g--,E--)if(ie[g]!==ve[E]){if(g!==1||E!==1)do if(g--,E--,0>E||ie[g]!==ve[E]){var Ee=`
`+ie[g].replace(" at new "," at ");return o.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",o.displayName)),Ee}while(1<=g&&0<=E);break}}}finally{Tt=!1,Error.prepareStackTrace=d}return(d=o?o.displayName||o.name:"")?rr(d):""}function ga(o){switch(o.tag){case 26:case 27:case 5:return rr(o.type);case 16:return rr("Lazy");case 13:return rr("Suspense");case 19:return rr("SuspenseList");case 0:case 15:return rn(o.type,!1);case 11:return rn(o.type.render,!1);case 1:return rn(o.type,!0);case 31:return rr("Activity");default:return""}}function va(o){try{var l="";do l+=ga(o),o=o.return;while(o);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function mr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ll(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ud(o){var l=Ll(o)?"checked":"value",d=Object.getOwnPropertyDescriptor(o.constructor.prototype,l),g=""+o[l];if(!o.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var E=d.get,O=d.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return E.call(this)},set:function(q){g=""+q,O.call(this,q)}}),Object.defineProperty(o,l,{enumerable:d.enumerable}),{getValue:function(){return g},setValue:function(q){g=""+q},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ma(o){o._valueTracker||(o._valueTracker=ud(o))}function Il(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var d=l.getValue(),g="";return o&&(g=Ll(o)?o.checked?"true":"false":o.value),o=g,o!==d?(l.setValue(o),!0):!1}function ya(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var cd=/[\n"\\]/g;function _r(o){return o.replace(cd,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ro(o,l,d,g,E,O,q,Q){o.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.type=q:o.removeAttribute("type"),l!=null?q==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+mr(l)):o.value!==""+mr(l)&&(o.value=""+mr(l)):q!=="submit"&&q!=="reset"||o.removeAttribute("value"),l!=null?Oo(o,q,mr(l)):d!=null?Oo(o,q,mr(d)):g!=null&&o.removeAttribute("value"),E==null&&O!=null&&(o.defaultChecked=!!O),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?o.name=""+mr(Q):o.removeAttribute("name")}function Nl(o,l,d,g,E,O,q,Q){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(o.type=O),l!=null||d!=null){if(!(O!=="submit"&&O!=="reset"||l!=null))return;d=d!=null?""+mr(d):"",l=l!=null?""+mr(l):d,Q||l===o.value||(o.value=l),o.defaultValue=l}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=Q?o.checked:!!g,o.defaultChecked=!!g,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(o.name=q)}function Oo(o,l,d){l==="number"&&ya(o.ownerDocument)===o||o.defaultValue===""+d||(o.defaultValue=""+d)}function $n(o,l,d,g){if(o=o.options,l){l={};for(var E=0;E<d.length;E++)l["$"+d[E]]=!0;for(d=0;d<o.length;d++)E=l.hasOwnProperty("$"+o[d].value),o[d].selected!==E&&(o[d].selected=E),E&&g&&(o[d].defaultSelected=!0)}else{for(d=""+mr(d),l=null,E=0;E<o.length;E++){if(o[E].value===d){o[E].selected=!0,g&&(o[E].defaultSelected=!0);return}l!==null||o[E].disabled||(l=o[E])}l!==null&&(l.selected=!0)}}function Ml(o,l,d){if(l!=null&&(l=""+mr(l),l!==o.value&&(o.value=l),d==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=d!=null?""+mr(d):""}function kl(o,l,d,g){if(l==null){if(g!=null){if(d!=null)throw Error(a(92));if($(g)){if(1<g.length)throw Error(a(93));g=g[0]}d=g}d==null&&(d=""),l=d}d=mr(l),o.defaultValue=d,g=o.textContent,g===d&&g!==""&&g!==null&&(o.value=g)}function Vn(o,l){if(l){var d=o.firstChild;if(d&&d===o.lastChild&&d.nodeType===3){d.nodeValue=l;return}}o.textContent=l}var pd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pl(o,l,d){var g=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?g?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":g?o.setProperty(l,d):typeof d!="number"||d===0||pd.has(l)?l==="float"?o.cssFloat=d:o[l]=(""+d).trim():o[l]=d+"px"}function Gl(o,l,d){if(l!=null&&typeof l!="object")throw Error(a(62));if(o=o.style,d!=null){for(var g in d)!d.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var E in l)g=l[E],l.hasOwnProperty(E)&&d[E]!==g&&Pl(o,E,g)}else for(var O in l)l.hasOwnProperty(O)&&Pl(o,O,l[O])}function Ao(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(o){return hd.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Do=null;function Lo(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var qn=null,Wn=null;function Bl(o){var l=ct(o);if(l&&(o=l.stateNode)){var d=o[we]||null;e:switch(o=l.stateNode,l.type){case"input":if(Ro(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=o;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+_r(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var g=d[l];if(g!==o&&g.form===o.form){var E=g[we]||null;if(!E)throw Error(a(90));Ro(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(l=0;l<d.length;l++)g=d[l],g.form===o.form&&Il(g)}break e;case"textarea":Ml(o,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&$n(o,!!d.multiple,l,!1)}}}var Io=!1;function zl(o,l,d){if(Io)return o(l,d);Io=!0;try{var g=o(l);return g}finally{if(Io=!1,(qn!==null||Wn!==null)&&(ao(),qn&&(l=qn,o=Wn,Wn=qn=null,Bl(l),o)))for(l=0;l<o.length;l++)Bl(o[l])}}function Si(o,l){var d=o.stateNode;if(d===null)return null;var g=d[we]||null;if(g===null)return null;d=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(d&&typeof d!="function")throw Error(a(231,l,typeof d));return d}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),No=!1;if(Fr)try{var Ci={};Object.defineProperty(Ci,"passive",{get:function(){No=!0}}),window.addEventListener("test",Ci,Ci),window.removeEventListener("test",Ci,Ci)}catch{No=!1}var nn=null,Mo=null,xa=null;function Fl(){if(xa)return xa;var o,l=Mo,d=l.length,g,E="value"in nn?nn.value:nn.textContent,O=E.length;for(o=0;o<d&&l[o]===E[o];o++);var q=d-o;for(g=1;g<=q&&l[d-g]===E[O-g];g++);return xa=E.slice(o,1<g?1-g:void 0)}function Ea(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Sa(){return!0}function jl(){return!1}function nr(o){function l(d,g,E,O,q){this._reactName=d,this._targetInst=E,this.type=g,this.nativeEvent=O,this.target=q,this.currentTarget=null;for(var Q in o)o.hasOwnProperty(Q)&&(d=o[Q],this[Q]=d?d(O):O[Q]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Sa:jl,this.isPropagationStopped=jl,this}return _(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Sa)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Sa)},persist:function(){},isPersistent:Sa}),l}var wn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=nr(wn),Ti=_({},wn,{view:0,detail:0}),fd=nr(Ti),ko,Po,wi,Ta=_({},Ti,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==wi&&(wi&&o.type==="mousemove"?(ko=o.screenX-wi.screenX,Po=o.screenY-wi.screenY):Po=ko=0,wi=o),ko)},movementY:function(o){return"movementY"in o?o.movementY:Po}}),Ul=nr(Ta),gd=_({},Ta,{dataTransfer:0}),vd=nr(gd),md=_({},Ti,{relatedTarget:0}),Go=nr(md),_d=_({},wn,{animationName:0,elapsedTime:0,pseudoElement:0}),yd=nr(_d),bd=_({},wn,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xd=nr(bd),Ed=_({},wn,{data:0}),Hl=nr(Ed),Sd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Td={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wd(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Td[o])?!!l[o]:!1}function Bo(){return wd}var Rd=_({},Ti,{key:function(o){if(o.key){var l=Sd[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=Ea(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Cd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bo,charCode:function(o){return o.type==="keypress"?Ea(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ea(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Od=nr(Rd),Ad=_({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$l=nr(Ad),Dd=_({},Ti,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bo}),Ld=nr(Dd),Id=_({},wn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nd=nr(Id),Md=_({},Ta,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),kd=nr(Md),Pd=_({},wn,{newState:0,oldState:0}),Gd=nr(Pd),Bd=[9,13,27,32],zo=Fr&&"CompositionEvent"in window,Ri=null;Fr&&"documentMode"in document&&(Ri=document.documentMode);var zd=Fr&&"TextEvent"in window&&!Ri,Vl=Fr&&(!zo||Ri&&8<Ri&&11>=Ri),ql=" ",Wl=!1;function Xl(o,l){switch(o){case"keyup":return Bd.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yl(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Xn=!1;function Fd(o,l){switch(o){case"compositionend":return Yl(l);case"keypress":return l.which!==32?null:(Wl=!0,ql);case"textInput":return o=l.data,o===ql&&Wl?null:o;default:return null}}function jd(o,l){if(Xn)return o==="compositionend"||!zo&&Xl(o,l)?(o=Fl(),xa=Mo=nn=null,Xn=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Vl&&l.locale!=="ko"?null:l.data;default:return null}}var Ud={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kl(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Ud[o.type]:l==="textarea"}function Ql(o,l,d,g){qn?Wn?Wn.push(g):Wn=[g]:qn=g,l=po(l,"onChange"),0<l.length&&(d=new Ca("onChange","change",null,d,g),o.push({event:d,listeners:l}))}var Oi=null,Ai=null;function Hd(o){Lp(o,0)}function wa(o){var l=St(o);if(Il(l))return o}function Zl(o,l){if(o==="change")return l}var Jl=!1;if(Fr){var Fo;if(Fr){var jo="oninput"in document;if(!jo){var eu=document.createElement("div");eu.setAttribute("oninput","return;"),jo=typeof eu.oninput=="function"}Fo=jo}else Fo=!1;Jl=Fo&&(!document.documentMode||9<document.documentMode)}function tu(){Oi&&(Oi.detachEvent("onpropertychange",ru),Ai=Oi=null)}function ru(o){if(o.propertyName==="value"&&wa(Ai)){var l=[];Ql(l,Ai,o,Lo(o)),zl(Hd,l)}}function $d(o,l,d){o==="focusin"?(tu(),Oi=l,Ai=d,Oi.attachEvent("onpropertychange",ru)):o==="focusout"&&tu()}function Vd(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return wa(Ai)}function qd(o,l){if(o==="click")return wa(l)}function Wd(o,l){if(o==="input"||o==="change")return wa(l)}function Xd(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var lr=typeof Object.is=="function"?Object.is:Xd;function Di(o,l){if(lr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var d=Object.keys(o),g=Object.keys(l);if(d.length!==g.length)return!1;for(g=0;g<d.length;g++){var E=d[g];if(!ue.call(l,E)||!lr(o[E],l[E]))return!1}return!0}function nu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function iu(o,l){var d=nu(o);o=0;for(var g;d;){if(d.nodeType===3){if(g=o+d.textContent.length,o<=l&&g>=l)return{node:d,offset:l-o};o=g}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=nu(d)}}function au(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?au(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function ou(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=ya(o.document);l instanceof o.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)o=l.contentWindow;else break;l=ya(o.document)}return l}function Uo(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var Yd=Fr&&"documentMode"in document&&11>=document.documentMode,Yn=null,Ho=null,Li=null,$o=!1;function su(o,l,d){var g=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;$o||Yn==null||Yn!==ya(g)||(g=Yn,"selectionStart"in g&&Uo(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Li&&Di(Li,g)||(Li=g,g=po(Ho,"onSelect"),0<g.length&&(l=new Ca("onSelect","select",null,l,d),o.push({event:l,listeners:g}),l.target=Yn)))}function Rn(o,l){var d={};return d[o.toLowerCase()]=l.toLowerCase(),d["Webkit"+o]="webkit"+l,d["Moz"+o]="moz"+l,d}var Kn={animationend:Rn("Animation","AnimationEnd"),animationiteration:Rn("Animation","AnimationIteration"),animationstart:Rn("Animation","AnimationStart"),transitionrun:Rn("Transition","TransitionRun"),transitionstart:Rn("Transition","TransitionStart"),transitioncancel:Rn("Transition","TransitionCancel"),transitionend:Rn("Transition","TransitionEnd")},Vo={},lu={};Fr&&(lu=document.createElement("div").style,"AnimationEvent"in window||(delete Kn.animationend.animation,delete Kn.animationiteration.animation,delete Kn.animationstart.animation),"TransitionEvent"in window||delete Kn.transitionend.transition);function On(o){if(Vo[o])return Vo[o];if(!Kn[o])return o;var l=Kn[o],d;for(d in l)if(l.hasOwnProperty(d)&&d in lu)return Vo[o]=l[d];return o}var uu=On("animationend"),cu=On("animationiteration"),pu=On("animationstart"),Kd=On("transitionrun"),Qd=On("transitionstart"),Zd=On("transitioncancel"),du=On("transitionend"),hu=new Map,qo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qo.push("scrollEnd");function Rr(o,l){hu.set(o,l),sr(l,[o])}var fu=new WeakMap;function yr(o,l){if(typeof o=="object"&&o!==null){var d=fu.get(o);return d!==void 0?d:(l={value:o,source:l,stack:va(l)},fu.set(o,l),l)}return{value:o,source:l,stack:va(l)}}var br=[],Qn=0,Wo=0;function Ra(){for(var o=Qn,l=Wo=Qn=0;l<o;){var d=br[l];br[l++]=null;var g=br[l];br[l++]=null;var E=br[l];br[l++]=null;var O=br[l];if(br[l++]=null,g!==null&&E!==null){var q=g.pending;q===null?E.next=E:(E.next=q.next,q.next=E),g.pending=E}O!==0&&gu(d,E,O)}}function Oa(o,l,d,g){br[Qn++]=o,br[Qn++]=l,br[Qn++]=d,br[Qn++]=g,Wo|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function Xo(o,l,d,g){return Oa(o,l,d,g),Aa(o)}function Zn(o,l){return Oa(o,null,null,l),Aa(o)}function gu(o,l,d){o.lanes|=d;var g=o.alternate;g!==null&&(g.lanes|=d);for(var E=!1,O=o.return;O!==null;)O.childLanes|=d,g=O.alternate,g!==null&&(g.childLanes|=d),O.tag===22&&(o=O.stateNode,o===null||o._visibility&1||(E=!0)),o=O,O=O.return;return o.tag===3?(O=o.stateNode,E&&l!==null&&(E=31-Qe(d),o=O.hiddenUpdates,g=o[E],g===null?o[E]=[l]:g.push(l),l.lane=d|536870912),O):null}function Aa(o){if(50<ra)throw ra=0,el=null,Error(a(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var Jn={};function Jd(o,l,d,g){this.tag=o,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(o,l,d,g){return new Jd(o,l,d,g)}function Yo(o){return o=o.prototype,!(!o||!o.isReactComponent)}function jr(o,l){var d=o.alternate;return d===null?(d=ur(o.tag,l,o.key,o.mode),d.elementType=o.elementType,d.type=o.type,d.stateNode=o.stateNode,d.alternate=o,o.alternate=d):(d.pendingProps=l,d.type=o.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=o.flags&65011712,d.childLanes=o.childLanes,d.lanes=o.lanes,d.child=o.child,d.memoizedProps=o.memoizedProps,d.memoizedState=o.memoizedState,d.updateQueue=o.updateQueue,l=o.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=o.sibling,d.index=o.index,d.ref=o.ref,d.refCleanup=o.refCleanup,d}function vu(o,l){o.flags&=65011714;var d=o.alternate;return d===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=d.childLanes,o.lanes=d.lanes,o.child=d.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=d.memoizedProps,o.memoizedState=d.memoizedState,o.updateQueue=d.updateQueue,o.type=d.type,l=d.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function Da(o,l,d,g,E,O){var q=0;if(g=o,typeof o=="function")Yo(o)&&(q=1);else if(typeof o=="string")q=tf(o,d,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case X:return o=ur(31,d,l,E),o.elementType=X,o.lanes=O,o;case R:return An(d.children,E,O,l);case A:q=8,E|=24;break;case I:return o=ur(12,d,l,E|2),o.elementType=I,o.lanes=O,o;case D:return o=ur(13,d,l,E),o.elementType=D,o.lanes=O,o;case M:return o=ur(19,d,l,E),o.elementType=M,o.lanes=O,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case P:case S:q=10;break e;case N:q=9;break e;case k:q=11;break e;case j:q=14;break e;case H:q=16,g=null;break e}q=29,d=Error(a(130,o===null?"null":typeof o,"")),g=null}return l=ur(q,d,l,E),l.elementType=o,l.type=g,l.lanes=O,l}function An(o,l,d,g){return o=ur(7,o,g,l),o.lanes=d,o}function Ko(o,l,d){return o=ur(6,o,null,l),o.lanes=d,o}function Qo(o,l,d){return l=ur(4,o.children!==null?o.children:[],o.key,l),l.lanes=d,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var ei=[],ti=0,La=null,Ia=0,xr=[],Er=0,Dn=null,Ur=1,Hr="";function Ln(o,l){ei[ti++]=Ia,ei[ti++]=La,La=o,Ia=l}function mu(o,l,d){xr[Er++]=Ur,xr[Er++]=Hr,xr[Er++]=Dn,Dn=o;var g=Ur;o=Hr;var E=32-Qe(g)-1;g&=~(1<<E),d+=1;var O=32-Qe(l)+E;if(30<O){var q=E-E%5;O=(g&(1<<q)-1).toString(32),g>>=q,E-=q,Ur=1<<32-Qe(l)+E|d<<E|g,Hr=O+o}else Ur=1<<O|d<<E|g,Hr=o}function Zo(o){o.return!==null&&(Ln(o,1),mu(o,1,0))}function Jo(o){for(;o===La;)La=ei[--ti],ei[ti]=null,Ia=ei[--ti],ei[ti]=null;for(;o===Dn;)Dn=xr[--Er],xr[Er]=null,Hr=xr[--Er],xr[Er]=null,Ur=xr[--Er],xr[Er]=null}var Zt=null,Ot=null,pt=!1,In=null,Lr=!1,es=Error(a(519));function Nn(o){var l=Error(a(418,""));throw Mi(yr(l,o)),es}function _u(o){var l=o.stateNode,d=o.type,g=o.memoizedProps;switch(l[Se]=o,l[we]=g,d){case"dialog":it("cancel",l),it("close",l);break;case"iframe":case"object":case"embed":it("load",l);break;case"video":case"audio":for(d=0;d<ia.length;d++)it(ia[d],l);break;case"source":it("error",l);break;case"img":case"image":case"link":it("error",l),it("load",l);break;case"details":it("toggle",l);break;case"input":it("invalid",l),Nl(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),ma(l);break;case"select":it("invalid",l);break;case"textarea":it("invalid",l),kl(l,g.value,g.defaultValue,g.children),ma(l)}d=g.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||g.suppressHydrationWarning===!0||kp(l.textContent,d)?(g.popover!=null&&(it("beforetoggle",l),it("toggle",l)),g.onScroll!=null&&it("scroll",l),g.onScrollEnd!=null&&it("scrollend",l),g.onClick!=null&&(l.onclick=ho),l=!0):l=!1,l||Nn(o)}function yu(o){for(Zt=o.return;Zt;)switch(Zt.tag){case 5:case 13:Lr=!1;return;case 27:case 3:Lr=!0;return;default:Zt=Zt.return}}function Ii(o){if(o!==Zt)return!1;if(!pt)return yu(o),pt=!0,!1;var l=o.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=o.type,d=!(d!=="form"&&d!=="button")||ml(o.type,o.memoizedProps)),d=!d),d&&Ot&&Nn(o),yu(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,l=0;o;){if(o.nodeType===8)if(d=o.data,d==="/$"){if(l===0){Ot=Ar(o.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;o=o.nextSibling}Ot=null}}else l===27?(l=Ot,bn(o.type)?(o=xl,xl=null,Ot=o):Ot=l):Ot=Zt?Ar(o.stateNode.nextSibling):null;return!0}function Ni(){Ot=Zt=null,pt=!1}function bu(){var o=In;return o!==null&&(or===null?or=o:or.push.apply(or,o),In=null),o}function Mi(o){In===null?In=[o]:In.push(o)}var ts=Z(null),Mn=null,$r=null;function an(o,l,d){oe(ts,l._currentValue),l._currentValue=d}function Vr(o){o._currentValue=ts.current,ne(ts)}function rs(o,l,d){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===d)break;o=o.return}}function ns(o,l,d,g){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var O=E.dependencies;if(O!==null){var q=E.child;O=O.firstContext;e:for(;O!==null;){var Q=O;O=E;for(var ie=0;ie<l.length;ie++)if(Q.context===l[ie]){O.lanes|=d,Q=O.alternate,Q!==null&&(Q.lanes|=d),rs(O.return,d,o),g||(q=null);break e}O=Q.next}}else if(E.tag===18){if(q=E.return,q===null)throw Error(a(341));q.lanes|=d,O=q.alternate,O!==null&&(O.lanes|=d),rs(q,d,o),q=null}else q=E.child;if(q!==null)q.return=E;else for(q=E;q!==null;){if(q===o){q=null;break}if(E=q.sibling,E!==null){E.return=q.return,q=E;break}q=q.return}E=q}}function ki(o,l,d,g){o=null;for(var E=l,O=!1;E!==null;){if(!O){if((E.flags&524288)!==0)O=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var q=E.alternate;if(q===null)throw Error(a(387));if(q=q.memoizedProps,q!==null){var Q=E.type;lr(E.pendingProps.value,q.value)||(o!==null?o.push(Q):o=[Q])}}else if(E===G.current){if(q=E.alternate,q===null)throw Error(a(387));q.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(ca):o=[ca])}E=E.return}o!==null&&ns(l,o,d,g),l.flags|=262144}function Na(o){for(o=o.firstContext;o!==null;){if(!lr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function kn(o){Mn=o,$r=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Kt(o){return xu(Mn,o)}function Ma(o,l){return Mn===null&&kn(o),xu(o,l)}function xu(o,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},$r===null){if(o===null)throw Error(a(308));$r=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else $r=$r.next=l;return d}var eh=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(d,g){o.push(g)}};this.abort=function(){l.aborted=!0,o.forEach(function(d){return d()})}},th=e.unstable_scheduleCallback,rh=e.unstable_NormalPriority,zt={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function is(){return{controller:new eh,data:new Map,refCount:0}}function Pi(o){o.refCount--,o.refCount===0&&th(rh,function(){o.controller.abort()})}var Gi=null,as=0,ri=0,ni=null;function nh(o,l){if(Gi===null){var d=Gi=[];as=0,ri=sl(),ni={status:"pending",value:void 0,then:function(g){d.push(g)}}}return as++,l.then(Eu,Eu),l}function Eu(){if(--as===0&&Gi!==null){ni!==null&&(ni.status="fulfilled");var o=Gi;Gi=null,ri=0,ni=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function ih(o,l){var d=[],g={status:"pending",value:null,reason:null,then:function(E){d.push(E)}};return o.then(function(){g.status="fulfilled",g.value=l;for(var E=0;E<d.length;E++)(0,d[E])(l)},function(E){for(g.status="rejected",g.reason=E,E=0;E<d.length;E++)(0,d[E])(void 0)}),g}var Su=L.S;L.S=function(o,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&nh(o,l),Su!==null&&Su(o,l)};var Pn=Z(null);function os(){var o=Pn.current;return o!==null?o:bt.pooledCache}function ka(o,l){l===null?oe(Pn,Pn.current):oe(Pn,l.pool)}function Cu(){var o=os();return o===null?null:{parent:zt._currentValue,pool:o}}var Bi=Error(a(460)),Tu=Error(a(474)),Pa=Error(a(542)),ss={then:function(){}};function wu(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ga(){}function Ru(o,l,d){switch(d=o[d],d===void 0?o.push(l):d!==l&&(l.then(Ga,Ga),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Au(o),o;default:if(typeof l.status=="string")l.then(Ga,Ga);else{if(o=bt,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=l,o.status="pending",o.then(function(g){if(l.status==="pending"){var E=l;E.status="fulfilled",E.value=g}},function(g){if(l.status==="pending"){var E=l;E.status="rejected",E.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,Au(o),o}throw zi=l,Bi}}var zi=null;function Ou(){if(zi===null)throw Error(a(459));var o=zi;return zi=null,o}function Au(o){if(o===Bi||o===Pa)throw Error(a(483))}var on=!1;function ls(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function us(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function sn(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ln(o,l,d){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(ht&2)!==0){var E=g.pending;return E===null?l.next=l:(l.next=E.next,E.next=l),g.pending=l,l=Aa(o),gu(o,null,d),l}return Oa(o,g,l,d),Aa(o)}function Fi(o,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var g=l.lanes;g&=o.pendingLanes,d|=g,l.lanes=d,Yt(o,d)}}function cs(o,l){var d=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,d===g)){var E=null,O=null;if(d=d.firstBaseUpdate,d!==null){do{var q={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};O===null?E=O=q:O=O.next=q,d=d.next}while(d!==null);O===null?E=O=l:O=O.next=l}else E=O=l;d={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:O,shared:g.shared,callbacks:g.callbacks},o.updateQueue=d;return}o=d.lastBaseUpdate,o===null?d.firstBaseUpdate=l:o.next=l,d.lastBaseUpdate=l}var ps=!1;function ji(){if(ps){var o=ni;if(o!==null)throw o}}function Ui(o,l,d,g){ps=!1;var E=o.updateQueue;on=!1;var O=E.firstBaseUpdate,q=E.lastBaseUpdate,Q=E.shared.pending;if(Q!==null){E.shared.pending=null;var ie=Q,ve=ie.next;ie.next=null,q===null?O=ve:q.next=ve,q=ie;var Ee=o.alternate;Ee!==null&&(Ee=Ee.updateQueue,Q=Ee.lastBaseUpdate,Q!==q&&(Q===null?Ee.firstBaseUpdate=ve:Q.next=ve,Ee.lastBaseUpdate=ie))}if(O!==null){var Te=E.baseState;q=0,Ee=ve=ie=null,Q=O;do{var me=Q.lane&-536870913,_e=me!==Q.lane;if(_e?(st&me)===me:(g&me)===me){me!==0&&me===ri&&(ps=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var We=o,$e=Q;me=l;var _t=d;switch($e.tag){case 1:if(We=$e.payload,typeof We=="function"){Te=We.call(_t,Te,me);break e}Te=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=$e.payload,me=typeof We=="function"?We.call(_t,Te,me):We,me==null)break e;Te=_({},Te,me);break e;case 2:on=!0}}me=Q.callback,me!==null&&(o.flags|=64,_e&&(o.flags|=8192),_e=E.callbacks,_e===null?E.callbacks=[me]:_e.push(me))}else _e={lane:me,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},Ee===null?(ve=Ee=_e,ie=Te):Ee=Ee.next=_e,q|=me;if(Q=Q.next,Q===null){if(Q=E.shared.pending,Q===null)break;_e=Q,Q=_e.next,_e.next=null,E.lastBaseUpdate=_e,E.shared.pending=null}}while(!0);Ee===null&&(ie=Te),E.baseState=ie,E.firstBaseUpdate=ve,E.lastBaseUpdate=Ee,O===null&&(E.shared.lanes=0),vn|=q,o.lanes=q,o.memoizedState=Te}}function Du(o,l){if(typeof o!="function")throw Error(a(191,o));o.call(l)}function Lu(o,l){var d=o.callbacks;if(d!==null)for(o.callbacks=null,o=0;o<d.length;o++)Du(d[o],l)}var ii=Z(null),Ba=Z(0);function Iu(o,l){o=Zr,oe(Ba,o),oe(ii,l),Zr=o|l.baseLanes}function ds(){oe(Ba,Zr),oe(ii,ii.current)}function hs(){Zr=Ba.current,ne(ii),ne(Ba)}var un=0,Je=null,vt=null,kt=null,za=!1,ai=!1,Gn=!1,Fa=0,Hi=0,oi=null,ah=0;function Lt(){throw Error(a(321))}function fs(o,l){if(l===null)return!1;for(var d=0;d<l.length&&d<o.length;d++)if(!lr(o[d],l[d]))return!1;return!0}function gs(o,l,d,g,E,O){return un=O,Je=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,L.H=o===null||o.memoizedState===null?gc:vc,Gn=!1,O=d(g,E),Gn=!1,ai&&(O=Mu(l,d,g,E)),Nu(o),O}function Nu(o){L.H=qa;var l=vt!==null&&vt.next!==null;if(un=0,kt=vt=Je=null,za=!1,Hi=0,oi=null,l)throw Error(a(300));o===null||Ht||(o=o.dependencies,o!==null&&Na(o)&&(Ht=!0))}function Mu(o,l,d,g){Je=o;var E=0;do{if(ai&&(oi=null),Hi=0,ai=!1,25<=E)throw Error(a(301));if(E+=1,kt=vt=null,o.updateQueue!=null){var O=o.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}L.H=dh,O=l(d,g)}while(ai);return O}function oh(){var o=L.H,l=o.useState()[0];return l=typeof l.then=="function"?$i(l):l,o=o.useState()[0],(vt!==null?vt.memoizedState:null)!==o&&(Je.flags|=1024),l}function vs(){var o=Fa!==0;return Fa=0,o}function ms(o,l,d){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~d}function _s(o){if(za){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}za=!1}un=0,kt=vt=Je=null,ai=!1,Hi=Fa=0,oi=null}function ir(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Je.memoizedState=kt=o:kt=kt.next=o,kt}function Pt(){if(vt===null){var o=Je.alternate;o=o!==null?o.memoizedState:null}else o=vt.next;var l=kt===null?Je.memoizedState:kt.next;if(l!==null)kt=l,vt=o;else{if(o===null)throw Je.alternate===null?Error(a(467)):Error(a(310));vt=o,o={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},kt===null?Je.memoizedState=kt=o:kt=kt.next=o}return kt}function ys(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $i(o){var l=Hi;return Hi+=1,oi===null&&(oi=[]),o=Ru(oi,o,l),l=Je,(kt===null?l.memoizedState:kt.next)===null&&(l=l.alternate,L.H=l===null||l.memoizedState===null?gc:vc),o}function ja(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return $i(o);if(o.$$typeof===S)return Kt(o)}throw Error(a(438,String(o)))}function bs(o){var l=null,d=Je.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var g=Je.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(E){return E.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=ys(),Je.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(o),g=0;g<o;g++)d[g]=K;return l.index++,d}function qr(o,l){return typeof l=="function"?l(o):l}function Ua(o){var l=Pt();return xs(l,vt,o)}function xs(o,l,d){var g=o.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=d;var E=o.baseQueue,O=g.pending;if(O!==null){if(E!==null){var q=E.next;E.next=O.next,O.next=q}l.baseQueue=E=O,g.pending=null}if(O=o.baseState,E===null)o.memoizedState=O;else{l=E.next;var Q=q=null,ie=null,ve=l,Ee=!1;do{var Te=ve.lane&-536870913;if(Te!==ve.lane?(st&Te)===Te:(un&Te)===Te){var me=ve.revertLane;if(me===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),Te===ri&&(Ee=!0);else if((un&me)===me){ve=ve.next,me===ri&&(Ee=!0);continue}else Te={lane:0,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ie===null?(Q=ie=Te,q=O):ie=ie.next=Te,Je.lanes|=me,vn|=me;Te=ve.action,Gn&&d(O,Te),O=ve.hasEagerState?ve.eagerState:d(O,Te)}else me={lane:Te,revertLane:ve.revertLane,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ie===null?(Q=ie=me,q=O):ie=ie.next=me,Je.lanes|=Te,vn|=Te;ve=ve.next}while(ve!==null&&ve!==l);if(ie===null?q=O:ie.next=Q,!lr(O,o.memoizedState)&&(Ht=!0,Ee&&(d=ni,d!==null)))throw d;o.memoizedState=O,o.baseState=q,o.baseQueue=ie,g.lastRenderedState=O}return E===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function Es(o){var l=Pt(),d=l.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=o;var g=d.dispatch,E=d.pending,O=l.memoizedState;if(E!==null){d.pending=null;var q=E=E.next;do O=o(O,q.action),q=q.next;while(q!==E);lr(O,l.memoizedState)||(Ht=!0),l.memoizedState=O,l.baseQueue===null&&(l.baseState=O),d.lastRenderedState=O}return[O,g]}function ku(o,l,d){var g=Je,E=Pt(),O=pt;if(O){if(d===void 0)throw Error(a(407));d=d()}else d=l();var q=!lr((vt||E).memoizedState,d);q&&(E.memoizedState=d,Ht=!0),E=E.queue;var Q=Bu.bind(null,g,E,o);if(Vi(2048,8,Q,[o]),E.getSnapshot!==l||q||kt!==null&&kt.memoizedState.tag&1){if(g.flags|=2048,si(9,Ha(),Gu.bind(null,g,E,d,l),null),bt===null)throw Error(a(349));O||(un&124)!==0||Pu(g,l,d)}return d}function Pu(o,l,d){o.flags|=16384,o={getSnapshot:l,value:d},l=Je.updateQueue,l===null?(l=ys(),Je.updateQueue=l,l.stores=[o]):(d=l.stores,d===null?l.stores=[o]:d.push(o))}function Gu(o,l,d,g){l.value=d,l.getSnapshot=g,zu(l)&&Fu(o)}function Bu(o,l,d){return d(function(){zu(l)&&Fu(o)})}function zu(o){var l=o.getSnapshot;o=o.value;try{var d=l();return!lr(o,d)}catch{return!0}}function Fu(o){var l=Zn(o,2);l!==null&&fr(l,o,2)}function Ss(o){var l=ir();if(typeof o=="function"){var d=o;if(o=d(),Gn){et(!0);try{d()}finally{et(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:o},l}function ju(o,l,d,g){return o.baseState=d,xs(o,vt,typeof g=="function"?g:qr)}function sh(o,l,d,g,E){if(Va(o))throw Error(a(485));if(o=l.action,o!==null){var O={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){O.listeners.push(q)}};L.T!==null?d(!0):O.isTransition=!1,g(O),d=l.pending,d===null?(O.next=l.pending=O,Uu(l,O)):(O.next=d.next,l.pending=d.next=O)}}function Uu(o,l){var d=l.action,g=l.payload,E=o.state;if(l.isTransition){var O=L.T,q={};L.T=q;try{var Q=d(E,g),ie=L.S;ie!==null&&ie(q,Q),Hu(o,l,Q)}catch(ve){Cs(o,l,ve)}finally{L.T=O}}else try{O=d(E,g),Hu(o,l,O)}catch(ve){Cs(o,l,ve)}}function Hu(o,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(g){$u(o,l,g)},function(g){return Cs(o,l,g)}):$u(o,l,d)}function $u(o,l,d){l.status="fulfilled",l.value=d,Vu(l),o.state=d,l=o.pending,l!==null&&(d=l.next,d===l?o.pending=null:(d=d.next,l.next=d,Uu(o,d)))}function Cs(o,l,d){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=d,Vu(l),l=l.next;while(l!==g)}o.action=null}function Vu(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function qu(o,l){return l}function Wu(o,l){if(pt){var d=bt.formState;if(d!==null){e:{var g=Je;if(pt){if(Ot){t:{for(var E=Ot,O=Lr;E.nodeType!==8;){if(!O){E=null;break t}if(E=Ar(E.nextSibling),E===null){E=null;break t}}O=E.data,E=O==="F!"||O==="F"?E:null}if(E){Ot=Ar(E.nextSibling),g=E.data==="F!";break e}}Nn(g)}g=!1}g&&(l=d[0])}}return d=ir(),d.memoizedState=d.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:l},d.queue=g,d=dc.bind(null,Je,g),g.dispatch=d,g=Ss(!1),O=As.bind(null,Je,!1,g.queue),g=ir(),E={state:l,dispatch:null,action:o,pending:null},g.queue=E,d=sh.bind(null,Je,E,O,d),E.dispatch=d,g.memoizedState=o,[l,d,!1]}function Xu(o){var l=Pt();return Yu(l,vt,o)}function Yu(o,l,d){if(l=xs(o,l,qu)[0],o=Ua(qr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=$i(l)}catch(q){throw q===Bi?Pa:q}else g=l;l=Pt();var E=l.queue,O=E.dispatch;return d!==l.memoizedState&&(Je.flags|=2048,si(9,Ha(),lh.bind(null,E,d),null)),[g,O,o]}function lh(o,l){o.action=l}function Ku(o){var l=Pt(),d=vt;if(d!==null)return Yu(l,d,o);Pt(),l=l.memoizedState,d=Pt();var g=d.queue.dispatch;return d.memoizedState=o,[l,g,!1]}function si(o,l,d,g){return o={tag:o,create:d,deps:g,inst:l,next:null},l=Je.updateQueue,l===null&&(l=ys(),Je.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=o.next=o:(g=d.next,d.next=o,o.next=g,l.lastEffect=o),o}function Ha(){return{destroy:void 0,resource:void 0}}function Qu(){return Pt().memoizedState}function $a(o,l,d,g){var E=ir();g=g===void 0?null:g,Je.flags|=o,E.memoizedState=si(1|l,Ha(),d,g)}function Vi(o,l,d,g){var E=Pt();g=g===void 0?null:g;var O=E.memoizedState.inst;vt!==null&&g!==null&&fs(g,vt.memoizedState.deps)?E.memoizedState=si(l,O,d,g):(Je.flags|=o,E.memoizedState=si(1|l,O,d,g))}function Zu(o,l){$a(8390656,8,o,l)}function Ju(o,l){Vi(2048,8,o,l)}function ec(o,l){return Vi(4,2,o,l)}function tc(o,l){return Vi(4,4,o,l)}function rc(o,l){if(typeof l=="function"){o=o();var d=l(o);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function nc(o,l,d){d=d!=null?d.concat([o]):null,Vi(4,4,rc.bind(null,l,o),d)}function Ts(){}function ic(o,l){var d=Pt();l=l===void 0?null:l;var g=d.memoizedState;return l!==null&&fs(l,g[1])?g[0]:(d.memoizedState=[o,l],o)}function ac(o,l){var d=Pt();l=l===void 0?null:l;var g=d.memoizedState;if(l!==null&&fs(l,g[1]))return g[0];if(g=o(),Gn){et(!0);try{o()}finally{et(!1)}}return d.memoizedState=[g,l],g}function ws(o,l,d){return d===void 0||(un&1073741824)!==0?o.memoizedState=l:(o.memoizedState=d,o=lp(),Je.lanes|=o,vn|=o,d)}function oc(o,l,d,g){return lr(d,l)?d:ii.current!==null?(o=ws(o,d,g),lr(o,l)||(Ht=!0),o):(un&42)===0?(Ht=!0,o.memoizedState=d):(o=lp(),Je.lanes|=o,vn|=o,l)}function sc(o,l,d,g,E){var O=W.p;W.p=O!==0&&8>O?O:8;var q=L.T,Q={};L.T=Q,As(o,!1,l,d);try{var ie=E(),ve=L.S;if(ve!==null&&ve(Q,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Ee=ih(ie,g);qi(o,l,Ee,hr(o))}else qi(o,l,g,hr(o))}catch(Te){qi(o,l,{then:function(){},status:"rejected",reason:Te},hr())}finally{W.p=O,L.T=q}}function uh(){}function Rs(o,l,d,g){if(o.tag!==5)throw Error(a(476));var E=lc(o).queue;sc(o,E,l,U,d===null?uh:function(){return uc(o),d(g)})}function lc(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:U},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qr,lastRenderedState:d},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function uc(o){var l=lc(o).next.queue;qi(o,l,{},hr())}function Os(){return Kt(ca)}function cc(){return Pt().memoizedState}function pc(){return Pt().memoizedState}function ch(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var d=hr();o=sn(d);var g=ln(l,o,d);g!==null&&(fr(g,l,d),Fi(g,l,d)),l={cache:is()},o.payload=l;return}l=l.return}}function ph(o,l,d){var g=hr();d={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Va(o)?hc(l,d):(d=Xo(o,l,d,g),d!==null&&(fr(d,o,g),fc(d,l,g)))}function dc(o,l,d){var g=hr();qi(o,l,d,g)}function qi(o,l,d,g){var E={lane:g,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Va(o))hc(l,E);else{var O=o.alternate;if(o.lanes===0&&(O===null||O.lanes===0)&&(O=l.lastRenderedReducer,O!==null))try{var q=l.lastRenderedState,Q=O(q,d);if(E.hasEagerState=!0,E.eagerState=Q,lr(Q,q))return Oa(o,l,E,0),bt===null&&Ra(),!1}catch{}finally{}if(d=Xo(o,l,E,g),d!==null)return fr(d,o,g),fc(d,l,g),!0}return!1}function As(o,l,d,g){if(g={lane:2,revertLane:sl(),action:g,hasEagerState:!1,eagerState:null,next:null},Va(o)){if(l)throw Error(a(479))}else l=Xo(o,d,g,2),l!==null&&fr(l,o,2)}function Va(o){var l=o.alternate;return o===Je||l!==null&&l===Je}function hc(o,l){ai=za=!0;var d=o.pending;d===null?l.next=l:(l.next=d.next,d.next=l),o.pending=l}function fc(o,l,d){if((d&4194048)!==0){var g=l.lanes;g&=o.pendingLanes,d|=g,l.lanes=d,Yt(o,d)}}var qa={readContext:Kt,use:ja,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},gc={readContext:Kt,use:ja,useCallback:function(o,l){return ir().memoizedState=[o,l===void 0?null:l],o},useContext:Kt,useEffect:Zu,useImperativeHandle:function(o,l,d){d=d!=null?d.concat([o]):null,$a(4194308,4,rc.bind(null,l,o),d)},useLayoutEffect:function(o,l){return $a(4194308,4,o,l)},useInsertionEffect:function(o,l){$a(4,2,o,l)},useMemo:function(o,l){var d=ir();l=l===void 0?null:l;var g=o();if(Gn){et(!0);try{o()}finally{et(!1)}}return d.memoizedState=[g,l],g},useReducer:function(o,l,d){var g=ir();if(d!==void 0){var E=d(l);if(Gn){et(!0);try{d(l)}finally{et(!1)}}}else E=l;return g.memoizedState=g.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},g.queue=o,o=o.dispatch=ph.bind(null,Je,o),[g.memoizedState,o]},useRef:function(o){var l=ir();return o={current:o},l.memoizedState=o},useState:function(o){o=Ss(o);var l=o.queue,d=dc.bind(null,Je,l);return l.dispatch=d,[o.memoizedState,d]},useDebugValue:Ts,useDeferredValue:function(o,l){var d=ir();return ws(d,o,l)},useTransition:function(){var o=Ss(!1);return o=sc.bind(null,Je,o.queue,!0,!1),ir().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,d){var g=Je,E=ir();if(pt){if(d===void 0)throw Error(a(407));d=d()}else{if(d=l(),bt===null)throw Error(a(349));(st&124)!==0||Pu(g,l,d)}E.memoizedState=d;var O={value:d,getSnapshot:l};return E.queue=O,Zu(Bu.bind(null,g,O,o),[o]),g.flags|=2048,si(9,Ha(),Gu.bind(null,g,O,d,l),null),d},useId:function(){var o=ir(),l=bt.identifierPrefix;if(pt){var d=Hr,g=Ur;d=(g&~(1<<32-Qe(g)-1)).toString(32)+d,l="«"+l+"R"+d,d=Fa++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=ah++,l="«"+l+"r"+d.toString(32)+"»";return o.memoizedState=l},useHostTransitionStatus:Os,useFormState:Wu,useActionState:Wu,useOptimistic:function(o){var l=ir();l.memoizedState=l.baseState=o;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=As.bind(null,Je,!0,d),d.dispatch=l,[o,l]},useMemoCache:bs,useCacheRefresh:function(){return ir().memoizedState=ch.bind(null,Je)}},vc={readContext:Kt,use:ja,useCallback:ic,useContext:Kt,useEffect:Ju,useImperativeHandle:nc,useInsertionEffect:ec,useLayoutEffect:tc,useMemo:ac,useReducer:Ua,useRef:Qu,useState:function(){return Ua(qr)},useDebugValue:Ts,useDeferredValue:function(o,l){var d=Pt();return oc(d,vt.memoizedState,o,l)},useTransition:function(){var o=Ua(qr)[0],l=Pt().memoizedState;return[typeof o=="boolean"?o:$i(o),l]},useSyncExternalStore:ku,useId:cc,useHostTransitionStatus:Os,useFormState:Xu,useActionState:Xu,useOptimistic:function(o,l){var d=Pt();return ju(d,vt,o,l)},useMemoCache:bs,useCacheRefresh:pc},dh={readContext:Kt,use:ja,useCallback:ic,useContext:Kt,useEffect:Ju,useImperativeHandle:nc,useInsertionEffect:ec,useLayoutEffect:tc,useMemo:ac,useReducer:Es,useRef:Qu,useState:function(){return Es(qr)},useDebugValue:Ts,useDeferredValue:function(o,l){var d=Pt();return vt===null?ws(d,o,l):oc(d,vt.memoizedState,o,l)},useTransition:function(){var o=Es(qr)[0],l=Pt().memoizedState;return[typeof o=="boolean"?o:$i(o),l]},useSyncExternalStore:ku,useId:cc,useHostTransitionStatus:Os,useFormState:Ku,useActionState:Ku,useOptimistic:function(o,l){var d=Pt();return vt!==null?ju(d,vt,o,l):(d.baseState=o,[o,d.queue.dispatch])},useMemoCache:bs,useCacheRefresh:pc},li=null,Wi=0;function Wa(o){var l=Wi;return Wi+=1,li===null&&(li=[]),Ru(li,o,l)}function Xi(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function Xa(o,l){throw l.$$typeof===C?Error(a(525)):(o=Object.prototype.toString.call(l),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function mc(o){var l=o._init;return l(o._payload)}function _c(o){function l(pe,le){if(o){var fe=pe.deletions;fe===null?(pe.deletions=[le],pe.flags|=16):fe.push(le)}}function d(pe,le){if(!o)return null;for(;le!==null;)l(pe,le),le=le.sibling;return null}function g(pe){for(var le=new Map;pe!==null;)pe.key!==null?le.set(pe.key,pe):le.set(pe.index,pe),pe=pe.sibling;return le}function E(pe,le){return pe=jr(pe,le),pe.index=0,pe.sibling=null,pe}function O(pe,le,fe){return pe.index=fe,o?(fe=pe.alternate,fe!==null?(fe=fe.index,fe<le?(pe.flags|=67108866,le):fe):(pe.flags|=67108866,le)):(pe.flags|=1048576,le)}function q(pe){return o&&pe.alternate===null&&(pe.flags|=67108866),pe}function Q(pe,le,fe,Ce){return le===null||le.tag!==6?(le=Ko(fe,pe.mode,Ce),le.return=pe,le):(le=E(le,fe),le.return=pe,le)}function ie(pe,le,fe,Ce){var Pe=fe.type;return Pe===R?Ee(pe,le,fe.props.children,Ce,fe.key):le!==null&&(le.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===H&&mc(Pe)===le.type)?(le=E(le,fe.props),Xi(le,fe),le.return=pe,le):(le=Da(fe.type,fe.key,fe.props,null,pe.mode,Ce),Xi(le,fe),le.return=pe,le)}function ve(pe,le,fe,Ce){return le===null||le.tag!==4||le.stateNode.containerInfo!==fe.containerInfo||le.stateNode.implementation!==fe.implementation?(le=Qo(fe,pe.mode,Ce),le.return=pe,le):(le=E(le,fe.children||[]),le.return=pe,le)}function Ee(pe,le,fe,Ce,Pe){return le===null||le.tag!==7?(le=An(fe,pe.mode,Ce,Pe),le.return=pe,le):(le=E(le,fe),le.return=pe,le)}function Te(pe,le,fe){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=Ko(""+le,pe.mode,fe),le.return=pe,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return fe=Da(le.type,le.key,le.props,null,pe.mode,fe),Xi(fe,le),fe.return=pe,fe;case T:return le=Qo(le,pe.mode,fe),le.return=pe,le;case H:var Ce=le._init;return le=Ce(le._payload),Te(pe,le,fe)}if($(le)||F(le))return le=An(le,pe.mode,fe,null),le.return=pe,le;if(typeof le.then=="function")return Te(pe,Wa(le),fe);if(le.$$typeof===S)return Te(pe,Ma(pe,le),fe);Xa(pe,le)}return null}function me(pe,le,fe,Ce){var Pe=le!==null?le.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Pe!==null?null:Q(pe,le,""+fe,Ce);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return fe.key===Pe?ie(pe,le,fe,Ce):null;case T:return fe.key===Pe?ve(pe,le,fe,Ce):null;case H:return Pe=fe._init,fe=Pe(fe._payload),me(pe,le,fe,Ce)}if($(fe)||F(fe))return Pe!==null?null:Ee(pe,le,fe,Ce,null);if(typeof fe.then=="function")return me(pe,le,Wa(fe),Ce);if(fe.$$typeof===S)return me(pe,le,Ma(pe,fe),Ce);Xa(pe,fe)}return null}function _e(pe,le,fe,Ce,Pe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return pe=pe.get(fe)||null,Q(le,pe,""+Ce,Pe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case b:return pe=pe.get(Ce.key===null?fe:Ce.key)||null,ie(le,pe,Ce,Pe);case T:return pe=pe.get(Ce.key===null?fe:Ce.key)||null,ve(le,pe,Ce,Pe);case H:var tt=Ce._init;return Ce=tt(Ce._payload),_e(pe,le,fe,Ce,Pe)}if($(Ce)||F(Ce))return pe=pe.get(fe)||null,Ee(le,pe,Ce,Pe,null);if(typeof Ce.then=="function")return _e(pe,le,fe,Wa(Ce),Pe);if(Ce.$$typeof===S)return _e(pe,le,fe,Ma(le,Ce),Pe);Xa(le,Ce)}return null}function We(pe,le,fe,Ce){for(var Pe=null,tt=null,je=le,Ve=le=0,Vt=null;je!==null&&Ve<fe.length;Ve++){je.index>Ve?(Vt=je,je=null):Vt=je.sibling;var ut=me(pe,je,fe[Ve],Ce);if(ut===null){je===null&&(je=Vt);break}o&&je&&ut.alternate===null&&l(pe,je),le=O(ut,le,Ve),tt===null?Pe=ut:tt.sibling=ut,tt=ut,je=Vt}if(Ve===fe.length)return d(pe,je),pt&&Ln(pe,Ve),Pe;if(je===null){for(;Ve<fe.length;Ve++)je=Te(pe,fe[Ve],Ce),je!==null&&(le=O(je,le,Ve),tt===null?Pe=je:tt.sibling=je,tt=je);return pt&&Ln(pe,Ve),Pe}for(je=g(je);Ve<fe.length;Ve++)Vt=_e(je,pe,Ve,fe[Ve],Ce),Vt!==null&&(o&&Vt.alternate!==null&&je.delete(Vt.key===null?Ve:Vt.key),le=O(Vt,le,Ve),tt===null?Pe=Vt:tt.sibling=Vt,tt=Vt);return o&&je.forEach(function(Tn){return l(pe,Tn)}),pt&&Ln(pe,Ve),Pe}function $e(pe,le,fe,Ce){if(fe==null)throw Error(a(151));for(var Pe=null,tt=null,je=le,Ve=le=0,Vt=null,ut=fe.next();je!==null&&!ut.done;Ve++,ut=fe.next()){je.index>Ve?(Vt=je,je=null):Vt=je.sibling;var Tn=me(pe,je,ut.value,Ce);if(Tn===null){je===null&&(je=Vt);break}o&&je&&Tn.alternate===null&&l(pe,je),le=O(Tn,le,Ve),tt===null?Pe=Tn:tt.sibling=Tn,tt=Tn,je=Vt}if(ut.done)return d(pe,je),pt&&Ln(pe,Ve),Pe;if(je===null){for(;!ut.done;Ve++,ut=fe.next())ut=Te(pe,ut.value,Ce),ut!==null&&(le=O(ut,le,Ve),tt===null?Pe=ut:tt.sibling=ut,tt=ut);return pt&&Ln(pe,Ve),Pe}for(je=g(je);!ut.done;Ve++,ut=fe.next())ut=_e(je,pe,Ve,ut.value,Ce),ut!==null&&(o&&ut.alternate!==null&&je.delete(ut.key===null?Ve:ut.key),le=O(ut,le,Ve),tt===null?Pe=ut:tt.sibling=ut,tt=ut);return o&&je.forEach(function(ff){return l(pe,ff)}),pt&&Ln(pe,Ve),Pe}function _t(pe,le,fe,Ce){if(typeof fe=="object"&&fe!==null&&fe.type===R&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:e:{for(var Pe=fe.key;le!==null;){if(le.key===Pe){if(Pe=fe.type,Pe===R){if(le.tag===7){d(pe,le.sibling),Ce=E(le,fe.props.children),Ce.return=pe,pe=Ce;break e}}else if(le.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===H&&mc(Pe)===le.type){d(pe,le.sibling),Ce=E(le,fe.props),Xi(Ce,fe),Ce.return=pe,pe=Ce;break e}d(pe,le);break}else l(pe,le);le=le.sibling}fe.type===R?(Ce=An(fe.props.children,pe.mode,Ce,fe.key),Ce.return=pe,pe=Ce):(Ce=Da(fe.type,fe.key,fe.props,null,pe.mode,Ce),Xi(Ce,fe),Ce.return=pe,pe=Ce)}return q(pe);case T:e:{for(Pe=fe.key;le!==null;){if(le.key===Pe)if(le.tag===4&&le.stateNode.containerInfo===fe.containerInfo&&le.stateNode.implementation===fe.implementation){d(pe,le.sibling),Ce=E(le,fe.children||[]),Ce.return=pe,pe=Ce;break e}else{d(pe,le);break}else l(pe,le);le=le.sibling}Ce=Qo(fe,pe.mode,Ce),Ce.return=pe,pe=Ce}return q(pe);case H:return Pe=fe._init,fe=Pe(fe._payload),_t(pe,le,fe,Ce)}if($(fe))return We(pe,le,fe,Ce);if(F(fe)){if(Pe=F(fe),typeof Pe!="function")throw Error(a(150));return fe=Pe.call(fe),$e(pe,le,fe,Ce)}if(typeof fe.then=="function")return _t(pe,le,Wa(fe),Ce);if(fe.$$typeof===S)return _t(pe,le,Ma(pe,fe),Ce);Xa(pe,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,le!==null&&le.tag===6?(d(pe,le.sibling),Ce=E(le,fe),Ce.return=pe,pe=Ce):(d(pe,le),Ce=Ko(fe,pe.mode,Ce),Ce.return=pe,pe=Ce),q(pe)):d(pe,le)}return function(pe,le,fe,Ce){try{Wi=0;var Pe=_t(pe,le,fe,Ce);return li=null,Pe}catch(je){if(je===Bi||je===Pa)throw je;var tt=ur(29,je,null,pe.mode);return tt.lanes=Ce,tt.return=pe,tt}finally{}}}var ui=_c(!0),yc=_c(!1),Sr=Z(null),Ir=null;function cn(o){var l=o.alternate;oe(Ft,Ft.current&1),oe(Sr,o),Ir===null&&(l===null||ii.current!==null||l.memoizedState!==null)&&(Ir=o)}function bc(o){if(o.tag===22){if(oe(Ft,Ft.current),oe(Sr,o),Ir===null){var l=o.alternate;l!==null&&l.memoizedState!==null&&(Ir=o)}}else pn()}function pn(){oe(Ft,Ft.current),oe(Sr,Sr.current)}function Wr(o){ne(Sr),Ir===o&&(Ir=null),ne(Ft)}var Ft=Z(0);function Ya(o){for(var l=o;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||bl(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Ds(o,l,d,g){l=o.memoizedState,d=d(g,l),d=d==null?l:_({},l,d),o.memoizedState=d,o.lanes===0&&(o.updateQueue.baseState=d)}var Ls={enqueueSetState:function(o,l,d){o=o._reactInternals;var g=hr(),E=sn(g);E.payload=l,d!=null&&(E.callback=d),l=ln(o,E,g),l!==null&&(fr(l,o,g),Fi(l,o,g))},enqueueReplaceState:function(o,l,d){o=o._reactInternals;var g=hr(),E=sn(g);E.tag=1,E.payload=l,d!=null&&(E.callback=d),l=ln(o,E,g),l!==null&&(fr(l,o,g),Fi(l,o,g))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var d=hr(),g=sn(d);g.tag=2,l!=null&&(g.callback=l),l=ln(o,g,d),l!==null&&(fr(l,o,d),Fi(l,o,d))}};function xc(o,l,d,g,E,O,q){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,O,q):l.prototype&&l.prototype.isPureReactComponent?!Di(d,g)||!Di(E,O):!0}function Ec(o,l,d,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,g),l.state!==o&&Ls.enqueueReplaceState(l,l.state,null)}function Bn(o,l){var d=l;if("ref"in l){d={};for(var g in l)g!=="ref"&&(d[g]=l[g])}if(o=o.defaultProps){d===l&&(d=_({},d));for(var E in o)d[E]===void 0&&(d[E]=o[E])}return d}var Ka=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Sc(o){Ka(o)}function Cc(o){console.error(o)}function Tc(o){Ka(o)}function Qa(o,l){try{var d=o.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function wc(o,l,d){try{var g=o.onCaughtError;g(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Is(o,l,d){return d=sn(d),d.tag=3,d.payload={element:null},d.callback=function(){Qa(o,l)},d}function Rc(o){return o=sn(o),o.tag=3,o}function Oc(o,l,d,g){var E=d.type.getDerivedStateFromError;if(typeof E=="function"){var O=g.value;o.payload=function(){return E(O)},o.callback=function(){wc(l,d,g)}}var q=d.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(o.callback=function(){wc(l,d,g),typeof E!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var Q=g.stack;this.componentDidCatch(g.value,{componentStack:Q!==null?Q:""})})}function hh(o,l,d,g,E){if(d.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=d.alternate,l!==null&&ki(l,d,E,!0),d=Sr.current,d!==null){switch(d.tag){case 13:return Ir===null?rl():d.alternate===null&&At===0&&(At=3),d.flags&=-257,d.flags|=65536,d.lanes=E,g===ss?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([g]):l.add(g),il(o,g,E)),!1;case 22:return d.flags|=65536,g===ss?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([g]):d.add(g)),il(o,g,E)),!1}throw Error(a(435,d.tag))}return il(o,g,E),rl(),!1}if(pt)return l=Sr.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=E,g!==es&&(o=Error(a(422),{cause:g}),Mi(yr(o,d)))):(g!==es&&(l=Error(a(423),{cause:g}),Mi(yr(l,d))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,g=yr(g,d),E=Is(o.stateNode,g,E),cs(o,E),At!==4&&(At=2)),!1;var O=Error(a(520),{cause:g});if(O=yr(O,d),ta===null?ta=[O]:ta.push(O),At!==4&&(At=2),l===null)return!0;g=yr(g,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,o=E&-E,d.lanes|=o,o=Is(d.stateNode,g,o),cs(d,o),!1;case 1:if(l=d.type,O=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(mn===null||!mn.has(O))))return d.flags|=65536,E&=-E,d.lanes|=E,E=Rc(E),Oc(E,o,d,g),cs(d,E),!1}d=d.return}while(d!==null);return!1}var Ac=Error(a(461)),Ht=!1;function qt(o,l,d,g){l.child=o===null?yc(l,null,d,g):ui(l,o.child,d,g)}function Dc(o,l,d,g,E){d=d.render;var O=l.ref;if("ref"in g){var q={};for(var Q in g)Q!=="ref"&&(q[Q]=g[Q])}else q=g;return kn(l),g=gs(o,l,d,q,O,E),Q=vs(),o!==null&&!Ht?(ms(o,l,E),Xr(o,l,E)):(pt&&Q&&Zo(l),l.flags|=1,qt(o,l,g,E),l.child)}function Lc(o,l,d,g,E){if(o===null){var O=d.type;return typeof O=="function"&&!Yo(O)&&O.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=O,Ic(o,l,O,g,E)):(o=Da(d.type,null,g,l,l.mode,E),o.ref=l.ref,o.return=l,l.child=o)}if(O=o.child,!Fs(o,E)){var q=O.memoizedProps;if(d=d.compare,d=d!==null?d:Di,d(q,g)&&o.ref===l.ref)return Xr(o,l,E)}return l.flags|=1,o=jr(O,g),o.ref=l.ref,o.return=l,l.child=o}function Ic(o,l,d,g,E){if(o!==null){var O=o.memoizedProps;if(Di(O,g)&&o.ref===l.ref)if(Ht=!1,l.pendingProps=g=O,Fs(o,E))(o.flags&131072)!==0&&(Ht=!0);else return l.lanes=o.lanes,Xr(o,l,E)}return Ns(o,l,d,g,E)}function Nc(o,l,d){var g=l.pendingProps,E=g.children,O=o!==null?o.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=O!==null?O.baseLanes|d:d,o!==null){for(E=l.child=o.child,O=0;E!==null;)O=O|E.lanes|E.childLanes,E=E.sibling;l.childLanes=O&~g}else l.childLanes=0,l.child=null;return Mc(o,l,g,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&ka(l,O!==null?O.cachePool:null),O!==null?Iu(l,O):ds(),bc(l);else return l.lanes=l.childLanes=536870912,Mc(o,l,O!==null?O.baseLanes|d:d,d)}else O!==null?(ka(l,O.cachePool),Iu(l,O),pn(),l.memoizedState=null):(o!==null&&ka(l,null),ds(),pn());return qt(o,l,E,d),l.child}function Mc(o,l,d,g){var E=os();return E=E===null?null:{parent:zt._currentValue,pool:E},l.memoizedState={baseLanes:d,cachePool:E},o!==null&&ka(l,null),ds(),bc(l),o!==null&&ki(o,l,g,!0),null}function Za(o,l){var d=l.ref;if(d===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(a(284));(o===null||o.ref!==d)&&(l.flags|=4194816)}}function Ns(o,l,d,g,E){return kn(l),d=gs(o,l,d,g,void 0,E),g=vs(),o!==null&&!Ht?(ms(o,l,E),Xr(o,l,E)):(pt&&g&&Zo(l),l.flags|=1,qt(o,l,d,E),l.child)}function kc(o,l,d,g,E,O){return kn(l),l.updateQueue=null,d=Mu(l,g,d,E),Nu(o),g=vs(),o!==null&&!Ht?(ms(o,l,O),Xr(o,l,O)):(pt&&g&&Zo(l),l.flags|=1,qt(o,l,d,O),l.child)}function Pc(o,l,d,g,E){if(kn(l),l.stateNode===null){var O=Jn,q=d.contextType;typeof q=="object"&&q!==null&&(O=Kt(q)),O=new d(g,O),l.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Ls,l.stateNode=O,O._reactInternals=l,O=l.stateNode,O.props=g,O.state=l.memoizedState,O.refs={},ls(l),q=d.contextType,O.context=typeof q=="object"&&q!==null?Kt(q):Jn,O.state=l.memoizedState,q=d.getDerivedStateFromProps,typeof q=="function"&&(Ds(l,d,q,g),O.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(q=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),q!==O.state&&Ls.enqueueReplaceState(O,O.state,null),Ui(l,g,O,E),ji(),O.state=l.memoizedState),typeof O.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(o===null){O=l.stateNode;var Q=l.memoizedProps,ie=Bn(d,Q);O.props=ie;var ve=O.context,Ee=d.contextType;q=Jn,typeof Ee=="object"&&Ee!==null&&(q=Kt(Ee));var Te=d.getDerivedStateFromProps;Ee=typeof Te=="function"||typeof O.getSnapshotBeforeUpdate=="function",Q=l.pendingProps!==Q,Ee||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Q||ve!==q)&&Ec(l,O,g,q),on=!1;var me=l.memoizedState;O.state=me,Ui(l,g,O,E),ji(),ve=l.memoizedState,Q||me!==ve||on?(typeof Te=="function"&&(Ds(l,d,Te,g),ve=l.memoizedState),(ie=on||xc(l,d,ie,g,me,ve,q))?(Ee||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(l.flags|=4194308)):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ve),O.props=g,O.state=ve,O.context=q,g=ie):(typeof O.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{O=l.stateNode,us(o,l),q=l.memoizedProps,Ee=Bn(d,q),O.props=Ee,Te=l.pendingProps,me=O.context,ve=d.contextType,ie=Jn,typeof ve=="object"&&ve!==null&&(ie=Kt(ve)),Q=d.getDerivedStateFromProps,(ve=typeof Q=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(q!==Te||me!==ie)&&Ec(l,O,g,ie),on=!1,me=l.memoizedState,O.state=me,Ui(l,g,O,E),ji();var _e=l.memoizedState;q!==Te||me!==_e||on||o!==null&&o.dependencies!==null&&Na(o.dependencies)?(typeof Q=="function"&&(Ds(l,d,Q,g),_e=l.memoizedState),(Ee=on||xc(l,d,Ee,g,me,_e,ie)||o!==null&&o.dependencies!==null&&Na(o.dependencies))?(ve||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,_e,ie),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,_e,ie)),typeof O.componentDidUpdate=="function"&&(l.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof O.componentDidUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=_e),O.props=g,O.state=_e,O.context=ie,g=Ee):(typeof O.componentDidUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(l.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&me===o.memoizedState||(l.flags|=1024),g=!1)}return O=g,Za(o,l),g=(l.flags&128)!==0,O||g?(O=l.stateNode,d=g&&typeof d.getDerivedStateFromError!="function"?null:O.render(),l.flags|=1,o!==null&&g?(l.child=ui(l,o.child,null,E),l.child=ui(l,null,d,E)):qt(o,l,d,E),l.memoizedState=O.state,o=l.child):o=Xr(o,l,E),o}function Gc(o,l,d,g){return Ni(),l.flags|=256,qt(o,l,d,g),l.child}var Ms={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ks(o){return{baseLanes:o,cachePool:Cu()}}function Ps(o,l,d){return o=o!==null?o.childLanes&~d:0,l&&(o|=Cr),o}function Bc(o,l,d){var g=l.pendingProps,E=!1,O=(l.flags&128)!==0,q;if((q=O)||(q=o!==null&&o.memoizedState===null?!1:(Ft.current&2)!==0),q&&(E=!0,l.flags&=-129),q=(l.flags&32)!==0,l.flags&=-33,o===null){if(pt){if(E?cn(l):pn(),pt){var Q=Ot,ie;if(ie=Q){e:{for(ie=Q,Q=Lr;ie.nodeType!==8;){if(!Q){Q=null;break e}if(ie=Ar(ie.nextSibling),ie===null){Q=null;break e}}Q=ie}Q!==null?(l.memoizedState={dehydrated:Q,treeContext:Dn!==null?{id:Ur,overflow:Hr}:null,retryLane:536870912,hydrationErrors:null},ie=ur(18,null,null,0),ie.stateNode=Q,ie.return=l,l.child=ie,Zt=l,Ot=null,ie=!0):ie=!1}ie||Nn(l)}if(Q=l.memoizedState,Q!==null&&(Q=Q.dehydrated,Q!==null))return bl(Q)?l.lanes=32:l.lanes=536870912,null;Wr(l)}return Q=g.children,g=g.fallback,E?(pn(),E=l.mode,Q=Ja({mode:"hidden",children:Q},E),g=An(g,E,d,null),Q.return=l,g.return=l,Q.sibling=g,l.child=Q,E=l.child,E.memoizedState=ks(d),E.childLanes=Ps(o,q,d),l.memoizedState=Ms,g):(cn(l),Gs(l,Q))}if(ie=o.memoizedState,ie!==null&&(Q=ie.dehydrated,Q!==null)){if(O)l.flags&256?(cn(l),l.flags&=-257,l=Bs(o,l,d)):l.memoizedState!==null?(pn(),l.child=o.child,l.flags|=128,l=null):(pn(),E=g.fallback,Q=l.mode,g=Ja({mode:"visible",children:g.children},Q),E=An(E,Q,d,null),E.flags|=2,g.return=l,E.return=l,g.sibling=E,l.child=g,ui(l,o.child,null,d),g=l.child,g.memoizedState=ks(d),g.childLanes=Ps(o,q,d),l.memoizedState=Ms,l=E);else if(cn(l),bl(Q)){if(q=Q.nextSibling&&Q.nextSibling.dataset,q)var ve=q.dgst;q=ve,g=Error(a(419)),g.stack="",g.digest=q,Mi({value:g,source:null,stack:null}),l=Bs(o,l,d)}else if(Ht||ki(o,l,d,!1),q=(d&o.childLanes)!==0,Ht||q){if(q=bt,q!==null&&(g=d&-d,g=(g&42)!==0?1:Ut(g),g=(g&(q.suspendedLanes|d))!==0?0:g,g!==0&&g!==ie.retryLane))throw ie.retryLane=g,Zn(o,g),fr(q,o,g),Ac;Q.data==="$?"||rl(),l=Bs(o,l,d)}else Q.data==="$?"?(l.flags|=192,l.child=o.child,l=null):(o=ie.treeContext,Ot=Ar(Q.nextSibling),Zt=l,pt=!0,In=null,Lr=!1,o!==null&&(xr[Er++]=Ur,xr[Er++]=Hr,xr[Er++]=Dn,Ur=o.id,Hr=o.overflow,Dn=l),l=Gs(l,g.children),l.flags|=4096);return l}return E?(pn(),E=g.fallback,Q=l.mode,ie=o.child,ve=ie.sibling,g=jr(ie,{mode:"hidden",children:g.children}),g.subtreeFlags=ie.subtreeFlags&65011712,ve!==null?E=jr(ve,E):(E=An(E,Q,d,null),E.flags|=2),E.return=l,g.return=l,g.sibling=E,l.child=g,g=E,E=l.child,Q=o.child.memoizedState,Q===null?Q=ks(d):(ie=Q.cachePool,ie!==null?(ve=zt._currentValue,ie=ie.parent!==ve?{parent:ve,pool:ve}:ie):ie=Cu(),Q={baseLanes:Q.baseLanes|d,cachePool:ie}),E.memoizedState=Q,E.childLanes=Ps(o,q,d),l.memoizedState=Ms,g):(cn(l),d=o.child,o=d.sibling,d=jr(d,{mode:"visible",children:g.children}),d.return=l,d.sibling=null,o!==null&&(q=l.deletions,q===null?(l.deletions=[o],l.flags|=16):q.push(o)),l.child=d,l.memoizedState=null,d)}function Gs(o,l){return l=Ja({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Ja(o,l){return o=ur(22,o,null,l),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Bs(o,l,d){return ui(l,o.child,null,d),o=Gs(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function zc(o,l,d){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),rs(o.return,l,d)}function zs(o,l,d,g,E){var O=o.memoizedState;O===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:d,tailMode:E}:(O.isBackwards=l,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=d,O.tailMode=E)}function Fc(o,l,d){var g=l.pendingProps,E=g.revealOrder,O=g.tail;if(qt(o,l,g.children,d),g=Ft.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&zc(o,d,l);else if(o.tag===19)zc(o,d,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}switch(oe(Ft,g),E){case"forwards":for(d=l.child,E=null;d!==null;)o=d.alternate,o!==null&&Ya(o)===null&&(E=d),d=d.sibling;d=E,d===null?(E=l.child,l.child=null):(E=d.sibling,d.sibling=null),zs(l,!1,E,d,O);break;case"backwards":for(d=null,E=l.child,l.child=null;E!==null;){if(o=E.alternate,o!==null&&Ya(o)===null){l.child=E;break}o=E.sibling,E.sibling=d,d=E,E=o}zs(l,!0,d,null,O);break;case"together":zs(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Xr(o,l,d){if(o!==null&&(l.dependencies=o.dependencies),vn|=l.lanes,(d&l.childLanes)===0)if(o!==null){if(ki(o,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(a(153));if(l.child!==null){for(o=l.child,d=jr(o,o.pendingProps),l.child=d,d.return=l;o.sibling!==null;)o=o.sibling,d=d.sibling=jr(o,o.pendingProps),d.return=l;d.sibling=null}return l.child}function Fs(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&Na(o)))}function fh(o,l,d){switch(l.tag){case 3:Y(l,l.stateNode.containerInfo),an(l,zt,o.memoizedState.cache),Ni();break;case 27:case 5:ee(l);break;case 4:Y(l,l.stateNode.containerInfo);break;case 10:an(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(cn(l),l.flags|=128,null):(d&l.child.childLanes)!==0?Bc(o,l,d):(cn(l),o=Xr(o,l,d),o!==null?o.sibling:null);cn(l);break;case 19:var E=(o.flags&128)!==0;if(g=(d&l.childLanes)!==0,g||(ki(o,l,d,!1),g=(d&l.childLanes)!==0),E){if(g)return Fc(o,l,d);l.flags|=128}if(E=l.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),oe(Ft,Ft.current),g)break;return null;case 22:case 23:return l.lanes=0,Nc(o,l,d);case 24:an(l,zt,o.memoizedState.cache)}return Xr(o,l,d)}function jc(o,l,d){if(o!==null)if(o.memoizedProps!==l.pendingProps)Ht=!0;else{if(!Fs(o,d)&&(l.flags&128)===0)return Ht=!1,fh(o,l,d);Ht=(o.flags&131072)!==0}else Ht=!1,pt&&(l.flags&1048576)!==0&&mu(l,Ia,l.index);switch(l.lanes=0,l.tag){case 16:e:{o=l.pendingProps;var g=l.elementType,E=g._init;if(g=E(g._payload),l.type=g,typeof g=="function")Yo(g)?(o=Bn(g,o),l.tag=1,l=Pc(null,l,g,o,d)):(l.tag=0,l=Ns(null,l,g,o,d));else{if(g!=null){if(E=g.$$typeof,E===k){l.tag=11,l=Dc(null,l,g,o,d);break e}else if(E===j){l.tag=14,l=Lc(null,l,g,o,d);break e}}throw l=z(g)||g,Error(a(306,l,""))}}return l;case 0:return Ns(o,l,l.type,l.pendingProps,d);case 1:return g=l.type,E=Bn(g,l.pendingProps),Pc(o,l,g,E,d);case 3:e:{if(Y(l,l.stateNode.containerInfo),o===null)throw Error(a(387));g=l.pendingProps;var O=l.memoizedState;E=O.element,us(o,l),Ui(l,g,null,d);var q=l.memoizedState;if(g=q.cache,an(l,zt,g),g!==O.cache&&ns(l,[zt],d,!0),ji(),g=q.element,O.isDehydrated)if(O={element:g,isDehydrated:!1,cache:q.cache},l.updateQueue.baseState=O,l.memoizedState=O,l.flags&256){l=Gc(o,l,g,d);break e}else if(g!==E){E=yr(Error(a(424)),l),Mi(E),l=Gc(o,l,g,d);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Ot=Ar(o.firstChild),Zt=l,pt=!0,In=null,Lr=!0,d=yc(l,null,g,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Ni(),g===E){l=Xr(o,l,d);break e}qt(o,l,g,d)}l=l.child}return l;case 26:return Za(o,l),o===null?(d=Vp(l.type,null,l.pendingProps,null))?l.memoizedState=d:pt||(d=l.type,o=l.pendingProps,g=fo(de.current).createElement(d),g[Se]=l,g[we]=o,Xt(g,d,o),Ye(g),l.stateNode=g):l.memoizedState=Vp(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return ee(l),o===null&&pt&&(g=l.stateNode=Up(l.type,l.pendingProps,de.current),Zt=l,Lr=!0,E=Ot,bn(l.type)?(xl=E,Ot=Ar(g.firstChild)):Ot=E),qt(o,l,l.pendingProps.children,d),Za(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&pt&&((E=g=Ot)&&(g=Uh(g,l.type,l.pendingProps,Lr),g!==null?(l.stateNode=g,Zt=l,Ot=Ar(g.firstChild),Lr=!1,E=!0):E=!1),E||Nn(l)),ee(l),E=l.type,O=l.pendingProps,q=o!==null?o.memoizedProps:null,g=O.children,ml(E,O)?g=null:q!==null&&ml(E,q)&&(l.flags|=32),l.memoizedState!==null&&(E=gs(o,l,oh,null,null,d),ca._currentValue=E),Za(o,l),qt(o,l,g,d),l.child;case 6:return o===null&&pt&&((o=d=Ot)&&(d=Hh(d,l.pendingProps,Lr),d!==null?(l.stateNode=d,Zt=l,Ot=null,o=!0):o=!1),o||Nn(l)),null;case 13:return Bc(o,l,d);case 4:return Y(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=ui(l,null,g,d):qt(o,l,g,d),l.child;case 11:return Dc(o,l,l.type,l.pendingProps,d);case 7:return qt(o,l,l.pendingProps,d),l.child;case 8:return qt(o,l,l.pendingProps.children,d),l.child;case 12:return qt(o,l,l.pendingProps.children,d),l.child;case 10:return g=l.pendingProps,an(l,l.type,g.value),qt(o,l,g.children,d),l.child;case 9:return E=l.type._context,g=l.pendingProps.children,kn(l),E=Kt(E),g=g(E),l.flags|=1,qt(o,l,g,d),l.child;case 14:return Lc(o,l,l.type,l.pendingProps,d);case 15:return Ic(o,l,l.type,l.pendingProps,d);case 19:return Fc(o,l,d);case 31:return g=l.pendingProps,d=l.mode,g={mode:g.mode,children:g.children},o===null?(d=Ja(g,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=jr(o.child,g),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return Nc(o,l,d);case 24:return kn(l),g=Kt(zt),o===null?(E=os(),E===null&&(E=bt,O=is(),E.pooledCache=O,O.refCount++,O!==null&&(E.pooledCacheLanes|=d),E=O),l.memoizedState={parent:g,cache:E},ls(l),an(l,zt,E)):((o.lanes&d)!==0&&(us(o,l),Ui(l,null,null,d),ji()),E=o.memoizedState,O=l.memoizedState,E.parent!==g?(E={parent:g,cache:g},l.memoizedState=E,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=E),an(l,zt,g)):(g=O.cache,an(l,zt,g),g!==E.cache&&ns(l,[zt],d,!0))),qt(o,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(a(156,l.tag))}function Yr(o){o.flags|=4}function Uc(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Kp(l)){if(l=Sr.current,l!==null&&((st&4194048)===st?Ir!==null:(st&62914560)!==st&&(st&536870912)===0||l!==Ir))throw zi=ss,Tu;o.flags|=8192}}function eo(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Un():536870912,o.lanes|=l,hi|=l)}function Yi(o,l){if(!pt)switch(o.tailMode){case"hidden":l=o.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o.tail=null:d.sibling=null;break;case"collapsed":d=o.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function wt(o){var l=o.alternate!==null&&o.alternate.child===o.child,d=0,g=0;if(l)for(var E=o.child;E!==null;)d|=E.lanes|E.childLanes,g|=E.subtreeFlags&65011712,g|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)d|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=g,o.childLanes=d,l}function gh(o,l,d){var g=l.pendingProps;switch(Jo(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(l),null;case 1:return wt(l),null;case 3:return d=l.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Vr(zt),te(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(o===null||o.child===null)&&(Ii(l)?Yr(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,bu())),wt(l),null;case 26:return d=l.memoizedState,o===null?(Yr(l),d!==null?(wt(l),Uc(l,d)):(wt(l),l.flags&=-16777217)):d?d!==o.memoizedState?(Yr(l),wt(l),Uc(l,d)):(wt(l),l.flags&=-16777217):(o.memoizedProps!==g&&Yr(l),wt(l),l.flags&=-16777217),null;case 27:se(l),d=de.current;var E=l.type;if(o!==null&&l.stateNode!=null)o.memoizedProps!==g&&Yr(l);else{if(!g){if(l.stateNode===null)throw Error(a(166));return wt(l),null}o=ce.current,Ii(l)?_u(l):(o=Up(E,g,d),l.stateNode=o,Yr(l))}return wt(l),null;case 5:if(se(l),d=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&Yr(l);else{if(!g){if(l.stateNode===null)throw Error(a(166));return wt(l),null}if(o=ce.current,Ii(l))_u(l);else{switch(E=fo(de.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?o.multiple=!0:g.size&&(o.size=g.size);break;default:o=typeof g.is=="string"?E.createElement(d,{is:g.is}):E.createElement(d)}}o[Se]=l,o[we]=g;e:for(E=l.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===l)break e;for(;E.sibling===null;){if(E.return===null||E.return===l)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}l.stateNode=o;e:switch(Xt(o,d,g),d){case"button":case"input":case"select":case"textarea":o=!!g.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Yr(l)}}return wt(l),l.flags&=-16777217,null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==g&&Yr(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(a(166));if(o=de.current,Ii(l)){if(o=l.stateNode,d=l.memoizedProps,g=null,E=Zt,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}o[Se]=l,o=!!(o.nodeValue===d||g!==null&&g.suppressHydrationWarning===!0||kp(o.nodeValue,d)),o||Nn(l)}else o=fo(o).createTextNode(g),o[Se]=l,l.stateNode=o}return wt(l),null;case 13:if(g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Ii(l),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(a(318));if(E=l.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(a(317));E[Se]=l}else Ni(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;wt(l),E=!1}else E=bu(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return l.flags&256?(Wr(l),l):(Wr(l),null)}if(Wr(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=g!==null,o=o!==null&&o.memoizedState!==null,d){g=l.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var O=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(O=g.memoizedState.cachePool.pool),O!==E&&(g.flags|=2048)}return d!==o&&d&&(l.child.flags|=8192),eo(l,l.updateQueue),wt(l),null;case 4:return te(),o===null&&pl(l.stateNode.containerInfo),wt(l),null;case 10:return Vr(l.type),wt(l),null;case 19:if(ne(Ft),E=l.memoizedState,E===null)return wt(l),null;if(g=(l.flags&128)!==0,O=E.rendering,O===null)if(g)Yi(E,!1);else{if(At!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(O=Ya(o),O!==null){for(l.flags|=128,Yi(E,!1),o=O.updateQueue,l.updateQueue=o,eo(l,o),l.subtreeFlags=0,o=d,d=l.child;d!==null;)vu(d,o),d=d.sibling;return oe(Ft,Ft.current&1|2),l.child}o=o.sibling}E.tail!==null&&Oe()>no&&(l.flags|=128,g=!0,Yi(E,!1),l.lanes=4194304)}else{if(!g)if(o=Ya(O),o!==null){if(l.flags|=128,g=!0,o=o.updateQueue,l.updateQueue=o,eo(l,o),Yi(E,!0),E.tail===null&&E.tailMode==="hidden"&&!O.alternate&&!pt)return wt(l),null}else 2*Oe()-E.renderingStartTime>no&&d!==536870912&&(l.flags|=128,g=!0,Yi(E,!1),l.lanes=4194304);E.isBackwards?(O.sibling=l.child,l.child=O):(o=E.last,o!==null?o.sibling=O:l.child=O,E.last=O)}return E.tail!==null?(l=E.tail,E.rendering=l,E.tail=l.sibling,E.renderingStartTime=Oe(),l.sibling=null,o=Ft.current,oe(Ft,g?o&1|2:o&1),l):(wt(l),null);case 22:case 23:return Wr(l),hs(),g=l.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(d&536870912)!==0&&(l.flags&128)===0&&(wt(l),l.subtreeFlags&6&&(l.flags|=8192)):wt(l),d=l.updateQueue,d!==null&&eo(l,d.retryQueue),d=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048),o!==null&&ne(Pn),null;case 24:return d=null,o!==null&&(d=o.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Vr(zt),wt(l),null;case 25:return null;case 30:return null}throw Error(a(156,l.tag))}function vh(o,l){switch(Jo(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Vr(zt),te(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return se(l),null;case 13:if(Wr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(a(340));Ni()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ne(Ft),null;case 4:return te(),null;case 10:return Vr(l.type),null;case 22:case 23:return Wr(l),hs(),o!==null&&ne(Pn),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Vr(zt),null;case 25:return null;default:return null}}function Hc(o,l){switch(Jo(l),l.tag){case 3:Vr(zt),te();break;case 26:case 27:case 5:se(l);break;case 4:te();break;case 13:Wr(l);break;case 19:ne(Ft);break;case 10:Vr(l.type);break;case 22:case 23:Wr(l),hs(),o!==null&&ne(Pn);break;case 24:Vr(zt)}}function Ki(o,l){try{var d=l.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var E=g.next;d=E;do{if((d.tag&o)===o){g=void 0;var O=d.create,q=d.inst;g=O(),q.destroy=g}d=d.next}while(d!==E)}}catch(Q){yt(l,l.return,Q)}}function dn(o,l,d){try{var g=l.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var O=E.next;g=O;do{if((g.tag&o)===o){var q=g.inst,Q=q.destroy;if(Q!==void 0){q.destroy=void 0,E=l;var ie=d,ve=Q;try{ve()}catch(Ee){yt(E,ie,Ee)}}}g=g.next}while(g!==O)}}catch(Ee){yt(l,l.return,Ee)}}function $c(o){var l=o.updateQueue;if(l!==null){var d=o.stateNode;try{Lu(l,d)}catch(g){yt(o,o.return,g)}}}function Vc(o,l,d){d.props=Bn(o.type,o.memoizedProps),d.state=o.memoizedState;try{d.componentWillUnmount()}catch(g){yt(o,l,g)}}function Qi(o,l){try{var d=o.ref;if(d!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof d=="function"?o.refCleanup=d(g):d.current=g}}catch(E){yt(o,l,E)}}function Nr(o,l){var d=o.ref,g=o.refCleanup;if(d!==null)if(typeof g=="function")try{g()}catch(E){yt(o,l,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(E){yt(o,l,E)}else d.current=null}function qc(o){var l=o.type,d=o.memoizedProps,g=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&g.focus();break e;case"img":d.src?g.src=d.src:d.srcSet&&(g.srcset=d.srcSet)}}catch(E){yt(o,o.return,E)}}function js(o,l,d){try{var g=o.stateNode;Gh(g,o.type,d,l),g[we]=l}catch(E){yt(o,o.return,E)}}function Wc(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&bn(o.type)||o.tag===4}function Us(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Wc(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&bn(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Hs(o,l,d){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(o,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(o),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=ho));else if(g!==4&&(g===27&&bn(o.type)&&(d=o.stateNode,l=null),o=o.child,o!==null))for(Hs(o,l,d),o=o.sibling;o!==null;)Hs(o,l,d),o=o.sibling}function to(o,l,d){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?d.insertBefore(o,l):d.appendChild(o);else if(g!==4&&(g===27&&bn(o.type)&&(d=o.stateNode),o=o.child,o!==null))for(to(o,l,d),o=o.sibling;o!==null;)to(o,l,d),o=o.sibling}function Xc(o){var l=o.stateNode,d=o.memoizedProps;try{for(var g=o.type,E=l.attributes;E.length;)l.removeAttributeNode(E[0]);Xt(l,g,d),l[Se]=o,l[we]=d}catch(O){yt(o,o.return,O)}}var Kr=!1,It=!1,$s=!1,Yc=typeof WeakSet=="function"?WeakSet:Set,$t=null;function mh(o,l){if(o=o.containerInfo,fl=bo,o=ou(o),Uo(o)){if("selectionStart"in o)var d={start:o.selectionStart,end:o.selectionEnd};else e:{d=(d=o.ownerDocument)&&d.defaultView||window;var g=d.getSelection&&d.getSelection();if(g&&g.rangeCount!==0){d=g.anchorNode;var E=g.anchorOffset,O=g.focusNode;g=g.focusOffset;try{d.nodeType,O.nodeType}catch{d=null;break e}var q=0,Q=-1,ie=-1,ve=0,Ee=0,Te=o,me=null;t:for(;;){for(var _e;Te!==d||E!==0&&Te.nodeType!==3||(Q=q+E),Te!==O||g!==0&&Te.nodeType!==3||(ie=q+g),Te.nodeType===3&&(q+=Te.nodeValue.length),(_e=Te.firstChild)!==null;)me=Te,Te=_e;for(;;){if(Te===o)break t;if(me===d&&++ve===E&&(Q=q),me===O&&++Ee===g&&(ie=q),(_e=Te.nextSibling)!==null)break;Te=me,me=Te.parentNode}Te=_e}d=Q===-1||ie===-1?null:{start:Q,end:ie}}else d=null}d=d||{start:0,end:0}}else d=null;for(vl={focusedElem:o,selectionRange:d},bo=!1,$t=l;$t!==null;)if(l=$t,o=l.child,(l.subtreeFlags&1024)!==0&&o!==null)o.return=l,$t=o;else for(;$t!==null;){switch(l=$t,O=l.alternate,o=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&O!==null){o=void 0,d=l,E=O.memoizedProps,O=O.memoizedState,g=d.stateNode;try{var We=Bn(d.type,E,d.elementType===d.type);o=g.getSnapshotBeforeUpdate(We,O),g.__reactInternalSnapshotBeforeUpdate=o}catch($e){yt(d,d.return,$e)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,d=o.nodeType,d===9)yl(o);else if(d===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":yl(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=l.sibling,o!==null){o.return=l.return,$t=o;break}$t=l.return}}function Kc(o,l,d){var g=d.flags;switch(d.tag){case 0:case 11:case 15:hn(o,d),g&4&&Ki(5,d);break;case 1:if(hn(o,d),g&4)if(o=d.stateNode,l===null)try{o.componentDidMount()}catch(q){yt(d,d.return,q)}else{var E=Bn(d.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(E,l,o.__reactInternalSnapshotBeforeUpdate)}catch(q){yt(d,d.return,q)}}g&64&&$c(d),g&512&&Qi(d,d.return);break;case 3:if(hn(o,d),g&64&&(o=d.updateQueue,o!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{Lu(o,l)}catch(q){yt(d,d.return,q)}}break;case 27:l===null&&g&4&&Xc(d);case 26:case 5:hn(o,d),l===null&&g&4&&qc(d),g&512&&Qi(d,d.return);break;case 12:hn(o,d);break;case 13:hn(o,d),g&4&&Jc(o,d),g&64&&(o=d.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(d=wh.bind(null,d),$h(o,d))));break;case 22:if(g=d.memoizedState!==null||Kr,!g){l=l!==null&&l.memoizedState!==null||It,E=Kr;var O=It;Kr=g,(It=l)&&!O?fn(o,d,(d.subtreeFlags&8772)!==0):hn(o,d),Kr=E,It=O}break;case 30:break;default:hn(o,d)}}function Qc(o){var l=o.alternate;l!==null&&(o.alternate=null,Qc(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&Be(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Ct=null,ar=!1;function Qr(o,l,d){for(d=d.child;d!==null;)Zc(o,l,d),d=d.sibling}function Zc(o,l,d){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(ot,d)}catch{}switch(d.tag){case 26:It||Nr(d,l),Qr(o,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:It||Nr(d,l);var g=Ct,E=ar;bn(d.type)&&(Ct=d.stateNode,ar=!1),Qr(o,l,d),oa(d.stateNode),Ct=g,ar=E;break;case 5:It||Nr(d,l);case 6:if(g=Ct,E=ar,Ct=null,Qr(o,l,d),Ct=g,ar=E,Ct!==null)if(ar)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(d.stateNode)}catch(O){yt(d,l,O)}else try{Ct.removeChild(d.stateNode)}catch(O){yt(d,l,O)}break;case 18:Ct!==null&&(ar?(o=Ct,Fp(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,d.stateNode),fa(o)):Fp(Ct,d.stateNode));break;case 4:g=Ct,E=ar,Ct=d.stateNode.containerInfo,ar=!0,Qr(o,l,d),Ct=g,ar=E;break;case 0:case 11:case 14:case 15:It||dn(2,d,l),It||dn(4,d,l),Qr(o,l,d);break;case 1:It||(Nr(d,l),g=d.stateNode,typeof g.componentWillUnmount=="function"&&Vc(d,l,g)),Qr(o,l,d);break;case 21:Qr(o,l,d);break;case 22:It=(g=It)||d.memoizedState!==null,Qr(o,l,d),It=g;break;default:Qr(o,l,d)}}function Jc(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{fa(o)}catch(d){yt(l,l.return,d)}}function _h(o){switch(o.tag){case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new Yc),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new Yc),l;default:throw Error(a(435,o.tag))}}function Vs(o,l){var d=_h(o);l.forEach(function(g){var E=Rh.bind(null,o,g);d.has(g)||(d.add(g),g.then(E,E))})}function cr(o,l){var d=l.deletions;if(d!==null)for(var g=0;g<d.length;g++){var E=d[g],O=o,q=l,Q=q;e:for(;Q!==null;){switch(Q.tag){case 27:if(bn(Q.type)){Ct=Q.stateNode,ar=!1;break e}break;case 5:Ct=Q.stateNode,ar=!1;break e;case 3:case 4:Ct=Q.stateNode.containerInfo,ar=!0;break e}Q=Q.return}if(Ct===null)throw Error(a(160));Zc(O,q,E),Ct=null,ar=!1,O=E.alternate,O!==null&&(O.return=null),E.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)ep(l,o),l=l.sibling}var Or=null;function ep(o,l){var d=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:cr(l,o),pr(o),g&4&&(dn(3,o,o.return),Ki(3,o),dn(5,o,o.return));break;case 1:cr(l,o),pr(o),g&512&&(It||d===null||Nr(d,d.return)),g&64&&Kr&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(d=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=d===null?g:d.concat(g))));break;case 26:var E=Or;if(cr(l,o),pr(o),g&512&&(It||d===null||Nr(d,d.return)),g&4){var O=d!==null?d.memoizedState:null;if(g=o.memoizedState,d===null)if(g===null)if(o.stateNode===null){e:{g=o.type,d=o.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":O=E.getElementsByTagName("title")[0],(!O||O[ke]||O[Se]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=E.createElement(g),E.head.insertBefore(O,E.querySelector("head > title"))),Xt(O,g,d),O[Se]=o,Ye(O),g=O;break e;case"link":var q=Xp("link","href",E).get(g+(d.href||""));if(q){for(var Q=0;Q<q.length;Q++)if(O=q[Q],O.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&O.getAttribute("rel")===(d.rel==null?null:d.rel)&&O.getAttribute("title")===(d.title==null?null:d.title)&&O.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){q.splice(Q,1);break t}}O=E.createElement(g),Xt(O,g,d),E.head.appendChild(O);break;case"meta":if(q=Xp("meta","content",E).get(g+(d.content||""))){for(Q=0;Q<q.length;Q++)if(O=q[Q],O.getAttribute("content")===(d.content==null?null:""+d.content)&&O.getAttribute("name")===(d.name==null?null:d.name)&&O.getAttribute("property")===(d.property==null?null:d.property)&&O.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&O.getAttribute("charset")===(d.charSet==null?null:d.charSet)){q.splice(Q,1);break t}}O=E.createElement(g),Xt(O,g,d),E.head.appendChild(O);break;default:throw Error(a(468,g))}O[Se]=o,Ye(O),g=O}o.stateNode=g}else Yp(E,o.type,o.stateNode);else o.stateNode=Wp(E,g,o.memoizedProps);else O!==g?(O===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):O.count--,g===null?Yp(E,o.type,o.stateNode):Wp(E,g,o.memoizedProps)):g===null&&o.stateNode!==null&&js(o,o.memoizedProps,d.memoizedProps)}break;case 27:cr(l,o),pr(o),g&512&&(It||d===null||Nr(d,d.return)),d!==null&&g&4&&js(o,o.memoizedProps,d.memoizedProps);break;case 5:if(cr(l,o),pr(o),g&512&&(It||d===null||Nr(d,d.return)),o.flags&32){E=o.stateNode;try{Vn(E,"")}catch(_e){yt(o,o.return,_e)}}g&4&&o.stateNode!=null&&(E=o.memoizedProps,js(o,E,d!==null?d.memoizedProps:E)),g&1024&&($s=!0);break;case 6:if(cr(l,o),pr(o),g&4){if(o.stateNode===null)throw Error(a(162));g=o.memoizedProps,d=o.stateNode;try{d.nodeValue=g}catch(_e){yt(o,o.return,_e)}}break;case 3:if(mo=null,E=Or,Or=go(l.containerInfo),cr(l,o),Or=E,pr(o),g&4&&d!==null&&d.memoizedState.isDehydrated)try{fa(l.containerInfo)}catch(_e){yt(o,o.return,_e)}$s&&($s=!1,tp(o));break;case 4:g=Or,Or=go(o.stateNode.containerInfo),cr(l,o),pr(o),Or=g;break;case 12:cr(l,o),pr(o);break;case 13:cr(l,o),pr(o),o.child.flags&8192&&o.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(Qs=Oe()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Vs(o,g)));break;case 22:E=o.memoizedState!==null;var ie=d!==null&&d.memoizedState!==null,ve=Kr,Ee=It;if(Kr=ve||E,It=Ee||ie,cr(l,o),It=Ee,Kr=ve,pr(o),g&8192)e:for(l=o.stateNode,l._visibility=E?l._visibility&-2:l._visibility|1,E&&(d===null||ie||Kr||It||zn(o)),d=null,l=o;;){if(l.tag===5||l.tag===26){if(d===null){ie=d=l;try{if(O=ie.stateNode,E)q=O.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{Q=ie.stateNode;var Te=ie.memoizedProps.style,me=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;Q.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(_e){yt(ie,ie.return,_e)}}}else if(l.tag===6){if(d===null){ie=l;try{ie.stateNode.nodeValue=E?"":ie.memoizedProps}catch(_e){yt(ie,ie.return,_e)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=o.updateQueue,g!==null&&(d=g.retryQueue,d!==null&&(g.retryQueue=null,Vs(o,d))));break;case 19:cr(l,o),pr(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Vs(o,g)));break;case 30:break;case 21:break;default:cr(l,o),pr(o)}}function pr(o){var l=o.flags;if(l&2){try{for(var d,g=o.return;g!==null;){if(Wc(g)){d=g;break}g=g.return}if(d==null)throw Error(a(160));switch(d.tag){case 27:var E=d.stateNode,O=Us(o);to(o,O,E);break;case 5:var q=d.stateNode;d.flags&32&&(Vn(q,""),d.flags&=-33);var Q=Us(o);to(o,Q,q);break;case 3:case 4:var ie=d.stateNode.containerInfo,ve=Us(o);Hs(o,ve,ie);break;default:throw Error(a(161))}}catch(Ee){yt(o,o.return,Ee)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function tp(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;tp(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function hn(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Kc(o,l.alternate,l),l=l.sibling}function zn(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:dn(4,l,l.return),zn(l);break;case 1:Nr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&Vc(l,l.return,d),zn(l);break;case 27:oa(l.stateNode);case 26:case 5:Nr(l,l.return),zn(l);break;case 22:l.memoizedState===null&&zn(l);break;case 30:zn(l);break;default:zn(l)}o=o.sibling}}function fn(o,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,E=o,O=l,q=O.flags;switch(O.tag){case 0:case 11:case 15:fn(E,O,d),Ki(4,O);break;case 1:if(fn(E,O,d),g=O,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ve){yt(g,g.return,ve)}if(g=O,E=g.updateQueue,E!==null){var Q=g.stateNode;try{var ie=E.shared.hiddenCallbacks;if(ie!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ie.length;E++)Du(ie[E],Q)}catch(ve){yt(g,g.return,ve)}}d&&q&64&&$c(O),Qi(O,O.return);break;case 27:Xc(O);case 26:case 5:fn(E,O,d),d&&g===null&&q&4&&qc(O),Qi(O,O.return);break;case 12:fn(E,O,d);break;case 13:fn(E,O,d),d&&q&4&&Jc(E,O);break;case 22:O.memoizedState===null&&fn(E,O,d),Qi(O,O.return);break;case 30:break;default:fn(E,O,d)}l=l.sibling}}function qs(o,l){var d=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==d&&(o!=null&&o.refCount++,d!=null&&Pi(d))}function Ws(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Pi(o))}function Mr(o,l,d,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)rp(o,l,d,g),l=l.sibling}function rp(o,l,d,g){var E=l.flags;switch(l.tag){case 0:case 11:case 15:Mr(o,l,d,g),E&2048&&Ki(9,l);break;case 1:Mr(o,l,d,g);break;case 3:Mr(o,l,d,g),E&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Pi(o)));break;case 12:if(E&2048){Mr(o,l,d,g),o=l.stateNode;try{var O=l.memoizedProps,q=O.id,Q=O.onPostCommit;typeof Q=="function"&&Q(q,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ie){yt(l,l.return,ie)}}else Mr(o,l,d,g);break;case 13:Mr(o,l,d,g);break;case 23:break;case 22:O=l.stateNode,q=l.alternate,l.memoizedState!==null?O._visibility&2?Mr(o,l,d,g):Zi(o,l):O._visibility&2?Mr(o,l,d,g):(O._visibility|=2,ci(o,l,d,g,(l.subtreeFlags&10256)!==0)),E&2048&&qs(q,l);break;case 24:Mr(o,l,d,g),E&2048&&Ws(l.alternate,l);break;default:Mr(o,l,d,g)}}function ci(o,l,d,g,E){for(E=E&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var O=o,q=l,Q=d,ie=g,ve=q.flags;switch(q.tag){case 0:case 11:case 15:ci(O,q,Q,ie,E),Ki(8,q);break;case 23:break;case 22:var Ee=q.stateNode;q.memoizedState!==null?Ee._visibility&2?ci(O,q,Q,ie,E):Zi(O,q):(Ee._visibility|=2,ci(O,q,Q,ie,E)),E&&ve&2048&&qs(q.alternate,q);break;case 24:ci(O,q,Q,ie,E),E&&ve&2048&&Ws(q.alternate,q);break;default:ci(O,q,Q,ie,E)}l=l.sibling}}function Zi(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=o,g=l,E=g.flags;switch(g.tag){case 22:Zi(d,g),E&2048&&qs(g.alternate,g);break;case 24:Zi(d,g),E&2048&&Ws(g.alternate,g);break;default:Zi(d,g)}l=l.sibling}}var Ji=8192;function pi(o){if(o.subtreeFlags&Ji)for(o=o.child;o!==null;)np(o),o=o.sibling}function np(o){switch(o.tag){case 26:pi(o),o.flags&Ji&&o.memoizedState!==null&&nf(Or,o.memoizedState,o.memoizedProps);break;case 5:pi(o);break;case 3:case 4:var l=Or;Or=go(o.stateNode.containerInfo),pi(o),Or=l;break;case 22:o.memoizedState===null&&(l=o.alternate,l!==null&&l.memoizedState!==null?(l=Ji,Ji=16777216,pi(o),Ji=l):pi(o));break;default:pi(o)}}function ip(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function ea(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];$t=g,op(g,o)}ip(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ap(o),o=o.sibling}function ap(o){switch(o.tag){case 0:case 11:case 15:ea(o),o.flags&2048&&dn(9,o,o.return);break;case 3:ea(o);break;case 12:ea(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,ro(o)):ea(o);break;default:ea(o)}}function ro(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var g=l[d];$t=g,op(g,o)}ip(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:dn(8,l,l.return),ro(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,ro(l));break;default:ro(l)}o=o.sibling}}function op(o,l){for(;$t!==null;){var d=$t;switch(d.tag){case 0:case 11:case 15:dn(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var g=d.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Pi(d.memoizedState.cache)}if(g=d.child,g!==null)g.return=d,$t=g;else e:for(d=o;$t!==null;){g=$t;var E=g.sibling,O=g.return;if(Qc(g),g===d){$t=null;break e}if(E!==null){E.return=O,$t=E;break e}$t=O}}}var yh={getCacheForType:function(o){var l=Kt(zt),d=l.data.get(o);return d===void 0&&(d=o(),l.data.set(o,d)),d}},bh=typeof WeakMap=="function"?WeakMap:Map,ht=0,bt=null,nt=null,st=0,ft=0,dr=null,gn=!1,di=!1,Xs=!1,Zr=0,At=0,vn=0,Fn=0,Ys=0,Cr=0,hi=0,ta=null,or=null,Ks=!1,Qs=0,no=1/0,io=null,mn=null,Wt=0,_n=null,fi=null,gi=0,Zs=0,Js=null,sp=null,ra=0,el=null;function hr(){if((ht&2)!==0&&st!==0)return st&-st;if(L.T!==null){var o=ri;return o!==0?o:sl()}return ae()}function lp(){Cr===0&&(Cr=(st&536870912)===0||pt?wr():536870912);var o=Sr.current;return o!==null&&(o.flags|=32),Cr}function fr(o,l,d){(o===bt&&(ft===2||ft===9)||o.cancelPendingCommit!==null)&&(vi(o,0),yn(o,st,Cr,!1)),Et(o,d),((ht&2)===0||o!==bt)&&(o===bt&&((ht&2)===0&&(Fn|=d),At===4&&yn(o,st,Cr,!1)),kr(o))}function up(o,l,d){if((ht&6)!==0)throw Error(a(327));var g=!d&&(l&124)===0&&(l&o.expiredLanes)===0||dt(o,l),E=g?Sh(o,l):nl(o,l,!0),O=g;do{if(E===0){di&&!g&&yn(o,l,0,!1);break}else{if(d=o.current.alternate,O&&!xh(d)){E=nl(o,l,!1),O=!1;continue}if(E===2){if(O=l,o.errorRecoveryDisabledLanes&O)var q=0;else q=o.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){l=q;e:{var Q=o;E=ta;var ie=Q.current.memoizedState.isDehydrated;if(ie&&(vi(Q,q).flags|=256),q=nl(Q,q,!1),q!==2){if(Xs&&!ie){Q.errorRecoveryDisabledLanes|=O,Fn|=O,E=4;break e}O=or,or=E,O!==null&&(or===null?or=O:or.push.apply(or,O))}E=q}if(O=!1,E!==2)continue}}if(E===1){vi(o,0),yn(o,l,0,!0);break}e:{switch(g=o,O=E,O){case 0:case 1:throw Error(a(345));case 4:if((l&4194048)!==l)break;case 6:yn(g,l,Cr,!gn);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(a(329))}if((l&62914560)===l&&(E=Qs+300-Oe(),10<E)){if(yn(g,l,Cr,!gn),at(g,0,!0)!==0)break e;g.timeoutHandle=Bp(cp.bind(null,g,d,or,io,Ks,l,Cr,Fn,hi,gn,O,2,-0,0),E);break e}cp(g,d,or,io,Ks,l,Cr,Fn,hi,gn,O,0,-0,0)}}break}while(!0);kr(o)}function cp(o,l,d,g,E,O,q,Q,ie,ve,Ee,Te,me,_e){if(o.timeoutHandle=-1,Te=l.subtreeFlags,(Te&8192||(Te&16785408)===16785408)&&(ua={stylesheets:null,count:0,unsuspend:rf},np(l),Te=af(),Te!==null)){o.cancelPendingCommit=Te(mp.bind(null,o,l,O,d,g,E,q,Q,ie,Ee,1,me,_e)),yn(o,O,q,!ve);return}mp(o,l,O,d,g,E,q,Q,ie)}function xh(o){for(var l=o;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var g=0;g<d.length;g++){var E=d[g],O=E.getSnapshot;E=E.value;try{if(!lr(O(),E))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function yn(o,l,d,g){l&=~Ys,l&=~Fn,o.suspendedLanes|=l,o.pingedLanes&=~l,g&&(o.warmLanes|=l),g=o.expirationTimes;for(var E=l;0<E;){var O=31-Qe(E),q=1<<O;g[O]=-1,E&=~q}d!==0&&Dt(o,d,l)}function ao(){return(ht&6)===0?(na(0),!1):!0}function tl(){if(nt!==null){if(ft===0)var o=nt.return;else o=nt,$r=Mn=null,_s(o),li=null,Wi=0,o=nt;for(;o!==null;)Hc(o.alternate,o),o=o.return;nt=null}}function vi(o,l){var d=o.timeoutHandle;d!==-1&&(o.timeoutHandle=-1,zh(d)),d=o.cancelPendingCommit,d!==null&&(o.cancelPendingCommit=null,d()),tl(),bt=o,nt=d=jr(o.current,null),st=l,ft=0,dr=null,gn=!1,di=dt(o,l),Xs=!1,hi=Cr=Ys=Fn=vn=At=0,or=ta=null,Ks=!1,(l&8)!==0&&(l|=l&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=l;0<g;){var E=31-Qe(g),O=1<<E;l|=o[E],g&=~O}return Zr=l,Ra(),d}function pp(o,l){Je=null,L.H=qa,l===Bi||l===Pa?(l=Ou(),ft=3):l===Tu?(l=Ou(),ft=4):ft=l===Ac?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,dr=l,nt===null&&(At=1,Qa(o,yr(l,o.current)))}function dp(){var o=L.H;return L.H=qa,o===null?qa:o}function hp(){var o=L.A;return L.A=yh,o}function rl(){At=4,gn||(st&4194048)!==st&&Sr.current!==null||(di=!0),(vn&134217727)===0&&(Fn&134217727)===0||bt===null||yn(bt,st,Cr,!1)}function nl(o,l,d){var g=ht;ht|=2;var E=dp(),O=hp();(bt!==o||st!==l)&&(io=null,vi(o,l)),l=!1;var q=At;e:do try{if(ft!==0&&nt!==null){var Q=nt,ie=dr;switch(ft){case 8:tl(),q=6;break e;case 3:case 2:case 9:case 6:Sr.current===null&&(l=!0);var ve=ft;if(ft=0,dr=null,mi(o,Q,ie,ve),d&&di){q=0;break e}break;default:ve=ft,ft=0,dr=null,mi(o,Q,ie,ve)}}Eh(),q=At;break}catch(Ee){pp(o,Ee)}while(!0);return l&&o.shellSuspendCounter++,$r=Mn=null,ht=g,L.H=E,L.A=O,nt===null&&(bt=null,st=0,Ra()),q}function Eh(){for(;nt!==null;)fp(nt)}function Sh(o,l){var d=ht;ht|=2;var g=dp(),E=hp();bt!==o||st!==l?(io=null,no=Oe()+500,vi(o,l)):di=dt(o,l);e:do try{if(ft!==0&&nt!==null){l=nt;var O=dr;t:switch(ft){case 1:ft=0,dr=null,mi(o,l,O,1);break;case 2:case 9:if(wu(O)){ft=0,dr=null,gp(l);break}l=function(){ft!==2&&ft!==9||bt!==o||(ft=7),kr(o)},O.then(l,l);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:wu(O)?(ft=0,dr=null,gp(l)):(ft=0,dr=null,mi(o,l,O,7));break;case 5:var q=null;switch(nt.tag){case 26:q=nt.memoizedState;case 5:case 27:var Q=nt;if(!q||Kp(q)){ft=0,dr=null;var ie=Q.sibling;if(ie!==null)nt=ie;else{var ve=Q.return;ve!==null?(nt=ve,oo(ve)):nt=null}break t}}ft=0,dr=null,mi(o,l,O,5);break;case 6:ft=0,dr=null,mi(o,l,O,6);break;case 8:tl(),At=6;break e;default:throw Error(a(462))}}Ch();break}catch(Ee){pp(o,Ee)}while(!0);return $r=Mn=null,L.H=g,L.A=E,ht=d,nt!==null?0:(bt=null,st=0,Ra(),At)}function Ch(){for(;nt!==null&&!Re();)fp(nt)}function fp(o){var l=jc(o.alternate,o,Zr);o.memoizedProps=o.pendingProps,l===null?oo(o):nt=l}function gp(o){var l=o,d=l.alternate;switch(l.tag){case 15:case 0:l=kc(d,l,l.pendingProps,l.type,void 0,st);break;case 11:l=kc(d,l,l.pendingProps,l.type.render,l.ref,st);break;case 5:_s(l);default:Hc(d,l),l=nt=vu(l,Zr),l=jc(d,l,Zr)}o.memoizedProps=o.pendingProps,l===null?oo(o):nt=l}function mi(o,l,d,g){$r=Mn=null,_s(l),li=null,Wi=0;var E=l.return;try{if(hh(o,E,l,d,st)){At=1,Qa(o,yr(d,o.current)),nt=null;return}}catch(O){if(E!==null)throw nt=E,O;At=1,Qa(o,yr(d,o.current)),nt=null;return}l.flags&32768?(pt||g===1?o=!0:di||(st&536870912)!==0?o=!1:(gn=o=!0,(g===2||g===9||g===3||g===6)&&(g=Sr.current,g!==null&&g.tag===13&&(g.flags|=16384))),vp(l,o)):oo(l)}function oo(o){var l=o;do{if((l.flags&32768)!==0){vp(l,gn);return}o=l.return;var d=gh(l.alternate,l,Zr);if(d!==null){nt=d;return}if(l=l.sibling,l!==null){nt=l;return}nt=l=o}while(l!==null);At===0&&(At=5)}function vp(o,l){do{var d=vh(o.alternate,o);if(d!==null){d.flags&=32767,nt=d;return}if(d=o.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(o=o.sibling,o!==null)){nt=o;return}nt=o=d}while(o!==null);At=6,nt=null}function mp(o,l,d,g,E,O,q,Q,ie){o.cancelPendingCommit=null;do so();while(Wt!==0);if((ht&6)!==0)throw Error(a(327));if(l!==null){if(l===o.current)throw Error(a(177));if(O=l.lanes|l.childLanes,O|=Wo,jt(o,d,O,q,Q,ie),o===bt&&(nt=bt=null,st=0),fi=l,_n=o,gi=d,Zs=O,Js=E,sp=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Oh(He,function(){return Ep(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=L.T,L.T=null,E=W.p,W.p=2,q=ht,ht|=4;try{mh(o,l,d)}finally{ht=q,W.p=E,L.T=g}}Wt=1,_p(),yp(),bp()}}function _p(){if(Wt===1){Wt=0;var o=_n,l=fi,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=L.T,L.T=null;var g=W.p;W.p=2;var E=ht;ht|=4;try{ep(l,o);var O=vl,q=ou(o.containerInfo),Q=O.focusedElem,ie=O.selectionRange;if(q!==Q&&Q&&Q.ownerDocument&&au(Q.ownerDocument.documentElement,Q)){if(ie!==null&&Uo(Q)){var ve=ie.start,Ee=ie.end;if(Ee===void 0&&(Ee=ve),"selectionStart"in Q)Q.selectionStart=ve,Q.selectionEnd=Math.min(Ee,Q.value.length);else{var Te=Q.ownerDocument||document,me=Te&&Te.defaultView||window;if(me.getSelection){var _e=me.getSelection(),We=Q.textContent.length,$e=Math.min(ie.start,We),_t=ie.end===void 0?$e:Math.min(ie.end,We);!_e.extend&&$e>_t&&(q=_t,_t=$e,$e=q);var pe=iu(Q,$e),le=iu(Q,_t);if(pe&&le&&(_e.rangeCount!==1||_e.anchorNode!==pe.node||_e.anchorOffset!==pe.offset||_e.focusNode!==le.node||_e.focusOffset!==le.offset)){var fe=Te.createRange();fe.setStart(pe.node,pe.offset),_e.removeAllRanges(),$e>_t?(_e.addRange(fe),_e.extend(le.node,le.offset)):(fe.setEnd(le.node,le.offset),_e.addRange(fe))}}}}for(Te=[],_e=Q;_e=_e.parentNode;)_e.nodeType===1&&Te.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<Te.length;Q++){var Ce=Te[Q];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}bo=!!fl,vl=fl=null}finally{ht=E,W.p=g,L.T=d}}o.current=l,Wt=2}}function yp(){if(Wt===2){Wt=0;var o=_n,l=fi,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=L.T,L.T=null;var g=W.p;W.p=2;var E=ht;ht|=4;try{Kc(o,l.alternate,l)}finally{ht=E,W.p=g,L.T=d}}Wt=3}}function bp(){if(Wt===4||Wt===3){Wt=0,Le();var o=_n,l=fi,d=gi,g=sp;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Wt=5:(Wt=0,fi=_n=null,xp(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(mn=null),Bt(d),l=l.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(ot,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=L.T,E=W.p,W.p=2,L.T=null;try{for(var O=o.onRecoverableError,q=0;q<g.length;q++){var Q=g[q];O(Q.value,{componentStack:Q.stack})}}finally{L.T=l,W.p=E}}(gi&3)!==0&&so(),kr(o),E=o.pendingLanes,(d&4194090)!==0&&(E&42)!==0?o===el?ra++:(ra=0,el=o):ra=0,na(0)}}function xp(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Pi(l)))}function so(o){return _p(),yp(),bp(),Ep()}function Ep(){if(Wt!==5)return!1;var o=_n,l=Zs;Zs=0;var d=Bt(gi),g=L.T,E=W.p;try{W.p=32>d?32:d,L.T=null,d=Js,Js=null;var O=_n,q=gi;if(Wt=0,fi=_n=null,gi=0,(ht&6)!==0)throw Error(a(331));var Q=ht;if(ht|=4,ap(O.current),rp(O,O.current,q,d),ht=Q,na(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(ot,O)}catch{}return!0}finally{W.p=E,L.T=g,xp(o,l)}}function Sp(o,l,d){l=yr(d,l),l=Is(o.stateNode,l,2),o=ln(o,l,2),o!==null&&(Et(o,2),kr(o))}function yt(o,l,d){if(o.tag===3)Sp(o,o,d);else for(;l!==null;){if(l.tag===3){Sp(l,o,d);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(mn===null||!mn.has(g))){o=yr(d,o),d=Rc(2),g=ln(l,d,2),g!==null&&(Oc(d,g,l,o),Et(g,2),kr(g));break}}l=l.return}}function il(o,l,d){var g=o.pingCache;if(g===null){g=o.pingCache=new bh;var E=new Set;g.set(l,E)}else E=g.get(l),E===void 0&&(E=new Set,g.set(l,E));E.has(d)||(Xs=!0,E.add(d),o=Th.bind(null,o,l,d),l.then(o,o))}function Th(o,l,d){var g=o.pingCache;g!==null&&g.delete(l),o.pingedLanes|=o.suspendedLanes&d,o.warmLanes&=~d,bt===o&&(st&d)===d&&(At===4||At===3&&(st&62914560)===st&&300>Oe()-Qs?(ht&2)===0&&vi(o,0):Ys|=d,hi===st&&(hi=0)),kr(o)}function Cp(o,l){l===0&&(l=Un()),o=Zn(o,l),o!==null&&(Et(o,l),kr(o))}function wh(o){var l=o.memoizedState,d=0;l!==null&&(d=l.retryLane),Cp(o,d)}function Rh(o,l){var d=0;switch(o.tag){case 13:var g=o.stateNode,E=o.memoizedState;E!==null&&(d=E.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(a(314))}g!==null&&g.delete(l),Cp(o,d)}function Oh(o,l){return be(o,l)}var lo=null,_i=null,al=!1,uo=!1,ol=!1,jn=0;function kr(o){o!==_i&&o.next===null&&(_i===null?lo=_i=o:_i=_i.next=o),uo=!0,al||(al=!0,Dh())}function na(o,l){if(!ol&&uo){ol=!0;do for(var d=!1,g=lo;g!==null;){if(o!==0){var E=g.pendingLanes;if(E===0)var O=0;else{var q=g.suspendedLanes,Q=g.pingedLanes;O=(1<<31-Qe(42|o)+1)-1,O&=E&~(q&~Q),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(d=!0,Op(g,O))}else O=st,O=at(g,g===bt?O:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(O&3)===0||dt(g,O)||(d=!0,Op(g,O));g=g.next}while(d);ol=!1}}function Ah(){Tp()}function Tp(){uo=al=!1;var o=0;jn!==0&&(Bh()&&(o=jn),jn=0);for(var l=Oe(),d=null,g=lo;g!==null;){var E=g.next,O=wp(g,l);O===0?(g.next=null,d===null?lo=E:d.next=E,E===null&&(_i=d)):(d=g,(o!==0||(O&3)!==0)&&(uo=!0)),g=E}na(o)}function wp(o,l){for(var d=o.suspendedLanes,g=o.pingedLanes,E=o.expirationTimes,O=o.pendingLanes&-62914561;0<O;){var q=31-Qe(O),Q=1<<q,ie=E[q];ie===-1?((Q&d)===0||(Q&g)!==0)&&(E[q]=tr(Q,l)):ie<=l&&(o.expiredLanes|=Q),O&=~Q}if(l=bt,d=st,d=at(o,o===l?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,d===0||o===l&&(ft===2||ft===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&ye(g),o.callbackNode=null,o.callbackPriority=0;if((d&3)===0||dt(o,d)){if(l=d&-d,l===o.callbackPriority)return l;switch(g!==null&&ye(g),Bt(d)){case 2:case 8:d=rt;break;case 32:d=He;break;case 268435456:d=xt;break;default:d=He}return g=Rp.bind(null,o),d=be(d,g),o.callbackPriority=l,o.callbackNode=d,l}return g!==null&&g!==null&&ye(g),o.callbackPriority=2,o.callbackNode=null,2}function Rp(o,l){if(Wt!==0&&Wt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var d=o.callbackNode;if(so()&&o.callbackNode!==d)return null;var g=st;return g=at(o,o===bt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(up(o,g,l),wp(o,Oe()),o.callbackNode!=null&&o.callbackNode===d?Rp.bind(null,o):null)}function Op(o,l){if(so())return null;up(o,l,!0)}function Dh(){Fh(function(){(ht&6)!==0?be(qe,Ah):Tp()})}function sl(){return jn===0&&(jn=wr()),jn}function Ap(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ba(""+o)}function Dp(o,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,o.id&&d.setAttribute("form",o.id),l.parentNode.insertBefore(d,l),o=new FormData(o),d.parentNode.removeChild(d),o}function Lh(o,l,d,g,E){if(l==="submit"&&d&&d.stateNode===E){var O=Ap((E[we]||null).action),q=g.submitter;q&&(l=(l=q[we]||null)?Ap(l.formAction):q.getAttribute("formAction"),l!==null&&(O=l,q=null));var Q=new Ca("action","action",null,g,E);o.push({event:Q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(jn!==0){var ie=q?Dp(E,q):new FormData(E);Rs(d,{pending:!0,data:ie,method:E.method,action:O},null,ie)}}else typeof O=="function"&&(Q.preventDefault(),ie=q?Dp(E,q):new FormData(E),Rs(d,{pending:!0,data:ie,method:E.method,action:O},O,ie))},currentTarget:E}]})}}for(var ll=0;ll<qo.length;ll++){var ul=qo[ll],Ih=ul.toLowerCase(),Nh=ul[0].toUpperCase()+ul.slice(1);Rr(Ih,"on"+Nh)}Rr(uu,"onAnimationEnd"),Rr(cu,"onAnimationIteration"),Rr(pu,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Kd,"onTransitionRun"),Rr(Qd,"onTransitionStart"),Rr(Zd,"onTransitionCancel"),Rr(du,"onTransitionEnd"),Qt("onMouseEnter",["mouseout","mouseover"]),Qt("onMouseLeave",["mouseout","mouseover"]),Qt("onPointerEnter",["pointerout","pointerover"]),Qt("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ia));function Lp(o,l){l=(l&4)!==0;for(var d=0;d<o.length;d++){var g=o[d],E=g.event;g=g.listeners;e:{var O=void 0;if(l)for(var q=g.length-1;0<=q;q--){var Q=g[q],ie=Q.instance,ve=Q.currentTarget;if(Q=Q.listener,ie!==O&&E.isPropagationStopped())break e;O=Q,E.currentTarget=ve;try{O(E)}catch(Ee){Ka(Ee)}E.currentTarget=null,O=ie}else for(q=0;q<g.length;q++){if(Q=g[q],ie=Q.instance,ve=Q.currentTarget,Q=Q.listener,ie!==O&&E.isPropagationStopped())break e;O=Q,E.currentTarget=ve;try{O(E)}catch(Ee){Ka(Ee)}E.currentTarget=null,O=ie}}}}function it(o,l){var d=l[Ne];d===void 0&&(d=l[Ne]=new Set);var g=o+"__bubble";d.has(g)||(Ip(l,o,2,!1),d.add(g))}function cl(o,l,d){var g=0;l&&(g|=4),Ip(d,o,g,l)}var co="_reactListening"+Math.random().toString(36).slice(2);function pl(o){if(!o[co]){o[co]=!0,gt.forEach(function(d){d!=="selectionchange"&&(Mh.has(d)||cl(d,!1,o),cl(d,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[co]||(l[co]=!0,cl("selectionchange",!1,l))}}function Ip(o,l,d,g){switch(rd(l)){case 2:var E=lf;break;case 8:E=uf;break;default:E=wl}d=E.bind(null,l,d,o),E=void 0,!No||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(E=!0),g?E!==void 0?o.addEventListener(l,d,{capture:!0,passive:E}):o.addEventListener(l,d,!0):E!==void 0?o.addEventListener(l,d,{passive:E}):o.addEventListener(l,d,!1)}function dl(o,l,d,g,E){var O=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var q=g.tag;if(q===3||q===4){var Q=g.stateNode.containerInfo;if(Q===E)break;if(q===4)for(q=g.return;q!==null;){var ie=q.tag;if((ie===3||ie===4)&&q.stateNode.containerInfo===E)return;q=q.return}for(;Q!==null;){if(q=Ze(Q),q===null)return;if(ie=q.tag,ie===5||ie===6||ie===26||ie===27){g=O=q;continue e}Q=Q.parentNode}}g=g.return}zl(function(){var ve=O,Ee=Lo(d),Te=[];e:{var me=hu.get(o);if(me!==void 0){var _e=Ca,We=o;switch(o){case"keypress":if(Ea(d)===0)break e;case"keydown":case"keyup":_e=Od;break;case"focusin":We="focus",_e=Go;break;case"focusout":We="blur",_e=Go;break;case"beforeblur":case"afterblur":_e=Go;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Ld;break;case uu:case cu:case pu:_e=yd;break;case du:_e=Nd;break;case"scroll":case"scrollend":_e=fd;break;case"wheel":_e=kd;break;case"copy":case"cut":case"paste":_e=xd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=$l;break;case"toggle":case"beforetoggle":_e=Gd}var $e=(l&4)!==0,_t=!$e&&(o==="scroll"||o==="scrollend"),pe=$e?me!==null?me+"Capture":null:me;$e=[];for(var le=ve,fe;le!==null;){var Ce=le;if(fe=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||fe===null||pe===null||(Ce=Si(le,pe),Ce!=null&&$e.push(aa(le,Ce,fe))),_t)break;le=le.return}0<$e.length&&(me=new _e(me,We,null,d,Ee),Te.push({event:me,listeners:$e}))}}if((l&7)===0){e:{if(me=o==="mouseover"||o==="pointerover",_e=o==="mouseout"||o==="pointerout",me&&d!==Do&&(We=d.relatedTarget||d.fromElement)&&(Ze(We)||We[De]))break e;if((_e||me)&&(me=Ee.window===Ee?Ee:(me=Ee.ownerDocument)?me.defaultView||me.parentWindow:window,_e?(We=d.relatedTarget||d.toElement,_e=ve,We=We?Ze(We):null,We!==null&&(_t=u(We),$e=We.tag,We!==_t||$e!==5&&$e!==27&&$e!==6)&&(We=null)):(_e=null,We=ve),_e!==We)){if($e=Ul,Ce="onMouseLeave",pe="onMouseEnter",le="mouse",(o==="pointerout"||o==="pointerover")&&($e=$l,Ce="onPointerLeave",pe="onPointerEnter",le="pointer"),_t=_e==null?me:St(_e),fe=We==null?me:St(We),me=new $e(Ce,le+"leave",_e,d,Ee),me.target=_t,me.relatedTarget=fe,Ce=null,Ze(Ee)===ve&&($e=new $e(pe,le+"enter",We,d,Ee),$e.target=fe,$e.relatedTarget=_t,Ce=$e),_t=Ce,_e&&We)t:{for($e=_e,pe=We,le=0,fe=$e;fe;fe=yi(fe))le++;for(fe=0,Ce=pe;Ce;Ce=yi(Ce))fe++;for(;0<le-fe;)$e=yi($e),le--;for(;0<fe-le;)pe=yi(pe),fe--;for(;le--;){if($e===pe||pe!==null&&$e===pe.alternate)break t;$e=yi($e),pe=yi(pe)}$e=null}else $e=null;_e!==null&&Np(Te,me,_e,$e,!1),We!==null&&_t!==null&&Np(Te,_t,We,$e,!0)}}e:{if(me=ve?St(ve):window,_e=me.nodeName&&me.nodeName.toLowerCase(),_e==="select"||_e==="input"&&me.type==="file")var Pe=Zl;else if(Kl(me))if(Jl)Pe=Wd;else{Pe=Vd;var tt=$d}else _e=me.nodeName,!_e||_e.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?ve&&Ao(ve.elementType)&&(Pe=Zl):Pe=qd;if(Pe&&(Pe=Pe(o,ve))){Ql(Te,Pe,d,Ee);break e}tt&&tt(o,me,ve),o==="focusout"&&ve&&me.type==="number"&&ve.memoizedProps.value!=null&&Oo(me,"number",me.value)}switch(tt=ve?St(ve):window,o){case"focusin":(Kl(tt)||tt.contentEditable==="true")&&(Yn=tt,Ho=ve,Li=null);break;case"focusout":Li=Ho=Yn=null;break;case"mousedown":$o=!0;break;case"contextmenu":case"mouseup":case"dragend":$o=!1,su(Te,d,Ee);break;case"selectionchange":if(Yd)break;case"keydown":case"keyup":su(Te,d,Ee)}var je;if(zo)e:{switch(o){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Xn?Xl(o,d)&&(Ve="onCompositionEnd"):o==="keydown"&&d.keyCode===229&&(Ve="onCompositionStart");Ve&&(Vl&&d.locale!=="ko"&&(Xn||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Xn&&(je=Fl()):(nn=Ee,Mo="value"in nn?nn.value:nn.textContent,Xn=!0)),tt=po(ve,Ve),0<tt.length&&(Ve=new Hl(Ve,o,null,d,Ee),Te.push({event:Ve,listeners:tt}),je?Ve.data=je:(je=Yl(d),je!==null&&(Ve.data=je)))),(je=zd?Fd(o,d):jd(o,d))&&(Ve=po(ve,"onBeforeInput"),0<Ve.length&&(tt=new Hl("onBeforeInput","beforeinput",null,d,Ee),Te.push({event:tt,listeners:Ve}),tt.data=je)),Lh(Te,o,ve,d,Ee)}Lp(Te,l)})}function aa(o,l,d){return{instance:o,listener:l,currentTarget:d}}function po(o,l){for(var d=l+"Capture",g=[];o!==null;){var E=o,O=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||O===null||(E=Si(o,d),E!=null&&g.unshift(aa(o,E,O)),E=Si(o,l),E!=null&&g.push(aa(o,E,O))),o.tag===3)return g;o=o.return}return[]}function yi(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Np(o,l,d,g,E){for(var O=l._reactName,q=[];d!==null&&d!==g;){var Q=d,ie=Q.alternate,ve=Q.stateNode;if(Q=Q.tag,ie!==null&&ie===g)break;Q!==5&&Q!==26&&Q!==27||ve===null||(ie=ve,E?(ve=Si(d,O),ve!=null&&q.unshift(aa(d,ve,ie))):E||(ve=Si(d,O),ve!=null&&q.push(aa(d,ve,ie)))),d=d.return}q.length!==0&&o.push({event:l,listeners:q})}var kh=/\r\n?/g,Ph=/\u0000|\uFFFD/g;function Mp(o){return(typeof o=="string"?o:""+o).replace(kh,`
`).replace(Ph,"")}function kp(o,l){return l=Mp(l),Mp(o)===l}function ho(){}function mt(o,l,d,g,E,O){switch(d){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Vn(o,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Vn(o,""+g);break;case"className":Br(o,"class",g);break;case"tabIndex":Br(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Br(o,d,g);break;case"style":Gl(o,g,O);break;case"data":if(l!=="object"){Br(o,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||d!=="href")){o.removeAttribute(d);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(d);break}g=ba(""+g),o.setAttribute(d,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(d==="formAction"?(l!=="input"&&mt(o,l,"name",E.name,E,null),mt(o,l,"formEncType",E.formEncType,E,null),mt(o,l,"formMethod",E.formMethod,E,null),mt(o,l,"formTarget",E.formTarget,E,null)):(mt(o,l,"encType",E.encType,E,null),mt(o,l,"method",E.method,E,null),mt(o,l,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(d);break}g=ba(""+g),o.setAttribute(d,g);break;case"onClick":g!=null&&(o.onclick=ho);break;case"onScroll":g!=null&&it("scroll",o);break;case"onScrollEnd":g!=null&&it("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(d=g.__html,d!=null){if(E.children!=null)throw Error(a(60));o.innerHTML=d}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}d=ba(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(d,""+g):o.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(d,""):o.removeAttribute(d);break;case"capture":case"download":g===!0?o.setAttribute(d,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(d,g):o.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(d,g):o.removeAttribute(d);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(d):o.setAttribute(d,g);break;case"popover":it("beforetoggle",o),it("toggle",o),Gr(o,"popover",g);break;case"xlinkActuate":Ke(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ke(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ke(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ke(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ke(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ke(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ke(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ke(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ke(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Gr(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=dd.get(d)||d,Gr(o,d,g))}}function hl(o,l,d,g,E,O){switch(d){case"style":Gl(o,g,O);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(a(61));if(d=g.__html,d!=null){if(E.children!=null)throw Error(a(60));o.innerHTML=d}}break;case"children":typeof g=="string"?Vn(o,g):(typeof g=="number"||typeof g=="bigint")&&Vn(o,""+g);break;case"onScroll":g!=null&&it("scroll",o);break;case"onScrollEnd":g!=null&&it("scrollend",o);break;case"onClick":g!=null&&(o.onclick=ho);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dr.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(E=d.endsWith("Capture"),l=d.slice(2,E?d.length-7:void 0),O=o[we]||null,O=O!=null?O[d]:null,typeof O=="function"&&o.removeEventListener(l,O,E),typeof g=="function")){typeof O!="function"&&O!==null&&(d in o?o[d]=null:o.hasAttribute(d)&&o.removeAttribute(d)),o.addEventListener(l,g,E);break e}d in o?o[d]=g:g===!0?o.setAttribute(d,""):Gr(o,d,g)}}}function Xt(o,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",o),it("load",o);var g=!1,E=!1,O;for(O in d)if(d.hasOwnProperty(O)){var q=d[O];if(q!=null)switch(O){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:mt(o,l,O,q,d,null)}}E&&mt(o,l,"srcSet",d.srcSet,d,null),g&&mt(o,l,"src",d.src,d,null);return;case"input":it("invalid",o);var Q=O=q=E=null,ie=null,ve=null;for(g in d)if(d.hasOwnProperty(g)){var Ee=d[g];if(Ee!=null)switch(g){case"name":E=Ee;break;case"type":q=Ee;break;case"checked":ie=Ee;break;case"defaultChecked":ve=Ee;break;case"value":O=Ee;break;case"defaultValue":Q=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,l));break;default:mt(o,l,g,Ee,d,null)}}Nl(o,O,Q,ie,ve,q,E,!1),ma(o);return;case"select":it("invalid",o),g=q=O=null;for(E in d)if(d.hasOwnProperty(E)&&(Q=d[E],Q!=null))switch(E){case"value":O=Q;break;case"defaultValue":q=Q;break;case"multiple":g=Q;default:mt(o,l,E,Q,d,null)}l=O,d=q,o.multiple=!!g,l!=null?$n(o,!!g,l,!1):d!=null&&$n(o,!!g,d,!0);return;case"textarea":it("invalid",o),O=E=g=null;for(q in d)if(d.hasOwnProperty(q)&&(Q=d[q],Q!=null))switch(q){case"value":g=Q;break;case"defaultValue":E=Q;break;case"children":O=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(91));break;default:mt(o,l,q,Q,d,null)}kl(o,g,E,O),ma(o);return;case"option":for(ie in d)if(d.hasOwnProperty(ie)&&(g=d[ie],g!=null))switch(ie){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:mt(o,l,ie,g,d,null)}return;case"dialog":it("beforetoggle",o),it("toggle",o),it("cancel",o),it("close",o);break;case"iframe":case"object":it("load",o);break;case"video":case"audio":for(g=0;g<ia.length;g++)it(ia[g],o);break;case"image":it("error",o),it("load",o);break;case"details":it("toggle",o);break;case"embed":case"source":case"link":it("error",o),it("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in d)if(d.hasOwnProperty(ve)&&(g=d[ve],g!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,l));default:mt(o,l,ve,g,d,null)}return;default:if(Ao(l)){for(Ee in d)d.hasOwnProperty(Ee)&&(g=d[Ee],g!==void 0&&hl(o,l,Ee,g,d,void 0));return}}for(Q in d)d.hasOwnProperty(Q)&&(g=d[Q],g!=null&&mt(o,l,Q,g,d,null))}function Gh(o,l,d,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,O=null,q=null,Q=null,ie=null,ve=null,Ee=null;for(_e in d){var Te=d[_e];if(d.hasOwnProperty(_e)&&Te!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":ie=Te;default:g.hasOwnProperty(_e)||mt(o,l,_e,null,g,Te)}}for(var me in g){var _e=g[me];if(Te=d[me],g.hasOwnProperty(me)&&(_e!=null||Te!=null))switch(me){case"type":O=_e;break;case"name":E=_e;break;case"checked":ve=_e;break;case"defaultChecked":Ee=_e;break;case"value":q=_e;break;case"defaultValue":Q=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(a(137,l));break;default:_e!==Te&&mt(o,l,me,_e,g,Te)}}Ro(o,q,Q,ie,ve,Ee,O,E);return;case"select":_e=q=Q=me=null;for(O in d)if(ie=d[O],d.hasOwnProperty(O)&&ie!=null)switch(O){case"value":break;case"multiple":_e=ie;default:g.hasOwnProperty(O)||mt(o,l,O,null,g,ie)}for(E in g)if(O=g[E],ie=d[E],g.hasOwnProperty(E)&&(O!=null||ie!=null))switch(E){case"value":me=O;break;case"defaultValue":Q=O;break;case"multiple":q=O;default:O!==ie&&mt(o,l,E,O,g,ie)}l=Q,d=q,g=_e,me!=null?$n(o,!!d,me,!1):!!g!=!!d&&(l!=null?$n(o,!!d,l,!0):$n(o,!!d,d?[]:"",!1));return;case"textarea":_e=me=null;for(Q in d)if(E=d[Q],d.hasOwnProperty(Q)&&E!=null&&!g.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:mt(o,l,Q,null,g,E)}for(q in g)if(E=g[q],O=d[q],g.hasOwnProperty(q)&&(E!=null||O!=null))switch(q){case"value":me=E;break;case"defaultValue":_e=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:E!==O&&mt(o,l,q,E,g,O)}Ml(o,me,_e);return;case"option":for(var We in d)if(me=d[We],d.hasOwnProperty(We)&&me!=null&&!g.hasOwnProperty(We))switch(We){case"selected":o.selected=!1;break;default:mt(o,l,We,null,g,me)}for(ie in g)if(me=g[ie],_e=d[ie],g.hasOwnProperty(ie)&&me!==_e&&(me!=null||_e!=null))switch(ie){case"selected":o.selected=me&&typeof me!="function"&&typeof me!="symbol";break;default:mt(o,l,ie,me,g,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in d)me=d[$e],d.hasOwnProperty($e)&&me!=null&&!g.hasOwnProperty($e)&&mt(o,l,$e,null,g,me);for(ve in g)if(me=g[ve],_e=d[ve],g.hasOwnProperty(ve)&&me!==_e&&(me!=null||_e!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,l));break;default:mt(o,l,ve,me,g,_e)}return;default:if(Ao(l)){for(var _t in d)me=d[_t],d.hasOwnProperty(_t)&&me!==void 0&&!g.hasOwnProperty(_t)&&hl(o,l,_t,void 0,g,me);for(Ee in g)me=g[Ee],_e=d[Ee],!g.hasOwnProperty(Ee)||me===_e||me===void 0&&_e===void 0||hl(o,l,Ee,me,g,_e);return}}for(var pe in d)me=d[pe],d.hasOwnProperty(pe)&&me!=null&&!g.hasOwnProperty(pe)&&mt(o,l,pe,null,g,me);for(Te in g)me=g[Te],_e=d[Te],!g.hasOwnProperty(Te)||me===_e||me==null&&_e==null||mt(o,l,Te,me,g,_e)}var fl=null,vl=null;function fo(o){return o.nodeType===9?o:o.ownerDocument}function Pp(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gp(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function ml(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _l=null;function Bh(){var o=window.event;return o&&o.type==="popstate"?o===_l?!1:(_l=o,!0):(_l=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,zh=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,Fh=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(o){return zp.resolve(null).then(o).catch(jh)}:Bp;function jh(o){setTimeout(function(){throw o})}function bn(o){return o==="head"}function Fp(o,l){var d=l,g=0,E=0;do{var O=d.nextSibling;if(o.removeChild(d),O&&O.nodeType===8)if(d=O.data,d==="/$"){if(0<g&&8>g){d=g;var q=o.ownerDocument;if(d&1&&oa(q.documentElement),d&2&&oa(q.body),d&4)for(d=q.head,oa(d),q=d.firstChild;q;){var Q=q.nextSibling,ie=q.nodeName;q[ke]||ie==="SCRIPT"||ie==="STYLE"||ie==="LINK"&&q.rel.toLowerCase()==="stylesheet"||d.removeChild(q),q=Q}}if(E===0){o.removeChild(O),fa(l);return}E--}else d==="$"||d==="$?"||d==="$!"?E++:g=d.charCodeAt(0)-48;else g=0;d=O}while(d);fa(l)}function yl(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":yl(d),Be(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}o.removeChild(d)}}function Uh(o,l,d,g){for(;o.nodeType===1;){var E=d;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[ke])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(O=o.getAttribute("rel"),O==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(O!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(O=o.getAttribute("src"),(O!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&O&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var O=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===O)return o}else return o;if(o=Ar(o.nextSibling),o===null)break}return null}function Hh(o,l,d){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!d||(o=Ar(o.nextSibling),o===null))return null;return o}function bl(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function $h(o,l){var d=o.ownerDocument;if(o.data!=="$?"||d.readyState==="complete")l();else{var g=function(){l(),d.removeEventListener("DOMContentLoaded",g)};d.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function Ar(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return o}var xl=null;function jp(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var d=o.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return o;l--}else d==="/$"&&l++}o=o.previousSibling}return null}function Up(o,l,d){switch(l=fo(d),o){case"html":if(o=l.documentElement,!o)throw Error(a(452));return o;case"head":if(o=l.head,!o)throw Error(a(453));return o;case"body":if(o=l.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function oa(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);Be(o)}var Tr=new Map,Hp=new Set;function go(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Jr=W.d;W.d={f:Vh,r:qh,D:Wh,C:Xh,L:Yh,m:Kh,X:Zh,S:Qh,M:Jh};function Vh(){var o=Jr.f(),l=ao();return o||l}function qh(o){var l=ct(o);l!==null&&l.tag===5&&l.type==="form"?uc(l):Jr.r(o)}var bi=typeof document>"u"?null:document;function $p(o,l,d){var g=bi;if(g&&typeof l=="string"&&l){var E=_r(l);E='link[rel="'+o+'"][href="'+E+'"]',typeof d=="string"&&(E+='[crossorigin="'+d+'"]'),Hp.has(E)||(Hp.add(E),o={rel:o,crossOrigin:d,href:l},g.querySelector(E)===null&&(l=g.createElement("link"),Xt(l,"link",o),Ye(l),g.head.appendChild(l)))}}function Wh(o){Jr.D(o),$p("dns-prefetch",o,null)}function Xh(o,l){Jr.C(o,l),$p("preconnect",o,l)}function Yh(o,l,d){Jr.L(o,l,d);var g=bi;if(g&&o&&l){var E='link[rel="preload"][as="'+_r(l)+'"]';l==="image"&&d&&d.imageSrcSet?(E+='[imagesrcset="'+_r(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(E+='[imagesizes="'+_r(d.imageSizes)+'"]')):E+='[href="'+_r(o)+'"]';var O=E;switch(l){case"style":O=xi(o);break;case"script":O=Ei(o)}Tr.has(O)||(o=_({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:o,as:l},d),Tr.set(O,o),g.querySelector(E)!==null||l==="style"&&g.querySelector(sa(O))||l==="script"&&g.querySelector(la(O))||(l=g.createElement("link"),Xt(l,"link",o),Ye(l),g.head.appendChild(l)))}}function Kh(o,l){Jr.m(o,l);var d=bi;if(d&&o){var g=l&&typeof l.as=="string"?l.as:"script",E='link[rel="modulepreload"][as="'+_r(g)+'"][href="'+_r(o)+'"]',O=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Ei(o)}if(!Tr.has(O)&&(o=_({rel:"modulepreload",href:o},l),Tr.set(O,o),d.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(la(O)))return}g=d.createElement("link"),Xt(g,"link",o),Ye(g),d.head.appendChild(g)}}}function Qh(o,l,d){Jr.S(o,l,d);var g=bi;if(g&&o){var E=Rt(g).hoistableStyles,O=xi(o);l=l||"default";var q=E.get(O);if(!q){var Q={loading:0,preload:null};if(q=g.querySelector(sa(O)))Q.loading=5;else{o=_({rel:"stylesheet",href:o,"data-precedence":l},d),(d=Tr.get(O))&&El(o,d);var ie=q=g.createElement("link");Ye(ie),Xt(ie,"link",o),ie._p=new Promise(function(ve,Ee){ie.onload=ve,ie.onerror=Ee}),ie.addEventListener("load",function(){Q.loading|=1}),ie.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,vo(q,l,g)}q={type:"stylesheet",instance:q,count:1,state:Q},E.set(O,q)}}}function Zh(o,l){Jr.X(o,l);var d=bi;if(d&&o){var g=Rt(d).hoistableScripts,E=Ei(o),O=g.get(E);O||(O=d.querySelector(la(E)),O||(o=_({src:o,async:!0},l),(l=Tr.get(E))&&Sl(o,l),O=d.createElement("script"),Ye(O),Xt(O,"link",o),d.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},g.set(E,O))}}function Jh(o,l){Jr.M(o,l);var d=bi;if(d&&o){var g=Rt(d).hoistableScripts,E=Ei(o),O=g.get(E);O||(O=d.querySelector(la(E)),O||(o=_({src:o,async:!0,type:"module"},l),(l=Tr.get(E))&&Sl(o,l),O=d.createElement("script"),Ye(O),Xt(O,"link",o),d.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},g.set(E,O))}}function Vp(o,l,d,g){var E=(E=de.current)?go(E):null;if(!E)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=xi(d.href),d=Rt(E).hoistableStyles,g=d.get(l),g||(g={type:"style",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){o=xi(d.href);var O=Rt(E).hoistableStyles,q=O.get(o);if(q||(E=E.ownerDocument||E,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(o,q),(O=E.querySelector(sa(o)))&&!O._p&&(q.instance=O,q.state.loading=5),Tr.has(o)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Tr.set(o,d),O||ef(E,o,d,q.state))),l&&g===null)throw Error(a(528,""));return q}if(l&&g!==null)throw Error(a(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ei(d),d=Rt(E).hoistableScripts,g=d.get(l),g||(g={type:"script",instance:null,count:0,state:null},d.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function xi(o){return'href="'+_r(o)+'"'}function sa(o){return'link[rel="stylesheet"]['+o+"]"}function qp(o){return _({},o,{"data-precedence":o.precedence,precedence:null})}function ef(o,l,d,g){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=o.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),Xt(l,"link",d),Ye(l),o.head.appendChild(l))}function Ei(o){return'[src="'+_r(o)+'"]'}function la(o){return"script[async]"+o}function Wp(o,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var g=o.querySelector('style[data-href~="'+_r(d.href)+'"]');if(g)return l.instance=g,Ye(g),g;var E=_({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Ye(g),Xt(g,"style",E),vo(g,d.precedence,o),l.instance=g;case"stylesheet":E=xi(d.href);var O=o.querySelector(sa(E));if(O)return l.state.loading|=4,l.instance=O,Ye(O),O;g=qp(d),(E=Tr.get(E))&&El(g,E),O=(o.ownerDocument||o).createElement("link"),Ye(O);var q=O;return q._p=new Promise(function(Q,ie){q.onload=Q,q.onerror=ie}),Xt(O,"link",g),l.state.loading|=4,vo(O,d.precedence,o),l.instance=O;case"script":return O=Ei(d.src),(E=o.querySelector(la(O)))?(l.instance=E,Ye(E),E):(g=d,(E=Tr.get(O))&&(g=_({},d),Sl(g,E)),o=o.ownerDocument||o,E=o.createElement("script"),Ye(E),Xt(E,"link",g),o.head.appendChild(E),l.instance=E);case"void":return null;default:throw Error(a(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,vo(g,d.precedence,o));return l.instance}function vo(o,l,d){for(var g=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,O=E,q=0;q<g.length;q++){var Q=g[q];if(Q.dataset.precedence===l)O=Q;else if(O!==E)break}O?O.parentNode.insertBefore(o,O.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(o,l.firstChild))}function El(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function Sl(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var mo=null;function Xp(o,l,d){if(mo===null){var g=new Map,E=mo=new Map;E.set(d,g)}else E=mo,g=E.get(d),g||(g=new Map,E.set(d,g));if(g.has(o))return g;for(g.set(o,null),d=d.getElementsByTagName(o),E=0;E<d.length;E++){var O=d[E];if(!(O[ke]||O[Se]||o==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var q=O.getAttribute(l)||"";q=o+q;var Q=g.get(q);Q?Q.push(O):g.set(q,[O])}}return g}function Yp(o,l,d){o=o.ownerDocument||o,o.head.insertBefore(d,l==="title"?o.querySelector("head > title"):null)}function tf(o,l,d){if(d===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Kp(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var ua=null;function rf(){}function nf(o,l,d){if(ua===null)throw Error(a(475));var g=ua;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var E=xi(d.href),O=o.querySelector(sa(E));if(O){o=O._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(g.count++,g=_o.bind(g),o.then(g,g)),l.state.loading|=4,l.instance=O,Ye(O);return}O=o.ownerDocument||o,d=qp(d),(E=Tr.get(E))&&El(d,E),O=O.createElement("link"),Ye(O);var q=O;q._p=new Promise(function(Q,ie){q.onload=Q,q.onerror=ie}),Xt(O,"link",d),l.instance=O}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=_o.bind(g),o.addEventListener("load",l),o.addEventListener("error",l))}}function af(){if(ua===null)throw Error(a(475));var o=ua;return o.stylesheets&&o.count===0&&Cl(o,o.stylesheets),0<o.count?function(l){var d=setTimeout(function(){if(o.stylesheets&&Cl(o,o.stylesheets),o.unsuspend){var g=o.unsuspend;o.unsuspend=null,g()}},6e4);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(d)}}:null}function _o(){if(this.count--,this.count===0){if(this.stylesheets)Cl(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var yo=null;function Cl(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,yo=new Map,l.forEach(of,o),yo=null,_o.call(o))}function of(o,l){if(!(l.state.loading&4)){var d=yo.get(o);if(d)var g=d.get(null);else{d=new Map,yo.set(o,d);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<E.length;O++){var q=E[O];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(d.set(q.dataset.precedence,q),g=q)}g&&d.set(null,g)}E=l.instance,q=E.getAttribute("data-precedence"),O=d.get(q)||g,O===g&&d.set(null,E),d.set(q,E),this.count++,g=_o.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),O?O.parentNode.insertBefore(E,O.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),l.state.loading|=4}}var ca={$$typeof:S,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function sf(o,l,d,g,E,O,q,Q){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=en(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.hiddenUpdates=en(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=O,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function Qp(o,l,d,g,E,O,q,Q,ie,ve,Ee,Te){return o=new sf(o,l,d,q,Q,ie,ve,Te),l=1,O===!0&&(l|=24),O=ur(3,null,null,l),o.current=O,O.stateNode=o,l=is(),l.refCount++,o.pooledCache=l,l.refCount++,O.memoizedState={element:g,isDehydrated:d,cache:l},ls(O),o}function Zp(o){return o?(o=Jn,o):Jn}function Jp(o,l,d,g,E,O){E=Zp(E),g.context===null?g.context=E:g.pendingContext=E,g=sn(l),g.payload={element:d},O=O===void 0?null:O,O!==null&&(g.callback=O),d=ln(o,g,l),d!==null&&(fr(d,o,l),Fi(d,o,l))}function ed(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var d=o.retryLane;o.retryLane=d!==0&&d<l?d:l}}function Tl(o,l){ed(o,l),(o=o.alternate)&&ed(o,l)}function td(o){if(o.tag===13){var l=Zn(o,67108864);l!==null&&fr(l,o,67108864),Tl(o,67108864)}}var bo=!0;function lf(o,l,d,g){var E=L.T;L.T=null;var O=W.p;try{W.p=2,wl(o,l,d,g)}finally{W.p=O,L.T=E}}function uf(o,l,d,g){var E=L.T;L.T=null;var O=W.p;try{W.p=8,wl(o,l,d,g)}finally{W.p=O,L.T=E}}function wl(o,l,d,g){if(bo){var E=Rl(g);if(E===null)dl(o,l,g,xo,d),nd(o,g);else if(pf(E,o,l,d,g))g.stopPropagation();else if(nd(o,g),l&4&&-1<cf.indexOf(o)){for(;E!==null;){var O=ct(E);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var q=Ge(O.pendingLanes);if(q!==0){var Q=O;for(Q.pendingLanes|=2,Q.entangledLanes|=2;q;){var ie=1<<31-Qe(q);Q.entanglements[1]|=ie,q&=~ie}kr(O),(ht&6)===0&&(no=Oe()+500,na(0))}}break;case 13:Q=Zn(O,2),Q!==null&&fr(Q,O,2),ao(),Tl(O,2)}if(O=Rl(g),O===null&&dl(o,l,g,xo,d),O===E)break;E=O}E!==null&&g.stopPropagation()}else dl(o,l,g,null,d)}}function Rl(o){return o=Lo(o),Ol(o)}var xo=null;function Ol(o){if(xo=null,o=Ze(o),o!==null){var l=u(o);if(l===null)o=null;else{var d=l.tag;if(d===13){if(o=c(l),o!==null)return o;o=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return xo=o,null}function rd(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case qe:return 2;case rt:return 8;case He:case Ae:return 32;case xt:return 268435456;default:return 32}default:return 32}}var Al=!1,xn=null,En=null,Sn=null,pa=new Map,da=new Map,Cn=[],cf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function nd(o,l){switch(o){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Sn=null;break;case"pointerover":case"pointerout":pa.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(l.pointerId)}}function ha(o,l,d,g,E,O){return o===null||o.nativeEvent!==O?(o={blockedOn:l,domEventName:d,eventSystemFlags:g,nativeEvent:O,targetContainers:[E]},l!==null&&(l=ct(l),l!==null&&td(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,E!==null&&l.indexOf(E)===-1&&l.push(E),o)}function pf(o,l,d,g,E){switch(l){case"focusin":return xn=ha(xn,o,l,d,g,E),!0;case"dragenter":return En=ha(En,o,l,d,g,E),!0;case"mouseover":return Sn=ha(Sn,o,l,d,g,E),!0;case"pointerover":var O=E.pointerId;return pa.set(O,ha(pa.get(O)||null,o,l,d,g,E)),!0;case"gotpointercapture":return O=E.pointerId,da.set(O,ha(da.get(O)||null,o,l,d,g,E)),!0}return!1}function id(o){var l=Ze(o.target);if(l!==null){var d=u(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){o.blockedOn=l,he(o.priority,function(){if(d.tag===13){var g=hr();g=Ut(g);var E=Zn(d,g);E!==null&&fr(E,d,g),Tl(d,g)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){o.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Eo(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var d=Rl(o.nativeEvent);if(d===null){d=o.nativeEvent;var g=new d.constructor(d.type,d);Do=g,d.target.dispatchEvent(g),Do=null}else return l=ct(d),l!==null&&td(l),o.blockedOn=d,!1;l.shift()}return!0}function ad(o,l,d){Eo(o)&&d.delete(l)}function df(){Al=!1,xn!==null&&Eo(xn)&&(xn=null),En!==null&&Eo(En)&&(En=null),Sn!==null&&Eo(Sn)&&(Sn=null),pa.forEach(ad),da.forEach(ad)}function So(o,l){o.blockedOn===l&&(o.blockedOn=null,Al||(Al=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,df)))}var Co=null;function od(o){Co!==o&&(Co=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Co===o&&(Co=null);for(var l=0;l<o.length;l+=3){var d=o[l],g=o[l+1],E=o[l+2];if(typeof g!="function"){if(Ol(g||d)===null)continue;break}var O=ct(d);O!==null&&(o.splice(l,3),l-=3,Rs(O,{pending:!0,data:E,method:d.method,action:g},g,E))}}))}function fa(o){function l(ie){return So(ie,o)}xn!==null&&So(xn,o),En!==null&&So(En,o),Sn!==null&&So(Sn,o),pa.forEach(l),da.forEach(l);for(var d=0;d<Cn.length;d++){var g=Cn[d];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Cn.length&&(d=Cn[0],d.blockedOn===null);)id(d),d.blockedOn===null&&Cn.shift();if(d=(o.ownerDocument||o).$$reactFormReplay,d!=null)for(g=0;g<d.length;g+=3){var E=d[g],O=d[g+1],q=E[we]||null;if(typeof O=="function")q||od(d);else if(q){var Q=null;if(O&&O.hasAttribute("formAction")){if(E=O,q=O[we]||null)Q=q.formAction;else if(Ol(E)!==null)continue}else Q=q.action;typeof Q=="function"?d[g+1]=Q:(d.splice(g,3),g-=3),od(d)}}}function Dl(o){this._internalRoot=o}To.prototype.render=Dl.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(a(409));var d=l.current,g=hr();Jp(d,g,o,l,null,null)},To.prototype.unmount=Dl.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;Jp(o.current,2,null,o,null,null),ao(),l[De]=null}};function To(o){this._internalRoot=o}To.prototype.unstable_scheduleHydration=function(o){if(o){var l=ae();o={blockedOn:null,target:o,priority:l};for(var d=0;d<Cn.length&&l!==0&&l<Cn[d].priority;d++);Cn.splice(d,0,o),d===0&&id(o)}};var sd=t.version;if(sd!=="19.1.1")throw Error(a(527,sd,"19.1.1"));W.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=f(l),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var hf={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{ot=wo.inject(hf),ze=wo}catch{}}return reactDomClient_production.createRoot=function(o,l){if(!s(o))throw Error(a(299));var d=!1,g="",E=Sc,O=Cc,q=Tc,Q=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(q=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Q=l.unstable_transitionCallbacks)),l=Qp(o,1,!1,null,null,d,g,E,O,q,Q,null),o[De]=l.current,pl(o),new Dl(l)},reactDomClient_production.hydrateRoot=function(o,l,d){if(!s(o))throw Error(a(299));var g=!1,E="",O=Sc,q=Cc,Q=Tc,ie=null,ve=null;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(E=d.identifierPrefix),d.onUncaughtError!==void 0&&(O=d.onUncaughtError),d.onCaughtError!==void 0&&(q=d.onCaughtError),d.onRecoverableError!==void 0&&(Q=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ie=d.unstable_transitionCallbacks),d.formState!==void 0&&(ve=d.formState)),l=Qp(o,1,!0,l,d??null,g,E,O,q,Q,ie,ve),l.context=Zp(null),d=l.current,g=hr(),g=Ut(g),E=sn(g),E.callback=null,ln(d,E,g),d=g,l.current.lanes=d,Et(l,d),kr(l),o[De]=l.current,pl(o),new To(l)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=e=>{throw TypeError(e)},__accessCheck=(e,t,n)=>t.has(e)||__typeError("Cannot "+n),__privateGet=(e,t,n)=>(__accessCheck(e,t,"read from private field"),n?n.call(e):t.get(e)),__privateAdd=(e,t,n)=>t.has(e)?__typeError("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),PopStateEventType="popstate";function createBrowserHistory(e={}){function t(a,s){let{pathname:u,search:c,hash:h}=a.location;return createLocation("",{pathname:u,search:c,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(a,s){return typeof s=="string"?s:createPath(s)}return getUrlBasedHistory(t,n,null,e)}function invariant(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function warning(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,t){return{usr:e.state,key:e.key,idx:t}}function createLocation(e,t,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?parsePath(t):t,state:n,key:t&&t.key||a||createKey()}}function createPath({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function parsePath(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function getUrlBasedHistory(e,t,n,a={}){let{window:s=document.defaultView,v5Compat:u=!1}=a,c=s.history,h="POP",f=null,m=_();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function _(){return(c.state||{idx:null}).idx}function C(){h="POP";let I=_(),P=I==null?null:I-m;m=I,f&&f({action:h,location:A.location,delta:P})}function b(I,P){h="PUSH";let N=createLocation(A.location,I,P);m=_()+1;let S=getHistoryState(N,m),k=A.createHref(N);try{c.pushState(S,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(k)}u&&f&&f({action:h,location:A.location,delta:1})}function T(I,P){h="REPLACE";let N=createLocation(A.location,I,P);m=_();let S=getHistoryState(N,m),k=A.createHref(N);c.replaceState(S,"",k),u&&f&&f({action:h,location:A.location,delta:0})}function R(I){return createBrowserURLImpl(I)}let A={get action(){return h},get location(){return e(s,c)},listen(I){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(PopStateEventType,C),f=I,()=>{s.removeEventListener(PopStateEventType,C),f=null}},createHref(I){return t(s,I)},createURL:R,encodeLocation(I){let P=R(I);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:b,replace:T,go(I){return c.go(I)}};return A}function createBrowserURLImpl(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(n,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:createPath(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=n+a),new URL(a,n)}var _map,unstable_RouterContextProvider=class{constructor(e){if(__privateAdd(this,_map,new Map),e)for(let[t,n]of e)this.set(t,n)}get(e){if(__privateGet(this,_map).has(e))return __privateGet(this,_map).get(e);if(e.defaultValue!==void 0)return e.defaultValue;throw new Error("No value found for context")}set(e,t){__privateGet(this,_map).set(e,t)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(e){return unsupportedLazyRouteObjectKeys.has(e)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function isUnsupportedLazyRouteFunctionKey(e){return unsupportedLazyRouteFunctionKeys.has(e)}function isIndexRoute(e){return e.index===!0}function convertRoutesToDataRoutes(e,t,n=[],a={},s=!1){return e.map((u,c)=>{let h=[...n,String(c)],f=typeof u.id=="string"?u.id:h.join("-");if(invariant(u.index!==!0||!u.children,"Cannot specify children on an index route"),invariant(s||!a[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(u)){let m={...u,...t(u),id:f};return a[f]=m,m}else{let m={...u,...t(u),id:f,children:void 0};return a[f]=m,u.children&&(m.children=convertRoutesToDataRoutes(u.children,t,h,a,s)),m}})}function matchRoutes(e,t,n="/"){return matchRoutesImpl(e,t,n,!1)}function matchRoutesImpl(e,t,n,a){let s=typeof t=="string"?parsePath(t):t,u=stripBasename(s.pathname||"/",n);if(u==null)return null;let c=flattenRoutes(e);rankRouteBranches(c);let h=null;for(let f=0;h==null&&f<c.length;++f){let m=decodePath(u);h=matchRouteBranch(c[f],m,a)}return h}function convertRouteMatchToUiMatch(e,t){let{route:n,pathname:a,params:s}=e;return{id:n.id,pathname:a,params:s,data:t[n.id],loaderData:t[n.id],handle:n.handle}}function flattenRoutes(e,t=[],n=[],a="",s=!1){let u=(c,h,f=s,m)=>{let _={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(a)&&f)return;invariant(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length)}let C=joinPaths([a,_.relativePath]),b=n.concat(_);c.children&&c.children.length>0&&(invariant(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${C}".`),flattenRoutes(c.children,t,b,C,f)),!(c.path==null&&!c.index)&&t.push({path:C,score:computeScore(C,c.index),routesMeta:b})};return e.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))u(c,h);else for(let f of explodeOptionalSegments(c.path))u(c,h,!0,f)}),t}function explodeOptionalSegments(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,s=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return s?[u,""]:[u];let c=explodeOptionalSegments(a.join("/")),h=[];return h.push(...c.map(f=>f===""?u:[u,f].join("/"))),s&&h.push(...c),h.map(f=>e.startsWith("/")&&f===""?"/":f)}function rankRouteBranches(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:compareIndexes(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,t){let n=e.split("/"),a=n.length;return n.some(isSplat)&&(a+=splatPenalty),t&&(a+=indexRouteValue),n.filter(s=>!isSplat(s)).reduce((s,u)=>s+(paramRe.test(u)?dynamicSegmentValue:u===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function matchRouteBranch(e,t,n=!1){let{routesMeta:a}=e,s={},u="/",c=[];for(let h=0;h<a.length;++h){let f=a[h],m=h===a.length-1,_=u==="/"?t:t.slice(u.length)||"/",C=matchPath({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),b=f.route;if(!C&&m&&n&&!a[a.length-1].route.index&&(C=matchPath({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!C)return null;Object.assign(s,C.params),c.push({params:s,pathname:joinPaths([u,C.pathname]),pathnameBase:normalizePathname(joinPaths([u,C.pathnameBase])),route:b}),C.pathnameBase!=="/"&&(u=joinPaths([u,C.pathnameBase]))}return c}function matchPath(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=compilePath(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let u=s[0],c=u.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:a.reduce((m,{paramName:_,isOptional:C},b)=>{if(_==="*"){let R=h[b]||"";c=u.slice(0,u.length-R.length).replace(/(.)\/+$/,"$1")}const T=h[b];return C&&!T?m[_]=void 0:m[_]=(T||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:c,pattern:e}}function compilePath(e,t=!1,n=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,f)=>(a.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function decodePath(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function stripBasename(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}function prependBasename({basename:e,pathname:t}){return t==="/"?e:joinPaths([e,t])}function resolvePath(e,t="/"){let{pathname:n,search:a="",hash:s=""}=typeof e=="string"?parsePath(e):e;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,t):t,search:normalizeSearch(a),hash:normalizeHash(s)}}function resolvePathname(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(e,t,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(e){let t=getPathContributingMatches(e);return t.map((n,a)=>a===t.length-1?n.pathname:n.pathnameBase)}function resolveTo(e,t,n,a=!1){let s;typeof e=="string"?s=parsePath(e):(s={...e},invariant(!s.pathname||!s.pathname.includes("?"),getInvalidPathError("?","pathname","search",s)),invariant(!s.pathname||!s.pathname.includes("#"),getInvalidPathError("#","pathname","hash",s)),invariant(!s.search||!s.search.includes("#"),getInvalidPathError("#","search","hash",s)));let u=e===""||s.pathname==="",c=u?"/":s.pathname,h;if(c==null)h=n;else{let C=t.length-1;if(!a&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),C-=1;s.pathname=b.join("/")}h=C>=0?t[C]:"/"}let f=resolvePath(s,h),m=c&&c!=="/"&&c.endsWith("/"),_=(u||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,t,n,a=!1){this.status=e,this.statusText=t||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=e=>ABSOLUTE_URL_REGEX.test(e),defaultMapRouteProperties=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";invariant(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=e.hydrationRouteProperties||[],s=e.mapRouteProperties||defaultMapRouteProperties,u={},c=convertRoutesToDataRoutes(e.routes,s,void 0,u),h,f=e.basename||"/";f.startsWith("/")||(f=`/${f}`);let m=e.dataStrategy||defaultDataStrategyWithMiddleware,_={...e.future},C=null,b=new Set,T=null,R=null,A=null,I=e.hydrationData!=null,P=matchRoutes(c,e.history.location,f),N=!1,S=null,k;if(P==null&&!e.patchRoutesOnNavigation){let ae=getInternalRouterError(404,{pathname:e.history.location.pathname}),{matches:he,route:ge}=getShortCircuitMatches(c);k=!0,P=he,S={[ge.id]:ae}}else if(P&&!e.hydrationData&&Dt(P,c,e.history.location.pathname).active&&(P=null),P)if(P.some(ae=>ae.route.lazy))k=!1;else if(!P.some(ae=>ae.route.loader))k=!0;else{let ae=e.hydrationData?e.hydrationData.loaderData:null,he=e.hydrationData?e.hydrationData.errors:null;if(he){let ge=P.findIndex(Se=>he[Se.route.id]!==void 0);k=P.slice(0,ge+1).every(Se=>!shouldLoadRouteOnHydration(Se.route,ae,he))}else k=P.every(ge=>!shouldLoadRouteOnHydration(ge.route,ae,he))}else{k=!1,P=[];let ae=Dt(null,c,e.history.location.pathname);ae.active&&ae.matches&&(N=!0,P=ae.matches)}let D,M={historyAction:e.history.action,location:e.history.location,matches:P,initialized:k,navigation:IDLE_NAVIGATION,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||S,fetchers:new Map,blockers:new Map},j="POP",H=!1,X,K=!1,re=new Map,F=null,J=!1,z=!1,$=new Set,L=new Map,W=0,U=-1,V=new Map,B=new Set,Z=new Map,ne=new Map,oe=new Set,ce=new Map,xe,de=null;function G(){if(C=e.history.listen(({action:ae,location:he,delta:ge})=>{if(xe){xe(),xe=void 0;return}warning(ce.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Se=tr({currentLocation:M.location,nextLocation:he,historyAction:ae});if(Se&&ge!=null){let we=new Promise(De=>{xe=De});e.history.go(ge*-1),dt(Se,{state:"blocked",location:he,proceed(){dt(Se,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),we.then(()=>e.history.go(ge))},reset(){let De=new Map(M.blockers);De.set(Se,IDLE_BLOCKER),ee({blockers:De})}});return}return ye(ae,he)}),n){restoreAppliedTransitions(t,re);let ae=()=>persistAppliedTransitions(t,re);t.addEventListener("pagehide",ae),F=()=>t.removeEventListener("pagehide",ae)}return M.initialized||ye("POP",M.location,{initialHydration:!0}),D}function Y(){C&&C(),F&&F(),b.clear(),X&&X.abort(),M.fetchers.forEach((ae,he)=>Qe(he)),M.blockers.forEach((ae,he)=>at(he))}function te(ae){return b.add(ae),()=>b.delete(ae)}function ee(ae,he={}){ae.matches&&(ae.matches=ae.matches.map(we=>{let De=u[we.route.id],Ne=we.route;return Ne.element!==De.element||Ne.errorElement!==De.errorElement||Ne.hydrateFallbackElement!==De.hydrateFallbackElement?{...we,route:De}:we})),M={...M,...ae};let ge=[],Se=[];M.fetchers.forEach((we,De)=>{we.state==="idle"&&(oe.has(De)?ge.push(De):Se.push(De))}),oe.forEach(we=>{!M.fetchers.has(we)&&!L.has(we)&&ge.push(we)}),[...b].forEach(we=>we(M,{deletedFetchers:ge,viewTransitionOpts:he.viewTransitionOpts,flushSync:he.flushSync===!0})),ge.forEach(we=>Qe(we)),Se.forEach(we=>M.fetchers.delete(we))}function se(ae,he,{flushSync:ge}={}){let Se=M.actionData!=null&&M.navigation.formMethod!=null&&isMutationMethod(M.navigation.formMethod)&&M.navigation.state==="loading"&&ae.state?._isRedirect!==!0,we;he.actionData?Object.keys(he.actionData).length>0?we=he.actionData:we=null:Se?we=M.actionData:we=null;let De=he.loaderData?mergeLoaderData(M.loaderData,he.loaderData,he.matches||[],he.errors):M.loaderData,Ne=M.blockers;Ne.size>0&&(Ne=new Map(Ne),Ne.forEach((ke,Be)=>Ne.set(Be,IDLE_BLOCKER)));let Ie=J?!1:jt(ae,he.matches||M.matches),Me=H===!0||M.navigation.formMethod!=null&&isMutationMethod(M.navigation.formMethod)&&ae.state?._isRedirect!==!0;h&&(c=h,h=void 0),J||j==="POP"||(j==="PUSH"?e.history.push(ae,ae.state):j==="REPLACE"&&e.history.replace(ae,ae.state));let Fe;if(j==="POP"){let ke=re.get(M.location.pathname);ke&&ke.has(ae.pathname)?Fe={currentLocation:M.location,nextLocation:ae}:re.has(ae.pathname)&&(Fe={currentLocation:ae,nextLocation:M.location})}else if(K){let ke=re.get(M.location.pathname);ke?ke.add(ae.pathname):(ke=new Set([ae.pathname]),re.set(M.location.pathname,ke)),Fe={currentLocation:M.location,nextLocation:ae}}ee({...he,actionData:we,loaderData:De,historyAction:j,location:ae,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Ie,preventScrollReset:Me,blockers:Ne},{viewTransitionOpts:Fe,flushSync:ge===!0}),j="POP",H=!1,K=!1,J=!1,z=!1,de?.resolve(),de=null}async function ue(ae,he){if(typeof ae=="number"){e.history.go(ae);return}let ge=normalizeTo(M.location,M.matches,f,ae,he?.fromRouteId,he?.relative),{path:Se,submission:we,error:De}=normalizeNavigateOptions(!1,ge,he),Ne=M.location,Ie=createLocation(M.location,Se,he&&he.state);Ie={...Ie,...e.history.encodeLocation(Ie)};let Me=he&&he.replace!=null?he.replace:void 0,Fe="PUSH";Me===!0?Fe="REPLACE":Me===!1||we!=null&&isMutationMethod(we.formMethod)&&we.formAction===M.location.pathname+M.location.search&&(Fe="REPLACE");let ke=he&&"preventScrollReset"in he?he.preventScrollReset===!0:void 0,Be=(he&&he.flushSync)===!0,Ze=tr({currentLocation:Ne,nextLocation:Ie,historyAction:Fe});if(Ze){dt(Ze,{state:"blocked",location:Ie,proceed(){dt(Ze,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),ue(ae,he)},reset(){let ct=new Map(M.blockers);ct.set(Ze,IDLE_BLOCKER),ee({blockers:ct})}});return}await ye(Fe,Ie,{submission:we,pendingError:De,preventScrollReset:ke,replace:he&&he.replace,enableViewTransition:he&&he.viewTransition,flushSync:Be})}function be(){de||(de=createDeferred()),Gt(),ee({revalidation:"loading"});let ae=de.promise;return M.navigation.state==="submitting"?ae:M.navigation.state==="idle"?(ye(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),ae):(ye(j||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:K===!0}),ae)}async function ye(ae,he,ge){X&&X.abort(),X=null,j=ae,J=(ge&&ge.startUninterruptedRevalidation)===!0,Et(M.location,M.matches),H=(ge&&ge.preventScrollReset)===!0,K=(ge&&ge.enableViewTransition)===!0;let Se=h||c,we=ge&&ge.overrideNavigation,De=ge?.initialHydration&&M.matches&&M.matches.length>0&&!N?M.matches:matchRoutes(Se,he,f),Ne=(ge&&ge.flushSync)===!0;if(De&&M.initialized&&!z&&isHashChangeOnly(M.location,he)&&!(ge&&ge.submission&&isMutationMethod(ge.submission.formMethod))){se(he,{matches:De},{flushSync:Ne});return}let Ie=Dt(De,Se,he.pathname);if(Ie.active&&Ie.matches&&(De=Ie.matches),!De){let{error:Rt,notFoundMatches:Ye,route:gt}=wr(he.pathname);se(he,{matches:Ye,loaderData:{},errors:{[gt.id]:Rt}},{flushSync:Ne});return}X=new AbortController;let Me=createClientSideRequest(e.history,he,X.signal,ge&&ge.submission),Fe=e.unstable_getContext?await e.unstable_getContext():new unstable_RouterContextProvider,ke;if(ge&&ge.pendingError)ke=[findNearestBoundary(De).route.id,{type:"error",error:ge.pendingError}];else if(ge&&ge.submission&&isMutationMethod(ge.submission.formMethod)){let Rt=await Re(Me,he,ge.submission,De,Fe,Ie.active,ge&&ge.initialHydration===!0,{replace:ge.replace,flushSync:Ne});if(Rt.shortCircuited)return;if(Rt.pendingActionResult){let[Ye,gt]=Rt.pendingActionResult;if(isErrorResult(gt)&&isRouteErrorResponse(gt.error)&&gt.error.status===404){X=null,se(he,{matches:Rt.matches,loaderData:{},errors:{[Ye]:gt.error}});return}}De=Rt.matches||De,ke=Rt.pendingActionResult,we=getLoadingNavigation(he,ge.submission),Ne=!1,Ie.active=!1,Me=createClientSideRequest(e.history,Me.url,Me.signal)}let{shortCircuited:Be,matches:Ze,loaderData:ct,errors:St}=await Le(Me,he,De,Fe,Ie.active,we,ge&&ge.submission,ge&&ge.fetcherSubmission,ge&&ge.replace,ge&&ge.initialHydration===!0,Ne,ke);Be||(X=null,se(he,{matches:Ze||De,...getActionDataForCommit(ke),loaderData:ct,errors:St}))}async function Re(ae,he,ge,Se,we,De,Ne,Ie={}){Gt();let Me=getSubmittingNavigation(he,ge);if(ee({navigation:Me},{flushSync:Ie.flushSync===!0}),De){let Be=await Yt(Se,he.pathname,ae.signal);if(Be.type==="aborted")return{shortCircuited:!0};if(Be.type==="error"){if(Be.partialMatches.length===0){let{matches:ct,route:St}=getShortCircuitMatches(c);return{matches:ct,pendingActionResult:[St.id,{type:"error",error:Be.error}]}}let Ze=findNearestBoundary(Be.partialMatches).route.id;return{matches:Be.partialMatches,pendingActionResult:[Ze,{type:"error",error:Be.error}]}}else if(Be.matches)Se=Be.matches;else{let{notFoundMatches:Ze,error:ct,route:St}=wr(he.pathname);return{matches:Ze,pendingActionResult:[St.id,{type:"error",error:ct}]}}}let Fe,ke=getTargetMatch(Se,he);if(!ke.route.action&&!ke.route.lazy)Fe={type:"error",error:getInternalRouterError(405,{method:ae.method,pathname:he.pathname,routeId:ke.route.id})};else{let Be=getTargetedDataStrategyMatches(s,u,ae,Se,ke,Ne?[]:a,we),Ze=await xt(ae,Be,we,null);if(Fe=Ze[ke.route.id],!Fe){for(let ct of Se)if(Ze[ct.route.id]){Fe=Ze[ct.route.id];break}}if(ae.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(Fe)){let Be;return Ie&&Ie.replace!=null?Be=Ie.replace:Be=normalizeRedirectLocation(Fe.response.headers.get("Location"),new URL(ae.url),f)===M.location.pathname+M.location.search,await Ae(ae,Fe,!0,{submission:ge,replace:Be}),{shortCircuited:!0}}if(isErrorResult(Fe)){let Be=findNearestBoundary(Se,ke.route.id);return(Ie&&Ie.replace)!==!0&&(j="PUSH"),{matches:Se,pendingActionResult:[Be.route.id,Fe,ke.route.id]}}return{matches:Se,pendingActionResult:[ke.route.id,Fe]}}async function Le(ae,he,ge,Se,we,De,Ne,Ie,Me,Fe,ke,Be){let Ze=De||getLoadingNavigation(he,Ne),ct=Ne||Ie||getSubmissionFromNavigation(Ze),St=!J&&!Fe;if(we){if(St){let Mt=Oe(Be);ee({navigation:Ze,...Mt!==void 0?{actionData:Mt}:{}},{flushSync:ke})}let Ke=await Yt(ge,he.pathname,ae.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){if(Ke.partialMatches.length===0){let{matches:zr,route:rr}=getShortCircuitMatches(c);return{matches:zr,loaderData:{},errors:{[rr.id]:Ke.error}}}let Mt=findNearestBoundary(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,loaderData:{},errors:{[Mt]:Ke.error}}}else if(Ke.matches)ge=Ke.matches;else{let{error:Mt,notFoundMatches:zr,route:rr}=wr(he.pathname);return{matches:zr,loaderData:{},errors:{[rr.id]:Mt}}}}let Rt=h||c,{dsMatches:Ye,revalidatingFetchers:gt}=getMatchesToLoad(ae,Se,s,u,e.history,M,ge,ct,he,Fe?[]:a,Fe===!0,z,$,oe,Z,B,Rt,f,e.patchRoutesOnNavigation!=null,Be);if(U=++W,!e.dataStrategy&&!Ye.some(Ke=>Ke.shouldLoad)&&!Ye.some(Ke=>Ke.route.unstable_middleware)&&gt.length===0){let Ke=er();return se(he,{matches:ge,loaderData:{},errors:Be&&isErrorResult(Be[1])?{[Be[0]]:Be[1].error}:null,...getActionDataForCommit(Be),...Ke?{fetchers:new Map(M.fetchers)}:{}},{flushSync:ke}),{shortCircuited:!0}}if(St){let Ke={};if(!we){Ke.navigation=Ze;let Mt=Oe(Be);Mt!==void 0&&(Ke.actionData=Mt)}gt.length>0&&(Ke.fetchers=Ue(gt)),ee(Ke,{flushSync:ke})}gt.forEach(Ke=>{Xe(Ke.key),Ke.controller&&L.set(Ke.key,Ke.controller)});let Dr=()=>gt.forEach(Ke=>Xe(Ke.key));X&&X.signal.addEventListener("abort",Dr);let{loaderResults:sr,fetcherResults:Qt}=await lt(Ye,gt,ae,Se);if(ae.signal.aborted)return{shortCircuited:!0};X&&X.signal.removeEventListener("abort",Dr),gt.forEach(Ke=>L.delete(Ke.key));let vr=findRedirect(sr);if(vr)return await Ae(ae,vr.result,!0,{replace:Me}),{shortCircuited:!0};if(vr=findRedirect(Qt),vr)return B.add(vr.key),await Ae(ae,vr.result,!0,{replace:Me}),{shortCircuited:!0};let{loaderData:Hn,errors:tn}=processLoaderData(M,ge,sr,Be,gt,Qt);Fe&&M.errors&&(tn={...M.errors,...tn});let Pr=er(),Gr=gr(U),Br=Pr||Gr||gt.length>0;return{matches:ge,loaderData:Hn,errors:tn,...Br?{fetchers:new Map(M.fetchers)}:{}}}function Oe(ae){if(ae&&!isErrorResult(ae[1]))return{[ae[0]]:ae[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function Ue(ae){return ae.forEach(he=>{let ge=M.fetchers.get(he.key),Se=getLoadingFetcher(void 0,ge?ge.data:void 0);M.fetchers.set(he.key,Se)}),new Map(M.fetchers)}async function qe(ae,he,ge,Se){Xe(ae);let we=(Se&&Se.flushSync)===!0,De=h||c,Ne=normalizeTo(M.location,M.matches,f,ge,he,Se?.relative),Ie=matchRoutes(De,Ne,f),Me=Dt(Ie,De,Ne);if(Me.active&&Me.matches&&(Ie=Me.matches),!Ie){ze(ae,he,getInternalRouterError(404,{pathname:Ne}),{flushSync:we});return}let{path:Fe,submission:ke,error:Be}=normalizeNavigateOptions(!0,Ne,Se);if(Be){ze(ae,he,Be,{flushSync:we});return}let Ze=e.unstable_getContext?await e.unstable_getContext():new unstable_RouterContextProvider,ct=(Se&&Se.preventScrollReset)===!0;if(ke&&isMutationMethod(ke.formMethod)){await rt(ae,he,Fe,Ie,Ze,Me.active,we,ct,ke);return}Z.set(ae,{routeId:he,path:Fe}),await He(ae,he,Fe,Ie,Ze,Me.active,we,ct,ke)}async function rt(ae,he,ge,Se,we,De,Ne,Ie,Me){Gt(),Z.delete(ae);let Fe=M.fetchers.get(ae);ot(ae,getSubmittingFetcher(Me,Fe),{flushSync:Ne});let ke=new AbortController,Be=createClientSideRequest(e.history,ge,ke.signal,Me);if(De){let Tt=await Yt(Se,new URL(Be.url).pathname,Be.signal,ae);if(Tt.type==="aborted")return;if(Tt.type==="error"){ze(ae,he,Tt.error,{flushSync:Ne});return}else if(Tt.matches)Se=Tt.matches;else{ze(ae,he,getInternalRouterError(404,{pathname:ge}),{flushSync:Ne});return}}let Ze=getTargetMatch(Se,ge);if(!Ze.route.action&&!Ze.route.lazy){let Tt=getInternalRouterError(405,{method:Me.formMethod,pathname:ge,routeId:he});ze(ae,he,Tt,{flushSync:Ne});return}L.set(ae,ke);let ct=W,St=getTargetedDataStrategyMatches(s,u,Be,Se,Ze,a,we),Ye=(await xt(Be,St,we,ae))[Ze.route.id];if(Be.signal.aborted){L.get(ae)===ke&&L.delete(ae);return}if(oe.has(ae)){if(isRedirectResult(Ye)||isErrorResult(Ye)){ot(ae,getDoneFetcher(void 0));return}}else{if(isRedirectResult(Ye))if(L.delete(ae),U>ct){ot(ae,getDoneFetcher(void 0));return}else return B.add(ae),ot(ae,getLoadingFetcher(Me)),Ae(Be,Ye,!1,{fetcherSubmission:Me,preventScrollReset:Ie});if(isErrorResult(Ye)){ze(ae,he,Ye.error);return}}let gt=M.navigation.location||M.location,Dr=createClientSideRequest(e.history,gt,ke.signal),sr=h||c,Qt=M.navigation.state!=="idle"?matchRoutes(sr,M.navigation.location,f):M.matches;invariant(Qt,"Didn't find any matches after fetcher action");let vr=++W;V.set(ae,vr);let Hn=getLoadingFetcher(Me,Ye.data);M.fetchers.set(ae,Hn);let{dsMatches:tn,revalidatingFetchers:Pr}=getMatchesToLoad(Dr,we,s,u,e.history,M,Qt,Me,gt,a,!1,z,$,oe,Z,B,sr,f,e.patchRoutesOnNavigation!=null,[Ze.route.id,Ye]);Pr.filter(Tt=>Tt.key!==ae).forEach(Tt=>{let rn=Tt.key,ga=M.fetchers.get(rn),va=getLoadingFetcher(void 0,ga?ga.data:void 0);M.fetchers.set(rn,va),Xe(rn),Tt.controller&&L.set(rn,Tt.controller)}),ee({fetchers:new Map(M.fetchers)});let Gr=()=>Pr.forEach(Tt=>Xe(Tt.key));ke.signal.addEventListener("abort",Gr);let{loaderResults:Br,fetcherResults:Ke}=await lt(tn,Pr,Dr,we);if(ke.signal.aborted)return;if(ke.signal.removeEventListener("abort",Gr),V.delete(ae),L.delete(ae),Pr.forEach(Tt=>L.delete(Tt.key)),M.fetchers.has(ae)){let Tt=getDoneFetcher(Ye.data);M.fetchers.set(ae,Tt)}let Mt=findRedirect(Br);if(Mt)return Ae(Dr,Mt.result,!1,{preventScrollReset:Ie});if(Mt=findRedirect(Ke),Mt)return B.add(Mt.key),Ae(Dr,Mt.result,!1,{preventScrollReset:Ie});let{loaderData:zr,errors:rr}=processLoaderData(M,Qt,Br,void 0,Pr,Ke);gr(vr),M.navigation.state==="loading"&&vr>U?(invariant(j,"Expected pending action"),X&&X.abort(),se(M.navigation.location,{matches:Qt,loaderData:zr,errors:rr,fetchers:new Map(M.fetchers)})):(ee({errors:rr,loaderData:mergeLoaderData(M.loaderData,zr,Qt,rr),fetchers:new Map(M.fetchers)}),z=!1)}async function He(ae,he,ge,Se,we,De,Ne,Ie,Me){let Fe=M.fetchers.get(ae);ot(ae,getLoadingFetcher(Me,Fe?Fe.data:void 0),{flushSync:Ne});let ke=new AbortController,Be=createClientSideRequest(e.history,ge,ke.signal);if(De){let gt=await Yt(Se,new URL(Be.url).pathname,Be.signal,ae);if(gt.type==="aborted")return;if(gt.type==="error"){ze(ae,he,gt.error,{flushSync:Ne});return}else if(gt.matches)Se=gt.matches;else{ze(ae,he,getInternalRouterError(404,{pathname:ge}),{flushSync:Ne});return}}let Ze=getTargetMatch(Se,ge);L.set(ae,ke);let ct=W,St=getTargetedDataStrategyMatches(s,u,Be,Se,Ze,a,we),Ye=(await xt(Be,St,we,ae))[Ze.route.id];if(L.get(ae)===ke&&L.delete(ae),!Be.signal.aborted){if(oe.has(ae)){ot(ae,getDoneFetcher(void 0));return}if(isRedirectResult(Ye))if(U>ct){ot(ae,getDoneFetcher(void 0));return}else{B.add(ae),await Ae(Be,Ye,!1,{preventScrollReset:Ie});return}if(isErrorResult(Ye)){ze(ae,he,Ye.error);return}ot(ae,getDoneFetcher(Ye.data))}}async function Ae(ae,he,ge,{submission:Se,fetcherSubmission:we,preventScrollReset:De,replace:Ne}={}){he.response.headers.has("X-Remix-Revalidate")&&(z=!0);let Ie=he.response.headers.get("Location");invariant(Ie,"Expected a Location header on the redirect Response"),Ie=normalizeRedirectLocation(Ie,new URL(ae.url),f);let Me=createLocation(M.location,Ie,{_isRedirect:!0});if(n){let St=!1;if(he.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(isAbsoluteUrl(Ie)){const Rt=createBrowserURLImpl(Ie,!0);St=Rt.origin!==t.location.origin||stripBasename(Rt.pathname,f)==null}if(St){Ne?t.location.replace(Ie):t.location.assign(Ie);return}}X=null;let Fe=Ne===!0||he.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ke,formAction:Be,formEncType:Ze}=M.navigation;!Se&&!we&&ke&&Be&&Ze&&(Se=getSubmissionFromNavigation(M.navigation));let ct=Se||we;if(redirectPreserveMethodStatusCodes.has(he.response.status)&&ct&&isMutationMethod(ct.formMethod))await ye(Fe,Me,{submission:{...ct,formAction:Ie},preventScrollReset:De||H,enableViewTransition:ge?K:void 0});else{let St=getLoadingNavigation(Me,Se);await ye(Fe,Me,{overrideNavigation:St,fetcherSubmission:we,preventScrollReset:De||H,enableViewTransition:ge?K:void 0})}}async function xt(ae,he,ge,Se){let we,De={};try{we=await callDataStrategyImpl(m,ae,he,Se,ge,!1)}catch(Ne){return he.filter(Ie=>Ie.shouldLoad).forEach(Ie=>{De[Ie.route.id]={type:"error",error:Ne}}),De}if(ae.signal.aborted)return De;for(let[Ne,Ie]of Object.entries(we))if(isRedirectDataStrategyResult(Ie)){let Me=Ie.result;De[Ne]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(Me,ae,Ne,he,f)}}else De[Ne]=await convertDataStrategyResultToDataResult(Ie);return De}async function lt(ae,he,ge,Se){let we=xt(ge,ae,Se,null),De=Promise.all(he.map(async Me=>{if(Me.matches&&Me.match&&Me.request&&Me.controller){let ke=(await xt(Me.request,Me.matches,Se,Me.key))[Me.match.route.id];return{[Me.key]:ke}}else return Promise.resolve({[Me.key]:{type:"error",error:getInternalRouterError(404,{pathname:Me.path})}})})),Ne=await we,Ie=(await De).reduce((Me,Fe)=>Object.assign(Me,Fe),{});return{loaderResults:Ne,fetcherResults:Ie}}function Gt(){z=!0,Z.forEach((ae,he)=>{L.has(he)&&$.add(he),Xe(he)})}function ot(ae,he,ge={}){M.fetchers.set(ae,he),ee({fetchers:new Map(M.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function ze(ae,he,ge,Se={}){let we=findNearestBoundary(M.matches,he);Qe(ae),ee({errors:{[we.route.id]:ge},fetchers:new Map(M.fetchers)},{flushSync:(Se&&Se.flushSync)===!0})}function et(ae){return ne.set(ae,(ne.get(ae)||0)+1),oe.has(ae)&&oe.delete(ae),M.fetchers.get(ae)||IDLE_FETCHER}function Qe(ae){let he=M.fetchers.get(ae);L.has(ae)&&!(he&&he.state==="loading"&&V.has(ae))&&Xe(ae),Z.delete(ae),V.delete(ae),B.delete(ae),oe.delete(ae),$.delete(ae),M.fetchers.delete(ae)}function Nt(ae){let he=(ne.get(ae)||0)-1;he<=0?(ne.delete(ae),oe.add(ae)):ne.set(ae,he),ee({fetchers:new Map(M.fetchers)})}function Xe(ae){let he=L.get(ae);he&&(he.abort(),L.delete(ae))}function Jt(ae){for(let he of ae){let ge=et(he),Se=getDoneFetcher(ge.data);M.fetchers.set(he,Se)}}function er(){let ae=[],he=!1;for(let ge of B){let Se=M.fetchers.get(ge);invariant(Se,`Expected fetcher: ${ge}`),Se.state==="loading"&&(B.delete(ge),ae.push(ge),he=!0)}return Jt(ae),he}function gr(ae){let he=[];for(let[ge,Se]of V)if(Se<ae){let we=M.fetchers.get(ge);invariant(we,`Expected fetcher: ${ge}`),we.state==="loading"&&(Xe(ge),V.delete(ge),he.push(ge))}return Jt(he),he.length>0}function Ge(ae,he){let ge=M.blockers.get(ae)||IDLE_BLOCKER;return ce.get(ae)!==he&&ce.set(ae,he),ge}function at(ae){M.blockers.delete(ae),ce.delete(ae)}function dt(ae,he){let ge=M.blockers.get(ae)||IDLE_BLOCKER;invariant(ge.state==="unblocked"&&he.state==="blocked"||ge.state==="blocked"&&he.state==="blocked"||ge.state==="blocked"&&he.state==="proceeding"||ge.state==="blocked"&&he.state==="unblocked"||ge.state==="proceeding"&&he.state==="unblocked",`Invalid blocker state transition: ${ge.state} -> ${he.state}`);let Se=new Map(M.blockers);Se.set(ae,he),ee({blockers:Se})}function tr({currentLocation:ae,nextLocation:he,historyAction:ge}){if(ce.size===0)return;ce.size>1&&warning(!1,"A router only supports one blocker at a time");let Se=Array.from(ce.entries()),[we,De]=Se[Se.length-1],Ne=M.blockers.get(we);if(!(Ne&&Ne.state==="proceeding")&&De({currentLocation:ae,nextLocation:he,historyAction:ge}))return we}function wr(ae){let he=getInternalRouterError(404,{pathname:ae}),ge=h||c,{matches:Se,route:we}=getShortCircuitMatches(ge);return{notFoundMatches:Se,route:we,error:he}}function Un(ae,he,ge){if(T=ae,A=he,R=ge||null,!I&&M.navigation===IDLE_NAVIGATION){I=!0;let Se=jt(M.location,M.matches);Se!=null&&ee({restoreScrollPosition:Se})}return()=>{T=null,A=null,R=null}}function en(ae,he){return R&&R(ae,he.map(Se=>convertRouteMatchToUiMatch(Se,M.loaderData)))||ae.key}function Et(ae,he){if(T&&A){let ge=en(ae,he);T[ge]=A()}}function jt(ae,he){if(T){let ge=en(ae,he),Se=T[ge];if(typeof Se=="number")return Se}return null}function Dt(ae,he,ge){if(e.patchRoutesOnNavigation)if(ae){if(Object.keys(ae[0].params).length>0)return{active:!0,matches:matchRoutesImpl(he,ge,f,!0)}}else return{active:!0,matches:matchRoutesImpl(he,ge,f,!0)||[]};return{active:!1,matches:null}}async function Yt(ae,he,ge,Se){if(!e.patchRoutesOnNavigation)return{type:"success",matches:ae};let we=ae;for(;;){let De=h==null,Ne=h||c,Ie=u;try{await e.patchRoutesOnNavigation({signal:ge,path:he,matches:we,fetcherKey:Se,patch:(ke,Be)=>{ge.aborted||patchRoutesImpl(ke,Be,Ne,Ie,s,!1)}})}catch(ke){return{type:"error",error:ke,partialMatches:we}}finally{De&&!ge.aborted&&(c=[...c])}if(ge.aborted)return{type:"aborted"};let Me=matchRoutes(Ne,he,f);if(Me)return{type:"success",matches:Me};let Fe=matchRoutesImpl(Ne,he,f,!0);if(!Fe||we.length===Fe.length&&we.every((ke,Be)=>ke.route.id===Fe[Be].route.id))return{type:"success",matches:null};we=Fe}}function Ut(ae){u={},h=convertRoutesToDataRoutes(ae,s,void 0,u)}function Bt(ae,he,ge=!1){let Se=h==null;patchRoutesImpl(ae,he,h||c,u,s,ge),Se&&(c=[...c],ee({}))}return D={get basename(){return f},get future(){return _},get state(){return M},get routes(){return c},get window(){return t},initialize:G,subscribe:te,enableScrollRestoration:Un,navigate:ue,fetch:qe,revalidate:be,createHref:ae=>e.history.createHref(ae),encodeLocation:ae=>e.history.encodeLocation(ae),getFetcher:et,deleteFetcher:Nt,dispose:Y,getBlocker:Ge,deleteBlocker:at,patchRoutes:Bt,_internalFetchControllers:L,_internalSetRoutes:Ut,_internalSetStateDoNotUseOrYouWillBreakYourApp(ae){ee(ae)}},D}function isSubmissionNavigation(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function normalizeTo(e,t,n,a,s,u){let c,h;if(s){c=[];for(let m of t)if(c.push(m),m.route.id===s){h=m;break}}else c=t,h=t[t.length-1];let f=resolveTo(a||".",getResolveToMatches(c),stripBasename(e.pathname,n)||e.pathname,u==="path");if(a==null&&(f.search=e.search,f.hash=e.hash),(a==null||a===""||a===".")&&h){let m=hasNakedIndexQuery(f.search);if(h.route.index&&!m)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!h.route.index&&m){let _=new URLSearchParams(f.search),C=_.getAll("index");_.delete("index"),C.filter(T=>T).forEach(T=>_.append("index",T));let b=_.toString();f.search=b?`?${b}`:""}}return n!=="/"&&(f.pathname=prependBasename({basename:n,pathname:f.pathname})),createPath(f)}function normalizeNavigateOptions(e,t,n){if(!n||!isSubmissionNavigation(n))return{path:t};if(n.formMethod&&!isValidMethod(n.formMethod))return{path:t,error:getInternalRouterError(405,{method:n.formMethod})};let a=()=>({path:t,error:getInternalRouterError(400,{type:"invalid-body"})}),u=(n.formMethod||"get").toUpperCase(),c=stripHashFromPath(t);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!isMutationMethod(u))return a();let C=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((b,[T,R])=>`${b}${T}=${R}
`,""):String(n.body);return{path:t,submission:{formMethod:u,formAction:c,formEncType:n.formEncType,formData:void 0,json:void 0,text:C}}}else if(n.formEncType==="application/json"){if(!isMutationMethod(u))return a();try{let C=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:t,submission:{formMethod:u,formAction:c,formEncType:n.formEncType,formData:void 0,json:C,text:void 0}}}catch{return a()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let h,f;if(n.formData)h=convertFormDataToSearchParams(n.formData),f=n.formData;else if(n.body instanceof FormData)h=convertFormDataToSearchParams(n.body),f=n.body;else if(n.body instanceof URLSearchParams)h=n.body,f=convertSearchParamsToFormData(h);else if(n.body==null)h=new URLSearchParams,f=new FormData;else try{h=new URLSearchParams(n.body),f=convertSearchParamsToFormData(h)}catch{return a()}let m={formMethod:u,formAction:c,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(isMutationMethod(m.formMethod))return{path:t,submission:m};let _=parsePath(t);return e&&_.search&&hasNakedIndexQuery(_.search)&&h.append("index",""),_.search=`?${h}`,{path:createPath(_),submission:m}}function getMatchesToLoad(e,t,n,a,s,u,c,h,f,m,_,C,b,T,R,A,I,P,N,S){let k=S?isErrorResult(S[1])?S[1].error:S[1].data:void 0,D=s.createURL(u.location),M=s.createURL(f),j;if(_&&u.errors){let J=Object.keys(u.errors)[0];j=c.findIndex(z=>z.route.id===J)}else if(S&&isErrorResult(S[1])){let J=S[0];j=c.findIndex(z=>z.route.id===J)-1}let H=S?S[1].statusCode:void 0,X=H&&H>=400,K={currentUrl:D,currentParams:u.matches[0]?.params||{},nextUrl:M,nextParams:c[0].params,...h,actionResult:k,actionStatus:H},re=c.map((J,z)=>{let{route:$}=J,L=null;if(j!=null&&z>j?L=!1:$.lazy?L=!0:$.loader==null?L=!1:_?L=shouldLoadRouteOnHydration($,u.loaderData,u.errors):isNewLoader(u.loaderData,u.matches[z],J)&&(L=!0),L!==null)return getDataStrategyMatch(n,a,e,J,m,t,L);let W=X?!1:C||D.pathname+D.search===M.pathname+M.search||D.search!==M.search||isNewRouteInstance(u.matches[z],J),U={...K,defaultShouldRevalidate:W},V=shouldRevalidateLoader(J,U);return getDataStrategyMatch(n,a,e,J,m,t,V,U)}),F=[];return R.forEach((J,z)=>{if(_||!c.some(ne=>ne.route.id===J.routeId)||T.has(z))return;let $=u.fetchers.get(z),L=$&&$.state!=="idle"&&$.data===void 0,W=matchRoutes(I,J.path,P);if(!W){if(N&&L)return;F.push({key:z,routeId:J.routeId,path:J.path,matches:null,match:null,request:null,controller:null});return}if(A.has(z))return;let U=getTargetMatch(W,J.path),V=new AbortController,B=createClientSideRequest(s,J.path,V.signal),Z=null;if(b.has(z))b.delete(z),Z=getTargetedDataStrategyMatches(n,a,B,W,U,m,t);else if(L)C&&(Z=getTargetedDataStrategyMatches(n,a,B,W,U,m,t));else{let ne={...K,defaultShouldRevalidate:X?!1:C};shouldRevalidateLoader(U,ne)&&(Z=getTargetedDataStrategyMatches(n,a,B,W,U,m,t,ne))}Z&&F.push({key:z,routeId:J.routeId,path:J.path,matches:Z,match:U,request:B,controller:V})}),{dsMatches:re,revalidatingFetchers:F}}function shouldLoadRouteOnHydration(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let a=t!=null&&e.id in t,s=n!=null&&n[e.id]!==void 0;return!a&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!a&&!s}function isNewLoader(e,t,n){let a=!t||n.route.id!==t.route.id,s=!e.hasOwnProperty(n.route.id);return a||s}function isNewRouteInstance(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function shouldRevalidateLoader(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function patchRoutesImpl(e,t,n,a,s,u){let c;if(e){let m=a[e];invariant(m,`No route found to patch children into: routeId = ${e}`),m.children||(m.children=[]),c=m.children}else c=n;let h=[],f=[];if(t.forEach(m=>{let _=c.find(C=>isSameRoute(m,C));_?f.push({existingRoute:_,newRoute:m}):h.push(m)}),h.length>0){let m=convertRoutesToDataRoutes(h,s,[e||"_","patch",String(c?.length||"0")],a);c.push(...m)}if(u&&f.length>0)for(let m=0;m<f.length;m++){let{existingRoute:_,newRoute:C}=f[m],b=_,[T]=convertRoutesToDataRoutes([C],s,[],{},!0);Object.assign(b,{element:T.element?T.element:b.element,errorElement:T.errorElement?T.errorElement:b.errorElement,hydrateFallbackElement:T.hydrateFallbackElement?T.hydrateFallbackElement:b.hydrateFallbackElement})}}function isSameRoute(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,a)=>t.children?.some(s=>isSameRoute(n,s))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:e,route:t,manifest:n,mapRouteProperties:a})=>{let s=n[t.id];if(invariant(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let u=s.lazy[e];if(!u)return;let c=lazyRoutePropertyCache.get(s);c||(c={},lazyRoutePropertyCache.set(s,c));let h=c[e];if(h)return h;let f=(async()=>{let m=isUnsupportedLazyRouteObjectKey(e),C=s[e]!==void 0&&e!=="hasErrorBoundary";if(m)warning(!m,"Route property "+e+" is not a supported lazy route property. This property will be ignored."),c[e]=Promise.resolve();else if(C)warning(!1,`Route "${s.id}" has a static property "${e}" defined. The lazy property will be ignored.`);else{let b=await u();b!=null&&(Object.assign(s,{[e]:b}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[e]=void 0,Object.values(s.lazy).every(b=>b===void 0)&&(s.lazy=void 0))})();return c[e]=f,f},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(e,t,n,a,s){let u=n[e.id];if(invariant(u,"No route found in manifest"),!e.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof e.lazy=="function"){let _=lazyRouteFunctionCache.get(u);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let C=(async()=>{invariant(typeof e.lazy=="function","No lazy route function found");let b=await e.lazy(),T={};for(let R in b){let A=b[R];if(A===void 0)continue;let I=isUnsupportedLazyRouteFunctionKey(R),N=u[R]!==void 0&&R!=="hasErrorBoundary";I?warning(!I,"Route property "+R+" is not a supported property to be returned from a lazy route function. This property will be ignored."):N?warning(!N,`Route "${u.id}" has a static property "${R}" defined but its lazy function is also returning a value for this property. The lazy route property "${R}" will be ignored.`):T[R]=A}Object.assign(u,T),Object.assign(u,{...a(u),lazy:void 0})})();return lazyRouteFunctionCache.set(u,C),C.catch(()=>{}),{lazyRoutePromise:C,lazyHandlerPromise:C}}let c=Object.keys(e.lazy),h=[],f;for(let _ of c){if(s&&s.includes(_))continue;let C=loadLazyRouteProperty({key:_,route:e,manifest:n,mapRouteProperties:a});C&&(h.push(C),_===t&&(f=C))}let m=h.length>0?Promise.all(h).then(()=>{}):void 0;return m?.catch(()=>{}),f?.catch(()=>{}),{lazyRoutePromise:m,lazyHandlerPromise:f}}async function defaultDataStrategy(e){let t=e.matches.filter(s=>s.shouldLoad),n={};return(await Promise.all(t.map(s=>s.resolve()))).forEach((s,u)=>{n[t[u].route.id]=s}),n}async function defaultDataStrategyWithMiddleware(e){return e.matches.some(t=>t.route.unstable_middleware)?runClientMiddlewarePipeline(e,()=>defaultDataStrategy(e)):defaultDataStrategy(e)}function runClientMiddlewarePipeline(e,t){return runMiddlewarePipeline(e,t,a=>a,isDataStrategyResults,n);function n(a,s,u){if(u)return Promise.resolve(Object.assign(u.value,{[s]:{type:"error",result:a}}));{let{matches:c}=e,h=Math.min(c.findIndex(m=>m.route.id===s)||0,c.findIndex(m=>m.unstable_shouldCallHandler())||0),f=findNearestBoundary(c,c[h].route.id).route.id;return Promise.resolve({[f]:{type:"error",result:a}})}}}async function runMiddlewarePipeline(e,t,n,a,s){let{matches:u,request:c,params:h,context:f}=e,m=u.flatMap(C=>C.route.unstable_middleware?C.route.unstable_middleware.map(b=>[C.route.id,b]):[]);return await callRouteMiddleware({request:c,params:h,context:f},m,t,n,a,s)}async function callRouteMiddleware(e,t,n,a,s,u,c=0){let{request:h}=e;if(h.signal.aborted)throw h.signal.reason??new Error(`Request aborted: ${h.method} ${h.url}`);let f=t[c];if(!f)return await n();let[m,_]=f,C,b=async()=>{if(C)throw new Error("You may only call `next()` once per middleware");try{return C={value:await callRouteMiddleware(e,t,n,a,s,u,c+1)},C.value}catch(T){return C={value:await u(T,m,C)},C.value}};try{let T=await _(e,b),R=T!=null?a(T):void 0;return s(R)?R:C?R??C.value:(C={value:await b()},C.value)}catch(T){return await u(T,m,C)}}function getDataStrategyMatchLazyPromises(e,t,n,a,s){let u=loadLazyRouteProperty({key:"unstable_middleware",route:a.route,manifest:t,mapRouteProperties:e}),c=loadLazyRoute(a.route,isMutationMethod(n.method)?"action":"loader",t,e,s);return{middleware:u,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function getDataStrategyMatch(e,t,n,a,s,u,c,h=null){let f=!1,m=getDataStrategyMatchLazyPromises(e,t,n,a,s);return{...a,_lazyPromises:m,shouldLoad:c,unstable_shouldRevalidateArgs:h,unstable_shouldCallHandler(_){return f=!0,h?typeof _=="boolean"?shouldRevalidateLoader(a,{...h,defaultShouldRevalidate:_}):shouldRevalidateLoader(a,h):c},resolve(_){return f||c||_&&!isMutationMethod(n.method)&&(a.route.lazy||a.route.loader)?callLoaderOrAction({request:n,match:a,lazyHandlerPromise:m?.handler,lazyRoutePromise:m?.route,handlerOverride:_,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(e,t,n,a,s,u,c,h=null){return a.map(f=>f.route.id!==s.route.id?{...f,shouldLoad:!1,unstable_shouldRevalidateArgs:h,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(e,t,n,f,u),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(e,t,n,f,u,c,!0,h))}async function callDataStrategyImpl(e,t,n,a,s,u){n.some(m=>m._lazyPromises?.middleware)&&await Promise.all(n.map(m=>m._lazyPromises?.middleware));let c={request:t,params:n[0].params,context:s,matches:n},f=await e({...c,fetcherKey:a,unstable_runClientMiddleware:m=>{let _=c;return runClientMiddlewarePipeline(_,()=>m({..._,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(m=>[m._lazyPromises?.handler,m._lazyPromises?.route]))}catch{}return f}async function callLoaderOrAction({request:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:a,handlerOverride:s,scopedContext:u}){let c,h,f=isMutationMethod(e.method),m=f?"action":"loader",_=C=>{let b,T=new Promise((I,P)=>b=P);h=()=>b(),e.signal.addEventListener("abort",h);let R=I=>typeof C!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${m}" [routeId: ${t.route.id}]`)):C({request:e,params:t.params,context:u},...I!==void 0?[I]:[]),A=(async()=>{try{return{type:"data",result:await(s?s(P=>R(P)):R())}}catch(I){return{type:"error",result:I}}})();return Promise.race([A,T])};try{let C=f?t.route.action:t.route.loader;if(n||a)if(C){let b,[T]=await Promise.all([_(C).catch(R=>{b=R}),n,a]);if(b!==void 0)throw b;c=T}else{await n;let b=f?t.route.action:t.route.loader;if(b)[c]=await Promise.all([_(b),a]);else if(m==="action"){let T=new URL(e.url),R=T.pathname+T.search;throw getInternalRouterError(405,{method:e.method,pathname:R,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(C)c=await _(C);else{let b=new URL(e.url),T=b.pathname+b.search;throw getInternalRouterError(404,{pathname:T})}}catch(C){return{type:"error",result:C}}finally{h&&e.signal.removeEventListener("abort",h)}return c}async function parseResponseBody(e){let t=e.headers.get("Content-Type");return t&&/\bapplication\/json\b/.test(t)?e.body==null?null:e.json():e.text()}async function convertDataStrategyResultToDataResult(e){let{result:t,type:n}=e;if(isResponse$1(t)){let a;try{a=await parseResponseBody(t)}catch(s){return{type:"error",error:s}}return n==="error"?{type:"error",error:new ErrorResponseImpl(t.status,t.statusText,a),statusCode:t.status,headers:t.headers}:{type:"data",data:a,statusCode:t.status,headers:t.headers}}return n==="error"?isDataWithResponseInit(t)?t.data instanceof Error?{type:"error",error:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(t.init?.status||500,void 0,t.data),statusCode:isRouteErrorResponse(t)?t.status:void 0,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"error",error:t,statusCode:isRouteErrorResponse(t)?t.status:void 0}:isDataWithResponseInit(t)?{type:"data",data:t.data,statusCode:t.init?.status,headers:t.init?.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function normalizeRelativeRoutingRedirectResponse(e,t,n,a,s){let u=e.headers.get("Location");if(invariant(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(u)){let c=a.slice(0,a.findIndex(h=>h.route.id===n)+1);u=normalizeTo(new URL(t.url),c,s,u),e.headers.set("Location",u)}return e}function normalizeRedirectLocation(e,t,n){if(isAbsoluteUrl(e)){let a=e,s=a.startsWith("//")?new URL(t.protocol+a):new URL(a),u=stripBasename(s.pathname,n)!=null;if(s.origin===t.origin&&u)return s.pathname+s.search+s.hash}return e}function createClientSideRequest(e,t,n,a){let s=e.createURL(stripHashFromPath(t)).toString(),u={signal:n};if(a&&isMutationMethod(a.formMethod)){let{formMethod:c,formEncType:h}=a;u.method=c.toUpperCase(),h==="application/json"?(u.headers=new Headers({"Content-Type":h}),u.body=JSON.stringify(a.json)):h==="text/plain"?u.body=a.text:h==="application/x-www-form-urlencoded"&&a.formData?u.body=convertFormDataToSearchParams(a.formData):u.body=a.formData}return new Request(s,u)}function convertFormDataToSearchParams(e){let t=new URLSearchParams;for(let[n,a]of e.entries())t.append(n,typeof a=="string"?a:a.name);return t}function convertSearchParamsToFormData(e){let t=new FormData;for(let[n,a]of e.entries())t.append(n,a);return t}function processRouteLoaderData(e,t,n,a=!1,s=!1){let u={},c=null,h,f=!1,m={},_=n&&isErrorResult(n[1])?n[1].error:void 0;return e.forEach(C=>{if(!(C.route.id in t))return;let b=C.route.id,T=t[b];if(invariant(!isRedirectResult(T),"Cannot handle redirect results in processLoaderData"),isErrorResult(T)){let R=T.error;if(_!==void 0&&(R=_,_=void 0),c=c||{},s)c[b]=R;else{let A=findNearestBoundary(e,b);c[A.route.id]==null&&(c[A.route.id]=R)}a||(u[b]=ResetLoaderDataSymbol),f||(f=!0,h=isRouteErrorResponse(T.error)?T.error.status:500),T.headers&&(m[b]=T.headers)}else u[b]=T.data,T.statusCode&&T.statusCode!==200&&!f&&(h=T.statusCode),T.headers&&(m[b]=T.headers)}),_!==void 0&&n&&(c={[n[0]]:_},n[2]&&(u[n[2]]=void 0)),{loaderData:u,errors:c,statusCode:h||200,loaderHeaders:m}}function processLoaderData(e,t,n,a,s,u){let{loaderData:c,errors:h}=processRouteLoaderData(t,n,a);return s.filter(f=>!f.matches||f.matches.some(m=>m.shouldLoad)).forEach(f=>{let{key:m,match:_,controller:C}=f;if(C&&C.signal.aborted)return;let b=u[m];if(invariant(b,"Did not find corresponding fetcher result"),isErrorResult(b)){let T=findNearestBoundary(e.matches,_?.route.id);h&&h[T.route.id]||(h={...h,[T.route.id]:b.error}),e.fetchers.delete(m)}else if(isRedirectResult(b))invariant(!1,"Unhandled fetcher revalidation redirect");else{let T=getDoneFetcher(b.data);e.fetchers.set(m,T)}}),{loaderData:c,errors:h}}function mergeLoaderData(e,t,n,a){let s=Object.entries(t).filter(([,u])=>u!==ResetLoaderDataSymbol).reduce((u,[c,h])=>(u[c]=h,u),{});for(let u of n){let c=u.route.id;if(!t.hasOwnProperty(c)&&e.hasOwnProperty(c)&&u.route.loader&&(s[c]=e[c]),a&&a.hasOwnProperty(c))break}return s}function getActionDataForCommit(e){return e?isErrorResult(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function findNearestBoundary(e,t){return(t?e.slice(0,e.findIndex(a=>a.route.id===t)+1):[...e]).reverse().find(a=>a.route.hasErrorBoundary===!0)||e[0]}function getShortCircuitMatches(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function getInternalRouterError(e,{pathname:t,routeId:n,method:a,type:s,message:u}={}){let c="Unknown Server Error",h="Unknown @remix-run/router error";return e===400?(c="Bad Request",a&&t&&n?h=`You made a ${a} request to "${t}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:s==="invalid-body"&&(h="Unable to encode submission body")):e===403?(c="Forbidden",h=`Route "${n}" does not match URL "${t}"`):e===404?(c="Not Found",h=`No route matches URL "${t}"`):e===405&&(c="Method Not Allowed",a&&t&&n?h=`You made a ${a.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:a&&(h=`Invalid request method "${a.toUpperCase()}"`)),new ErrorResponseImpl(e||500,c,new Error(h),!0)}function findRedirect(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[a,s]=t[n];if(isRedirectResult(s))return{key:a,result:s}}}function stripHashFromPath(e){let t=typeof e=="string"?parsePath(e):e;return createPath({...t,hash:""})}function isHashChangeOnly(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function isDataStrategyResults(e){return e!=null&&typeof e=="object"&&Object.entries(e).every(([t,n])=>typeof t=="string"&&isDataStrategyResult(n))}function isDataStrategyResult(e){return e!=null&&typeof e=="object"&&"type"in e&&"result"in e&&(e.type==="data"||e.type==="error")}function isRedirectDataStrategyResult(e){return isResponse$1(e.result)&&redirectStatusCodes.has(e.result.status)}function isErrorResult(e){return e.type==="error"}function isRedirectResult(e){return(e&&e.type)==="redirect"}function isDataWithResponseInit(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function isResponse$1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function isValidMethod(e){return validRequestMethods.has(e.toUpperCase())}function isMutationMethod(e){return validMutationMethods.has(e.toUpperCase())}function hasNakedIndexQuery(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function getTargetMatch(e,t){let n=typeof t=="string"?parsePath(t).search:t.search;if(e[e.length-1].route.index&&hasNakedIndexQuery(n||""))return e[e.length-1];let a=getPathContributingMatches(e);return a[a.length-1]}function getSubmissionFromNavigation(e){let{formMethod:t,formAction:n,formEncType:a,text:s,formData:u,json:c}=e;if(!(!t||!n||!a)){if(s!=null)return{formMethod:t,formAction:n,formEncType:a,formData:void 0,json:void 0,text:s};if(u!=null)return{formMethod:t,formAction:n,formEncType:a,formData:u,json:void 0,text:void 0};if(c!==void 0)return{formMethod:t,formAction:n,formEncType:a,formData:void 0,json:c,text:void 0}}}function getLoadingNavigation(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function getLoadingFetcher(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function getSubmittingFetcher(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function getDoneFetcher(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function restoreAppliedTransitions(e,t){try{let n=e.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(n){let a=JSON.parse(n);for(let[s,u]of Object.entries(a||{}))u&&Array.isArray(u)&&t.set(s,new Set(u||[]))}}catch{}}function persistAppliedTransitions(e,t){if(t.size>0){let n={};for(let[a,s]of t)n[a]=[...s];try{e.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(n))}catch(a){warning(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function createDeferred(){let e,t,n=new Promise((a,s)=>{e=async u=>{a(u);try{await n}catch{}},t=async u=>{s(u);try{await n}catch{}}});return{promise:n,resolve:e,reject:t}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(e,{relative:t}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=reactExports.useContext(NavigationContext),{hash:s,pathname:u,search:c}=useResolvedPath(e,{relative:t}),h=u;return n!=="/"&&(h=u==="/"?n:joinPaths([n,u])),a.createHref({pathname:h,search:c,hash:s})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$1(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:t,navigator:n}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:s}=useLocation(),u=JSON.stringify(getResolveToMatches(a)),c=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{c.current=!0}),reactExports.useCallback((f,m={})=>{if(warning(c.current,navigateEffectWarning),!c.current)return;if(typeof f=="number"){n.go(f);return}let _=resolveTo(f,JSON.parse(u),s,m.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:joinPaths([t,_.pathname])),(m.replace?n.replace:n.push)(_,m.state,m)},[t,n,u,s,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:t}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:a}=useLocation(),s=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(s),a,t==="path"),[e,s,a,t])}function useRoutesImpl(e,t,n,a,s){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),h=c[c.length-1],f=h?h.params:{},m=h?h.pathname:"/",_=h?h.pathnameBase:"/",C=h&&h.route;{let N=C&&C.path||"";warningOnce(m,!C||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let b=useLocation(),T;T=b;let R=T.pathname||"/",A=R;if(_!=="/"){let N=_.replace(/^\//,"").split("/");A="/"+R.replace(/^\//,"").split("/").slice(N.length).join("/")}let I=matchRoutes(e,{pathname:A});return warning(C||I!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),warning(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(I&&I.map(N=>Object.assign({},N,{params:Object.assign({},f,N.params),pathname:joinPaths([_,u.encodeLocation?u.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?_:joinPaths([_,u.encodeLocation?u.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),c,n,a,s)}function DefaultErrorComponent(){let e=useRouteError(),t=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null,"💿 Hey developer 👋"),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:u},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:u},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),n?reactExports.createElement("pre",{style:s},n):null,c)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:e,match:t,children:n}){let a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},n)}function _renderMatches(e,t=[],n=null,a=null,s=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let u=e,c=n?.errors;if(c!=null){let m=u.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);invariant(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,m+1))}let h=!1,f=-1;if(n)for(let m=0;m<u.length;m++){let _=u[m];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(f=m),_.route.id){let{loaderData:C,errors:b}=n,T=_.route.loader&&!C.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||T){h=!0,f>=0?u=u.slice(0,f+1):u=[u[0]];break}}}return u.reduceRight((m,_,C)=>{let b,T=!1,R=null,A=null;n&&(b=c&&_.route.id?c[_.route.id]:void 0,R=_.route.errorElement||defaultErrorElement,h&&(f<0&&C===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,A=null):f===C&&(T=!0,A=_.route.hydrateFallbackElement||null)));let I=t.concat(u.slice(0,C+1)),P=()=>{let N;return b?N=R:T?N=A:_.route.Component?N=reactExports.createElement(_.route.Component,null):_.route.element?N=_.route.element:N=m,reactExports.createElement(RenderedRoute,{match:_,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:N})};return n&&(_.route.ErrorBoundary||_.route.errorElement||C===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:R,error:b,children:P(),routeContext:{outlet:null,matches:I,isDataRoute:!0},unstable_onError:a}):P()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let t=reactExports.useContext(DataRouterContext);return invariant(t,getDataRouterConsoleError(e)),t}function useDataRouterState(e){let t=reactExports.useContext(DataRouterStateContext);return invariant(t,getDataRouterConsoleError(e)),t}function useRouteContext(e){let t=reactExports.useContext(RouteContext);return invariant(t,getDataRouterConsoleError(e)),t}function useCurrentRouteId(e){let t=useRouteContext(e),n=t.matches[t.matches.length-1];return invariant(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return e!==void 0?e:t.errors?.[n]}var blockerId=0;function useBlocker(e){let{router:t,basename:n}=useDataRouterContext("useBlocker"),a=useDataRouterState("useBlocker"),[s,u]=reactExports.useState(""),c=reactExports.useCallback(h=>{if(typeof e!="function")return!!e;if(n==="/")return e(h);let{currentLocation:f,nextLocation:m,historyAction:_}=h;return e({currentLocation:{...f,pathname:stripBasename(f.pathname,n)||f.pathname},nextLocation:{...m,pathname:stripBasename(m.pathname,n)||m.pathname},historyAction:_})},[n,e]);return reactExports.useEffect(()=>{let h=String(++blockerId);return u(h),()=>t.deleteBlocker(h)},[t]),reactExports.useEffect(()=>{s!==""&&t.getBlocker(s,c)},[t,s,c]),s&&a.blockers.has(s)?a.blockers.get(s):IDLE_BLOCKER}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{n.current=!0}),reactExports.useCallback(async(s,u={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...u}))},[e,t])}var alreadyWarned={};function warningOnce(e,t,n){!t&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,n))}var alreadyWarned2={};function warnOnce(e,t){!e&&!alreadyWarned2[t]&&(alreadyWarned2[t]=!0,console.warn(t))}function mapRouteProperties(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&warning(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:reactExports.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&warning(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:reactExports.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&warning(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:reactExports.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",e(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",t(n))}})}};function RouterProvider({router:e,flushSync:t,unstable_onError:n}){let[a,s]=reactExports.useState(e.state),[u,c]=reactExports.useState(),[h,f]=reactExports.useState({isTransitioning:!1}),[m,_]=reactExports.useState(),[C,b]=reactExports.useState(),[T,R]=reactExports.useState(),A=reactExports.useRef(new Map),I=reactExports.useCallback(D=>{s(M=>(D.errors&&n&&Object.entries(D.errors).forEach(([j,H])=>{M.errors?.[j]!==H&&n(H)}),D))},[n]),P=reactExports.useCallback((D,{deletedFetchers:M,flushSync:j,viewTransitionOpts:H})=>{D.fetchers.forEach((K,re)=>{K.data!==void 0&&A.current.set(re,K.data)}),M.forEach(K=>A.current.delete(K)),warnOnce(j===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let X=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(warnOnce(H==null||X,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!H||!X){t&&j?t(()=>I(D)):reactExports.startTransition(()=>I(D));return}if(t&&j){t(()=>{C&&(m&&m.resolve(),C.skipTransition()),f({isTransitioning:!0,flushSync:!0,currentLocation:H.currentLocation,nextLocation:H.nextLocation})});let K=e.window.document.startViewTransition(()=>{t(()=>I(D))});K.finished.finally(()=>{t(()=>{_(void 0),b(void 0),c(void 0),f({isTransitioning:!1})})}),t(()=>b(K));return}C?(m&&m.resolve(),C.skipTransition(),R({state:D,currentLocation:H.currentLocation,nextLocation:H.nextLocation})):(c(D),f({isTransitioning:!0,flushSync:!1,currentLocation:H.currentLocation,nextLocation:H.nextLocation}))},[e.window,t,C,m,I]);reactExports.useLayoutEffect(()=>e.subscribe(P),[e,P]),reactExports.useEffect(()=>{h.isTransitioning&&!h.flushSync&&_(new Deferred)},[h]),reactExports.useEffect(()=>{if(m&&u&&e.window){let D=u,M=m.promise,j=e.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>I(D)),await M});j.finished.finally(()=>{_(void 0),b(void 0),c(void 0),f({isTransitioning:!1})}),b(j)}},[u,m,e.window,I]),reactExports.useEffect(()=>{m&&u&&a.location.key===u.location.key&&m.resolve()},[m,C,a.location,u]),reactExports.useEffect(()=>{!h.isTransitioning&&T&&(c(T.state),f({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),R(void 0))},[h.isTransitioning,T]);let N=reactExports.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:D=>e.navigate(D),push:(D,M,j)=>e.navigate(D,{state:M,preventScrollReset:j?.preventScrollReset}),replace:(D,M,j)=>e.navigate(D,{replace:!0,state:M,preventScrollReset:j?.preventScrollReset})}),[e]),S=e.basename||"/",k=reactExports.useMemo(()=>({router:e,navigator:N,static:!1,basename:S,unstable_onError:n}),[e,N,S,n]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:k},reactExports.createElement(DataRouterStateContext.Provider,{value:a},reactExports.createElement(FetchersContext.Provider,{value:A.current},reactExports.createElement(ViewTransitionContext.Provider,{value:h},reactExports.createElement(Router,{basename:S,location:a.location,navigationType:a.historyAction,navigator:N},reactExports.createElement(MemoizedDataRoutes,{routes:e.routes,future:e.future,state:a,unstable_onError:n})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:t,state:n,unstable_onError:a}){return useRoutesImpl(e,void 0,n,a,t)}function Navigate({to:e,replace:t,state:n,relative:a}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=reactExports.useContext(NavigationContext);warning(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),h=useNavigate(),f=resolveTo(e,getResolveToMatches(u),c,a==="path"),m=JSON.stringify(f);return reactExports.useEffect(()=>{h(JSON.parse(m),{replace:t,state:n,relative:a})},[h,m,a,t,n]),null}function Route(e){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:t=null,location:n,navigationType:a="POP",navigator:s,static:u=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),h=reactExports.useMemo(()=>({basename:c,navigator:s,static:u,future:{}}),[c,s,u]);typeof n=="string"&&(n=parsePath(n));let{pathname:f="/",search:m="",hash:_="",state:C=null,key:b="default"}=n,T=reactExports.useMemo(()=>{let R=stripBasename(f,c);return R==null?null:{location:{pathname:R,search:m,hash:_,state:C,key:b},navigationType:a}},[c,f,m,_,C,b,a]);return warning(T!=null,`<Router basename="${c}"> is not able to match the URL "${f}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:reactExports.createElement(NavigationContext.Provider,{value:h},reactExports.createElement(LocationContext.Provider,{children:t,value:T}))}function createRoutesFromChildren(e,t=[]){let n=[];return reactExports.Children.forEach(e,(a,s)=>{if(!reactExports.isValidElement(a))return;let u=[...t,s];if(a.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(a.props.children,u));return}invariant(a.type===Route,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!a.props.index||!a.props.children,"An index route cannot have child routes.");let c={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(c.children=createRoutesFromChildren(a.props.children,u)),n.push(c)}),n}var createRoutesFromElements=createRoutesFromChildren,defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return e!=null&&typeof e.tagName=="string"}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,t){return e.button===0&&(!t||t==="_self")&&!isModifiedEvent(e)}function createSearchParams(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let a=e[n];return t.concat(Array.isArray(a)?a.map(s=>[n,s]):[[n,a]])},[]))}function getSearchParamsForLocation(e,t){let n=createSearchParams(e);return t&&t.forEach((a,s)=>{n.has(s)||t.getAll(s).forEach(u=>{n.append(s,u)})}),n}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,t){let n,a,s,u,c;if(isFormElement(e)){let h=e.getAttribute("action");a=h?stripBasename(h,t):null,n=e.getAttribute("method")||defaultMethod,s=getFormEncType(e.getAttribute("enctype"))||defaultEncType,u=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=e.getAttribute("formaction")||h.getAttribute("action");if(a=f?stripBasename(f,t):null,n=e.getAttribute("formmethod")||h.getAttribute("method")||defaultMethod,s=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(h.getAttribute("enctype"))||defaultEncType,u=new FormData(h,e),!isFormDataSubmitterSupported()){let{name:m,type:_,value:C}=e;if(_==="image"){let b=m?`${m}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else m&&u.append(m,C)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,a=null,s=defaultEncType,c=e}return u&&s==="text/plain"&&(c=u,u=void 0),{action:a,method:n.toLowerCase(),encType:s,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function singleFetchUrl(e,t,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a.pathname==="/"?a.pathname=`_root.${n}`:t&&stripBasename(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function loadRouteModule(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,t,n){let a=await Promise.all(e.map(async s=>{let u=t.routes[s.route.id];if(u){let c=await loadRouteModule(u,n);return c.links?c.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function getNewMatchesForLinks(e,t,n,a,s,u){let c=(f,m)=>n[m]?f.route.id!==n[m].route.id:!0,h=(f,m)=>n[m].pathname!==f.pathname||n[m].route.path?.endsWith("*")&&n[m].params["*"]!==f.params["*"];return u==="assets"?t.filter((f,m)=>c(f,m)||h(f,m)):u==="data"?t.filter((f,m)=>{let _=a.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(c(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let C=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function getModuleLinkHrefs(e,t,{includeHydrateFallback:n}={}){return dedupeHrefs(e.map(a=>{let s=t.routes[a.route.id];if(!s)return[];let u=[s.module];return s.clientActionModule&&(u=u.concat(s.clientActionModule)),s.clientLoaderModule&&(u=u.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(u=u.concat(s.hydrateFallbackModule)),s.imports&&(u=u.concat(s.imports)),u}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let t={},n=Object.keys(e).sort();for(let a of n)t[a]=e[a];return t}function dedupeLinkDescriptors(e,t){let n=new Set;return new Set(t),e.reduce((a,s)=>{let u=JSON.stringify(sortKeys(s));return n.has(u)||(n.add(u),a.push({key:u,link:s})),a},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,t){let n=reactExports.useContext(FrameworkContext),[a,s]=reactExports.useState(!1),[u,c]=reactExports.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:_,onTouchStart:C}=t,b=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let A=P=>{P.forEach(N=>{c(N.isIntersecting)})},I=new IntersectionObserver(A,{threshold:.5});return b.current&&I.observe(b.current),()=>{I.disconnect()}}},[e]),reactExports.useEffect(()=>{if(a){let A=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(A)}}},[a]);let T=()=>{s(!0)},R=()=>{s(!1),c(!1)};return n?e!=="intent"?[u,b,{}]:[u,b,{onFocus:composeEventHandlers(h,T),onBlur:composeEventHandlers(f,R),onMouseEnter:composeEventHandlers(m,T),onMouseLeave:composeEventHandlers(_,R),onTouchStart:composeEventHandlers(C,T)}]:[!1,b,{}]}function composeEventHandlers(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function PrefetchPageLinks({page:e,...t}){let{router:n}=useDataRouterContext2(),a=reactExports.useMemo(()=>matchRoutes(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:a,...t}):null}function useKeyedPrefetchLinks(e){let{manifest:t,routeModules:n}=useFrameworkContext(),[a,s]=reactExports.useState([]);return reactExports.useEffect(()=>{let u=!1;return getKeyedPrefetchLinks(e,t,n).then(c=>{u||s(c)}),()=>{u=!0}},[e,t,n]),a}function PrefetchPageLinksImpl({page:e,matches:t,...n}){let a=useLocation(),{manifest:s,routeModules:u}=useFrameworkContext(),{basename:c}=useDataRouterContext2(),{loaderData:h,matches:f}=useDataRouterStateContext(),m=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,f,s,a,"data"),[e,t,f,s,a]),_=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,f,s,a,"assets"),[e,t,f,s,a]),C=reactExports.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let R=new Set,A=!1;if(t.forEach(P=>{let N=s.routes[P.route.id];!N||!N.hasLoader||(!m.some(S=>S.route.id===P.route.id)&&P.route.id in h&&u[P.route.id]?.shouldRevalidate||N.hasClientLoader?A=!0:R.add(P.route.id))}),R.size===0)return[];let I=singleFetchUrl(e,c,"data");return A&&R.size>0&&I.searchParams.set("_routes",t.filter(P=>R.has(P.route.id)).map(P=>P.route.id).join(",")),[I.pathname+I.search]},[c,h,a,s,m,t,e,u]),b=reactExports.useMemo(()=>getModuleLinkHrefs(_,s),[_,s]),T=useKeyedPrefetchLinks(_);return reactExports.createElement(reactExports.Fragment,null,C.map(R=>reactExports.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...n})),b.map(R=>reactExports.createElement("link",{key:R,rel:"modulepreload",href:R,...n})),T.map(({key:R,link:A})=>reactExports.createElement("link",{key:R,nonce:n.nonce,...A})))}function mergeRefs(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$1&&(window.__reactRouterVersion="7.8.2")}catch{}function createBrowserRouter(e,t){return createRouter({basename:t?.basename,unstable_getContext:t?.unstable_getContext,future:t?.future,history:createBrowserHistory({window:t?.window}),hydrationData:parseHydrationData(),routes:e,mapRouteProperties,hydrationRouteProperties,dataStrategy:t?.dataStrategy,patchRoutesOnNavigation:t?.patchRoutesOnNavigation,window:t?.window}).initialize()}function parseHydrationData(){let e=window?.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:deserializeErrors(e.errors)}),e}function deserializeErrors(e){if(!e)return null;let t=Object.entries(e),n={};for(let[a,s]of t)if(s&&s.__type==="RouteErrorResponse")n[a]=new ErrorResponseImpl(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let u=window[s.__subType];if(typeof u=="function")try{let c=new u(s.message);c.stack="",n[a]=c}catch{}}if(n[a]==null){let u=new Error(s.message);u.stack="",n[a]=u}}else n[a]=s;return n}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:t,discover:n="render",prefetch:a="none",relative:s,reloadDocument:u,replace:c,state:h,target:f,to:m,preventScrollReset:_,viewTransition:C,...b},T){let{basename:R}=reactExports.useContext(NavigationContext),A=typeof m=="string"&&ABSOLUTE_URL_REGEX2.test(m),I,P=!1;if(typeof m=="string"&&A&&(I=m,isBrowser$1))try{let X=new URL(window.location.href),K=m.startsWith("//")?new URL(X.protocol+m):new URL(m),re=stripBasename(K.pathname,R);K.origin===X.origin&&re!=null?m=re+K.search+K.hash:P=!0}catch{warning(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=useHref(m,{relative:s}),[S,k,D]=usePrefetchBehavior(a,b),M=useLinkClickHandler(m,{replace:c,state:h,target:f,preventScrollReset:_,relative:s,viewTransition:C});function j(X){t&&t(X),X.defaultPrevented||M(X)}let H=reactExports.createElement("a",{...b,...D,href:I||N,onClick:P||u?t:j,ref:mergeRefs(T,k),target:f,"data-discover":!A&&n==="render"?"true":void 0});return S&&!A?reactExports.createElement(reactExports.Fragment,null,H,reactExports.createElement(PrefetchPageLinks,{page:N})):H});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:a="",end:s=!1,style:u,to:c,viewTransition:h,children:f,...m},_){let C=useResolvedPath(c,{relative:m.relative}),b=useLocation(),T=reactExports.useContext(DataRouterStateContext),{navigator:R,basename:A}=reactExports.useContext(NavigationContext),I=T!=null&&useViewTransitionState(C)&&h===!0,P=R.encodeLocation?R.encodeLocation(C).pathname:C.pathname,N=b.pathname,S=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(N=N.toLowerCase(),S=S?S.toLowerCase():null,P=P.toLowerCase()),S&&A&&(S=stripBasename(S,A)||S);const k=P!=="/"&&P.endsWith("/")?P.length-1:P.length;let D=N===P||!s&&N.startsWith(P)&&N.charAt(k)==="/",M=S!=null&&(S===P||!s&&S.startsWith(P)&&S.charAt(P.length)==="/"),j={isActive:D,isPending:M,isTransitioning:I},H=D?t:void 0,X;typeof a=="function"?X=a(j):X=[a,D?"active":null,M?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let K=typeof u=="function"?u(j):u;return reactExports.createElement(Link,{...m,"aria-current":H,className:X,ref:_,style:K,to:c,viewTransition:h},typeof f=="function"?f(j):f)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:a,replace:s,state:u,method:c=defaultMethod,action:h,onSubmit:f,relative:m,preventScrollReset:_,viewTransition:C,...b},T)=>{let R=useSubmit(),A=useFormAction(h,{relative:m}),I=c.toLowerCase()==="get"?"get":"post",P=typeof h=="string"&&ABSOLUTE_URL_REGEX2.test(h),N=S=>{if(f&&f(S),S.defaultPrevented)return;S.preventDefault();let k=S.nativeEvent.submitter,D=k?.getAttribute("formmethod")||c;R(k||S.currentTarget,{fetcherKey:t,method:D,navigate:n,replace:s,state:u,relative:m,preventScrollReset:_,viewTransition:C})};return reactExports.createElement("form",{ref:T,method:I,action:A,onSubmit:a?f:N,...b,"data-discover":!P&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let t=reactExports.useContext(DataRouterContext);return invariant(t,getDataRouterConsoleError2(e)),t}function useLinkClickHandler(e,{target:t,replace:n,state:a,preventScrollReset:s,relative:u,viewTransition:c}={}){let h=useNavigate(),f=useLocation(),m=useResolvedPath(e,{relative:u});return reactExports.useCallback(_=>{if(shouldProcessLinkClick(_,t)){_.preventDefault();let C=n!==void 0?n:createPath(f)===createPath(m);h(e,{replace:C,state:a,preventScrollReset:s,relative:u,viewTransition:c})}},[f,h,m,n,a,t,e,s,u,c])}function useSearchParams(e){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=reactExports.useRef(createSearchParams(e)),n=reactExports.useRef(!1),a=useLocation(),s=reactExports.useMemo(()=>getSearchParamsForLocation(a.search,n.current?null:t.current),[a.search]),u=useNavigate(),c=reactExports.useCallback((h,f)=>{const m=createSearchParams(typeof h=="function"?h(new URLSearchParams(s)):h);n.current=!0,u("?"+m,f)},[u,s]);return[s,c]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),n=useRouteId();return reactExports.useCallback(async(a,s={})=>{let{action:u,method:c,encType:h,formData:f,body:m}=getFormSubmissionInfo(a,t);if(s.navigate===!1){let _=s.fetcherKey||getUniqueFetcherId();await e.fetch(_,n,s.action||u,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||c,formEncType:s.encType||h,flushSync:s.flushSync})}else await e.navigate(s.action||u,{preventScrollReset:s.preventScrollReset,formData:f,body:m,formMethod:s.method||c,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,n])}function useFormAction(e,{relative:t}={}){let{basename:n}=reactExports.useContext(NavigationContext),a=reactExports.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),u={...useResolvedPath(e||".",{relative:t})},c=useLocation();if(e==null){u.search=c.search;let h=new URLSearchParams(u.search),f=h.getAll("index");if(f.some(_=>_==="")){h.delete("index"),f.filter(C=>C).forEach(C=>h.append("index",C));let _=h.toString();u.search=_?`?${_}`:""}}return(!e||e===".")&&s.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:joinPaths([n,u.pathname])),createPath(u)}function useViewTransitionState(e,{relative:t}={}){let n=reactExports.useContext(ViewTransitionContext);invariant(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),s=useResolvedPath(e,{relative:t});if(!n.isTransitioning)return!1;let u=stripBasename(n.currentLocation.pathname,a)||n.currentLocation.pathname,c=stripBasename(n.nextLocation.pathname,a)||n.nextLocation.pathname;return matchPath(s.pathname,c)!=null||matchPath(s.pathname,u)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function RouterProvider2(e){return reactExports.createElement(RouterProvider,{flushSync:reactDomExports.flushSync,...e})}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString:toString$1}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(e=>t=>{const n=toString$1.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$1=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject$2=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(toStringTag in e)&&!(iterator in e)},isEmptyObject=e=>{if(!isObject$1(e)||isBuffer(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject$1(e)&&isFunction$1(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction$1(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction$1(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim$1=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),isArray(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(isBuffer(e))return;const u=n?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;let h;for(a=0;a<c;a++)h=u[a],t.call(null,e[h],h,e)}}function findKey(e,t){if(isBuffer(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,s;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge$1(){const{caseless:e}=isContextDefined(this)&&this||{},t={},n=(a,s)=>{const u=e&&findKey(t,s)||s;isPlainObject$2(t[u])&&isPlainObject$2(a)?t[u]=merge$1(t[u],a):isPlainObject$2(a)?t[u]=merge$1({},a):isArray(a)?t[u]=a.slice():t[u]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&forEach(arguments[a],n);return t}const extend=(e,t,n,{allOwnKeys:a}={})=>(forEach(t,(s,u)=>{n&&isFunction$1(s)?e[u]=bind(s,n):e[u]=s},{allOwnKeys:a}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,a)=>{let s,u,c;const h={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),u=s.length;u-- >0;)c=s[u],(!a||a(c,e,t))&&!h[c]&&(t[c]=e[c],h[c]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const a=(e&&e[iterator]).call(e);let s;for(;(s=a.next())&&!s.done;){const u=s.value;t.call(e,u[0],u[1])}},matchAll=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,s){return a.toUpperCase()+s}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};forEach(n,(s,u)=>{let c;(c=t(s,u,e))!==!1&&(a[u]=c||s)}),Object.defineProperties(e,a)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction$1(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(isFunction$1(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},a=s=>{s.forEach(u=>{n[u]=!0})};return isArray(e)?a(e):a(String(e).split(t)),n},noop$6=()=>{},toFiniteNumber=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&e[toStringTag]==="FormData"&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),n=(a,s)=>{if(isObject$1(a)){if(t.indexOf(a)>=0)return;if(isBuffer(a))return a;if(!("toJSON"in a)){t[s]=a;const u=isArray(a)?[]:{};return forEach(a,(c,h)=>{const f=n(c,s+1);!isUndefined(f)&&(u[h]=f)}),t[s]=void 0,u}}return a};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject$1(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=((e,t)=>e?setImmediate:t?((n,a)=>(_global.addEventListener("message",({source:s,data:u})=>{s===_global&&u===n&&a.length&&a.shift()()},!1),s=>{a.push(s),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=e=>e!=null&&isFunction$1(e[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject:isObject$1,isPlainObject:isPlainObject$2,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$1,extend,trim:trim$1,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$6,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(e,t,n,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(e,t,n,a,s,u)=>{const c=Object.create(prototype$1);return utils$1.toFlatObject(e,c,function(f){return f!==Error.prototype},h=>h!=="isAxiosError"),AxiosError$1.call(c,e.message,t,n,a,s),c.cause=e,c.name=e.name,u&&Object.assign(c,u),c};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(s,u){return s=removeBrackets(s),!n&&u?"["+s+"]":s}).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,I){return!utils$1.isUndefined(I[A])});const a=n.metaTokens,s=n.visitor||_,u=n.dots,c=n.indexes,f=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(s))throw new TypeError("visitor must be a function");function m(R){if(R===null)return"";if(utils$1.isDate(R))return R.toISOString();if(utils$1.isBoolean(R))return R.toString();if(!f&&utils$1.isBlob(R))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(R)||utils$1.isTypedArray(R)?f&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function _(R,A,I){let P=R;if(R&&!I&&typeof R=="object"){if(utils$1.endsWith(A,"{}"))A=a?A:A.slice(0,-2),R=JSON.stringify(R);else if(utils$1.isArray(R)&&isFlatArray(R)||(utils$1.isFileList(R)||utils$1.endsWith(A,"[]"))&&(P=utils$1.toArray(R)))return A=removeBrackets(A),P.forEach(function(S,k){!(utils$1.isUndefined(S)||S===null)&&t.append(c===!0?renderKey([A],k,u):c===null?A:A+"[]",m(S))}),!1}return isVisitable(R)?!0:(t.append(renderKey(I,A,u),m(R)),!1)}const C=[],b=Object.assign(predicates,{defaultVisitor:_,convertValue:m,isVisitable});function T(R,A){if(!utils$1.isUndefined(R)){if(C.indexOf(R)!==-1)throw Error("Circular reference detected in "+A.join("."));C.push(R),utils$1.forEach(R,function(P,N){(!(utils$1.isUndefined(P)||P===null)&&s.call(t,P,utils$1.isString(N)?N.trim():N,A,b))===!0&&T(P,A?A.concat(N):[N])}),C.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return T(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(a){return t.call(this,a,encode$1)}:encode$1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,n){if(!t)return e;const a=n&&n.encode||encode;utils$1.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let u;if(s?u=s(t,n):u=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(a),u){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(a){a!==null&&t(a)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,{visitor:function(n,a,s,u){return platform.isNode&&utils$1.isBuffer(n)?(this.append(a,n.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...t})}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},n=Object.keys(e);let a;const s=n.length;let u;for(a=0;a<s;a++)u=n[a],t[u]=e[u];return t}function formDataToJSON(e){function t(n,a,s,u){let c=n[u++];if(c==="__proto__")return!0;const h=Number.isFinite(+c),f=u>=n.length;return c=!c&&utils$1.isArray(s)?s.length:c,f?(utils$1.hasOwnProp(s,c)?s[c]=[s[c],a]:s[c]=a,!h):((!s[c]||!utils$1.isObject(s[c]))&&(s[c]=[]),t(n,a,s[c],u)&&utils$1.isArray(s[c])&&(s[c]=arrayToObject(s[c])),!h)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,(a,s)=>{t(parsePropPath(a),s,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",s=a.indexOf("application/json")>-1,u=utils$1.isObject(t);if(u&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return s?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let h;if(u){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((h=utils$1.isFileList(t))||a.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return toFormData$1(h?{"files[]":t}:t,f&&new f,this.formSerializer)}}return u||s?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults.transitional,a=n&&n.forcedJSONParsing,s=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(a&&!this.responseType||s)){const c=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(h){if(c)throw h.name==="SyntaxError"?AxiosError$1.from(h,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):h}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,a,s;return e&&e.split(`
`).forEach(function(c){s=c.indexOf(":"),n=c.substring(0,s).trim().toLowerCase(),a=c.substring(s+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,a,s){if(utils$1.isFunction(a))return a.call(this,t,n);if(s&&(t=n),!!utils$1.isString(t)){if(utils$1.isString(a))return t.indexOf(a)!==-1;if(utils$1.isRegExp(a))return a.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(s,u,c){return this[a].call(this,t,s,u,c)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,n,a){const s=this;function u(h,f,m){const _=normalizeHeader(f);if(!_)throw new Error("header name must be a non-empty string");const C=utils$1.findKey(s,_);(!C||s[C]===void 0||m===!0||m===void 0&&s[C]!==!1)&&(s[C||f]=normalizeValue(h))}const c=(h,f)=>utils$1.forEach(h,(m,_)=>u(m,_,f));if(utils$1.isPlainObject(t)||t instanceof this.constructor)c(t,n);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))c(parseHeaders(t),n);else if(utils$1.isObject(t)&&utils$1.isIterable(t)){let h={},f,m;for(const _ of t){if(!utils$1.isArray(_))throw TypeError("Object iterator must return a key-value pair");h[m=_[0]]=(f=h[m])?utils$1.isArray(f)?[...f,_[1]]:[f,_[1]]:_[1]}c(h,n)}else t!=null&&u(n,t,a);return this}get(t,n){if(t=normalizeHeader(t),t){const a=utils$1.findKey(this,t);if(a){const s=this[a];if(!n)return s;if(n===!0)return parseTokens(s);if(utils$1.isFunction(n))return n.call(this,s,a);if(utils$1.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const a=utils$1.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||matchHeaderValue(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let s=!1;function u(c){if(c=normalizeHeader(c),c){const h=utils$1.findKey(a,c);h&&(!n||matchHeaderValue(a,a[h],h,n))&&(delete a[h],s=!0)}}return utils$1.isArray(t)?t.forEach(u):u(t),s}clear(t){const n=Object.keys(this);let a=n.length,s=!1;for(;a--;){const u=n[a];(!t||matchHeaderValue(this,this[u],u,t,!0))&&(delete this[u],s=!0)}return s}normalize(t){const n=this,a={};return utils$1.forEach(this,(s,u)=>{const c=utils$1.findKey(a,u);if(c){n[c]=normalizeValue(s),delete n[u];return}const h=t?formatHeader(u):String(u).trim();h!==u&&delete n[u],n[h]=normalizeValue(s),a[h]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils$1.forEach(this,(a,s)=>{a!=null&&a!==!1&&(n[s]=t&&utils$1.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,s=this.prototype;function u(c){const h=normalizeHeader(c);a[h]||(buildAccessors(s,c),a[h]=!0)}return utils$1.isArray(t)?t.forEach(u):u(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(e,t){const n=this||defaults,a=t||n,s=AxiosHeaders$1.from(a.headers);let u=a.data;return utils$1.forEach(e,function(h){u=h.call(n,u,s.normalize(),t?t.status:void 0)}),s.normalize(),u}function isCancel$1(e){return!!(e&&e.__CANCEL__)}function CanceledError$1(e,t,n){AxiosError$1.call(this,e??"canceled",AxiosError$1.ERR_CANCELED,t,n),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),a=new Array(e);let s=0,u=0,c;return t=t!==void 0?t:1e3,function(f){const m=Date.now(),_=a[u];c||(c=m),n[s]=f,a[s]=m;let C=u,b=0;for(;C!==s;)b+=n[C++],C=C%e;if(s=(s+1)%e,s===u&&(u=(u+1)%e),m-c<t)return;const T=_&&m-_;return T?Math.round(b*1e3/T):void 0}}function throttle(e,t){let n=0,a=1e3/t,s,u;const c=(m,_=Date.now())=>{n=_,s=null,u&&(clearTimeout(u),u=null),e(...m)};return[(...m)=>{const _=Date.now(),C=_-n;C>=a?c(m,_):(s=m,u||(u=setTimeout(()=>{u=null,c(s)},a-C)))},()=>s&&c(s)]}const progressEventReducer=(e,t,n=3)=>{let a=0;const s=speedometer(50,250);return throttle(u=>{const c=u.loaded,h=u.lengthComputable?u.total:void 0,f=c-a,m=s(f),_=c<=h;a=c;const C={loaded:c,total:h,progress:h?c/h:void 0,bytes:f,rate:m||void 0,estimated:m&&h&&_?(h-c)/m:void 0,event:u,lengthComputable:h!=null,[t?"download":"upload"]:!0};e(C)},n)},progressEventDecorator=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,platform.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,n,a,s,u){const c=[e+"="+encodeURIComponent(t)];utils$1.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),utils$1.isString(a)&&c.push("path="+a),utils$1.isString(s)&&c.push("domain="+s),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,n){let a=!isAbsoluteURL(t);return e&&(a||n==!1)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const n={};function a(m,_,C,b){return utils$1.isPlainObject(m)&&utils$1.isPlainObject(_)?utils$1.merge.call({caseless:b},m,_):utils$1.isPlainObject(_)?utils$1.merge({},_):utils$1.isArray(_)?_.slice():_}function s(m,_,C,b){if(utils$1.isUndefined(_)){if(!utils$1.isUndefined(m))return a(void 0,m,C,b)}else return a(m,_,C,b)}function u(m,_){if(!utils$1.isUndefined(_))return a(void 0,_)}function c(m,_){if(utils$1.isUndefined(_)){if(!utils$1.isUndefined(m))return a(void 0,m)}else return a(void 0,_)}function h(m,_,C){if(C in t)return a(m,_);if(C in e)return a(void 0,m)}const f={url:u,method:u,data:u,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:h,headers:(m,_,C)=>s(headersToObject(m),headersToObject(_),C,!0)};return utils$1.forEach(Object.keys({...e,...t}),function(_){const C=f[_]||s,b=C(e[_],t[_],_);utils$1.isUndefined(b)&&C!==h||(n[_]=b)}),n}const resolveConfig=e=>{const t=mergeConfig$1({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:u,headers:c,auth:h}=t;t.headers=c=AxiosHeaders$1.from(c),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),h&&c.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let f;if(utils$1.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((f=c.getContentType())!==!1){const[m,..._]=f?f.split(";").map(C=>C.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",..._].join("; "))}}if(platform.hasStandardBrowserEnv&&(a&&utils$1.isFunction(a)&&(a=a(t)),a||a!==!1&&isURLSameOrigin(t.url))){const m=s&&u&&cookies.read(u);m&&c.set(s,m)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(n,a){const s=resolveConfig(e);let u=s.data;const c=AxiosHeaders$1.from(s.headers).normalize();let{responseType:h,onUploadProgress:f,onDownloadProgress:m}=s,_,C,b,T,R;function A(){T&&T(),R&&R(),s.cancelToken&&s.cancelToken.unsubscribe(_),s.signal&&s.signal.removeEventListener("abort",_)}let I=new XMLHttpRequest;I.open(s.method.toUpperCase(),s.url,!0),I.timeout=s.timeout;function P(){if(!I)return;const S=AxiosHeaders$1.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),D={data:!h||h==="text"||h==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:S,config:e,request:I};settle(function(j){n(j),A()},function(j){a(j),A()},D),I=null}"onloadend"in I?I.onloadend=P:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(P)},I.onabort=function(){I&&(a(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,I)),I=null)},I.onerror=function(){a(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,I)),I=null},I.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const D=s.transitional||transitionalDefaults;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),a(new AxiosError$1(k,D.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,I)),I=null},u===void 0&&c.setContentType(null),"setRequestHeader"in I&&utils$1.forEach(c.toJSON(),function(k,D){I.setRequestHeader(D,k)}),utils$1.isUndefined(s.withCredentials)||(I.withCredentials=!!s.withCredentials),h&&h!=="json"&&(I.responseType=s.responseType),m&&([b,R]=progressEventReducer(m,!0),I.addEventListener("progress",b)),f&&I.upload&&([C,T]=progressEventReducer(f),I.upload.addEventListener("progress",C),I.upload.addEventListener("loadend",T)),(s.cancelToken||s.signal)&&(_=S=>{I&&(a(!S||S.type?new CanceledError$1(null,e,I):S),I.abort(),I=null)},s.cancelToken&&s.cancelToken.subscribe(_),s.signal&&(s.signal.aborted?_():s.signal.addEventListener("abort",_)));const N=parseProtocol(s.url);if(N&&platform.protocols.indexOf(N)===-1){a(new AxiosError$1("Unsupported protocol "+N+":",AxiosError$1.ERR_BAD_REQUEST,e));return}I.send(u||null)})},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,s;const u=function(m){if(!s){s=!0,h();const _=m instanceof Error?m:this.reason;a.abort(_ instanceof AxiosError$1?_:new CanceledError$1(_ instanceof Error?_.message:_))}};let c=t&&setTimeout(()=>{c=null,u(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const h=()=>{e&&(c&&clearTimeout(c),c=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(u):m.removeEventListener("abort",u)}),e=null)};e.forEach(m=>m.addEventListener("abort",u));const{signal:f}=a;return f.unsubscribe=()=>utils$1.asap(h),f}},streamChunk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,s;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},trackStream=(e,t,n,a)=>{const s=readBytes(e,t);let u=0,c,h=f=>{c||(c=!0,a&&a(f))};return new ReadableStream({async pull(f){try{const{done:m,value:_}=await s.next();if(m){h(),f.close();return}let C=_.byteLength;if(n){let b=u+=C;n(b)}f.enqueue(new Uint8Array(_))}catch(m){throw h(m),m}},cancel(f){return h(f),s.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let e=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(e=>e.body)};isFetchSupported&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!resolvers[t]&&(resolvers[t]=utils$1.isFunction(e[t])?n=>n[t]():(n,a)=>{throw new AxiosError$1(`Response type '${t}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,a)})})})(new Response);const getBodyLength=async e=>{if(e==null)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e))return(await new Request(platform.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e))return e.byteLength;if(utils$1.isURLSearchParams(e)&&(e=e+""),utils$1.isString(e))return(await encodeText(e)).byteLength},resolveBodyLength=async(e,t)=>{const n=utils$1.toFiniteNumber(e.getContentLength());return n??getBodyLength(t)},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:n,data:a,signal:s,cancelToken:u,timeout:c,onDownloadProgress:h,onUploadProgress:f,responseType:m,headers:_,withCredentials:C="same-origin",fetchOptions:b}=resolveConfig(e);m=m?(m+"").toLowerCase():"text";let T=composeSignals([s,u&&u.toAbortSignal()],c),R;const A=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let I;try{if(f&&supportsRequestStream&&n!=="get"&&n!=="head"&&(I=await resolveBodyLength(_,a))!==0){let D=new Request(t,{method:"POST",body:a,duplex:"half"}),M;if(utils$1.isFormData(a)&&(M=D.headers.get("content-type"))&&_.setContentType(M),D.body){const[j,H]=progressEventDecorator(I,progressEventReducer(asyncDecorator(f)));a=trackStream(D.body,DEFAULT_CHUNK_SIZE,j,H)}}utils$1.isString(C)||(C=C?"include":"omit");const P="credentials"in Request.prototype;R=new Request(t,{...b,signal:T,method:n.toUpperCase(),headers:_.normalize().toJSON(),body:a,duplex:"half",credentials:P?C:void 0});let N=await fetch(R,b);const S=supportsResponseStream&&(m==="stream"||m==="response");if(supportsResponseStream&&(h||S&&A)){const D={};["status","statusText","headers"].forEach(X=>{D[X]=N[X]});const M=utils$1.toFiniteNumber(N.headers.get("content-length")),[j,H]=h&&progressEventDecorator(M,progressEventReducer(asyncDecorator(h),!0))||[];N=new Response(trackStream(N.body,DEFAULT_CHUNK_SIZE,j,()=>{H&&H(),A&&A()}),D)}m=m||"text";let k=await resolvers[utils$1.findKey(resolvers,m)||"text"](N,e);return!S&&A&&A(),await new Promise((D,M)=>{settle(D,M,{data:k,headers:AxiosHeaders$1.from(N.headers),status:N.status,statusText:N.statusText,config:e,request:R})})}catch(P){throw A&&A(),P&&P.name==="TypeError"&&/Load failed|fetch/i.test(P.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,R),{cause:P.cause||P}):AxiosError$1.from(P,P&&P.code,e,R)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let n,a;const s={};for(let u=0;u<t;u++){n=e[u];let c;if(a=n,!isResolvedHandle(n)&&(a=knownAdapters[(c=String(n)).toLowerCase()],a===void 0))throw new AxiosError$1(`Unknown adapter '${c}'`);if(a)break;s[c||"#"+u]=a}if(!a){const u=Object.entries(s).map(([h,f])=>`adapter ${h} `+(f===!1?"is not supported by the environment":"is not available in the build"));let c=t?u.length>1?`since :
`+u.map(renderReason).join(`
`):" "+renderReason(u[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults.adapter)(e).then(function(a){return throwIfCancellationRequested(e),a.data=transformData.call(e,e.transformResponse,a),a.headers=AxiosHeaders$1.from(a.headers),a},function(a){return isCancel$1(a)||(throwIfCancellationRequested(e),a&&a.response&&(a.response.data=transformData.call(e,e.transformResponse,a.response),a.response.headers=AxiosHeaders$1.from(a.response.headers))),Promise.reject(a)})}const VERSION$1="1.11.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,n,a){function s(u,c){return"[Axios v"+VERSION$1+"] Transitional option '"+u+"'"+c+(a?". "+a:"")}return(u,c,h)=>{if(t===!1)throw new AxiosError$1(s(c," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[c]&&(deprecatedWarnings[c]=!0,console.warn(s(c," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(u,c,h):!0}};validators$1.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const u=a[s],c=t[u];if(c){const h=e[u],f=h===void 0||c(h,u,e);if(f!==!0)throw new AxiosError$1("option "+u+" must be "+f,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+u,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(t){this.defaults=t||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const u=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?u&&!String(a.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+u):a.stack=u}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig$1(this.defaults,n);const{transitional:a,paramsSerializer:s,headers:u}=n;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils$1.isFunction(s)?n.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c=u&&utils$1.merge(u.common,u[n.method]);u&&utils$1.forEach(["delete","get","head","post","put","patch","common"],R=>{delete u[R]}),n.headers=AxiosHeaders$1.concat(c,u);const h=[];let f=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(f=f&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const m=[];this.interceptors.response.forEach(function(A){m.push(A.fulfilled,A.rejected)});let _,C=0,b;if(!f){const R=[dispatchRequest.bind(this),void 0];for(R.unshift(...h),R.push(...m),b=R.length,_=Promise.resolve(n);C<b;)_=_.then(R[C++],R[C++]);return _}b=h.length;let T=n;for(C=0;C<b;){const R=h[C++],A=h[C++];try{T=R(T)}catch(I){A.call(this,I);break}}try{_=dispatchRequest.call(this,T)}catch(R){return Promise.reject(R)}for(C=0,b=m.length;C<b;)_=_.then(m[C++],m[C++]);return _}getUri(t){t=mergeConfig$1(this.defaults,t);const n=buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls);return buildURL(n,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(n,a){return this.request(mergeConfig$1(a||{},{method:t,url:n,data:(a||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){function n(a){return function(u,c,h){return this.request(mergeConfig$1(h||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:u,data:c}))}}Axios$1.prototype[t]=n(),Axios$1.prototype[t+"Form"]=n(!0)});let CancelToken$1=class ld{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(u){n=u});const a=this;this.promise.then(s=>{if(!a._listeners)return;let u=a._listeners.length;for(;u-- >0;)a._listeners[u](s);a._listeners=null}),this.promise.then=s=>{let u;const c=new Promise(h=>{a.subscribe(h),u=h}).then(s);return c.cancel=function(){a.unsubscribe(u)},c},t(function(u,c,h){a.reason||(a.reason=new CanceledError$1(u,c,h),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ld(function(s){t=s}),cancel:t}}};function spread$1(e){return function(n){return e.apply(null,n)}}function isAxiosError$1(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});function createInstance(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return createInstance(mergeConfig$1(e,s))},n}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,API=axios.create({baseURL:"https://hotcodebot.ru:5001/"});function useThrottle(e,t=100){const n=reactExports.useRef(0),a=reactExports.useRef(null);return reactExports.useCallback((...s)=>{const u=Date.now(),c=u-n.current;c>=t?(n.current=u,e(...s)):(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{n.current=Date.now(),e(...s)},t-c))},[e,t])}function useDebounce(e,t=100,n=!1){const a=reactExports.useRef(void 0),s=reactExports.useCallback(()=>clearTimeout(a.current),[a.current]),u=reactExports.useCallback((...c)=>{s(),a.current=setTimeout(()=>{e(c)},t)},[e,t,s]);return n?[u,s]:u}function useService(e,t){const[n,a]=reactExports.useState(!1),s=reactExports.useContext(APIContext),u=reactExports.useMemo(()=>100,[t]),[c,h]=useDebounce(reactExports.useCallback(()=>{a(!0)},[s.enableLoading,a]),u,!0),f=reactExports.useCallback(()=>{h(),a(!1)},[s.disableLoading,a,h]),m=useDebounce(reactExports.useCallback(()=>s.clearMessage(),[s.clearMessage]),2e3);return[reactExports.useMemo(()=>{const C={};for(const b of Object.keys(e))C[b]=async(...T)=>{try{return c(),await e[b](...T)}catch(R){return s.setMessage(R?.response?.data?.message??"An unexpected error occurred"),m(),null}finally{f()}};return C},[e]),n]}function getDtoFromNodes(...e){return e.map(t=>new NodeDto(t))}function getDtoFromLinks(e){return Object.values(e).map(t=>new EdgeDto(t.origin_id.toString(),t.target_id.toString()))}function die(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var mockGlobal={};function getGlobal(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:mockGlobal}var assign$1=Object.assign,getDescriptor=Object.getOwnPropertyDescriptor,defineProperty=Object.defineProperty,objectPrototype=Object.prototype,EMPTY_ARRAY=[];Object.freeze(EMPTY_ARRAY);var EMPTY_OBJECT={};Object.freeze(EMPTY_OBJECT);var hasProxy=typeof Proxy<"u",plainObjectString=Object.toString();function assertProxies(){hasProxy||die("Proxy not available")}function once(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var noop$5=function(){};function isFunction(e){return typeof e=="function"}function isStringish(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function isObject(e){return e!==null&&typeof e=="object"}function isPlainObject$1(e){if(!isObject(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===plainObjectString}function isGenerator(e){var t=e?.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function addHiddenProp(e,t,n){defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function addHiddenFinalProp(e,t,n){defineProperty(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function createInstanceofPredicate(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(a){return isObject(a)&&a[n]===!0}}function isES6Map(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function isPlainES6Map(e){var t=Object.getPrototypeOf(e),n=Object.getPrototypeOf(t),a=Object.getPrototypeOf(n);return a===null}function isES6Set(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var hasGetOwnPropertySymbols=typeof Object.getOwnPropertySymbols<"u";function getPlainObjectKeys(e){var t=Object.keys(e);if(!hasGetOwnPropertySymbols)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(a){return objectPrototype.propertyIsEnumerable.call(e,a)})):t}var ownKeys=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:hasGetOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function toPrimitive(e){return e===null?null:typeof e=="object"?""+e:e}function hasProp(e,t){return objectPrototype.hasOwnProperty.call(e,t)}var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function(t){var n={};return ownKeys(t).forEach(function(a){n[a]=getDescriptor(t,a)}),n};function getFlag(e,t){return!!(e&t)}function setFlag(e,t,n){return n?e|=t:e&=~t,e}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _createForOfIteratorHelperLoose(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t){n&&(e=n);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends$1.apply(null,arguments)}function _inheritsLoose$1(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_setPrototypeOf$1(e,t)}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:t+""}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}var storedAnnotationsSymbol=Symbol("mobx-stored-annotations");function createDecoratorAnnotation(e){function t(n,a){if(is20223Decorator(a))return e.decorate_20223_(n,a);storeAnnotation(n,a,e)}return Object.assign(t,e)}function storeAnnotation(e,t,n){hasProp(e,storedAnnotationsSymbol)||addHiddenProp(e,storedAnnotationsSymbol,_extends$1({},e[storedAnnotationsSymbol])),isOverride(n)||(e[storedAnnotationsSymbol][t]=n)}function collectStoredAnnotations(e){return hasProp(e,storedAnnotationsSymbol)||addHiddenProp(e,storedAnnotationsSymbol,_extends$1({},e[storedAnnotationsSymbol])),e[storedAnnotationsSymbol]}function is20223Decorator(e){return typeof e=="object"&&typeof e.kind=="string"}var $mobx=Symbol("mobx administration"),Atom=(function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(a){return a()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(a){return a()})},t.reportObserved=function(){return reportObserved(this)},t.reportChanged=function(){startBatch(),propagateChanged(this),endBatch()},t.toString=function(){return this.name_},_createClass(e,[{key:"isBeingObserved",get:function(){return getFlag(this.flags_,e.isBeingObservedMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isBeingObservedMask_,a)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,e.isPendingUnobservationMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isPendingUnobservationMask_,a)}},{key:"diffValue",get:function(){return getFlag(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=setFlag(this.flags_,e.diffValueMask_,a===1)}}])})();Atom.isBeingObservedMask_=1;Atom.isPendingUnobservationMask_=2;Atom.diffValueMask_=4;var isAtom=createInstanceofPredicate("Atom",Atom);function createAtom(e,t,n){t===void 0&&(t=noop$5),n===void 0&&(n=noop$5);var a=new Atom(e);return t!==noop$5&&onBecomeObserved(a,t),n!==noop$5&&onBecomeUnobserved(a,n),a}function structuralComparer(e,t){return deepEqual(e,t)}function defaultComparer(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var comparer={structural:structuralComparer,default:defaultComparer};function deepEnhancer(e,t,n){return isObservable(e)?e:Array.isArray(e)?observable.array(e,{name:n}):isPlainObject$1(e)?observable.object(e,void 0,{name:n}):isES6Map(e)?observable.map(e,{name:n}):isES6Set(e)?observable.set(e,{name:n}):typeof e=="function"&&!isAction(e)&&!isFlow(e)?isGenerator(e)?flow(e):autoAction(n,e):e}function shallowEnhancer(e,t,n){if(e==null||isObservableObject(e)||isObservableArray(e)||isObservableMap(e)||isObservableSet(e))return e;if(Array.isArray(e))return observable.array(e,{name:n,deep:!1});if(isPlainObject$1(e))return observable.object(e,void 0,{name:n,deep:!1});if(isES6Map(e))return observable.map(e,{name:n,deep:!1});if(isES6Set(e))return observable.set(e,{name:n,deep:!1})}function referenceEnhancer(e){return e}function refStructEnhancer(e,t){return deepEqual(e,t)?t:e}var OVERRIDE="override";function isOverride(e){return e.annotationType_===OVERRIDE}function createActionAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$1,extend_:extend_$1,decorate_20223_:decorate_20223_$1}}function make_$1(e,t,n,a){var s;if((s=this.options_)!=null&&s.bound)return this.extend_(e,t,n,!1)===null?0:1;if(a===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(isAction(n.value))return 1;var u=createActionDescriptor(e,this,t,n,!1);return defineProperty(a,t,u),2}function extend_$1(e,t,n,a){var s=createActionDescriptor(e,this,t,n);return e.defineProperty_(t,s,a)}function decorate_20223_$1(e,t){var n=t.kind,a=t.name,s=t.addInitializer,u=this,c=function(m){var _,C,b,T;return createAction((_=(C=u.options_)==null?void 0:C.name)!=null?_:a.toString(),m,(b=(T=u.options_)==null?void 0:T.autoAction)!=null?b:!1)};if(n=="field")return function(f){var m,_=f;return isAction(_)||(_=c(_)),(m=u.options_)!=null&&m.bound&&(_=_.bind(this),_.isMobxAction=!0),_};if(n=="method"){var h;return isAction(e)||(e=c(e)),(h=this.options_)!=null&&h.bound&&s(function(){var f=this,m=f[a].bind(f);m.isMobxAction=!0,f[a]=m}),e}die("Cannot apply '"+u.annotationType_+"' to '"+String(a)+"' (kind: "+n+"):"+(`
'`+u.annotationType_+"' can only be used on properties with a function value."))}function assertActionDescriptor(e,t,n,a){t.annotationType_,a.value}function createActionDescriptor(e,t,n,a,s){var u,c,h,f,m,_,C;s===void 0&&(s=globalState.safeDescriptors),assertActionDescriptor(e,t,n,a);var b=a.value;if((u=t.options_)!=null&&u.bound){var T;b=b.bind((T=e.proxy_)!=null?T:e.target_)}return{value:createAction((c=(h=t.options_)==null?void 0:h.name)!=null?c:n.toString(),b,(f=(m=t.options_)==null?void 0:m.autoAction)!=null?f:!1,(_=t.options_)!=null&&_.bound?(C=e.proxy_)!=null?C:e.target_:void 0),configurable:s?e.isPlainObject_:!0,enumerable:!1,writable:!s}}function createFlowAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$2,extend_:extend_$2,decorate_20223_:decorate_20223_$2}}function make_$2(e,t,n,a){var s;if(a===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((s=this.options_)!=null&&s.bound&&(!hasProp(e.target_,t)||!isFlow(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(isFlow(n.value))return 1;var u=createFlowDescriptor(e,this,t,n,!1,!1);return defineProperty(a,t,u),2}function extend_$2(e,t,n,a){var s,u=createFlowDescriptor(e,this,t,n,(s=this.options_)==null?void 0:s.bound);return e.defineProperty_(t,u,a)}function decorate_20223_$2(e,t){var n,a=t.name,s=t.addInitializer;return isFlow(e)||(e=flow(e)),(n=this.options_)!=null&&n.bound&&s(function(){var u=this,c=u[a].bind(u);c.isMobXFlow=!0,u[a]=c}),e}function assertFlowDescriptor(e,t,n,a){t.annotationType_,a.value}function createFlowDescriptor(e,t,n,a,s,u){u===void 0&&(u=globalState.safeDescriptors),assertFlowDescriptor(e,t,n,a);var c=a.value;if(isFlow(c)||(c=flow(c)),s){var h;c=c.bind((h=e.proxy_)!=null?h:e.target_),c.isMobXFlow=!0}return{value:c,configurable:u?e.isPlainObject_:!0,enumerable:!1,writable:!u}}function createComputedAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$3,extend_:extend_$3,decorate_20223_:decorate_20223_$3}}function make_$3(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function extend_$3(e,t,n,a){return assertComputedDescriptor(e,this,t,n),e.defineComputedProperty_(t,_extends$1({},this.options_,{get:n.get,set:n.set}),a)}function decorate_20223_$3(e,t){var n=this,a=t.name,s=t.addInitializer;return s(function(){var u=asObservableObject(this)[$mobx],c=_extends$1({},n.options_,{get:e,context:this});c.name||(c.name="ObservableObject."+a.toString()),u.values_.set(a,new ComputedValue(c))}),function(){return this[$mobx].getObservablePropValue_(a)}}function assertComputedDescriptor(e,t,n,a){t.annotationType_,a.get}function createObservableAnnotation(e,t){return{annotationType_:e,options_:t,make_:make_$4,extend_:extend_$4,decorate_20223_:decorate_20223_$4}}function make_$4(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function extend_$4(e,t,n,a){var s,u;return assertObservableDescriptor(e,this),e.defineObservableProperty_(t,n.value,(s=(u=this.options_)==null?void 0:u.enhancer)!=null?s:deepEnhancer,a)}function decorate_20223_$4(e,t){var n=this,a=t.kind,s=t.name,u=new WeakSet;function c(h,f){var m,_,C=asObservableObject(h)[$mobx],b=new ObservableValue(f,(m=(_=n.options_)==null?void 0:_.enhancer)!=null?m:deepEnhancer,"ObservableObject."+s.toString(),!1);C.values_.set(s,b),u.add(h)}if(a=="accessor")return{get:function(){return u.has(this)||c(this,e.get.call(this)),this[$mobx].getObservablePropValue_(s)},set:function(f){return u.has(this)||c(this,f),this[$mobx].setObservablePropValue_(s,f)},init:function(f){return u.has(this)||c(this,f),f}}}function assertObservableDescriptor(e,t,n,a){t.annotationType_}var AUTO="true",autoAnnotation=createAutoAnnotation();function createAutoAnnotation(e){return{annotationType_:AUTO,options_:e,make_:make_$5,extend_:extend_$5,decorate_20223_:decorate_20223_$5}}function make_$5(e,t,n,a){var s,u;if(n.get)return computed.make_(e,t,n,a);if(n.set){var c=createAction(t.toString(),n.set);return a===e.target_?e.defineProperty_(t,{configurable:globalState.safeDescriptors?e.isPlainObject_:!0,set:c})===null?0:2:(defineProperty(a,t,{configurable:!0,set:c}),2)}if(a!==e.target_&&typeof n.value=="function"){var h;if(isGenerator(n.value)){var f,m=(f=this.options_)!=null&&f.autoBind?flow.bound:flow;return m.make_(e,t,n,a)}var _=(h=this.options_)!=null&&h.autoBind?autoAction.bound:autoAction;return _.make_(e,t,n,a)}var C=((s=this.options_)==null?void 0:s.deep)===!1?observable.ref:observable;if(typeof n.value=="function"&&(u=this.options_)!=null&&u.autoBind){var b;n.value=n.value.bind((b=e.proxy_)!=null?b:e.target_)}return C.make_(e,t,n,a)}function extend_$5(e,t,n,a){var s,u;if(n.get)return computed.extend_(e,t,n,a);if(n.set)return e.defineProperty_(t,{configurable:globalState.safeDescriptors?e.isPlainObject_:!0,set:createAction(t.toString(),n.set)},a);if(typeof n.value=="function"&&(s=this.options_)!=null&&s.autoBind){var c;n.value=n.value.bind((c=e.proxy_)!=null?c:e.target_)}var h=((u=this.options_)==null?void 0:u.deep)===!1?observable.ref:observable;return h.extend_(e,t,n,a)}function decorate_20223_$5(e,t){die("'"+this.annotationType_+"' cannot be used as a decorator")}var OBSERVABLE="observable",OBSERVABLE_REF="observable.ref",OBSERVABLE_SHALLOW="observable.shallow",OBSERVABLE_STRUCT="observable.struct",defaultCreateObservableOptions={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(defaultCreateObservableOptions);function asCreateObservableOptions(e){return e||defaultCreateObservableOptions}var observableAnnotation=createObservableAnnotation(OBSERVABLE),observableRefAnnotation=createObservableAnnotation(OBSERVABLE_REF,{enhancer:referenceEnhancer}),observableShallowAnnotation=createObservableAnnotation(OBSERVABLE_SHALLOW,{enhancer:shallowEnhancer}),observableStructAnnotation=createObservableAnnotation(OBSERVABLE_STRUCT,{enhancer:refStructEnhancer}),observableDecoratorAnnotation=createDecoratorAnnotation(observableAnnotation);function getEnhancerFromOptions(e){return e.deep===!0?deepEnhancer:e.deep===!1?referenceEnhancer:getEnhancerFromAnnotation(e.defaultDecorator)}function getAnnotationFromOptions(e){var t;return e?(t=e.defaultDecorator)!=null?t:createAutoAnnotation(e):void 0}function getEnhancerFromAnnotation(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:deepEnhancer}function createObservable(e,t,n){if(is20223Decorator(t))return observableAnnotation.decorate_20223_(e,t);if(isStringish(t)){storeAnnotation(e,t,observableAnnotation);return}return isObservable(e)?e:isPlainObject$1(e)?observable.object(e,t,n):Array.isArray(e)?observable.array(e,t):isES6Map(e)?observable.map(e,t):isES6Set(e)?observable.set(e,t):typeof e=="object"&&e!==null?e:observable.box(e,t)}assign$1(createObservable,observableDecoratorAnnotation);var observableFactories={box:function(t,n){var a=asCreateObservableOptions(n);return new ObservableValue(t,getEnhancerFromOptions(a),a.name,!0,a.equals)},array:function(t,n){var a=asCreateObservableOptions(n);return(globalState.useProxies===!1||a.proxy===!1?createLegacyArray:createObservableArray)(t,getEnhancerFromOptions(a),a.name)},map:function(t,n){var a=asCreateObservableOptions(n);return new ObservableMap(t,getEnhancerFromOptions(a),a.name)},set:function(t,n){var a=asCreateObservableOptions(n);return new ObservableSet(t,getEnhancerFromOptions(a),a.name)},object:function(t,n,a){return initObservable(function(){return extendObservable(globalState.useProxies===!1||a?.proxy===!1?asObservableObject({},a):asDynamicObservableObject({},a),t,n)})},ref:createDecoratorAnnotation(observableRefAnnotation),shallow:createDecoratorAnnotation(observableShallowAnnotation),deep:observableDecoratorAnnotation,struct:createDecoratorAnnotation(observableStructAnnotation)},observable=assign$1(createObservable,observableFactories),COMPUTED="computed",COMPUTED_STRUCT="computed.struct",computedAnnotation=createComputedAnnotation(COMPUTED),computedStructAnnotation=createComputedAnnotation(COMPUTED_STRUCT,{equals:comparer.structural}),computed=function(t,n){if(is20223Decorator(n))return computedAnnotation.decorate_20223_(t,n);if(isStringish(n))return storeAnnotation(t,n,computedAnnotation);if(isPlainObject$1(t))return createDecoratorAnnotation(createComputedAnnotation(COMPUTED,t));var a=isPlainObject$1(n)?n:{};return a.get=t,a.name||(a.name=t.name||""),new ComputedValue(a)};Object.assign(computed,computedAnnotation);computed.struct=createDecoratorAnnotation(computedStructAnnotation);var _getDescriptor$config,_getDescriptor,currentActionId=0,nextActionId=1,isFunctionNameConfigurable$1=(_getDescriptor$config=(_getDescriptor=getDescriptor(function(){},"name"))==null?void 0:_getDescriptor.configurable)!=null?_getDescriptor$config:!1,tmpNameDescriptor={value:"action",configurable:!0,writable:!1,enumerable:!1};function createAction(e,t,n,a){n===void 0&&(n=!1);function s(){return executeAction(e,n,t,a||this,arguments)}return s.isMobxAction=!0,s.toString=function(){return t.toString()},isFunctionNameConfigurable$1&&(tmpNameDescriptor.value=e,defineProperty(s,"name",tmpNameDescriptor)),s}function executeAction(e,t,n,a,s){var u=_startAction(e,t);try{return n.apply(a,s)}catch(c){throw u.error_=c,c}finally{_endAction(u)}}function _startAction(e,t,n,a){var s=!1,u=0,c=globalState.trackingDerivation,h=!t||!c;startBatch();var f=globalState.allowStateChanges;h&&(untrackedStart(),f=allowStateChangesStart(!0));var m=allowStateReadsStart(!0),_={runAsAction_:h,prevDerivation_:c,prevAllowStateChanges_:f,prevAllowStateReads_:m,notifySpy_:s,startTime_:u,actionId_:nextActionId++,parentActionId_:currentActionId};return currentActionId=_.actionId_,_}function _endAction(e){currentActionId!==e.actionId_&&die(30),currentActionId=e.parentActionId_,e.error_!==void 0&&(globalState.suppressReactionErrors=!0),allowStateChangesEnd(e.prevAllowStateChanges_),allowStateReadsEnd(e.prevAllowStateReads_),endBatch(),e.runAsAction_&&untrackedEnd(e.prevDerivation_),globalState.suppressReactionErrors=!1}function allowStateChangesStart(e){var t=globalState.allowStateChanges;return globalState.allowStateChanges=e,t}function allowStateChangesEnd(e){globalState.allowStateChanges=e}var ObservableValue=(function(e){function t(a,s,u,c,h){var f;return u===void 0&&(u="ObservableValue"),h===void 0&&(h=comparer.default),f=e.call(this,u)||this,f.enhancer=void 0,f.name_=void 0,f.equals=void 0,f.hasUnreportedChange_=!1,f.interceptors_=void 0,f.changeListeners_=void 0,f.value_=void 0,f.dehancer=void 0,f.enhancer=s,f.name_=u,f.equals=h,f.value_=s(a,void 0,u),f}_inheritsLoose$1(t,e);var n=t.prototype;return n.dehanceValue=function(s){return this.dehancer!==void 0?this.dehancer(s):s},n.set=function(s){this.value_,s=this.prepareNewValue_(s),s!==globalState.UNCHANGED&&this.setNewValue_(s)},n.prepareNewValue_=function(s){if(hasInterceptors(this)){var u=interceptChange(this,{object:this,type:UPDATE,newValue:s});if(!u)return globalState.UNCHANGED;s=u.newValue}return s=this.enhancer(s,this.value_,this.name_),this.equals(this.value_,s)?globalState.UNCHANGED:s},n.setNewValue_=function(s){var u=this.value_;this.value_=s,this.reportChanged(),hasListeners(this)&&notifyListeners(this,{type:UPDATE,object:this,newValue:s,oldValue:u})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(s){return registerInterceptor(this,s)},n.observe_=function(s,u){return u&&s({observableKind:"value",debugObjectName:this.name_,object:this,type:UPDATE,newValue:this.value_,oldValue:void 0}),registerListener(this,s)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return toPrimitive(this.get())},n[Symbol.toPrimitive]=function(){return this.valueOf()},t})(Atom),isObservableValue=createInstanceofPredicate("ObservableValue",ObservableValue),ComputedValue=(function(){function e(n){this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=IDerivationState_.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new CaughtException(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=TraceMode.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||die(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=createAction("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?comparer.structural:comparer.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){propagateMaybeChanged(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(a){return a()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(a){return a()})},t.get=function(){if(this.isComputing&&die(32,this.name_,this.derivation),globalState.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)shouldCompute(this)&&(this.warnAboutUntrackedRead_(),startBatch(),this.value_=this.computeValue_(!1),endBatch());else if(reportObserved(this),shouldCompute(this)){var a=globalState.trackingContext;this.keepAlive_&&!a&&(globalState.trackingContext=this),this.trackAndCompute()&&propagateChangeConfirmed(this),globalState.trackingContext=a}var s=this.value_;if(isCaughtException(s))throw s.cause;return s},t.set=function(a){if(this.setter_){this.isRunningSetter&&die(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,a)}finally{this.isRunningSetter=!1}}else die(34,this.name_)},t.trackAndCompute=function(){var a=this.value_,s=this.dependenciesState_===IDerivationState_.NOT_TRACKING_,u=this.computeValue_(!0),c=s||isCaughtException(a)||isCaughtException(u)||!this.equals_(a,u);return c&&(this.value_=u),c},t.computeValue_=function(a){this.isComputing=!0;var s=allowStateChangesStart(!1),u;if(a)u=trackDerivedFunction(this,this.derivation,this.scope_);else if(globalState.disableErrorBoundaries===!0)u=this.derivation.call(this.scope_);else try{u=this.derivation.call(this.scope_)}catch(c){u=new CaughtException(c)}return allowStateChangesEnd(s),this.isComputing=!1,u},t.suspend_=function(){this.keepAlive_||(clearObserving(this),this.value_=void 0)},t.observe_=function(a,s){var u=this,c=!0,h=void 0;return autorun(function(){var f=u.get();if(!c||s){var m=untrackedStart();a({observableKind:"computed",debugObjectName:u.name_,type:UPDATE,object:u,newValue:f,oldValue:h}),untrackedEnd(m)}c=!1,h=f})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return toPrimitive(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},_createClass(e,[{key:"isComputing",get:function(){return getFlag(this.flags_,e.isComputingMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isComputingMask_,a)}},{key:"isRunningSetter",get:function(){return getFlag(this.flags_,e.isRunningSetterMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isRunningSetterMask_,a)}},{key:"isBeingObserved",get:function(){return getFlag(this.flags_,e.isBeingObservedMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isBeingObservedMask_,a)}},{key:"isPendingUnobservation",get:function(){return getFlag(this.flags_,e.isPendingUnobservationMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isPendingUnobservationMask_,a)}},{key:"diffValue",get:function(){return getFlag(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=setFlag(this.flags_,e.diffValueMask_,a===1)}}])})();ComputedValue.isComputingMask_=1;ComputedValue.isRunningSetterMask_=2;ComputedValue.isBeingObservedMask_=4;ComputedValue.isPendingUnobservationMask_=8;ComputedValue.diffValueMask_=16;var isComputedValue=createInstanceofPredicate("ComputedValue",ComputedValue),IDerivationState_;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(IDerivationState_||(IDerivationState_={}));var TraceMode;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(TraceMode||(TraceMode={}));var CaughtException=function(t){this.cause=void 0,this.cause=t};function isCaughtException(e){return e instanceof CaughtException}function shouldCompute(e){switch(e.dependenciesState_){case IDerivationState_.UP_TO_DATE_:return!1;case IDerivationState_.NOT_TRACKING_:case IDerivationState_.STALE_:return!0;case IDerivationState_.POSSIBLY_STALE_:{for(var t=allowStateReadsStart(!0),n=untrackedStart(),a=e.observing_,s=a.length,u=0;u<s;u++){var c=a[u];if(isComputedValue(c)){if(globalState.disableErrorBoundaries)c.get();else try{c.get()}catch{return untrackedEnd(n),allowStateReadsEnd(t),!0}if(e.dependenciesState_===IDerivationState_.STALE_)return untrackedEnd(n),allowStateReadsEnd(t),!0}}return changeDependenciesStateTo0(e),untrackedEnd(n),allowStateReadsEnd(t),!1}}}function checkIfStateModificationsAreAllowed(e){}function trackDerivedFunction(e,t,n){var a=allowStateReadsStart(!0);changeDependenciesStateTo0(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++globalState.runId;var s=globalState.trackingDerivation;globalState.trackingDerivation=e,globalState.inBatch++;var u;if(globalState.disableErrorBoundaries===!0)u=t.call(n);else try{u=t.call(n)}catch(c){u=new CaughtException(c)}return globalState.inBatch--,globalState.trackingDerivation=s,bindDependencies(e),allowStateReadsEnd(a),u}function bindDependencies(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,a=IDerivationState_.UP_TO_DATE_,s=0,u=e.unboundDepsCount_,c=0;c<u;c++){var h=n[c];h.diffValue===0&&(h.diffValue=1,s!==c&&(n[s]=h),s++),h.dependenciesState_>a&&(a=h.dependenciesState_)}for(n.length=s,e.newObserving_=null,u=t.length;u--;){var f=t[u];f.diffValue===0&&removeObserver(f,e),f.diffValue=0}for(;s--;){var m=n[s];m.diffValue===1&&(m.diffValue=0,addObserver(m,e))}a!==IDerivationState_.UP_TO_DATE_&&(e.dependenciesState_=a,e.onBecomeStale_())}function clearObserving(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)removeObserver(t[n],e);e.dependenciesState_=IDerivationState_.NOT_TRACKING_}function untracked(e){var t=untrackedStart();try{return e()}finally{untrackedEnd(t)}}function untrackedStart(){var e=globalState.trackingDerivation;return globalState.trackingDerivation=null,e}function untrackedEnd(e){globalState.trackingDerivation=e}function allowStateReadsStart(e){var t=globalState.allowStateReads;return globalState.allowStateReads=e,t}function allowStateReadsEnd(e){globalState.allowStateReads=e}function changeDependenciesStateTo0(e){if(e.dependenciesState_!==IDerivationState_.UP_TO_DATE_){e.dependenciesState_=IDerivationState_.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=IDerivationState_.UP_TO_DATE_}}var MobXGlobals=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},canMergeGlobalState=!0,isolateCalled=!1,globalState=(function(){var e=getGlobal();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(canMergeGlobalState=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new MobXGlobals().version&&(canMergeGlobalState=!1),canMergeGlobalState?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new MobXGlobals):(setTimeout(function(){isolateCalled||die(35)},1),new MobXGlobals)})();function isolateGlobalState(){if((globalState.pendingReactions.length||globalState.inBatch||globalState.isRunningReactions)&&die(36),isolateCalled=!0,canMergeGlobalState){var e=getGlobal();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),globalState=new MobXGlobals}}function addObserver(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function removeObserver(e,t){e.observers_.delete(t),e.observers_.size===0&&queueForUnobservation(e)}function queueForUnobservation(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,globalState.pendingUnobservations.push(e))}function startBatch(){globalState.inBatch++}function endBatch(){if(--globalState.inBatch===0){runReactions();for(var e=globalState.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation=!1,n.observers_.size===0&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBUO()),n instanceof ComputedValue&&n.suspend_())}globalState.pendingUnobservations=[]}}function reportObserved(e){var t=globalState.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&globalState.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&globalState.inBatch>0&&queueForUnobservation(e),!1)}function propagateChanged(e){e.lowestObserverState_!==IDerivationState_.STALE_&&(e.lowestObserverState_=IDerivationState_.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===IDerivationState_.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=IDerivationState_.STALE_}))}function propagateChangeConfirmed(e){e.lowestObserverState_!==IDerivationState_.STALE_&&(e.lowestObserverState_=IDerivationState_.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===IDerivationState_.POSSIBLY_STALE_?t.dependenciesState_=IDerivationState_.STALE_:t.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(e.lowestObserverState_=IDerivationState_.UP_TO_DATE_)}))}function propagateMaybeChanged(e){e.lowestObserverState_===IDerivationState_.UP_TO_DATE_&&(e.lowestObserverState_=IDerivationState_.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===IDerivationState_.UP_TO_DATE_&&(t.dependenciesState_=IDerivationState_.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Reaction=(function(){function e(n,a,s,u){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=IDerivationState_.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=TraceMode.NONE,this.name_=n,this.onInvalidate_=a,this.errorHandler_=s,this.requiresObservable_=u}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,globalState.pendingReactions.push(this),runReactions())},t.runReaction_=function(){if(!this.isDisposed){startBatch(),this.isScheduled=!1;var a=globalState.trackingContext;if(globalState.trackingContext=this,shouldCompute(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(s){this.reportExceptionInDerivation_(s)}}globalState.trackingContext=a,endBatch()}},t.track=function(a){if(!this.isDisposed){startBatch(),this.isRunning=!0;var s=globalState.trackingContext;globalState.trackingContext=this;var u=trackDerivedFunction(this,a,void 0);globalState.trackingContext=s,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&clearObserving(this),isCaughtException(u)&&this.reportExceptionInDerivation_(u.cause),endBatch()}},t.reportExceptionInDerivation_=function(a){var s=this;if(this.errorHandler_){this.errorHandler_(a,this);return}if(globalState.disableErrorBoundaries)throw a;var u="[mobx] uncaught error in '"+this+"'";globalState.suppressReactionErrors||console.error(u,a),globalState.globalReactionErrorHandlers.forEach(function(c){return c(a,s)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(startBatch(),clearObserving(this),endBatch()))},t.getDisposer_=function(a){var s=this,u=function c(){s.dispose(),a==null||a.removeEventListener==null||a.removeEventListener("abort",c)};return a==null||a.addEventListener==null||a.addEventListener("abort",u),u[$mobx]=this,u},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(a){},_createClass(e,[{key:"isDisposed",get:function(){return getFlag(this.flags_,e.isDisposedMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isDisposedMask_,a)}},{key:"isScheduled",get:function(){return getFlag(this.flags_,e.isScheduledMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isScheduledMask_,a)}},{key:"isTrackPending",get:function(){return getFlag(this.flags_,e.isTrackPendingMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isTrackPendingMask_,a)}},{key:"isRunning",get:function(){return getFlag(this.flags_,e.isRunningMask_)},set:function(a){this.flags_=setFlag(this.flags_,e.isRunningMask_,a)}},{key:"diffValue",get:function(){return getFlag(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=setFlag(this.flags_,e.diffValueMask_,a===1)}}])})();Reaction.isDisposedMask_=1;Reaction.isScheduledMask_=2;Reaction.isTrackPendingMask_=4;Reaction.isRunningMask_=8;Reaction.diffValueMask_=16;var MAX_REACTION_ITERATIONS=100,reactionScheduler=function(t){return t()};function runReactions(){globalState.inBatch>0||globalState.isRunningReactions||reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState.isRunningReactions=!0;for(var e=globalState.pendingReactions,t=0;e.length>0;){++t===MAX_REACTION_ITERATIONS&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),a=0,s=n.length;a<s;a++)n[a].runReaction_()}globalState.isRunningReactions=!1}var isReaction=createInstanceofPredicate("Reaction",Reaction);function setReactionScheduler(e){var t=reactionScheduler;reactionScheduler=function(a){return e(function(){return t(a)})}}function isSpyEnabled(){return!1}function spyReport(e){}function spyReportStart(e){}function spyReportEnd(e){}function spy(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var ACTION="action",ACTION_BOUND="action.bound",AUTOACTION="autoAction",AUTOACTION_BOUND="autoAction.bound",DEFAULT_ACTION_NAME="<unnamed action>",actionAnnotation=createActionAnnotation(ACTION),actionBoundAnnotation=createActionAnnotation(ACTION_BOUND,{bound:!0}),autoActionAnnotation=createActionAnnotation(AUTOACTION,{autoAction:!0}),autoActionBoundAnnotation=createActionAnnotation(AUTOACTION_BOUND,{autoAction:!0,bound:!0});function createActionFactory(e){var t=function(a,s){if(isFunction(a))return createAction(a.name||DEFAULT_ACTION_NAME,a,e);if(isFunction(s))return createAction(a,s,e);if(is20223Decorator(s))return(e?autoActionAnnotation:actionAnnotation).decorate_20223_(a,s);if(isStringish(s))return storeAnnotation(a,s,e?autoActionAnnotation:actionAnnotation);if(isStringish(a))return createDecoratorAnnotation(createActionAnnotation(e?AUTOACTION:ACTION,{name:a,autoAction:e}))};return t}var action=createActionFactory(!1);Object.assign(action,actionAnnotation);var autoAction=createActionFactory(!0);Object.assign(autoAction,autoActionAnnotation);action.bound=createDecoratorAnnotation(actionBoundAnnotation);autoAction.bound=createDecoratorAnnotation(autoActionBoundAnnotation);function isAction(e){return isFunction(e)&&e.isMobxAction===!0}function autorun(e,t){var n,a,s,u;t===void 0&&(t=EMPTY_OBJECT);var c=(n=(a=t)==null?void 0:a.name)!=null?n:"Autorun",h=!t.scheduler&&!t.delay,f;if(h)f=new Reaction(c,function(){this.track(C)},t.onError,t.requiresObservable);else{var m=createSchedulerFromOptions(t),_=!1;f=new Reaction(c,function(){_||(_=!0,m(function(){_=!1,f.isDisposed||f.track(C)}))},t.onError,t.requiresObservable)}function C(){e(f)}return(s=t)!=null&&(s=s.signal)!=null&&s.aborted||f.schedule_(),f.getDisposer_((u=t)==null?void 0:u.signal)}var run=function(t){return t()};function createSchedulerFromOptions(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:run}var ON_BECOME_OBSERVED="onBO",ON_BECOME_UNOBSERVED="onBUO";function onBecomeObserved(e,t,n){return interceptHook(ON_BECOME_OBSERVED,e,t,n)}function onBecomeUnobserved(e,t,n){return interceptHook(ON_BECOME_UNOBSERVED,e,t,n)}function interceptHook(e,t,n,a){var s=getAtom(t),u=isFunction(a)?a:n,c=e+"L";return s[c]?s[c].add(u):s[c]=new Set([u]),function(){var h=s[c];h&&(h.delete(u),h.size===0&&delete s[c])}}var NEVER="never",ALWAYS="always",OBSERVED="observed";function configure(e){e.isolateGlobalState===!0&&isolateGlobalState();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(globalState.useProxies=t===ALWAYS?!0:t===NEVER?!1:typeof Proxy<"u"),t==="ifavailable"&&(globalState.verifyProxies=!0),n!==void 0){var a=n===ALWAYS?ALWAYS:n===OBSERVED;globalState.enforceActions=a,globalState.allowStateChanges=!(a===!0||a===ALWAYS)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(s){s in e&&(globalState[s]=!!e[s])}),globalState.allowStateReads=!globalState.observableRequiresReaction,e.reactionScheduler&&setReactionScheduler(e.reactionScheduler)}function extendObservable(e,t,n,a){var s=getOwnPropertyDescriptors(t);return initObservable(function(){var u=asObservableObject(e,a)[$mobx];ownKeys(s).forEach(function(c){u.extend_(c,s[c],n&&c in n?n[c]:!0)})}),e}function getDependencyTree(e,t){return nodeToDependencyTree(getAtom(e,t))}function nodeToDependencyTree(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=unique(e.observing_).map(nodeToDependencyTree)),t}function unique(e){return Array.from(new Set(e))}var generatorId=0;function FlowCancellationError(){this.message="FLOW_CANCELLED"}FlowCancellationError.prototype=Object.create(Error.prototype);var flowAnnotation=createFlowAnnotation("flow"),flowBoundAnnotation=createFlowAnnotation("flow.bound",{bound:!0}),flow=Object.assign(function(t,n){if(is20223Decorator(n))return flowAnnotation.decorate_20223_(t,n);if(isStringish(n))return storeAnnotation(t,n,flowAnnotation);var a=t,s=a.name||"<unnamed flow>",u=function(){var h=this,f=arguments,m=++generatorId,_=action(s+" - runid: "+m+" - init",a).apply(h,f),C,b=void 0,T=new Promise(function(R,A){var I=0;C=A;function P(k){b=void 0;var D;try{D=action(s+" - runid: "+m+" - yield "+I++,_.next).call(_,k)}catch(M){return A(M)}S(D)}function N(k){b=void 0;var D;try{D=action(s+" - runid: "+m+" - yield "+I++,_.throw).call(_,k)}catch(M){return A(M)}S(D)}function S(k){if(isFunction(k?.then)){k.then(S,A);return}return k.done?R(k.value):(b=Promise.resolve(k.value),b.then(P,N))}P(void 0)});return T.cancel=action(s+" - runid: "+m+" - cancel",function(){try{b&&cancelPromise(b);var R=_.return(void 0),A=Promise.resolve(R.value);A.then(noop$5,noop$5),cancelPromise(A),C(new FlowCancellationError)}catch(I){C(I)}}),T};return u.isMobXFlow=!0,u},flowAnnotation);flow.bound=createDecoratorAnnotation(flowBoundAnnotation);function cancelPromise(e){isFunction(e.cancel)&&e.cancel()}function isFlow(e){return e?.isMobXFlow===!0}function _isObservable(e,t){return e?isObservableObject(e)||!!e[$mobx]||isAtom(e)||isReaction(e)||isComputedValue(e):!1}function isObservable(e){return _isObservable(e)}function apiOwnKeys(e){if(isObservableObject(e))return e[$mobx].ownKeys_();die(38)}function cache(e,t,n){return e.set(t,n),n}function toJSHelper(e,t){if(e==null||typeof e!="object"||e instanceof Date||!isObservable(e))return e;if(isObservableValue(e)||isComputedValue(e))return toJSHelper(e.get(),t);if(t.has(e))return t.get(e);if(isObservableArray(e)){var n=cache(t,e,new Array(e.length));return e.forEach(function(c,h){n[h]=toJSHelper(c,t)}),n}if(isObservableSet(e)){var a=cache(t,e,new Set);return e.forEach(function(c){a.add(toJSHelper(c,t))}),a}if(isObservableMap(e)){var s=cache(t,e,new Map);return e.forEach(function(c,h){s.set(h,toJSHelper(c,t))}),s}else{var u=cache(t,e,{});return apiOwnKeys(e).forEach(function(c){objectPrototype.propertyIsEnumerable.call(e,c)&&(u[c]=toJSHelper(e[c],t))}),u}}function toJS(e,t){return toJSHelper(e,new Map)}function transaction(e,t){t===void 0&&(t=void 0),startBatch();try{return e.apply(t)}finally{endBatch()}}function getAdm(e){return e[$mobx]}var objectProxyTraps={has:function(t,n){return getAdm(t).has_(n)},get:function(t,n){return getAdm(t).get_(n)},set:function(t,n,a){var s;return isStringish(n)?(s=getAdm(t).set_(n,a,!0))!=null?s:!0:!1},deleteProperty:function(t,n){var a;return isStringish(n)?(a=getAdm(t).delete_(n,!0))!=null?a:!0:!1},defineProperty:function(t,n,a){var s;return(s=getAdm(t).defineProperty_(n,a))!=null?s:!0},ownKeys:function(t){return getAdm(t).ownKeys_()},preventExtensions:function(t){die(13)}};function asDynamicObservableObject(e,t){var n,a;return assertProxies(),e=asObservableObject(e,t),(a=(n=e[$mobx]).proxy_)!=null?a:n.proxy_=new Proxy(e,objectProxyTraps)}function hasInterceptors(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function registerInterceptor(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),once(function(){var a=n.indexOf(t);a!==-1&&n.splice(a,1)})}function interceptChange(e,t){var n=untrackedStart();try{for(var a=[].concat(e.interceptors_||[]),s=0,u=a.length;s<u&&(t=a[s](t),t&&!t.type&&die(14),!!t);s++);return t}finally{untrackedEnd(n)}}function hasListeners(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function registerListener(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),once(function(){var a=n.indexOf(t);a!==-1&&n.splice(a,1)})}function notifyListeners(e,t){var n=untrackedStart(),a=e.changeListeners_;if(a){a=a.slice();for(var s=0,u=a.length;s<u;s++)a[s](t);untrackedEnd(n)}}function makeObservable(e,t,n){return initObservable(function(){var a,s=asObservableObject(e,n)[$mobx];(a=t)!=null||(t=collectStoredAnnotations(e)),ownKeys(t).forEach(function(u){return s.make_(u,t[u])})}),e}var keysSymbol=Symbol("mobx-keys");function makeAutoObservable(e,t,n){return isPlainObject$1(e)?extendObservable(e,e,t,n):(initObservable(function(){var a=asObservableObject(e,n)[$mobx];if(!e[keysSymbol]){var s=Object.getPrototypeOf(e),u=new Set([].concat(ownKeys(e),ownKeys(s)));u.delete("constructor"),u.delete($mobx),addHiddenProp(s,keysSymbol,u)}e[keysSymbol].forEach(function(c){return a.make_(c,t&&c in t?t[c]:!0)})}),e)}var SPLICE="splice",UPDATE="update",MAX_SPLICE_SIZE=1e4,arrayTraps={get:function(t,n){var a=t[$mobx];return n===$mobx?a:n==="length"?a.getArrayLength_():typeof n=="string"&&!isNaN(n)?a.get_(parseInt(n)):hasProp(arrayExtensions,n)?arrayExtensions[n]:t[n]},set:function(t,n,a){var s=t[$mobx];return n==="length"&&s.setArrayLength_(a),typeof n=="symbol"||isNaN(n)?t[n]=a:s.set_(parseInt(n),a),!0},preventExtensions:function(){die(15)}},ObservableArrayAdministration=(function(){function e(n,a,s,u){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=s,this.legacyMode_=u,this.atom_=new Atom(n),this.enhancer_=function(c,h){return a(c,h,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.dehanceValues_=function(a){return this.dehancer!==void 0&&a.length>0?a.map(this.dehancer):a},t.intercept_=function(a){return registerInterceptor(this,a)},t.observe_=function(a,s){return s===void 0&&(s=!1),s&&a({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),registerListener(this,a)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(a){(typeof a!="number"||isNaN(a)||a<0)&&die("Out of range: "+a);var s=this.values_.length;if(a!==s)if(a>s){for(var u=new Array(a-s),c=0;c<a-s;c++)u[c]=void 0;this.spliceWithArray_(s,0,u)}else this.spliceWithArray_(a,s-a)},t.updateArrayLength_=function(a,s){a!==this.lastKnownLength_&&die(16),this.lastKnownLength_+=s,this.legacyMode_&&s>0&&reserveArrayBuffer(a+s+1)},t.spliceWithArray_=function(a,s,u){var c=this;this.atom_;var h=this.values_.length;if(a===void 0?a=0:a>h?a=h:a<0&&(a=Math.max(0,h+a)),arguments.length===1?s=h-a:s==null?s=0:s=Math.max(0,Math.min(s,h-a)),u===void 0&&(u=EMPTY_ARRAY),hasInterceptors(this)){var f=interceptChange(this,{object:this.proxy_,type:SPLICE,index:a,removedCount:s,added:u});if(!f)return EMPTY_ARRAY;s=f.removedCount,u=f.added}if(u=u.length===0?u:u.map(function(C){return c.enhancer_(C,void 0)}),this.legacyMode_){var m=u.length-s;this.updateArrayLength_(h,m)}var _=this.spliceItemsIntoValues_(a,s,u);return(s!==0||u.length!==0)&&this.notifyArraySplice_(a,u,_),this.dehanceValues_(_)},t.spliceItemsIntoValues_=function(a,s,u){if(u.length<MAX_SPLICE_SIZE){var c;return(c=this.values_).splice.apply(c,[a,s].concat(u))}else{var h=this.values_.slice(a,a+s),f=this.values_.slice(a+s);this.values_.length+=u.length-s;for(var m=0;m<u.length;m++)this.values_[a+m]=u[m];for(var _=0;_<f.length;_++)this.values_[a+u.length+_]=f[_];return h}},t.notifyArrayChildUpdate_=function(a,s,u){var c=!this.owned_&&isSpyEnabled(),h=hasListeners(this),f=h||c?{observableKind:"array",object:this.proxy_,type:UPDATE,debugObjectName:this.atom_.name_,index:a,newValue:s,oldValue:u}:null;this.atom_.reportChanged(),h&&notifyListeners(this,f)},t.notifyArraySplice_=function(a,s,u){var c=!this.owned_&&isSpyEnabled(),h=hasListeners(this),f=h||c?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:SPLICE,index:a,removed:u,added:s,removedCount:u.length,addedCount:s.length}:null;this.atom_.reportChanged(),h&&notifyListeners(this,f)},t.get_=function(a){if(this.legacyMode_&&a>=this.values_.length){console.warn("[mobx] Out of bounds read: "+a);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[a])},t.set_=function(a,s){var u=this.values_;if(this.legacyMode_&&a>u.length&&die(17,a,u.length),a<u.length){this.atom_;var c=u[a];if(hasInterceptors(this)){var h=interceptChange(this,{type:UPDATE,object:this.proxy_,index:a,newValue:s});if(!h)return;s=h.newValue}s=this.enhancer_(s,c);var f=s!==c;f&&(u[a]=s,this.notifyArrayChildUpdate_(a,s,c))}else{for(var m=new Array(a+1-u.length),_=0;_<m.length-1;_++)m[_]=void 0;m[m.length-1]=s,this.spliceWithArray_(u.length,0,m)}},e})();function createObservableArray(e,t,n,a){return n===void 0&&(n="ObservableArray"),a===void 0&&(a=!1),assertProxies(),initObservable(function(){var s=new ObservableArrayAdministration(n,t,a,!1);addHiddenFinalProp(s.values_,$mobx,s);var u=new Proxy(s.values_,arrayTraps);return s.proxy_=u,e&&e.length&&s.spliceWithArray_(0,0,e),u})}var arrayExtensions={clear:function(){return this.splice(0)},replace:function(t){var n=this[$mobx];return n.spliceWithArray_(0,n.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,n){for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];var c=this[$mobx];switch(arguments.length){case 0:return[];case 1:return c.spliceWithArray_(t);case 2:return c.spliceWithArray_(t,n)}return c.spliceWithArray_(t,n,s)},spliceWithArray:function(t,n,a){return this[$mobx].spliceWithArray_(t,n,a)},push:function(){for(var t=this[$mobx],n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t.spliceWithArray_(t.values_.length,0,a),t.values_.length},pop:function(){return this.splice(Math.max(this[$mobx].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[$mobx],n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t.spliceWithArray_(0,0,a),t.values_.length},reverse:function(){return globalState.trackingDerivation&&die(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){globalState.trackingDerivation&&die(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var n=this[$mobx],a=n.dehanceValues_(n.values_).indexOf(t);return a>-1?(this.splice(a,1),!0):!1}};addArrayExtension("at",simpleFunc);addArrayExtension("concat",simpleFunc);addArrayExtension("flat",simpleFunc);addArrayExtension("includes",simpleFunc);addArrayExtension("indexOf",simpleFunc);addArrayExtension("join",simpleFunc);addArrayExtension("lastIndexOf",simpleFunc);addArrayExtension("slice",simpleFunc);addArrayExtension("toString",simpleFunc);addArrayExtension("toLocaleString",simpleFunc);addArrayExtension("toSorted",simpleFunc);addArrayExtension("toSpliced",simpleFunc);addArrayExtension("with",simpleFunc);addArrayExtension("every",mapLikeFunc);addArrayExtension("filter",mapLikeFunc);addArrayExtension("find",mapLikeFunc);addArrayExtension("findIndex",mapLikeFunc);addArrayExtension("findLast",mapLikeFunc);addArrayExtension("findLastIndex",mapLikeFunc);addArrayExtension("flatMap",mapLikeFunc);addArrayExtension("forEach",mapLikeFunc);addArrayExtension("map",mapLikeFunc);addArrayExtension("some",mapLikeFunc);addArrayExtension("toReversed",mapLikeFunc);addArrayExtension("reduce",reduceLikeFunc);addArrayExtension("reduceRight",reduceLikeFunc);function addArrayExtension(e,t){typeof Array.prototype[e]=="function"&&(arrayExtensions[e]=t(e))}function simpleFunc(e){return function(){var t=this[$mobx];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function mapLikeFunc(e){return function(t,n){var a=this,s=this[$mobx];s.atom_.reportObserved();var u=s.dehanceValues_(s.values_);return u[e](function(c,h){return t.call(n,c,h,a)})}}function reduceLikeFunc(e){return function(){var t=this,n=this[$mobx];n.atom_.reportObserved();var a=n.dehanceValues_(n.values_),s=arguments[0];return arguments[0]=function(u,c,h){return s(u,c,h,t)},a[e].apply(a,arguments)}}var isObservableArrayAdministration=createInstanceofPredicate("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray(e){return isObject(e)&&isObservableArrayAdministration(e[$mobx])}var ObservableMapMarker={},ADD="add",DELETE="delete",ObservableMap=(function(){function e(n,a,s){var u=this;a===void 0&&(a=deepEnhancer),s===void 0&&(s="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[$mobx]=ObservableMapMarker,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=a,this.name_=s,isFunction(Map)||die(18),initObservable(function(){u.keysAtom_=createAtom("ObservableMap.keys()"),u.data_=new Map,u.hasMap_=new Map,n&&u.merge(n)})}var t=e.prototype;return t.has_=function(a){return this.data_.has(a)},t.has=function(a){var s=this;if(!globalState.trackingDerivation)return this.has_(a);var u=this.hasMap_.get(a);if(!u){var c=u=new ObservableValue(this.has_(a),referenceEnhancer,"ObservableMap.key?",!1);this.hasMap_.set(a,c),onBecomeUnobserved(c,function(){return s.hasMap_.delete(a)})}return u.get()},t.set=function(a,s){var u=this.has_(a);if(hasInterceptors(this)){var c=interceptChange(this,{type:u?UPDATE:ADD,object:this,newValue:s,name:a});if(!c)return this;s=c.newValue}return u?this.updateValue_(a,s):this.addValue_(a,s),this},t.delete=function(a){var s=this;if(this.keysAtom_,hasInterceptors(this)){var u=interceptChange(this,{type:DELETE,object:this,name:a});if(!u)return!1}if(this.has_(a)){var c=isSpyEnabled(),h=hasListeners(this),f=h||c?{observableKind:"map",debugObjectName:this.name_,type:DELETE,object:this,oldValue:this.data_.get(a).value_,name:a}:null;return transaction(function(){var m;s.keysAtom_.reportChanged(),(m=s.hasMap_.get(a))==null||m.setNewValue_(!1);var _=s.data_.get(a);_.setNewValue_(void 0),s.data_.delete(a)}),h&&notifyListeners(this,f),!0}return!1},t.updateValue_=function(a,s){var u=this.data_.get(a);if(s=u.prepareNewValue_(s),s!==globalState.UNCHANGED){var c=isSpyEnabled(),h=hasListeners(this),f=h||c?{observableKind:"map",debugObjectName:this.name_,type:UPDATE,object:this,oldValue:u.value_,name:a,newValue:s}:null;u.setNewValue_(s),h&&notifyListeners(this,f)}},t.addValue_=function(a,s){var u=this;this.keysAtom_,transaction(function(){var m,_=new ObservableValue(s,u.enhancer_,"ObservableMap.key",!1);u.data_.set(a,_),s=_.value_,(m=u.hasMap_.get(a))==null||m.setNewValue_(!0),u.keysAtom_.reportChanged()});var c=isSpyEnabled(),h=hasListeners(this),f=h||c?{observableKind:"map",debugObjectName:this.name_,type:ADD,object:this,name:a,newValue:s}:null;h&&notifyListeners(this,f)},t.get=function(a){return this.has(a)?this.dehanceValue_(this.data_.get(a).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var a=this,s=this.keys();return makeIterableForMap({next:function(){var c=s.next(),h=c.done,f=c.value;return{done:h,value:h?void 0:a.get(f)}}})},t.entries=function(){var a=this,s=this.keys();return makeIterableForMap({next:function(){var c=s.next(),h=c.done,f=c.value;return{done:h,value:h?void 0:[f,a.get(f)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(a,s){for(var u=_createForOfIteratorHelperLoose(this),c;!(c=u()).done;){var h=c.value,f=h[0],m=h[1];a.call(s,m,f,this)}},t.merge=function(a){var s=this;return isObservableMap(a)&&(a=new Map(a)),transaction(function(){isPlainObject$1(a)?getPlainObjectKeys(a).forEach(function(u){return s.set(u,a[u])}):Array.isArray(a)?a.forEach(function(u){var c=u[0],h=u[1];return s.set(c,h)}):isES6Map(a)?(isPlainES6Map(a)||die(19,a),a.forEach(function(u,c){return s.set(c,u)})):a!=null&&die(20,a)}),this},t.clear=function(){var a=this;transaction(function(){untracked(function(){for(var s=_createForOfIteratorHelperLoose(a.keys()),u;!(u=s()).done;){var c=u.value;a.delete(c)}})})},t.replace=function(a){var s=this;return transaction(function(){for(var u=convertToMap(a),c=new Map,h=!1,f=_createForOfIteratorHelperLoose(s.data_.keys()),m;!(m=f()).done;){var _=m.value;if(!u.has(_)){var C=s.delete(_);if(C)h=!0;else{var b=s.data_.get(_);c.set(_,b)}}}for(var T=_createForOfIteratorHelperLoose(u.entries()),R;!(R=T()).done;){var A=R.value,I=A[0],P=A[1],N=s.data_.has(I);if(s.set(I,P),s.data_.has(I)){var S=s.data_.get(I);c.set(I,S),N||(h=!0)}}if(!h)if(s.data_.size!==c.size)s.keysAtom_.reportChanged();else for(var k=s.data_.keys(),D=c.keys(),M=k.next(),j=D.next();!M.done;){if(M.value!==j.value){s.keysAtom_.reportChanged();break}M=k.next(),j=D.next()}s.data_=c}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(a,s){return registerListener(this,a)},t.intercept_=function(a){return registerInterceptor(this,a)},_createClass(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])})(),isObservableMap=createInstanceofPredicate("ObservableMap",ObservableMap);function makeIterableForMap(e){return e[Symbol.toStringTag]="MapIterator",makeIterable(e)}function convertToMap(e){if(isES6Map(e)||isObservableMap(e))return e;if(Array.isArray(e))return new Map(e);if(isPlainObject$1(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return die(21,e)}var ObservableSetMarker={},ObservableSet=(function(){function e(n,a,s){var u=this;a===void 0&&(a=deepEnhancer),s===void 0&&(s="ObservableSet"),this.name_=void 0,this[$mobx]=ObservableSetMarker,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=s,isFunction(Set)||die(22),this.enhancer_=function(c,h){return a(c,h,s)},initObservable(function(){u.atom_=createAtom(u.name_),n&&u.replace(n)})}var t=e.prototype;return t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.clear=function(){var a=this;transaction(function(){untracked(function(){for(var s=_createForOfIteratorHelperLoose(a.data_.values()),u;!(u=s()).done;){var c=u.value;a.delete(c)}})})},t.forEach=function(a,s){for(var u=_createForOfIteratorHelperLoose(this),c;!(c=u()).done;){var h=c.value;a.call(s,h,h,this)}},t.add=function(a){var s=this;if(this.atom_,hasInterceptors(this)){var u=interceptChange(this,{type:ADD,object:this,newValue:a});if(!u)return this;a=u.newValue}if(!this.has(a)){transaction(function(){s.data_.add(s.enhancer_(a,void 0)),s.atom_.reportChanged()});var c=!1,h=hasListeners(this),f=h||c?{observableKind:"set",debugObjectName:this.name_,type:ADD,object:this,newValue:a}:null;h&&notifyListeners(this,f)}return this},t.delete=function(a){var s=this;if(hasInterceptors(this)){var u=interceptChange(this,{type:DELETE,object:this,oldValue:a});if(!u)return!1}if(this.has(a)){var c=!1,h=hasListeners(this),f=h||c?{observableKind:"set",debugObjectName:this.name_,type:DELETE,object:this,oldValue:a}:null;return transaction(function(){s.atom_.reportChanged(),s.data_.delete(a)}),h&&notifyListeners(this,f),!0}return!1},t.has=function(a){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(a))},t.entries=function(){var a=this.values();return makeIterableForSet({next:function(){var u=a.next(),c=u.value,h=u.done;return h?{value:void 0,done:h}:{value:[c,c],done:h}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var a=this,s=this.data_.values();return makeIterableForSet({next:function(){var c=s.next(),h=c.value,f=c.done;return f?{value:void 0,done:f}:{value:a.dehanceValue_(h),done:f}}})},t.intersection=function(a){if(isES6Set(a)&&!isObservableSet(a))return a.intersection(this);var s=new Set(this);return s.intersection(a)},t.union=function(a){if(isES6Set(a)&&!isObservableSet(a))return a.union(this);var s=new Set(this);return s.union(a)},t.difference=function(a){return new Set(this).difference(a)},t.symmetricDifference=function(a){if(isES6Set(a)&&!isObservableSet(a))return a.symmetricDifference(this);var s=new Set(this);return s.symmetricDifference(a)},t.isSubsetOf=function(a){return new Set(this).isSubsetOf(a)},t.isSupersetOf=function(a){return new Set(this).isSupersetOf(a)},t.isDisjointFrom=function(a){if(isES6Set(a)&&!isObservableSet(a))return a.isDisjointFrom(this);var s=new Set(this);return s.isDisjointFrom(a)},t.replace=function(a){var s=this;return isObservableSet(a)&&(a=new Set(a)),transaction(function(){Array.isArray(a)?(s.clear(),a.forEach(function(u){return s.add(u)})):isES6Set(a)?(s.clear(),a.forEach(function(u){return s.add(u)})):a!=null&&die("Cannot initialize set from "+a)}),this},t.observe_=function(a,s){return registerListener(this,a)},t.intercept_=function(a){return registerInterceptor(this,a)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},_createClass(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])})(),isObservableSet=createInstanceofPredicate("ObservableSet",ObservableSet);function makeIterableForSet(e){return e[Symbol.toStringTag]="SetIterator",makeIterable(e)}var descriptorCache=Object.create(null),REMOVE="remove",ObservableObjectAdministration=(function(){function e(n,a,s,u){a===void 0&&(a=new Map),u===void 0&&(u=autoAnnotation),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=a,this.name_=s,this.defaultAnnotation_=u,this.keysAtom_=new Atom("ObservableObject.keys"),this.isPlainObject_=isPlainObject$1(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(a){return this.values_.get(a).get()},t.setObservablePropValue_=function(a,s){var u=this.values_.get(a);if(u instanceof ComputedValue)return u.set(s),!0;if(hasInterceptors(this)){var c=interceptChange(this,{type:UPDATE,object:this.proxy_||this.target_,name:a,newValue:s});if(!c)return null;s=c.newValue}if(s=u.prepareNewValue_(s),s!==globalState.UNCHANGED){var h=hasListeners(this),f=!1,m=h||f?{type:UPDATE,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:u.value_,name:a,newValue:s}:null;u.setNewValue_(s),h&&notifyListeners(this,m)}return!0},t.get_=function(a){return globalState.trackingDerivation&&!hasProp(this.target_,a)&&this.has_(a),this.target_[a]},t.set_=function(a,s,u){return u===void 0&&(u=!1),hasProp(this.target_,a)?this.values_.has(a)?this.setObservablePropValue_(a,s):u?Reflect.set(this.target_,a,s):(this.target_[a]=s,!0):this.extend_(a,{value:s,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,u)},t.has_=function(a){if(!globalState.trackingDerivation)return a in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var s=this.pendingKeys_.get(a);return s||(s=new ObservableValue(a in this.target_,referenceEnhancer,"ObservableObject.key?",!1),this.pendingKeys_.set(a,s)),s.get()},t.make_=function(a,s){if(s===!0&&(s=this.defaultAnnotation_),s!==!1){if(!(a in this.target_)){var u;if((u=this.target_[storedAnnotationsSymbol])!=null&&u[a])return;die(1,s.annotationType_,this.name_+"."+a.toString())}for(var c=this.target_;c&&c!==objectPrototype;){var h=getDescriptor(c,a);if(h){var f=s.make_(this,a,h,c);if(f===0)return;if(f===1)break}c=Object.getPrototypeOf(c)}recordAnnotationApplied(this,s,a)}},t.extend_=function(a,s,u,c){if(c===void 0&&(c=!1),u===!0&&(u=this.defaultAnnotation_),u===!1)return this.defineProperty_(a,s,c);var h=u.extend_(this,a,s,c);return h&&recordAnnotationApplied(this,u,a),h},t.defineProperty_=function(a,s,u){u===void 0&&(u=!1),this.keysAtom_;try{startBatch();var c=this.delete_(a);if(!c)return c;if(hasInterceptors(this)){var h=interceptChange(this,{object:this.proxy_||this.target_,name:a,type:ADD,newValue:s.value});if(!h)return null;var f=h.newValue;s.value!==f&&(s=_extends$1({},s,{value:f}))}if(u){if(!Reflect.defineProperty(this.target_,a,s))return!1}else defineProperty(this.target_,a,s);this.notifyPropertyAddition_(a,s.value)}finally{endBatch()}return!0},t.defineObservableProperty_=function(a,s,u,c){c===void 0&&(c=!1),this.keysAtom_;try{startBatch();var h=this.delete_(a);if(!h)return h;if(hasInterceptors(this)){var f=interceptChange(this,{object:this.proxy_||this.target_,name:a,type:ADD,newValue:s});if(!f)return null;s=f.newValue}var m=getCachedObservablePropDescriptor(a),_={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:m.get,set:m.set};if(c){if(!Reflect.defineProperty(this.target_,a,_))return!1}else defineProperty(this.target_,a,_);var C=new ObservableValue(s,u,"ObservableObject.key",!1);this.values_.set(a,C),this.notifyPropertyAddition_(a,C.value_)}finally{endBatch()}return!0},t.defineComputedProperty_=function(a,s,u){u===void 0&&(u=!1),this.keysAtom_;try{startBatch();var c=this.delete_(a);if(!c)return c;if(hasInterceptors(this)){var h=interceptChange(this,{object:this.proxy_||this.target_,name:a,type:ADD,newValue:void 0});if(!h)return null}s.name||(s.name="ObservableObject.key"),s.context=this.proxy_||this.target_;var f=getCachedObservablePropDescriptor(a),m={configurable:globalState.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:f.get,set:f.set};if(u){if(!Reflect.defineProperty(this.target_,a,m))return!1}else defineProperty(this.target_,a,m);this.values_.set(a,new ComputedValue(s)),this.notifyPropertyAddition_(a,void 0)}finally{endBatch()}return!0},t.delete_=function(a,s){if(s===void 0&&(s=!1),this.keysAtom_,!hasProp(this.target_,a))return!0;if(hasInterceptors(this)){var u=interceptChange(this,{object:this.proxy_||this.target_,name:a,type:REMOVE});if(!u)return null}try{var c;startBatch();var h=hasListeners(this),f=!1,m=this.values_.get(a),_=void 0;if(!m&&(h||f)){var C;_=(C=getDescriptor(this.target_,a))==null?void 0:C.value}if(s){if(!Reflect.deleteProperty(this.target_,a))return!1}else delete this.target_[a];if(m&&(this.values_.delete(a),m instanceof ObservableValue&&(_=m.value_),propagateChanged(m)),this.keysAtom_.reportChanged(),(c=this.pendingKeys_)==null||(c=c.get(a))==null||c.set(a in this.target_),h||f){var b={type:REMOVE,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:_,name:a};h&&notifyListeners(this,b)}}finally{endBatch()}return!0},t.observe_=function(a,s){return registerListener(this,a)},t.intercept_=function(a){return registerInterceptor(this,a)},t.notifyPropertyAddition_=function(a,s){var u,c=hasListeners(this),h=!1;if(c||h){var f=c||h?{type:ADD,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:a,newValue:s}:null;c&&notifyListeners(this,f)}(u=this.pendingKeys_)==null||(u=u.get(a))==null||u.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),ownKeys(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e})();function asObservableObject(e,t){var n;if(hasProp(e,$mobx))return e;var a=(n=t?.name)!=null?n:"ObservableObject",s=new ObservableObjectAdministration(e,new Map,String(a),getAnnotationFromOptions(t));return addHiddenProp(e,$mobx,s),e}var isObservableObjectAdministration=createInstanceofPredicate("ObservableObjectAdministration",ObservableObjectAdministration);function getCachedObservablePropDescriptor(e){return descriptorCache[e]||(descriptorCache[e]={get:function(){return this[$mobx].getObservablePropValue_(e)},set:function(n){return this[$mobx].setObservablePropValue_(e,n)}})}function isObservableObject(e){return isObject(e)?isObservableObjectAdministration(e[$mobx]):!1}function recordAnnotationApplied(e,t,n){var a;(a=e.target_[storedAnnotationsSymbol])==null||delete a[n]}var ENTRY_0=createArrayEntryDescriptor(0),safariPrototypeSetterInheritanceBug=(function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1})(),OBSERVABLE_ARRAY_BUFFER_SIZE=0,StubArray=function(){};function inherit(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}inherit(StubArray,Array.prototype);var LegacyObservableArray=(function(e){function t(a,s,u,c){var h;return u===void 0&&(u="ObservableArray"),c===void 0&&(c=!1),h=e.call(this)||this,initObservable(function(){var f=new ObservableArrayAdministration(u,s,c,!0);f.proxy_=h,addHiddenFinalProp(h,$mobx,f),a&&a.length&&h.spliceWithArray(0,0,a),safariPrototypeSetterInheritanceBug&&Object.defineProperty(h,"0",ENTRY_0)}),h}_inheritsLoose$1(t,e);var n=t.prototype;return n.concat=function(){this[$mobx].atom_.reportObserved();for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];return Array.prototype.concat.apply(this.slice(),u.map(function(h){return isObservableArray(h)?h.slice():h}))},n[Symbol.iterator]=function(){var a=this,s=0;return makeIterable({next:function(){return s<a.length?{value:a[s++],done:!1}:{done:!0,value:void 0}}})},_createClass(t,[{key:"length",get:function(){return this[$mobx].getArrayLength_()},set:function(s){this[$mobx].setArrayLength_(s)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])})(StubArray);Object.entries(arrayExtensions).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&addHiddenProp(LegacyObservableArray.prototype,t,n)});function createArrayEntryDescriptor(e){return{enumerable:!1,configurable:!0,get:function(){return this[$mobx].get_(e)},set:function(n){this[$mobx].set_(e,n)}}}function createArrayBufferItem(e){defineProperty(LegacyObservableArray.prototype,""+e,createArrayEntryDescriptor(e))}function reserveArrayBuffer(e){if(e>OBSERVABLE_ARRAY_BUFFER_SIZE){for(var t=OBSERVABLE_ARRAY_BUFFER_SIZE;t<e+100;t++)createArrayBufferItem(t);OBSERVABLE_ARRAY_BUFFER_SIZE=e}}reserveArrayBuffer(1e3);function createLegacyArray(e,t,n){return new LegacyObservableArray(e,t,n)}function getAtom(e,t){if(typeof e=="object"&&e!==null){if(isObservableArray(e))return t!==void 0&&die(23),e[$mobx].atom_;if(isObservableSet(e))return e.atom_;if(isObservableMap(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||die(25,t,getDebugName(e)),n}if(isObservableObject(e)){if(!t)return die(26);var a=e[$mobx].values_.get(t);return a||die(27,t,getDebugName(e)),a}if(isAtom(e)||isComputedValue(e)||isReaction(e))return e}else if(isFunction(e)&&isReaction(e[$mobx]))return e[$mobx];die(28)}function getAdministration(e,t){if(e||die(29),isAtom(e)||isComputedValue(e)||isReaction(e)||isObservableMap(e)||isObservableSet(e))return e;if(e[$mobx])return e[$mobx];die(24,e)}function getDebugName(e,t){var n;if(t!==void 0)n=getAtom(e,t);else{if(isAction(e))return e.name;isObservableObject(e)||isObservableMap(e)||isObservableSet(e)?n=getAdministration(e):n=getAtom(e)}return n.name_}function initObservable(e){var t=untrackedStart(),n=allowStateChangesStart(!0);startBatch();try{return e()}finally{endBatch(),allowStateChangesEnd(n),untrackedEnd(t)}}var toString=objectPrototype.toString;function deepEqual(e,t,n){return n===void 0&&(n=-1),eq(e,t,n)}function eq(e,t,n,a,s){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var u=typeof e;if(u!=="function"&&u!=="object"&&typeof t!="object")return!1;var c=toString.call(e);if(c!==toString.call(t))return!1;switch(c){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=unwrap(e),t=unwrap(t);var h=c==="[object Array]";if(!h){if(typeof e!="object"||typeof t!="object")return!1;var f=e.constructor,m=t.constructor;if(f!==m&&!(isFunction(f)&&f instanceof f&&isFunction(m)&&m instanceof m)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),a=a||[],s=s||[];for(var _=a.length;_--;)if(a[_]===e)return s[_]===t;if(a.push(e),s.push(t),h){if(_=e.length,_!==t.length)return!1;for(;_--;)if(!eq(e[_],t[_],n-1,a,s))return!1}else{var C=Object.keys(e),b=C.length;if(Object.keys(t).length!==b)return!1;for(var T=0;T<b;T++){var R=C[T];if(!(hasProp(t,R)&&eq(e[R],t[R],n-1,a,s)))return!1}}return a.pop(),s.pop(),!0}function unwrap(e){return isObservableArray(e)?e.slice():isES6Map(e)||isObservableMap(e)||isES6Set(e)||isObservableSet(e)?Array.from(e.entries()):e}var _getGlobal$Iterator,maybeIteratorPrototype=((_getGlobal$Iterator=getGlobal().Iterator)==null?void 0:_getGlobal$Iterator.prototype)||{};function makeIterable(e){return e[Symbol.iterator]=getSelf,Object.assign(Object.create(maybeIteratorPrototype),e)}function getSelf(){return this}["Symbol","Map","Set"].forEach(function(e){var t=getGlobal();typeof t[e]>"u"&&die("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy,extras:{getDebugName},$mobx});class APIStore{_isLoading=!1;_message="";constructor(){makeAutoObservable(this)}get isLoading(){return this._isLoading}get message(){return this._message}enableLoading(){this._isLoading=!0}disableLoading(){this._isLoading=!1}setMessage(t){this._message=t}clearMessage(){this._message=""}}if(!reactExports.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!makeObservable)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function defaultNoopBatch(e){e()}function observerBatching(e){e||(e=defaultNoopBatch),configure({reactionScheduler:e})}function printDebugValue(e){return getDependencyTree(e)}var REGISTRY_FINALIZE_AFTER=1e4,REGISTRY_SWEEP_INTERVAL=1e4,TimerBasedFinalizationRegistry=(function(){function e(t){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(a){a===void 0&&(a=REGISTRY_FINALIZE_AFTER),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var s=Date.now();n.registrations.forEach(function(u,c){s-u.registeredAt>=a&&(n.finalize(u.value),n.registrations.delete(c))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,a){this.registrations.set(a,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,REGISTRY_SWEEP_INTERVAL))}}),e})(),UniversalFinalizationRegistry=typeof FinalizationRegistry<"u"?FinalizationRegistry:TimerBasedFinalizationRegistry,observerFinalizationRegistry=new UniversalFinalizationRegistry(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var e=requireReact();function t(C,b){return C===b&&(C!==0||1/C===1/b)||C!==C&&b!==b}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,u=e.useLayoutEffect,c=e.useDebugValue;function h(C,b){var T=b(),R=a({inst:{value:T,getSnapshot:b}}),A=R[0].inst,I=R[1];return u(function(){A.value=T,A.getSnapshot=b,f(A)&&I({inst:A})},[C,T,b]),s(function(){return f(A)&&I({inst:A}),C(function(){f(A)&&I({inst:A})})},[C]),c(T),T}function f(C){var b=C.getSnapshot;C=C.value;try{var T=b();return!n(C,T)}catch{return!0}}function m(C,b){return b()}var _=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return useSyncExternalStoreShim_production.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:_,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var shimExports=requireShim();function createReaction(e){e.reaction=new Reaction("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function useObserver(e,t){t===void 0&&(t="observed");var n=React.useRef(null);if(!n.current){var a={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(h){return observerFinalizationRegistry.unregister(a),a.onStoreChange=h,a.reaction||(createReaction(a),a.stateVersion=Symbol()),function(){var f;a.onStoreChange=null,(f=a.reaction)===null||f===void 0||f.dispose(),a.reaction=null}},getSnapshot:function(){return a.stateVersion}};n.current=a}var s=n.current;s.reaction||(createReaction(s),observerFinalizationRegistry.register(n,s,s)),React.useDebugValue(s.reaction,printDebugValue),shimExports.useSyncExternalStore(s.subscribe,s.getSnapshot,s.getSnapshot);var u,c;if(s.reaction.track(function(){try{u=e()}catch(h){c=h}}),c)throw c;return u}var _a$1,_b,hasSymbol$1=typeof Symbol=="function"&&Symbol.for,isFunctionNameConfigurable=(_b=(_a$1=Object.getOwnPropertyDescriptor(function(){},"name"))===null||_a$1===void 0?void 0:_a$1.configurable)!==null&&_b!==void 0?_b:!1,ReactForwardRefSymbol=hasSymbol$1?Symbol.for("react.forward_ref"):typeof reactExports.forwardRef=="function"&&reactExports.forwardRef(function(e){return null}).$$typeof,ReactMemoSymbol=hasSymbol$1?Symbol.for("react.memo"):typeof reactExports.memo=="function"&&reactExports.memo(function(e){return null}).$$typeof;function observer(e,t){var n;if(ReactMemoSymbol&&e.$$typeof===ReactMemoSymbol)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var a=(n=void 0)!==null&&n!==void 0?n:!1,s=e,u=e.displayName||e.name;if(ReactForwardRefSymbol&&e.$$typeof===ReactForwardRefSymbol&&(a=!0,s=e.render,typeof s!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var c=function(h,f){return useObserver(function(){return s(h,f)},u)};return c.displayName=e.displayName,isFunctionNameConfigurable&&Object.defineProperty(c,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(c.contextTypes=e.contextTypes),a&&(c=reactExports.forwardRef(c)),c=reactExports.memo(c),copyStaticProperties(e,c),c}var hoistBlackList={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function copyStaticProperties(e,t){Object.keys(e).forEach(function(n){hoistBlackList[n]||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}function useLocalObservable(e,t){return reactExports.useState(function(){return observable(e(),t,{autoBind:!0})})[0]}var _a;observerBatching(reactDomExports.unstable_batchedUpdates);_a=observerFinalizationRegistry.finalizeAllImmediately;const APIContext=reactExports.createContext(new APIStore),APIProvider=({children:e})=>{const t=useLocalObservable(()=>new APIStore);return jsxRuntimeExports.jsx(APIContext.Provider,{value:t,children:e})},common={black:"#000",white:"#fff"},red={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},purple={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},blue={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},lightBlue={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},green={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},orange={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},grey={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function formatMuiErrorMessage(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(a=>n.searchParams.append("args[]",a)),`Minified MUI error #${e}; visit ${n} for the full message.`}const THEME_ID="$$material";function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_extends.apply(null,arguments)}function sheetForTag(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function createStyleElement(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var StyleSheet=(function(){function e(n){var a=this;this._insertTag=function(s){var u;a.tags.length===0?a.insertionPoint?u=a.insertionPoint.nextSibling:a.prepend?u=a.container.firstChild:u=a.before:u=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(s,u),a.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var u=sheetForTag(s);try{u.insertRule(a,u.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var s;return(s=a.parentNode)==null?void 0:s.removeChild(a)}),this.tags=[],this.ctr=0},e})(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(e,t){return charat(e,0)^45?(((t<<2^charat(e,0))<<2^charat(e,1))<<2^charat(e,2))<<2^charat(e,3):0}function trim(e){return e.trim()}function match(e,t){return(e=t.exec(e))?e[0]:e}function replace(e,t,n){return e.replace(t,n)}function indexof(e,t){return e.indexOf(t)}function charat(e,t){return e.charCodeAt(t)|0}function substr(e,t,n){return e.slice(t,n)}function strlen(e){return e.length}function sizeof(e){return e.length}function append(e,t){return t.push(e),e}function combine(e,t){return e.map(t).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(e,t,n,a,s,u,c){return{value:e,root:t,parent:n,type:a,props:s,children:u,line,column,length:c,return:""}}function copy(e,t){return assign(node("",null,null,"",null,null,0),e,{length:-e.length},t)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(e,t){return substr(characters,e,t)}function token(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(e){return line=column=1,length=strlen(characters=e),position=0,[]}function dealloc(e){return characters="",e}function delimit(e){return trim(slice(position-1,delimiter(e===91?e+2:e===40?e+1:e)))}function whitespace(e){for(;(character=peek())&&character<33;)next();return token(e)>2||token(character)>3?"":" "}function escaping(e,t){for(;--t&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(e,caret()+(t<6&&peek()==32&&next()==32))}function delimiter(e){for(;next();)switch(character){case e:return position;case 34:case 39:e!==34&&e!==39&&delimiter(character);break;case 40:e===41&&delimiter(e);break;case 92:next();break}return position}function commenter(e,t){for(;next()&&e+character!==57;)if(e+character===84&&peek()===47)break;return"/*"+slice(t,position-1)+"*"+from(e===47?e:next())}function identifier(e){for(;!token(peek());)next();return slice(e,position)}function compile(e){return dealloc(parse("",null,null,null,[""],e=alloc(e),0,[0],e))}function parse(e,t,n,a,s,u,c,h,f){for(var m=0,_=0,C=c,b=0,T=0,R=0,A=1,I=1,P=1,N=0,S="",k=s,D=u,M=a,j=S;I;)switch(R=N,N=next()){case 40:if(R!=108&&charat(j,C-1)==58){indexof(j+=replace(delimit(N),"&","&\f"),"&\f")!=-1&&(P=-1);break}case 34:case 39:case 91:j+=delimit(N);break;case 9:case 10:case 13:case 32:j+=whitespace(R);break;case 92:j+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),t,n),f);break;default:j+="/"}break;case 123*A:h[m++]=strlen(j)*P;case 125*A:case 59:case 0:switch(N){case 0:case 125:I=0;case 59+_:P==-1&&(j=replace(j,/\f/g,"")),T>0&&strlen(j)-C&&append(T>32?declaration(j+";",a,n,C-1):declaration(replace(j," ","")+";",a,n,C-2),f);break;case 59:j+=";";default:if(append(M=ruleset(j,t,n,m,_,s,h,S,k=[],D=[],C),u),N===123)if(_===0)parse(j,t,M,M,k,u,C,h,D);else switch(b===99&&charat(j,3)===110?100:b){case 100:case 108:case 109:case 115:parse(e,M,M,a&&append(ruleset(e,M,M,0,0,s,h,S,s,k=[],C),D),s,D,C,h,a?k:D);break;default:parse(j,M,M,M,[""],D,0,h,D)}}m=_=T=0,A=P=1,S=j="",C=c;break;case 58:C=1+strlen(j),T=R;default:if(A<1){if(N==123)--A;else if(N==125&&A++==0&&prev()==125)continue}switch(j+=from(N),N*A){case 38:P=_>0?1:(j+="\f",-1);break;case 44:h[m++]=(strlen(j)-1)*P,P=1;break;case 64:peek()===45&&(j+=delimit(next())),b=peek(),_=C=strlen(S=j+=identifier(caret())),N++;break;case 45:R===45&&strlen(j)==2&&(A=0)}}return u}function ruleset(e,t,n,a,s,u,c,h,f,m,_){for(var C=s-1,b=s===0?u:[""],T=sizeof(b),R=0,A=0,I=0;R<a;++R)for(var P=0,N=substr(e,C+1,C=abs(A=c[R])),S=e;P<T;++P)(S=trim(A>0?b[P]+" "+N:replace(N,/&\f/g,b[P])))&&(f[I++]=S);return node(e,t,n,s===0?RULESET:h,f,m,_)}function comment(e,t,n){return node(e,t,n,COMMENT,from(char()),substr(e,2,-2),0)}function declaration(e,t,n,a){return node(e,t,n,DECLARATION,substr(e,0,a),substr(e,a+1,-1),a)}function serialize(e,t){for(var n="",a=sizeof(e),s=0;s<a;s++)n+=t(e[s],s,e,t)||"";return n}function stringify(e,t,n,a){switch(e.type){case LAYER:if(e.children.length)break;case IMPORT:case DECLARATION:return e.return=e.return||e.value;case COMMENT:return"";case KEYFRAMES:return e.return=e.value+"{"+serialize(e.children,a)+"}";case RULESET:e.value=e.props.join(",")}return strlen(n=serialize(e.children,a))?e.return=e.value+"{"+n+"}":""}function middleware(e){var t=sizeof(e);return function(n,a,s,u){for(var c="",h=0;h<t;h++)c+=e[h](n,a,s,u)||"";return c}}function rulesheet(e){return function(t){t.root||(t=t.return)&&e(t)}}function memoize$1(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var identifierWithPointTracking=function(t,n,a){for(var s=0,u=0;s=u,u=peek(),s===38&&u===12&&(n[a]=1),!token(u);)next();return slice(t,position)},toRules=function(t,n){var a=-1,s=44;do switch(token(s)){case 0:s===38&&peek()===12&&(n[a]=1),t[a]+=identifierWithPointTracking(position-1,n,a);break;case 2:t[a]+=delimit(s);break;case 4:if(s===44){t[++a]=peek()===58?"&\f":"",n[a]=t[a].length;break}default:t[a]+=from(s)}while(s=next());return t},getRules=function(t,n){return dealloc(toRules(alloc(t),n))},fixedElements=new WeakMap,compat=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,a=t.parent,s=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!fixedElements.get(a))&&!s){fixedElements.set(t,!0);for(var u=[],c=getRules(n,u),h=a.props,f=0,m=0;f<c.length;f++)for(var _=0;_<h.length;_++,m++)t.props[m]=u[f]?c[f].replace(/&\f/g,h[_]):h[_]+" "+c[f]}}},removeLabel=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function prefix(e,t){switch(hash(e,t)){case 5103:return WEBKIT+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+e+MOZ+e+MS+e+e;case 6828:case 4268:return WEBKIT+e+MS+e+e;case 6165:return WEBKIT+e+MS+"flex-"+e+e;case 5187:return WEBKIT+e+replace(e,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+e;case 5443:return WEBKIT+e+MS+"flex-item-"+replace(e,/flex-|-self/,"")+e;case 4675:return WEBKIT+e+MS+"flex-line-pack"+replace(e,/align-content|flex-|-self/,"")+e;case 5548:return WEBKIT+e+MS+replace(e,"shrink","negative")+e;case 5292:return WEBKIT+e+MS+replace(e,"basis","preferred-size")+e;case 6060:return WEBKIT+"box-"+replace(e,"-grow","")+WEBKIT+e+MS+replace(e,"grow","positive")+e;case 4554:return WEBKIT+replace(e,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+e;case 6187:return replace(replace(replace(e,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),e,"")+e;case 5495:case 3959:return replace(e,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(e,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+e+e;case 4095:case 3583:case 4068:case 2532:return replace(e,/(.+)-inline(.+)/,WEBKIT+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(e)-1-t>6)switch(charat(e,t+1)){case 109:if(charat(e,t+4)!==45)break;case 102:return replace(e,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~indexof(e,"stretch")?prefix(replace(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(charat(e,t+1)!==115)break;case 6444:switch(charat(e,strlen(e)-3-(~indexof(e,"!important")&&10))){case 107:return replace(e,":",":"+WEBKIT)+e;case 101:return replace(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(e,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+e}break;case 5936:switch(charat(e,t+11)){case 114:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return WEBKIT+e+MS+replace(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return WEBKIT+e+MS+e+e}return e}var prefixer=function(t,n,a,s){if(t.length>-1&&!t.return)switch(t.type){case DECLARATION:t.return=prefix(t.value,t.length);break;case KEYFRAMES:return serialize([copy(t,{value:replace(t.value,"@","@"+WEBKIT)})],s);case RULESET:if(t.length)return combine(t.props,function(u){switch(match(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(t,{props:[replace(u,/:(read-\w+)/,":"+MOZ+"$1")]})],s);case"::placeholder":return serialize([copy(t,{props:[replace(u,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(t,{props:[replace(u,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(t,{props:[replace(u,/:(plac\w+)/,MS+"input-$1")]})],s)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(t){var n=t.key;if(n==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(A){var I=A.getAttribute("data-emotion");I.indexOf(" ")!==-1&&(document.head.appendChild(A),A.setAttribute("data-s",""))})}var s=t.stylisPlugins||defaultStylisPlugins,u={},c,h=[];c=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(A){for(var I=A.getAttribute("data-emotion").split(" "),P=1;P<I.length;P++)u[I[P]]=!0;h.push(A)});var f,m=[compat,removeLabel];{var _,C=[stringify,rulesheet(function(A){_.insert(A)})],b=middleware(m.concat(s,C)),T=function(I){return serialize(compile(I),b)};f=function(I,P,N,S){_=N,T(I?I+"{"+P.styles+"}":P.styles),S&&(R.inserted[P.name]=!0)}}var R={key:n,sheet:new StyleSheet({key:n,container:c,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:f};return R.sheet.hydrate(h),R},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,u=e?Symbol.for("react.profiler"):60114,c=e?Symbol.for("react.provider"):60109,h=e?Symbol.for("react.context"):60110,f=e?Symbol.for("react.async_mode"):60111,m=e?Symbol.for("react.concurrent_mode"):60111,_=e?Symbol.for("react.forward_ref"):60112,C=e?Symbol.for("react.suspense"):60113,b=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,R=e?Symbol.for("react.lazy"):60116,A=e?Symbol.for("react.block"):60121,I=e?Symbol.for("react.fundamental"):60117,P=e?Symbol.for("react.responder"):60118,N=e?Symbol.for("react.scope"):60119;function S(D){if(typeof D=="object"&&D!==null){var M=D.$$typeof;switch(M){case t:switch(D=D.type,D){case f:case m:case a:case u:case s:case C:return D;default:switch(D=D&&D.$$typeof,D){case h:case _:case R:case T:case c:return D;default:return M}}case n:return M}}}function k(D){return S(D)===m}return reactIs_production_min.AsyncMode=f,reactIs_production_min.ConcurrentMode=m,reactIs_production_min.ContextConsumer=h,reactIs_production_min.ContextProvider=c,reactIs_production_min.Element=t,reactIs_production_min.ForwardRef=_,reactIs_production_min.Fragment=a,reactIs_production_min.Lazy=R,reactIs_production_min.Memo=T,reactIs_production_min.Portal=n,reactIs_production_min.Profiler=u,reactIs_production_min.StrictMode=s,reactIs_production_min.Suspense=C,reactIs_production_min.isAsyncMode=function(D){return k(D)||S(D)===f},reactIs_production_min.isConcurrentMode=k,reactIs_production_min.isContextConsumer=function(D){return S(D)===h},reactIs_production_min.isContextProvider=function(D){return S(D)===c},reactIs_production_min.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===t},reactIs_production_min.isForwardRef=function(D){return S(D)===_},reactIs_production_min.isFragment=function(D){return S(D)===a},reactIs_production_min.isLazy=function(D){return S(D)===R},reactIs_production_min.isMemo=function(D){return S(D)===T},reactIs_production_min.isPortal=function(D){return S(D)===n},reactIs_production_min.isProfiler=function(D){return S(D)===u},reactIs_production_min.isStrictMode=function(D){return S(D)===s},reactIs_production_min.isSuspense=function(D){return S(D)===C},reactIs_production_min.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===a||D===m||D===u||D===s||D===C||D===b||typeof D=="object"&&D!==null&&(D.$$typeof===R||D.$$typeof===T||D.$$typeof===c||D.$$typeof===h||D.$$typeof===_||D.$$typeof===I||D.$$typeof===P||D.$$typeof===N||D.$$typeof===A)},reactIs_production_min.typeOf=S,reactIs_production_min}var hasRequiredReactIs$1;function requireReactIs$1(){return hasRequiredReactIs$1||(hasRequiredReactIs$1=1,reactIs$1.exports=requireReactIs_production_min()),reactIs$1.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var e=requireReactIs$1(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};u[e.ForwardRef]=a,u[e.Memo]=s;function c(R){return e.isMemo(R)?s:u[R.$$typeof]||t}var h=Object.defineProperty,f=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,C=Object.getPrototypeOf,b=Object.prototype;function T(R,A,I){if(typeof A!="string"){if(b){var P=C(A);P&&P!==b&&T(R,P,I)}var N=f(A);m&&(N=N.concat(m(A)));for(var S=c(R),k=c(A),D=0;D<N.length;++D){var M=N[D];if(!n[M]&&!(I&&I[M])&&!(k&&k[M])&&!(S&&S[M])){var j=_(A,M);try{h(R,M,j)}catch{}}}}return R}return hoistNonReactStatics_cjs=T,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser=!0;function getRegisteredStyles(e,t,n){var a="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(a+=s+" ")}),a}var registerStyles=function(t,n,a){var s=t.key+"-"+n.name;(a===!1||isBrowser===!1)&&t.registered[s]===void 0&&(t.registered[s]=n.styles)},insertStyles=function(t,n,a){registerStyles(t,n,a);var s=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var u=n;do t.insert(n===u?"."+s:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function murmur2(e){for(var t=0,n,a=0,s=e.length;s>=4;++a,s-=4)n=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(t){return t.charCodeAt(1)===45},isProcessableValue=function(t){return t!=null&&typeof t!="boolean"},processStyleName=memoize$1(function(e){return isCustomProperty(e)?e:e.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(animationRegex,function(a,s,u){return cursor={name:s,styles:u,next:cursor},s})}return unitlessKeys[t]!==1&&!isCustomProperty(t)&&typeof n=="number"&&n!==0?n+"px":n};function handleInterpolation(e,t,n){if(n==null)return"";var a=n;if(a.__emotion_styles!==void 0)return a;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return cursor={name:s.name,styles:s.styles,next:cursor},s.name;var u=n;if(u.styles!==void 0){var c=u.next;if(c!==void 0)for(;c!==void 0;)cursor={name:c.name,styles:c.styles,next:cursor},c=c.next;var h=u.styles+";";return h}return createStringFromObject(e,t,n)}case"function":{if(e!==void 0){var f=cursor,m=n(e);return cursor=f,handleInterpolation(e,t,m)}break}}var _=n;if(t==null)return _;var C=t[_];return C!==void 0?C:_}function createStringFromObject(e,t,n){var a="";if(Array.isArray(n))for(var s=0;s<n.length;s++)a+=handleInterpolation(e,t,n[s])+";";else for(var u in n){var c=n[u];if(typeof c!="object"){var h=c;t!=null&&t[h]!==void 0?a+=u+"{"+t[h]+"}":isProcessableValue(h)&&(a+=processStyleName(u)+":"+processStyleValue(u,h)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&(t==null||t[c[0]]===void 0))for(var f=0;f<c.length;f++)isProcessableValue(c[f])&&(a+=processStyleName(u)+":"+processStyleValue(u,c[f])+";");else{var m=handleInterpolation(e,t,c);switch(u){case"animation":case"animationName":{a+=processStyleName(u)+":"+m+";";break}default:a+=u+"{"+m+"}"}}}return a}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,s="";cursor=void 0;var u=e[0];if(u==null||u.raw===void 0)a=!1,s+=handleInterpolation(n,t,u);else{var c=u;s+=c[0]}for(var h=1;h<e.length;h++)if(s+=handleInterpolation(n,t,e[h]),a){var f=u;s+=f[h]}labelPattern.lastIndex=0;for(var m="",_;(_=labelPattern.exec(s))!==null;)m+="-"+_[1];var C=murmur2(s)+m;return{name:C,styles:s,next:cursor}}var syncFallback=function(t){return t()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(t){return reactExports.forwardRef(function(n,a){var s=reactExports.useContext(EmotionCacheContext);return t(n,s,a)})},ThemeContext$1=reactExports.createContext({}),hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(t,n){var a={};for(var s in n)hasOwn.call(n,s)&&(a[s]=n[s]);return a[typePropName]=t,a},Insertion$1=function(t){var n=t.cache,a=t.serialized,s=t.isStringTag;return registerStyles(n,a,s),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(n,a,s)}),null},Emotion=withEmotionCache(function(e,t,n){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var s=e[typePropName],u=[a],c="";typeof e.className=="string"?c=getRegisteredStyles(t.registered,u,e.className):e.className!=null&&(c=e.className+" ");var h=serializeStyles(u,void 0,reactExports.useContext(ThemeContext$1));c+=t.key+"-"+h.name;var f={};for(var m in e)hasOwn.call(e,m)&&m!=="css"&&m!==typePropName&&(f[m]=e[m]);return f.className=c,n&&(f.ref=n),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:t,serialized:h,isStringTag:typeof s=="string"}),reactExports.createElement(s,f))}),Emotion$1=Emotion,jsx=function(t,n){var a=arguments;if(n==null||!hasOwn.call(n,"css"))return reactExports.createElement.apply(void 0,a);var s=a.length,u=new Array(s);u[0]=Emotion$1,u[1]=createEmotionProps(t,n);for(var c=2;c<s;c++)u[c]=a[c];return reactExports.createElement.apply(null,u)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(e,t){var n=e.styles,a=serializeStyles([n],void 0,reactExports.useContext(ThemeContext$1)),s=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var u=t.key+"-global",c=new t.sheet.constructor({key:u,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),h=!1,f=document.querySelector('style[data-emotion="'+u+" "+a.name+'"]');return t.sheet.tags.length&&(c.before=t.sheet.tags[0]),f!==null&&(h=!0,f.setAttribute("data-emotion",u),c.hydrate([f])),s.current=[c,h],function(){c.flush()}},[t]),useInsertionEffectWithLayoutFallback(function(){var u=s.current,c=u[0],h=u[1];if(h){u[1]=!1;return}if(a.next!==void 0&&insertStyles(t,a.next,!0),c.tags.length){var f=c.tags[c.tags.length-1].nextElementSibling;c.before=f,c.flush()}t.insert("",a,c,!1)},[t,a.name]),null});function css(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return serializeStyles(t)}function keyframes(){var e=css.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize$1(function(e){return reactPropsRegex.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(t){return t!=="theme"},getDefaultShouldForwardProp=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(t,n,a){var s;if(n){var u=n.shouldForwardProp;s=t.__emotion_forwardProp&&u?function(c){return t.__emotion_forwardProp(c)&&u(c)}:u}return typeof s!="function"&&a&&(s=t.__emotion_forwardProp),s},Insertion=function(t){var n=t.cache,a=t.serialized,s=t.isStringTag;return registerStyles(n,a,s),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(n,a,s)}),null},createStyled$1=function e(t,n){var a=t.__emotion_real===t,s=a&&t.__emotion_base||t,u,c;n!==void 0&&(u=n.label,c=n.target);var h=composeShouldForwardProps(t,n,a),f=h||getDefaultShouldForwardProp(s),m=!f("as");return function(){var _=arguments,C=a&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(u!==void 0&&C.push("label:"+u+";"),_[0]==null||_[0].raw===void 0)C.push.apply(C,_);else{var b=_[0];C.push(b[0]);for(var T=_.length,R=1;R<T;R++)C.push(_[R],b[R])}var A=withEmotionCache(function(I,P,N){var S=m&&I.as||s,k="",D=[],M=I;if(I.theme==null){M={};for(var j in I)M[j]=I[j];M.theme=reactExports.useContext(ThemeContext$1)}typeof I.className=="string"?k=getRegisteredStyles(P.registered,D,I.className):I.className!=null&&(k=I.className+" ");var H=serializeStyles(C.concat(D),P.registered,M);k+=P.key+"-"+H.name,c!==void 0&&(k+=" "+c);var X=m&&h===void 0?getDefaultShouldForwardProp(S):f,K={};for(var re in I)m&&re==="as"||X(re)&&(K[re]=I[re]);return K.className=k,N&&(K.ref=N),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:P,serialized:H,isStringTag:typeof S=="string"}),reactExports.createElement(S,K))});return A.displayName=u!==void 0?u:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",A.defaultProps=t.defaultProps,A.__emotion_real=A,A.__emotion_base=s,A.__emotion_styles=C,A.__emotion_forwardProp=h,Object.defineProperty(A,"toString",{value:function(){return"."+c}}),A.withComponent=function(I,P){var N=e(I,_extends({},n,P,{shouldForwardProp:composeShouldForwardProps(A,P,!0)}));return N.apply(void 0,C)},A}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$3=createStyled$1.bind(null);tags.forEach(function(e){styled$3[e]=styled$3(e)});function isEmpty$2(e){return e==null||Object.keys(e).length===0}function GlobalStyles$2(e){const{styles:t,defaultTheme:n={}}=e,a=typeof t=="function"?s=>t(isEmpty$2(s)?n:s):t;return jsxRuntimeExports.jsx(Global,{styles:a})}function styled$2(e,t){return styled$3(e,t)}function internal_mutateStyles(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const wrapper=[];function internal_serializeStyles(e){return wrapper[0]=e,serializeStyles(wrapper)}var reactIs={exports:{}},reactIs_production={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),T=Symbol.for("react.client.reference");function R(A){if(typeof A=="object"&&A!==null){var I=A.$$typeof;switch(I){case e:switch(A=A.type,A){case n:case s:case a:case f:case m:case b:return A;default:switch(A=A&&A.$$typeof,A){case c:case h:case C:case _:return A;case u:return A;default:return I}}case t:return I}}}return reactIs_production.ContextConsumer=u,reactIs_production.ContextProvider=c,reactIs_production.Element=e,reactIs_production.ForwardRef=h,reactIs_production.Fragment=n,reactIs_production.Lazy=C,reactIs_production.Memo=_,reactIs_production.Portal=t,reactIs_production.Profiler=s,reactIs_production.StrictMode=a,reactIs_production.Suspense=f,reactIs_production.SuspenseList=m,reactIs_production.isContextConsumer=function(A){return R(A)===u},reactIs_production.isContextProvider=function(A){return R(A)===c},reactIs_production.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},reactIs_production.isForwardRef=function(A){return R(A)===h},reactIs_production.isFragment=function(A){return R(A)===n},reactIs_production.isLazy=function(A){return R(A)===C},reactIs_production.isMemo=function(A){return R(A)===_},reactIs_production.isPortal=function(A){return R(A)===t},reactIs_production.isProfiler=function(A){return R(A)===s},reactIs_production.isStrictMode=function(A){return R(A)===a},reactIs_production.isSuspense=function(A){return R(A)===f},reactIs_production.isSuspenseList=function(A){return R(A)===m},reactIs_production.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===s||A===a||A===f||A===m||typeof A=="object"&&A!==null&&(A.$$typeof===C||A.$$typeof===_||A.$$typeof===c||A.$$typeof===u||A.$$typeof===h||A.$$typeof===T||A.getModuleId!==void 0)},reactIs_production.typeOf=R,reactIs_production}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production()),reactIs.exports}var reactIsExports=requireReactIs();function isPlainObject(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function deepClone(e){if(reactExports.isValidElement(e)||reactIsExports.isValidElementType(e)||!isPlainObject(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=deepClone(e[n])}),t}function deepmerge(e,t,n={clone:!0}){const a=n.clone?{...e}:e;return isPlainObject(e)&&isPlainObject(t)&&Object.keys(t).forEach(s=>{reactExports.isValidElement(t[s])||reactIsExports.isValidElementType(t[s])?a[s]=t[s]:isPlainObject(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&isPlainObject(e[s])?a[s]=deepmerge(e[s],t[s],n):n.clone?a[s]=isPlainObject(t[s])?deepClone(t[s]):t[s]:a[s]=t[s]}),a}const sortBreakpointsValues=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,a)=>n.val-a.val),t.reduce((n,a)=>({...n,[a.key]:a.val}),{})};function createBreakpoints(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:a=5,...s}=e,u=sortBreakpointsValues(t),c=Object.keys(u);function h(b){return`@media (min-width:${typeof t[b]=="number"?t[b]:b}${n})`}function f(b){return`@media (max-width:${(typeof t[b]=="number"?t[b]:b)-a/100}${n})`}function m(b,T){const R=c.indexOf(T);return`@media (min-width:${typeof t[b]=="number"?t[b]:b}${n}) and (max-width:${(R!==-1&&typeof t[c[R]]=="number"?t[c[R]]:T)-a/100}${n})`}function _(b){return c.indexOf(b)+1<c.length?m(b,c[c.indexOf(b)+1]):h(b)}function C(b){const T=c.indexOf(b);return T===0?h(c[1]):T===c.length-1?f(c[T]):m(b,c[c.indexOf(b)+1]).replace("@media","@media not all and")}return{keys:c,values:u,up:h,down:f,between:m,only:_,not:C,unit:n,...s}}function sortContainerQueries(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(a=>a.startsWith("@container")).sort((a,s)=>{const u=/min-width:\s*([0-9.]+)/;return+(a.match(u)?.[1]||0)-+(s.match(u)?.[1]||0)});return n.length?n.reduce((a,s)=>{const u=t[s];return delete a[s],a[s]=u,a},{...t}):t}function isCqShorthand(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function getContainerQuery(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,a,s]=n,u=Number.isNaN(+a)?a||0:+a;return e.containerQueries(s).up(u)}function cssContainerQueries(e){const t=(u,c)=>u.replace("@media",c?`@container ${c}`:"@container");function n(u,c){u.up=(...h)=>t(e.breakpoints.up(...h),c),u.down=(...h)=>t(e.breakpoints.down(...h),c),u.between=(...h)=>t(e.breakpoints.between(...h),c),u.only=(...h)=>t(e.breakpoints.only(...h),c),u.not=(...h)=>{const f=t(e.breakpoints.not(...h),c);return f.includes("not all and")?f.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):f}}const a={},s=u=>(n(a,u),a);return n(s),{...e,containerQueries:s}}const shape={borderRadius:4};function merge(e,t){return t?deepmerge(e,t,{clone:!1}):e}const values$1={xs:0,sm:600,md:900,lg:1200,xl:1536},defaultBreakpoints={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${values$1[e]}px)`},defaultContainerQueries={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:values$1[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function handleBreakpoints(e,t,n){const a=e.theme||{};if(Array.isArray(t)){const u=a.breakpoints||defaultBreakpoints;return t.reduce((c,h,f)=>(c[u.up(u.keys[f])]=n(t[f]),c),{})}if(typeof t=="object"){const u=a.breakpoints||defaultBreakpoints;return Object.keys(t).reduce((c,h)=>{if(isCqShorthand(u.keys,h)){const f=getContainerQuery(a.containerQueries?a:defaultContainerQueries,h);f&&(c[f]=n(t[h],h))}else if(Object.keys(u.values||values$1).includes(h)){const f=u.up(h);c[f]=n(t[h],h)}else{const f=h;c[f]=t[f]}return c},{})}return n(t)}function createEmptyBreakpointObject(e={}){return e.keys?.reduce((n,a)=>{const s=e.up(a);return n[s]={},n},{})||{}}function removeUnusedBreakpoints(e,t){return e.reduce((n,a)=>{const s=n[a];return(!s||Object.keys(s).length===0)&&delete n[a],n},t)}function mergeBreakpointsInOrder(e,...t){const n=createEmptyBreakpointObject(e),a=[n,...t].reduce((s,u)=>deepmerge(s,u),{});return removeUnusedBreakpoints(Object.keys(n),a)}function computeBreakpointsBase(e,t){if(typeof e!="object")return{};const n={},a=Object.keys(t);return Array.isArray(e)?a.forEach((s,u)=>{u<e.length&&(n[s]=!0)}):a.forEach(s=>{e[s]!=null&&(n[s]=!0)}),n}function resolveBreakpointValues({values:e,breakpoints:t,base:n}){const a=n||computeBreakpointsBase(e,t),s=Object.keys(a);if(s.length===0)return e;let u;return s.reduce((c,h,f)=>(Array.isArray(e)?(c[h]=e[f]!=null?e[f]:e[u],u=f):typeof e=="object"?(c[h]=e[h]!=null?e[h]:e[u],u=h):c[h]=e,c),{})}function capitalize(e){if(typeof e!="string")throw new Error(formatMuiErrorMessage(7));return e.charAt(0).toUpperCase()+e.slice(1)}function getPath(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const a=`vars.${t}`.split(".").reduce((s,u)=>s&&s[u]?s[u]:null,e);if(a!=null)return a}return t.split(".").reduce((a,s)=>a&&a[s]!=null?a[s]:null,e)}function getStyleValue$1(e,t,n,a=n){let s;return typeof e=="function"?s=e(n):Array.isArray(e)?s=e[n]||a:s=getPath(e,n)||a,t&&(s=t(s,a,e)),s}function style$2(e){const{prop:t,cssProperty:n=e.prop,themeKey:a,transform:s}=e,u=c=>{if(c[t]==null)return null;const h=c[t],f=c.theme,m=getPath(f,a)||{};return handleBreakpoints(c,h,C=>{let b=getStyleValue$1(m,s,C);return C===b&&typeof C=="string"&&(b=getStyleValue$1(m,s,`${t}${C==="default"?"":capitalize(C)}`,C)),n===!1?b:{[n]:b}})};return u.propTypes={},u.filterProps=[t],u}function memoize(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const properties$1={m:"margin",p:"padding"},directions={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},aliases={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},getCssProperties=memoize(e=>{if(e.length>2)if(aliases[e])e=aliases[e];else return[e];const[t,n]=e.split(""),a=properties$1[t],s=directions[n]||"";return Array.isArray(s)?s.map(u=>a+u):[a+s]}),marginKeys=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],paddingKeys=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...marginKeys,...paddingKeys];function createUnaryUnit(e,t,n,a){const s=getPath(e,t,!0)??n;return typeof s=="number"||typeof s=="string"?u=>typeof u=="string"?u:typeof s=="string"?s.startsWith("var(")&&u===0?0:s.startsWith("var(")&&u===1?s:`calc(${u} * ${s})`:s*u:Array.isArray(s)?u=>{if(typeof u=="string")return u;const c=Math.abs(u),h=s[c];return u>=0?h:typeof h=="number"?-h:typeof h=="string"&&h.startsWith("var(")?`calc(-1 * ${h})`:`-${h}`}:typeof s=="function"?s:()=>{}}function createUnarySpacing(e){return createUnaryUnit(e,"spacing",8)}function getValue(e,t){return typeof t=="string"||t==null?t:e(t)}function getStyleFromPropValue(e,t){return n=>e.reduce((a,s)=>(a[s]=getValue(t,n),a),{})}function resolveCssProperty(e,t,n,a){if(!t.includes(n))return null;const s=getCssProperties(n),u=getStyleFromPropValue(s,a),c=e[n];return handleBreakpoints(e,c,u)}function style$1(e,t){const n=createUnarySpacing(e.theme);return Object.keys(e).map(a=>resolveCssProperty(e,t,a,n)).reduce(merge,{})}function margin(e){return style$1(e,marginKeys)}margin.propTypes={};margin.filterProps=marginKeys;function padding(e){return style$1(e,paddingKeys)}padding.propTypes={};padding.filterProps=paddingKeys;function createSpacing(e=8,t=createUnarySpacing({spacing:e})){if(e.mui)return e;const n=(...a)=>(a.length===0?[1]:a).map(u=>{const c=t(u);return typeof c=="number"?`${c}px`:c}).join(" ");return n.mui=!0,n}function compose(...e){const t=e.reduce((a,s)=>(s.filterProps.forEach(u=>{a[u]=s}),a),{}),n=a=>Object.keys(a).reduce((s,u)=>t[u]?merge(s,t[u](a)):s,{});return n.propTypes={},n.filterProps=e.reduce((a,s)=>a.concat(s.filterProps),[]),n}function borderTransform(e){return typeof e!="number"?e:`${e}px solid`}function createBorderStyle(e,t){return style$2({prop:e,themeKey:"borders",transform:t})}const border=createBorderStyle("border",borderTransform),borderTop=createBorderStyle("borderTop",borderTransform),borderRight=createBorderStyle("borderRight",borderTransform),borderBottom=createBorderStyle("borderBottom",borderTransform),borderLeft=createBorderStyle("borderLeft",borderTransform),borderColor=createBorderStyle("borderColor"),borderTopColor=createBorderStyle("borderTopColor"),borderRightColor=createBorderStyle("borderRightColor"),borderBottomColor=createBorderStyle("borderBottomColor"),borderLeftColor=createBorderStyle("borderLeftColor"),outline=createBorderStyle("outline",borderTransform),outlineColor=createBorderStyle("outlineColor"),borderRadius=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=createUnaryUnit(e.theme,"shape.borderRadius",4),n=a=>({borderRadius:getValue(t,a)});return handleBreakpoints(e,e.borderRadius,n)}return null};borderRadius.propTypes={};borderRadius.filterProps=["borderRadius"];compose(border,borderTop,borderRight,borderBottom,borderLeft,borderColor,borderTopColor,borderRightColor,borderBottomColor,borderLeftColor,borderRadius,outline,outlineColor);const gap=e=>{if(e.gap!==void 0&&e.gap!==null){const t=createUnaryUnit(e.theme,"spacing",8),n=a=>({gap:getValue(t,a)});return handleBreakpoints(e,e.gap,n)}return null};gap.propTypes={};gap.filterProps=["gap"];const columnGap=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=createUnaryUnit(e.theme,"spacing",8),n=a=>({columnGap:getValue(t,a)});return handleBreakpoints(e,e.columnGap,n)}return null};columnGap.propTypes={};columnGap.filterProps=["columnGap"];const rowGap=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=createUnaryUnit(e.theme,"spacing",8),n=a=>({rowGap:getValue(t,a)});return handleBreakpoints(e,e.rowGap,n)}return null};rowGap.propTypes={};rowGap.filterProps=["rowGap"];const gridColumn=style$2({prop:"gridColumn"}),gridRow=style$2({prop:"gridRow"}),gridAutoFlow=style$2({prop:"gridAutoFlow"}),gridAutoColumns=style$2({prop:"gridAutoColumns"}),gridAutoRows=style$2({prop:"gridAutoRows"}),gridTemplateColumns=style$2({prop:"gridTemplateColumns"}),gridTemplateRows=style$2({prop:"gridTemplateRows"}),gridTemplateAreas=style$2({prop:"gridTemplateAreas"}),gridArea=style$2({prop:"gridArea"});compose(gap,columnGap,rowGap,gridColumn,gridRow,gridAutoFlow,gridAutoColumns,gridAutoRows,gridTemplateColumns,gridTemplateRows,gridTemplateAreas,gridArea);function paletteTransform(e,t){return t==="grey"?t:e}const color=style$2({prop:"color",themeKey:"palette",transform:paletteTransform}),bgcolor=style$2({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:paletteTransform}),backgroundColor=style$2({prop:"backgroundColor",themeKey:"palette",transform:paletteTransform});compose(color,bgcolor,backgroundColor);function sizingTransform(e){return e<=1&&e!==0?`${e*100}%`:e}const width=style$2({prop:"width",transform:sizingTransform}),maxWidth=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{const a=e.theme?.breakpoints?.values?.[n]||values$1[n];return a?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:sizingTransform(n)}};return handleBreakpoints(e,e.maxWidth,t)}return null};maxWidth.filterProps=["maxWidth"];const minWidth=style$2({prop:"minWidth",transform:sizingTransform}),height=style$2({prop:"height",transform:sizingTransform}),maxHeight=style$2({prop:"maxHeight",transform:sizingTransform}),minHeight=style$2({prop:"minHeight",transform:sizingTransform});style$2({prop:"size",cssProperty:"width",transform:sizingTransform});style$2({prop:"size",cssProperty:"height",transform:sizingTransform});const boxSizing=style$2({prop:"boxSizing"});compose(width,maxWidth,minWidth,height,maxHeight,minHeight,boxSizing);const defaultSxConfig={border:{themeKey:"borders",transform:borderTransform},borderTop:{themeKey:"borders",transform:borderTransform},borderRight:{themeKey:"borders",transform:borderTransform},borderBottom:{themeKey:"borders",transform:borderTransform},borderLeft:{themeKey:"borders",transform:borderTransform},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:borderTransform},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:borderRadius},color:{themeKey:"palette",transform:paletteTransform},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:paletteTransform},backgroundColor:{themeKey:"palette",transform:paletteTransform},p:{style:padding},pt:{style:padding},pr:{style:padding},pb:{style:padding},pl:{style:padding},px:{style:padding},py:{style:padding},padding:{style:padding},paddingTop:{style:padding},paddingRight:{style:padding},paddingBottom:{style:padding},paddingLeft:{style:padding},paddingX:{style:padding},paddingY:{style:padding},paddingInline:{style:padding},paddingInlineStart:{style:padding},paddingInlineEnd:{style:padding},paddingBlock:{style:padding},paddingBlockStart:{style:padding},paddingBlockEnd:{style:padding},m:{style:margin},mt:{style:margin},mr:{style:margin},mb:{style:margin},ml:{style:margin},mx:{style:margin},my:{style:margin},margin:{style:margin},marginTop:{style:margin},marginRight:{style:margin},marginBottom:{style:margin},marginLeft:{style:margin},marginX:{style:margin},marginY:{style:margin},marginInline:{style:margin},marginInlineStart:{style:margin},marginInlineEnd:{style:margin},marginBlock:{style:margin},marginBlockStart:{style:margin},marginBlockEnd:{style:margin},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:gap},rowGap:{style:rowGap},columnGap:{style:columnGap},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:sizingTransform},maxWidth:{style:maxWidth},minWidth:{transform:sizingTransform},height:{transform:sizingTransform},maxHeight:{transform:sizingTransform},minHeight:{transform:sizingTransform},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function objectsHaveSameKeys(...e){const t=e.reduce((a,s)=>a.concat(Object.keys(s)),[]),n=new Set(t);return e.every(a=>n.size===Object.keys(a).length)}function callIfFn(e,t){return typeof e=="function"?e(t):e}function unstable_createStyleFunctionSx(){function e(n,a,s,u){const c={[n]:a,theme:s},h=u[n];if(!h)return{[n]:a};const{cssProperty:f=n,themeKey:m,transform:_,style:C}=h;if(a==null)return null;if(m==="typography"&&a==="inherit")return{[n]:a};const b=getPath(s,m)||{};return C?C(c):handleBreakpoints(c,a,R=>{let A=getStyleValue$1(b,_,R);return R===A&&typeof R=="string"&&(A=getStyleValue$1(b,_,`${n}${R==="default"?"":capitalize(R)}`,R)),f===!1?A:{[f]:A}})}function t(n){const{sx:a,theme:s={},nested:u}=n||{};if(!a)return null;const c=s.unstable_sxConfig??defaultSxConfig;function h(f){let m=f;if(typeof f=="function")m=f(s);else if(typeof f!="object")return f;if(!m)return null;const _=createEmptyBreakpointObject(s.breakpoints),C=Object.keys(_);let b=_;return Object.keys(m).forEach(T=>{const R=callIfFn(m[T],s);if(R!=null)if(typeof R=="object")if(c[T])b=merge(b,e(T,R,s,c));else{const A=handleBreakpoints({theme:s},R,I=>({[T]:I}));objectsHaveSameKeys(A,R)?b[T]=t({sx:R,theme:s,nested:!0}):b=merge(b,A)}else b=merge(b,e(T,R,s,c))}),!u&&s.modularCssLayers?{"@layer sx":sortContainerQueries(s,removeUnusedBreakpoints(C,b))}:sortContainerQueries(s,removeUnusedBreakpoints(C,b))}return Array.isArray(a)?a.map(h):h(a)}return t}const styleFunctionSx=unstable_createStyleFunctionSx();styleFunctionSx.filterProps=["sx"];function applyStyles(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||typeof n.getColorSchemeSelector!="function")return{};let a=n.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return n.palette.mode===e?t:{}}function createTheme$1(e={},...t){const{breakpoints:n={},palette:a={},spacing:s,shape:u={},...c}=e,h=createBreakpoints(n),f=createSpacing(s);let m=deepmerge({breakpoints:h,direction:"ltr",components:{},palette:{mode:"light",...a},spacing:f,shape:{...shape,...u}},c);return m=cssContainerQueries(m),m.applyStyles=applyStyles,m=t.reduce((_,C)=>deepmerge(_,C),m),m.unstable_sxConfig={...defaultSxConfig,...c?.unstable_sxConfig},m.unstable_sx=function(C){return styleFunctionSx({sx:C,theme:this})},m}function isObjectEmpty$2(e){return Object.keys(e).length===0}function useTheme$3(e=null){const t=reactExports.useContext(ThemeContext$1);return!t||isObjectEmpty$2(t)?e:t}const systemDefaultTheme$1=createTheme$1();function useTheme$2(e=systemDefaultTheme$1){return useTheme$3(e)}function wrapGlobalLayer(e){const t=internal_serializeStyles(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function GlobalStyles$1({styles:e,themeId:t,defaultTheme:n={}}){const a=useTheme$2(n),s=t&&a[t]||a;let u=typeof e=="function"?e(s):e;return s.modularCssLayers&&(Array.isArray(u)?u=u.map(c=>wrapGlobalLayer(typeof c=="function"?c(s):c)):u=wrapGlobalLayer(u)),jsxRuntimeExports.jsx(GlobalStyles$2,{styles:u})}const splitProps=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??defaultSxConfig;return Object.keys(e).forEach(a=>{n[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function extendSxProp$1(e){const{sx:t,...n}=e,{systemProps:a,otherProps:s}=splitProps(n);let u;return Array.isArray(t)?u=[a,...t]:typeof t=="function"?u=(...c)=>{const h=t(...c);return isPlainObject(h)?{...a,...h}:a}:u={...a,...t},{...s,sx:u}}const defaultGenerator=e=>e,createClassNameGenerator=()=>{let e=defaultGenerator;return{configure(t){e=t},generate(t){return e(t)},reset(){e=defaultGenerator}}},ClassNameGenerator=createClassNameGenerator();function r(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function clsx(){for(var e,t,n=0,a="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}function createBox(e={}){const{themeId:t,defaultTheme:n,defaultClassName:a="MuiBox-root",generateClassName:s}=e,u=styled$2("div",{shouldForwardProp:h=>h!=="theme"&&h!=="sx"&&h!=="as"})(styleFunctionSx);return reactExports.forwardRef(function(f,m){const _=useTheme$2(n),{className:C,component:b="div",...T}=extendSxProp$1(f);return jsxRuntimeExports.jsx(u,{as:b,ref:m,className:clsx(C,s?s(a):a),theme:t&&_[t]||_,...T})})}const globalStateClasses={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function generateUtilityClass(e,t,n="Mui"){const a=globalStateClasses[t];return a?`${n}-${a}`:`${ClassNameGenerator.generate(e)}-${t}`}function generateUtilityClasses(e,t,n="Mui"){const a={};return t.forEach(s=>{a[s]=generateUtilityClass(e,s,n)}),a}function preprocessStyles(e){const{variants:t,...n}=e,a={variants:t,style:internal_serializeStyles(n),isProcessed:!0};return a.style===n||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=internal_serializeStyles(s.style))}),a}const systemDefaultTheme=createTheme$1();function shouldForwardProp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function shallowLayer(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function defaultOverridesResolver(e){return e?(t,n)=>n[e]:null}function attachTheme(e,t,n){e.theme=isObjectEmpty$1(e.theme)?n:e.theme[t]||e.theme}function processStyle(e,t,n){const a=typeof t=="function"?t(e):t;if(Array.isArray(a))return a.flatMap(s=>processStyle(e,s,n));if(Array.isArray(a?.variants)){let s;if(a.isProcessed)s=n?shallowLayer(a.style,n):a.style;else{const{variants:u,...c}=a;s=n?shallowLayer(internal_serializeStyles(c),n):c}return processStyleVariants(e,a.variants,[s],n)}return a?.isProcessed?n?shallowLayer(internal_serializeStyles(a.style),n):a.style:n?shallowLayer(internal_serializeStyles(a),n):a}function processStyleVariants(e,t,n=[],a=void 0){let s;e:for(let u=0;u<t.length;u+=1){const c=t[u];if(typeof c.props=="function"){if(s??={...e,...e.ownerState,ownerState:e.ownerState},!c.props(s))continue}else for(const h in c.props)if(e[h]!==c.props[h]&&e.ownerState?.[h]!==c.props[h])continue e;typeof c.style=="function"?(s??={...e,...e.ownerState,ownerState:e.ownerState},n.push(a?shallowLayer(internal_serializeStyles(c.style(s)),a):c.style(s))):n.push(a?shallowLayer(internal_serializeStyles(c.style),a):c.style)}return n}function createStyled(e={}){const{themeId:t,defaultTheme:n=systemDefaultTheme,rootShouldForwardProp:a=shouldForwardProp,slotShouldForwardProp:s=shouldForwardProp}=e;function u(h){attachTheme(h,t,n)}return(h,f={})=>{internal_mutateStyles(h,M=>M.filter(j=>j!==styleFunctionSx));const{name:m,slot:_,skipVariantsResolver:C,skipSx:b,overridesResolver:T=defaultOverridesResolver(lowercaseFirstLetter(_)),...R}=f,A=m&&m.startsWith("Mui")||_?"components":"custom",I=C!==void 0?C:_&&_!=="Root"&&_!=="root"||!1,P=b||!1;let N=shouldForwardProp;_==="Root"||_==="root"?N=a:_?N=s:isStringTag(h)&&(N=void 0);const S=styled$2(h,{shouldForwardProp:N,label:generateStyledLabel(),...R}),k=M=>{if(M.__emotion_real===M)return M;if(typeof M=="function")return function(H){return processStyle(H,M,H.theme.modularCssLayers?A:void 0)};if(isPlainObject(M)){const j=preprocessStyles(M);return function(X){return j.variants?processStyle(X,j,X.theme.modularCssLayers?A:void 0):X.theme.modularCssLayers?shallowLayer(j.style,A):j.style}}return M},D=(...M)=>{const j=[],H=M.map(k),X=[];if(j.push(u),m&&T&&X.push(function(J){const $=J.theme.components?.[m]?.styleOverrides;if(!$)return null;const L={};for(const W in $)L[W]=processStyle(J,$[W],J.theme.modularCssLayers?"theme":void 0);return T(J,L)}),m&&!I&&X.push(function(J){const $=J.theme?.components?.[m]?.variants;return $?processStyleVariants(J,$,[],J.theme.modularCssLayers?"theme":void 0):null}),P||X.push(styleFunctionSx),Array.isArray(H[0])){const F=H.shift(),J=new Array(j.length).fill(""),z=new Array(X.length).fill("");let $;$=[...J,...F,...z],$.raw=[...J,...F.raw,...z],j.unshift($)}const K=[...j,...H,...X],re=S(...K);return h.muiName&&(re.muiName=h.muiName),re};return S.withConfig&&(D.withConfig=S.withConfig),D}}function generateStyledLabel(e,t){return void 0}function isObjectEmpty$1(e){for(const t in e)return!1;return!0}function isStringTag(e){return typeof e=="string"&&e.charCodeAt(0)>96}function lowercaseFirstLetter(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const styled$1=createStyled();function resolveProps(e,t,n=!1){const a={...t};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const u=s;if(u==="components"||u==="slots")a[u]={...e[u],...a[u]};else if(u==="componentsProps"||u==="slotProps"){const c=e[u],h=t[u];if(!h)a[u]=c||{};else if(!c)a[u]=h;else{a[u]={...h};for(const f in c)if(Object.prototype.hasOwnProperty.call(c,f)){const m=f;a[u][m]=resolveProps(c[m],h[m],n)}}}else u==="className"&&n&&t.className?a.className=clsx(e?.className,t?.className):u==="style"&&n&&t.style?a.style={...e?.style,...t?.style}:a[u]===void 0&&(a[u]=e[u])}return a}function getThemeProps$1(e){const{theme:t,name:n,props:a}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?a:resolveProps(t.components[n].defaultProps,a)}function useThemeProps({props:e,name:t,defaultTheme:n,themeId:a}){let s=useTheme$2(n);return a&&(s=s[a]||s),getThemeProps$1({theme:s,name:t,props:e})}const useEnhancedEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function clamp$1(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function clampWrapper(e,t=0,n=1){return clamp$1(e,t,n)}function hexToRgb(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(a=>a+a)),n?`rgb${n.length===4?"a":""}(${n.map((a,s)=>s<3?parseInt(a,16):Math.round(parseInt(a,16)/255*1e3)/1e3).join(", ")})`:""}function decomposeColor(e){if(e.type)return e;if(e.charAt(0)==="#")return decomposeColor(hexToRgb(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(formatMuiErrorMessage(9,e));let a=e.substring(t+1,e.length-1),s;if(n==="color"){if(a=a.split(" "),s=a.shift(),a.length===4&&a[3].charAt(0)==="/"&&(a[3]=a[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(formatMuiErrorMessage(10,s))}else a=a.split(",");return a=a.map(u=>parseFloat(u)),{type:n,values:a,colorSpace:s}}const colorChannel=e=>{const t=decomposeColor(e);return t.values.slice(0,3).map((n,a)=>t.type.includes("hsl")&&a!==0?`${n}%`:n).join(" ")},private_safeColorChannel=(e,t)=>{try{return colorChannel(e)}catch{return e}};function recomposeColor(e){const{type:t,colorSpace:n}=e;let{values:a}=e;return t.includes("rgb")?a=a.map((s,u)=>u<3?parseInt(s,10):s):t.includes("hsl")&&(a[1]=`${a[1]}%`,a[2]=`${a[2]}%`),t.includes("color")?a=`${n} ${a.join(" ")}`:a=`${a.join(", ")}`,`${t}(${a})`}function hslToRgb(e){e=decomposeColor(e);const{values:t}=e,n=t[0],a=t[1]/100,s=t[2]/100,u=a*Math.min(s,1-s),c=(m,_=(m+n/30)%12)=>s-u*Math.max(Math.min(_-3,9-_,1),-1);let h="rgb";const f=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return e.type==="hsla"&&(h+="a",f.push(t[3])),recomposeColor({type:h,values:f})}function getLuminance(e){e=decomposeColor(e);let t=e.type==="hsl"||e.type==="hsla"?decomposeColor(hslToRgb(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function getContrastRatio(e,t){const n=getLuminance(e),a=getLuminance(t);return(Math.max(n,a)+.05)/(Math.min(n,a)+.05)}function alpha(e,t){return e=decomposeColor(e),t=clampWrapper(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,recomposeColor(e)}function private_safeAlpha(e,t,n){try{return alpha(e,t)}catch{return e}}function darken(e,t){if(e=decomposeColor(e),t=clampWrapper(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return recomposeColor(e)}function private_safeDarken(e,t,n){try{return darken(e,t)}catch{return e}}function lighten(e,t){if(e=decomposeColor(e),t=clampWrapper(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return recomposeColor(e)}function private_safeLighten(e,t,n){try{return lighten(e,t)}catch{return e}}function emphasize(e,t=.15){return getLuminance(e)>.5?darken(e,t):lighten(e,t)}function private_safeEmphasize(e,t,n){try{return emphasize(e,t)}catch{return e}}const ThemeContext=reactExports.createContext(null);function useTheme$1(){return reactExports.useContext(ThemeContext)}const hasSymbol=typeof Symbol=="function"&&Symbol.for,nested=hasSymbol?Symbol.for("mui.nested"):"__THEME_NESTED__";function mergeOuterLocalTheme(e,t){return typeof t=="function"?t(e):{...e,...t}}function ThemeProvider$2(e){const{children:t,theme:n}=e,a=useTheme$1(),s=reactExports.useMemo(()=>{const u=a===null?{...n}:mergeOuterLocalTheme(a,n);return u!=null&&(u[nested]=a!==null),u},[n,a]);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:s,children:t})}const RtlContext=reactExports.createContext();function RtlProvider({value:e,...t}){return jsxRuntimeExports.jsx(RtlContext.Provider,{value:e??!0,...t})}const useRtl=()=>reactExports.useContext(RtlContext)??!1,PropsContext=reactExports.createContext(void 0);function DefaultPropsProvider({value:e,children:t}){return jsxRuntimeExports.jsx(PropsContext.Provider,{value:e,children:t})}function getThemeProps(e){const{theme:t,name:n,props:a}=e;if(!t||!t.components||!t.components[n])return a;const s=t.components[n];return s.defaultProps?resolveProps(s.defaultProps,a,t.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?resolveProps(s,a,t.components.mergeClassNameAndStyle):a}function useDefaultProps$1({props:e,name:t}){const n=reactExports.useContext(PropsContext);return getThemeProps({props:e,name:t,theme:{components:n}})}let globalId=0;function useGlobalId(e){const[t,n]=reactExports.useState(e),a=e||t;return reactExports.useEffect(()=>{t==null&&(globalId+=1,n(`mui-${globalId}`))},[t]),a}const safeReact={...React$1},maybeReactUseId=safeReact.useId;function useId(e){if(maybeReactUseId!==void 0){const t=maybeReactUseId();return e??t}return useGlobalId(e)}function useLayerOrder(e){const t=useTheme$3(),n=useId()||"",{modularCssLayers:a}=e;let s="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!a||t!==null?s="":typeof a=="string"?s=a.replace(/mui(?!\.)/g,s):s=`@layer ${s};`,useEnhancedEffect(()=>{const u=document.querySelector("head");if(!u)return;const c=u.firstChild;if(s){if(c&&c.hasAttribute?.("data-mui-layer-order")&&c.getAttribute("data-mui-layer-order")===n)return;const h=document.createElement("style");h.setAttribute("data-mui-layer-order",n),h.textContent=s,u.prepend(h)}else u.querySelector(`style[data-mui-layer-order="${n}"]`)?.remove()},[s,n]),s?jsxRuntimeExports.jsx(GlobalStyles$1,{styles:s}):null}const EMPTY_THEME={};function useThemeScoping(e,t,n,a=!1){return reactExports.useMemo(()=>{const s=e&&t[e]||t;if(typeof n=="function"){const u=n(s),c=e?{...t,[e]:u}:u;return a?()=>c:c}return e?{...t,[e]:n}:{...t,...n}},[e,t,n,a])}function ThemeProvider$1(e){const{children:t,theme:n,themeId:a}=e,s=useTheme$3(EMPTY_THEME),u=useTheme$1()||EMPTY_THEME,c=useThemeScoping(a,s,n),h=useThemeScoping(a,u,n,!0),f=(a?c[a]:c).direction==="rtl",m=useLayerOrder(c);return jsxRuntimeExports.jsx(ThemeProvider$2,{theme:h,children:jsxRuntimeExports.jsx(ThemeContext$1.Provider,{value:c,children:jsxRuntimeExports.jsx(RtlProvider,{value:f,children:jsxRuntimeExports.jsxs(DefaultPropsProvider,{value:a?c[a].components:c.components,children:[m,t]})})})})}const arg={theme:void 0};function unstable_memoTheme(e){let t,n;return function(s){let u=t;return(u===void 0||s.theme!==n)&&(arg.theme=s.theme,u=preprocessStyles(e(arg)),t=u,n=s.theme),u}}const DEFAULT_MODE_STORAGE_KEY="mode",DEFAULT_COLOR_SCHEME_STORAGE_KEY="color-scheme",DEFAULT_ATTRIBUTE="data-color-scheme";function InitColorSchemeScript(e){const{defaultMode:t="system",defaultLightColorScheme:n="light",defaultDarkColorScheme:a="dark",modeStorageKey:s=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:u=DEFAULT_COLOR_SCHEME_STORAGE_KEY,attribute:c=DEFAULT_ATTRIBUTE,colorSchemeNode:h="document.documentElement",nonce:f}=e||{};let m="",_=c;if(c==="class"&&(_=".%s"),c==="data"&&(_="[data-%s]"),_.startsWith(".")){const b=_.substring(1);m+=`${h}.classList.remove('${b}'.replace('%s', light), '${b}'.replace('%s', dark));
      ${h}.classList.add('${b}'.replace('%s', colorScheme));`}const C=_.match(/\[([^\]]+)\]/);if(C){const[b,T]=C[1].split("=");T||(m+=`${h}.removeAttribute('${b}'.replace('%s', light));
      ${h}.removeAttribute('${b}'.replace('%s', dark));`),m+=`
      ${h}.setAttribute('${b}'.replace('%s', colorScheme), ${T?`${T}.replace('%s', colorScheme)`:'""'});`}else m+=`${h}.setAttribute('${_}', colorScheme);`;return jsxRuntimeExports.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${s}') || '${t}';
  const dark = localStorage.getItem('${u}-dark') || '${a}';
  const light = localStorage.getItem('${u}-light') || '${n}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${m}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function noop$4(){}const localStorageManager=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(n){if(typeof window>"u")return;if(!t)return n;let a;try{a=t.localStorage.getItem(e)}catch{}return a||n},set:n=>{if(t)try{t.localStorage.setItem(e,n)}catch{}},subscribe:n=>{if(!t)return noop$4;const a=s=>{const u=s.newValue;s.key===e&&n(u)};return t.addEventListener("storage",a),()=>{t.removeEventListener("storage",a)}}});function noop$3(){}function getSystemMode(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function processState(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function getColorScheme(e){return processState(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function useCurrentColorScheme(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:a,supportedColorSchemes:s=[],modeStorageKey:u=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:c=DEFAULT_COLOR_SCHEME_STORAGE_KEY,storageWindow:h=typeof window>"u"?void 0:window,storageManager:f=localStorageManager,noSsr:m=!1}=e,_=s.join(","),C=s.length>1,b=reactExports.useMemo(()=>f?.({key:u,storageWindow:h}),[f,u,h]),T=reactExports.useMemo(()=>f?.({key:`${c}-light`,storageWindow:h}),[f,c,h]),R=reactExports.useMemo(()=>f?.({key:`${c}-dark`,storageWindow:h}),[f,c,h]),[A,I]=reactExports.useState(()=>{const H=b?.get(t)||t,X=T?.get(n)||n,K=R?.get(a)||a;return{mode:H,systemMode:getSystemMode(H),lightColorScheme:X,darkColorScheme:K}}),[P,N]=reactExports.useState(m||!C);reactExports.useEffect(()=>{N(!0)},[]);const S=getColorScheme(A),k=reactExports.useCallback(H=>{I(X=>{if(H===X.mode)return X;const K=H??t;return b?.set(K),{...X,mode:K,systemMode:getSystemMode(K)}})},[b,t]),D=reactExports.useCallback(H=>{H?typeof H=="string"?H&&!_.includes(H)?console.error(`\`${H}\` does not exist in \`theme.colorSchemes\`.`):I(X=>{const K={...X};return processState(X,re=>{re==="light"&&(T?.set(H),K.lightColorScheme=H),re==="dark"&&(R?.set(H),K.darkColorScheme=H)}),K}):I(X=>{const K={...X},re=H.light===null?n:H.light,F=H.dark===null?a:H.dark;return re&&(_.includes(re)?(K.lightColorScheme=re,T?.set(re)):console.error(`\`${re}\` does not exist in \`theme.colorSchemes\`.`)),F&&(_.includes(F)?(K.darkColorScheme=F,R?.set(F)):console.error(`\`${F}\` does not exist in \`theme.colorSchemes\`.`)),K}):I(X=>(T?.set(n),R?.set(a),{...X,lightColorScheme:n,darkColorScheme:a}))},[_,T,R,n,a]),M=reactExports.useCallback(H=>{A.mode==="system"&&I(X=>{const K=H?.matches?"dark":"light";return X.systemMode===K?X:{...X,systemMode:K}})},[A.mode]),j=reactExports.useRef(M);return j.current=M,reactExports.useEffect(()=>{if(typeof window.matchMedia!="function"||!C)return;const H=(...K)=>j.current(...K),X=window.matchMedia("(prefers-color-scheme: dark)");return X.addListener(H),H(X),()=>{X.removeListener(H)}},[C]),reactExports.useEffect(()=>{if(C){const H=b?.subscribe(re=>{(!re||["light","dark","system"].includes(re))&&k(re||t)})||noop$3,X=T?.subscribe(re=>{(!re||_.match(re))&&D({light:re})})||noop$3,K=R?.subscribe(re=>{(!re||_.match(re))&&D({dark:re})})||noop$3;return()=>{H(),X(),K()}}},[D,k,_,t,h,C,b,T,R]),{...A,mode:P?A.mode:void 0,systemMode:P?A.systemMode:void 0,colorScheme:P?S:void 0,setMode:k,setColorScheme:D}}const DISABLE_CSS_TRANSITION="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function createCssVarsProvider(e){const{themeId:t,theme:n={},modeStorageKey:a=DEFAULT_MODE_STORAGE_KEY,colorSchemeStorageKey:s=DEFAULT_COLOR_SCHEME_STORAGE_KEY,disableTransitionOnChange:u=!1,defaultColorScheme:c,resolveTheme:h}=e,f={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},m=reactExports.createContext(void 0),_=()=>reactExports.useContext(m)||f,C={},b={};function T(P){const{children:N,theme:S,modeStorageKey:k=a,colorSchemeStorageKey:D=s,disableTransitionOnChange:M=u,storageManager:j,storageWindow:H=typeof window>"u"?void 0:window,documentNode:X=typeof document>"u"?void 0:document,colorSchemeNode:K=typeof document>"u"?void 0:document.documentElement,disableNestedContext:re=!1,disableStyleSheetGeneration:F=!1,defaultMode:J="system",forceThemeRerender:z=!1,noSsr:$}=P,L=reactExports.useRef(!1),W=useTheme$1(),U=reactExports.useContext(m),V=!!U&&!re,B=reactExports.useMemo(()=>S||(typeof n=="function"?n():n),[S]),Z=B[t],ne=Z||B,{colorSchemes:oe=C,components:ce=b,cssVarPrefix:xe}=ne,de=Object.keys(oe).filter(ot=>!!oe[ot]).join(","),G=reactExports.useMemo(()=>de.split(","),[de]),Y=typeof c=="string"?c:c.light,te=typeof c=="string"?c:c.dark,ee=oe[Y]&&oe[te]?J:oe[ne.defaultColorScheme]?.palette?.mode||ne.palette?.mode,{mode:se,setMode:ue,systemMode:be,lightColorScheme:ye,darkColorScheme:Re,colorScheme:Le,setColorScheme:Oe}=useCurrentColorScheme({supportedColorSchemes:G,defaultLightColorScheme:Y,defaultDarkColorScheme:te,modeStorageKey:k,colorSchemeStorageKey:D,defaultMode:ee,storageManager:j,storageWindow:H,noSsr:$});let Ue=se,qe=Le;V&&(Ue=U.mode,qe=U.colorScheme);let rt=qe||ne.defaultColorScheme;ne.vars&&!z&&(rt=ne.defaultColorScheme);const He=reactExports.useMemo(()=>{const ot=ne.generateThemeVars?.()||ne.vars,ze={...ne,components:ce,colorSchemes:oe,cssVarPrefix:xe,vars:ot};if(typeof ze.generateSpacing=="function"&&(ze.spacing=ze.generateSpacing()),rt){const et=oe[rt];et&&typeof et=="object"&&Object.keys(et).forEach(Qe=>{et[Qe]&&typeof et[Qe]=="object"?ze[Qe]={...ze[Qe],...et[Qe]}:ze[Qe]=et[Qe]})}return h?h(ze):ze},[ne,rt,ce,oe,xe]),Ae=ne.colorSchemeSelector;useEnhancedEffect(()=>{if(qe&&K&&Ae&&Ae!=="media"){const ot=Ae;let ze=Ae;if(ot==="class"&&(ze=".%s"),ot==="data"&&(ze="[data-%s]"),ot?.startsWith("data-")&&!ot.includes("%s")&&(ze=`[${ot}="%s"]`),ze.startsWith("."))K.classList.remove(...G.map(et=>ze.substring(1).replace("%s",et))),K.classList.add(ze.substring(1).replace("%s",qe));else{const et=ze.replace("%s",qe).match(/\[([^\]]+)\]/);if(et){const[Qe,Nt]=et[1].split("=");Nt||G.forEach(Xe=>{K.removeAttribute(Qe.replace(qe,Xe))}),K.setAttribute(Qe,Nt?Nt.replace(/"|'/g,""):"")}else K.setAttribute(ze,qe)}}},[qe,Ae,K,G]),reactExports.useEffect(()=>{let ot;if(M&&L.current&&X){const ze=X.createElement("style");ze.appendChild(X.createTextNode(DISABLE_CSS_TRANSITION)),X.head.appendChild(ze),window.getComputedStyle(X.body),ot=setTimeout(()=>{X.head.removeChild(ze)},1)}return()=>{clearTimeout(ot)}},[qe,M,X]),reactExports.useEffect(()=>(L.current=!0,()=>{L.current=!1}),[]);const xt=reactExports.useMemo(()=>({allColorSchemes:G,colorScheme:qe,darkColorScheme:Re,lightColorScheme:ye,mode:Ue,setColorScheme:Oe,setMode:ue,systemMode:be}),[G,qe,Re,ye,Ue,Oe,ue,be,He.colorSchemeSelector]);let lt=!0;(F||ne.cssVariables===!1||V&&W?.cssVarPrefix===xe)&&(lt=!1);const Gt=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ThemeProvider$1,{themeId:Z?t:void 0,theme:He,children:N}),lt&&jsxRuntimeExports.jsx(GlobalStyles$2,{styles:He.generateStyleSheets?.()||[]})]});return V?Gt:jsxRuntimeExports.jsx(m.Provider,{value:xt,children:Gt})}const R=typeof c=="string"?c:c.light,A=typeof c=="string"?c:c.dark;return{CssVarsProvider:T,useColorScheme:_,getInitColorSchemeScript:P=>InitColorSchemeScript({colorSchemeStorageKey:s,defaultLightColorScheme:R,defaultDarkColorScheme:A,modeStorageKey:a,...P})}}function createGetCssVar$1(e=""){function t(...a){if(!a.length)return"";const s=a[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...a.slice(1))})`:`, ${s}`}return(a,...s)=>`var(--${e?`${e}-`:""}${a}${t(...s)})`}const assignNestedKeys=(e,t,n,a=[])=>{let s=e;t.forEach((u,c)=>{c===t.length-1?Array.isArray(s)?s[Number(u)]=n:s&&typeof s=="object"&&(s[u]=n):s&&typeof s=="object"&&(s[u]||(s[u]=a.includes(u)?[]:{}),s=s[u])})},walkObjectDeep=(e,t,n)=>{function a(s,u=[],c=[]){Object.entries(s).forEach(([h,f])=>{(!n||n&&!n([...u,h]))&&f!=null&&(typeof f=="object"&&Object.keys(f).length>0?a(f,[...u,h],Array.isArray(f)?[...c,h]:c):t([...u,h],f,c))})}a(e)},getCssValue=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(a=>e.includes(a))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function cssVarsParser(e,t){const{prefix:n,shouldSkipGeneratingVar:a}=t||{},s={},u={},c={};return walkObjectDeep(e,(h,f,m)=>{if((typeof f=="string"||typeof f=="number")&&(!a||!a(h,f))){const _=`--${n?`${n}-`:""}${h.join("-")}`,C=getCssValue(h,f);Object.assign(s,{[_]:C}),assignNestedKeys(u,h,`var(${_})`,m),assignNestedKeys(c,h,`var(${_}, ${C})`,m)}},h=>h[0]==="vars"),{css:s,vars:u,varsWithDefaults:c}}function prepareCssVars(e,t={}){const{getSelector:n=P,disableCssColorScheme:a,colorSchemeSelector:s,enableContrastVars:u}=t,{colorSchemes:c={},components:h,defaultColorScheme:f="light",...m}=e,{vars:_,css:C,varsWithDefaults:b}=cssVarsParser(m,t);let T=b;const R={},{[f]:A,...I}=c;if(Object.entries(I||{}).forEach(([k,D])=>{const{vars:M,css:j,varsWithDefaults:H}=cssVarsParser(D,t);T=deepmerge(T,H),R[k]={css:j,vars:M}}),A){const{css:k,vars:D,varsWithDefaults:M}=cssVarsParser(A,t);T=deepmerge(T,M),R[f]={css:k,vars:D}}function P(k,D){let M=s;if(s==="class"&&(M=".%s"),s==="data"&&(M="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(M=`[${s}="%s"]`),k){if(M==="media")return e.defaultColorScheme===k?":root":{[`@media (prefers-color-scheme: ${c[k]?.palette?.mode||k})`]:{":root":D}};if(M)return e.defaultColorScheme===k?`:root, ${M.replace("%s",String(k))}`:M.replace("%s",String(k))}return":root"}return{vars:T,generateThemeVars:()=>{let k={..._};return Object.entries(R).forEach(([,{vars:D}])=>{k=deepmerge(k,D)}),k},generateStyleSheets:()=>{const k=[],D=e.defaultColorScheme||"light";function M(X,K){Object.keys(K).length&&k.push(typeof X=="string"?{[X]:{...K}}:X)}M(n(void 0,{...C}),C);const{[D]:j,...H}=R;if(j){const{css:X}=j,K=c[D]?.palette?.mode,re=!a&&K?{colorScheme:K,...X}:{...X};M(n(D,{...re}),re)}return Object.entries(H).forEach(([X,{css:K}])=>{const re=c[X]?.palette?.mode,F=!a&&re?{colorScheme:re,...K}:{...K};M(n(X,{...F}),F)}),u&&k.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),k}}}function createGetColorSchemeSelector(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}function composeClasses(e,t,n=void 0){const a={};for(const s in e){const u=e[s];let c="",h=!0;for(let f=0;f<u.length;f+=1){const m=u[f];m&&(c+=(h===!0?"":" ")+t(m),h=!1,n&&n[m]&&(c+=" "+n[m]))}a[s]=c}return a}function isMuiElement(e,t){return reactExports.isValidElement(e)&&t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)!==-1}const defaultTheme$2=createTheme$1(),defaultCreateStyledComponent=styled$1("div",{name:"MuiStack",slot:"Root"});function useThemePropsDefault(e){return useThemeProps({props:e,name:"MuiStack",defaultTheme:defaultTheme$2})}function joinChildren(e,t){const n=reactExports.Children.toArray(e).filter(Boolean);return n.reduce((a,s,u)=>(a.push(s),u<n.length-1&&a.push(reactExports.cloneElement(t,{key:`separator-${u}`})),a),[])}const getSideFromDirection=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],style=({ownerState:e,theme:t})=>{let n={display:"flex",flexDirection:"column",...handleBreakpoints({theme:t},resolveBreakpointValues({values:e.direction,breakpoints:t.breakpoints.values}),a=>({flexDirection:a}))};if(e.spacing){const a=createUnarySpacing(t),s=Object.keys(t.breakpoints.values).reduce((f,m)=>((typeof e.spacing=="object"&&e.spacing[m]!=null||typeof e.direction=="object"&&e.direction[m]!=null)&&(f[m]=!0),f),{}),u=resolveBreakpointValues({values:e.direction,base:s}),c=resolveBreakpointValues({values:e.spacing,base:s});typeof u=="object"&&Object.keys(u).forEach((f,m,_)=>{if(!u[f]){const b=m>0?u[_[m-1]]:"column";u[f]=b}}),n=deepmerge(n,handleBreakpoints({theme:t},c,(f,m)=>e.useFlexGap?{gap:getValue(a,f)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${getSideFromDirection(m?u[m]:e.direction)}`]:getValue(a,f)}}))}return n=mergeBreakpointsInOrder(t.breakpoints,n),n};function createStack(e={}){const{createStyledComponent:t=defaultCreateStyledComponent,useThemeProps:n=useThemePropsDefault,componentName:a="MuiStack"}=e,s=()=>composeClasses({root:["root"]},f=>generateUtilityClass(a,f),{}),u=t(style);return reactExports.forwardRef(function(f,m){const _=n(f),C=extendSxProp$1(_),{component:b="div",direction:T="column",spacing:R=0,divider:A,children:I,className:P,useFlexGap:N=!1,...S}=C,k={direction:T,spacing:R,useFlexGap:N},D=s();return jsxRuntimeExports.jsx(u,{as:b,ownerState:k,ref:m,className:clsx(D.root,P),...S,children:A?joinChildren(I,A):I})})}function getLight(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:common.white,default:common.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const light=getLight();function getDark(){return{text:{primary:common.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:common.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const dark=getDark();function addLightOrDark(e,t,n,a){const s=a.light||a,u=a.dark||a*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=lighten(e.main,s):t==="dark"&&(e.dark=darken(e.main,u)))}function mixLightOrDark(e,t,n,a,s){const u=s.light||s,c=s.dark||s*1.5;t[n]||(t.hasOwnProperty(a)?t[n]=t[a]:n==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(u*100).toFixed(0)}%)`:n==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(c*100).toFixed(0)}%)`))}function getDefaultPrimary(e="light"){return e==="dark"?{main:blue[200],light:blue[50],dark:blue[400]}:{main:blue[700],light:blue[400],dark:blue[800]}}function getDefaultSecondary(e="light"){return e==="dark"?{main:purple[200],light:purple[50],dark:purple[400]}:{main:purple[500],light:purple[300],dark:purple[700]}}function getDefaultError(e="light"){return e==="dark"?{main:red[500],light:red[300],dark:red[700]}:{main:red[700],light:red[400],dark:red[800]}}function getDefaultInfo(e="light"){return e==="dark"?{main:lightBlue[400],light:lightBlue[300],dark:lightBlue[700]}:{main:lightBlue[700],light:lightBlue[500],dark:lightBlue[900]}}function getDefaultSuccess(e="light"){return e==="dark"?{main:green[400],light:green[300],dark:green[700]}:{main:green[800],light:green[500],dark:green[900]}}function getDefaultWarning(e="light"){return e==="dark"?{main:orange[400],light:orange[300],dark:orange[700]}:{main:"#ed6c02",light:orange[500],dark:orange[900]}}function contrastColor(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function createPalette(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:a=.2,colorSpace:s,...u}=e,c=e.primary||getDefaultPrimary(t),h=e.secondary||getDefaultSecondary(t),f=e.error||getDefaultError(t),m=e.info||getDefaultInfo(t),_=e.success||getDefaultSuccess(t),C=e.warning||getDefaultWarning(t);function b(I){return s?contrastColor(I):getContrastRatio(I,dark.text.primary)>=n?dark.text.primary:light.text.primary}const T=({color:I,name:P,mainShade:N=500,lightShade:S=300,darkShade:k=700})=>{if(I={...I},!I.main&&I[N]&&(I.main=I[N]),!I.hasOwnProperty("main"))throw new Error(formatMuiErrorMessage(11,P?` (${P})`:"",N));if(typeof I.main!="string")throw new Error(formatMuiErrorMessage(12,P?` (${P})`:"",JSON.stringify(I.main)));return s?(mixLightOrDark(s,I,"light",S,a),mixLightOrDark(s,I,"dark",k,a)):(addLightOrDark(I,"light",S,a),addLightOrDark(I,"dark",k,a)),I.contrastText||(I.contrastText=b(I.main)),I};let R;return t==="light"?R=getLight():t==="dark"&&(R=getDark()),deepmerge({common:{...common},mode:t,primary:T({color:c,name:"primary"}),secondary:T({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:T({color:f,name:"error"}),warning:T({color:C,name:"warning"}),info:T({color:m,name:"info"}),success:T({color:_,name:"success"}),grey,contrastThreshold:n,getContrastText:b,augmentColor:T,tonalOffset:a,...R},u)}function prepareTypographyVars(e){const t={};return Object.entries(e).forEach(a=>{const[s,u]=a;typeof u=="object"&&(t[s]=`${u.fontStyle?`${u.fontStyle} `:""}${u.fontVariant?`${u.fontVariant} `:""}${u.fontWeight?`${u.fontWeight} `:""}${u.fontStretch?`${u.fontStretch} `:""}${u.fontSize||""}${u.lineHeight?`/${u.lineHeight} `:""}${u.fontFamily||""}`)}),t}function createMixins(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function round(e){return Math.round(e*1e5)/1e5}const caseAllCaps={textTransform:"uppercase"},defaultFontFamily='"Roboto", "Helvetica", "Arial", sans-serif';function createTypography(e,t){const{fontFamily:n=defaultFontFamily,fontSize:a=14,fontWeightLight:s=300,fontWeightRegular:u=400,fontWeightMedium:c=500,fontWeightBold:h=700,htmlFontSize:f=16,allVariants:m,pxToRem:_,...C}=typeof t=="function"?t(e):t,b=a/14,T=_||(I=>`${I/f*b}rem`),R=(I,P,N,S,k)=>({fontFamily:n,fontWeight:I,fontSize:T(P),lineHeight:N,...n===defaultFontFamily?{letterSpacing:`${round(S/P)}em`}:{},...k,...m}),A={h1:R(s,96,1.167,-1.5),h2:R(s,60,1.2,-.5),h3:R(u,48,1.167,0),h4:R(u,34,1.235,.25),h5:R(u,24,1.334,0),h6:R(c,20,1.6,.15),subtitle1:R(u,16,1.75,.15),subtitle2:R(c,14,1.57,.1),body1:R(u,16,1.5,.15),body2:R(u,14,1.43,.15),button:R(c,14,1.75,.4,caseAllCaps),caption:R(u,12,1.66,.4),overline:R(u,12,2.66,1,caseAllCaps),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return deepmerge({htmlFontSize:f,pxToRem:T,fontFamily:n,fontSize:a,fontWeightLight:s,fontWeightRegular:u,fontWeightMedium:c,fontWeightBold:h,...A},C,{clone:!1})}const shadowKeyUmbraOpacity=.2,shadowKeyPenumbraOpacity=.14,shadowAmbientShadowOpacity=.12;function createShadow(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${shadowKeyUmbraOpacity})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${shadowKeyPenumbraOpacity})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${shadowAmbientShadowOpacity})`].join(",")}const shadows=["none",createShadow(0,2,1,-1,0,1,1,0,0,1,3,0),createShadow(0,3,1,-2,0,2,2,0,0,1,5,0),createShadow(0,3,3,-2,0,3,4,0,0,1,8,0),createShadow(0,2,4,-1,0,4,5,0,0,1,10,0),createShadow(0,3,5,-1,0,5,8,0,0,1,14,0),createShadow(0,3,5,-1,0,6,10,0,0,1,18,0),createShadow(0,4,5,-2,0,7,10,1,0,2,16,1),createShadow(0,5,5,-3,0,8,10,1,0,3,14,2),createShadow(0,5,6,-3,0,9,12,1,0,3,16,2),createShadow(0,6,6,-3,0,10,14,1,0,4,18,3),createShadow(0,6,7,-4,0,11,15,1,0,4,20,3),createShadow(0,7,8,-4,0,12,17,2,0,5,22,4),createShadow(0,7,8,-4,0,13,19,2,0,5,24,4),createShadow(0,7,9,-4,0,14,21,2,0,5,26,4),createShadow(0,8,9,-5,0,15,22,2,0,6,28,5),createShadow(0,8,10,-5,0,16,24,2,0,6,30,5),createShadow(0,8,11,-5,0,17,26,2,0,6,32,5),createShadow(0,9,11,-5,0,18,28,2,0,7,34,6),createShadow(0,9,12,-6,0,19,29,2,0,7,36,6),createShadow(0,10,13,-6,0,20,31,3,0,8,38,7),createShadow(0,10,13,-6,0,21,33,3,0,8,40,7),createShadow(0,10,14,-6,0,22,35,3,0,8,42,7),createShadow(0,11,14,-7,0,23,36,3,0,9,44,8),createShadow(0,11,15,-7,0,24,38,3,0,9,46,8)],easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function formatMs(e){return`${Math.round(e)}ms`}function getAutoHeightDuration(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function createTransitions(e){const t={...easing,...e.easing},n={...duration,...e.duration};return{getAutoHeightDuration,create:(s=["all"],u={})=>{const{duration:c=n.standard,easing:h=t.easeInOut,delay:f=0,...m}=u;return(Array.isArray(s)?s:[s]).map(_=>`${_} ${typeof c=="string"?c:formatMs(c)} ${h} ${typeof f=="string"?f:formatMs(f)}`).join(",")},...e,easing:t,duration:n}}const zIndex={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function isSerializable(e){return isPlainObject(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function stringifyTheme(e={}){const t={...e};function n(a){const s=Object.entries(a);for(let u=0;u<s.length;u++){const[c,h]=s[u];!isSerializable(h)||c.startsWith("unstable_")?delete a[c]:isPlainObject(h)&&(a[c]={...h},n(a[c]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function coefficientToPercentage(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const parseAddition=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let a=0;a<t.length;a+=1)n+=+t[a];return n};function attachColorManipulators(e){Object.assign(e,{alpha(t,n){const a=this||e;return a.colorSpace?`oklch(from ${t} l c h / ${typeof n=="string"?`calc(${n})`:n})`:a.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:alpha(t,parseAddition(n))},lighten(t,n){const a=this||e;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${t}, #fff ${coefficientToPercentage(n)})`:lighten(t,n)},darken(t,n){const a=this||e;return a.colorSpace?`color-mix(in ${a.colorSpace}, ${t}, #000 ${coefficientToPercentage(n)})`:darken(t,n)}})}function createThemeNoVars(e={},...t){const{breakpoints:n,mixins:a={},spacing:s,palette:u={},transitions:c={},typography:h={},shape:f,colorSpace:m,..._}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(formatMuiErrorMessage(20));const C=createPalette({...u,colorSpace:m}),b=createTheme$1(e);let T=deepmerge(b,{mixins:createMixins(b.breakpoints,a),palette:C,shadows:shadows.slice(),typography:createTypography(C,h),transitions:createTransitions(c),zIndex:{...zIndex}});return T=deepmerge(T,_),T=t.reduce((R,A)=>deepmerge(R,A),T),T.unstable_sxConfig={...defaultSxConfig,..._?.unstable_sxConfig},T.unstable_sx=function(A){return styleFunctionSx({sx:A,theme:this})},T.toRuntimeSource=stringifyTheme,attachColorManipulators(T),T}function getOverlayAlpha(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const defaultDarkOverlays=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=getOverlayAlpha(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function getOpacity(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function getOverlays(e){return e==="dark"?defaultDarkOverlays:[]}function createColorScheme(e){const{palette:t={mode:"light"},opacity:n,overlays:a,colorSpace:s,...u}=e,c=createPalette({...t,colorSpace:s});return{palette:c,opacity:{...getOpacity(c.mode),...n},overlays:a||getOverlays(c.mode),...u}}function shouldSkipGeneratingVar(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const excludeVariablesFromRoot=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],defaultGetSelector=e=>(t,n)=>{const a=e.rootSelector||":root",s=e.colorSchemeSelector;let u=s;if(s==="class"&&(u=".%s"),s==="data"&&(u="[data-%s]"),s?.startsWith("data-")&&!s.includes("%s")&&(u=`[${s}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const c={};return excludeVariablesFromRoot(e.cssVarPrefix).forEach(h=>{c[h]=n[h],delete n[h]}),u==="media"?{[a]:n,"@media (prefers-color-scheme: dark)":{[a]:c}}:u?{[u.replace("%s",t)]:c,[`${a}, ${u.replace("%s",t)}`]:n}:{[a]:{...n,...c}}}if(u&&u!=="media")return`${a}, ${u.replace("%s",String(t))}`}else if(t){if(u==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[a]:n}};if(u)return u.replace("%s",String(t))}return a};function assignNode(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function setColor(e,t,n){!e[t]&&n&&(e[t]=n)}function toRgb(e){return typeof e!="string"||!e.startsWith("hsl")?e:hslToRgb(e)}function setColorChannel(e,t){`${t}Channel`in e||(e[`${t}Channel`]=private_safeColorChannel(toRgb(e[t])))}function getSpacingVal(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const silent=e=>{try{return e()}catch{}},createGetCssVar=(e="mui")=>createGetCssVar$1(e);function attachColorScheme$1(e,t,n,a,s){if(!n)return;n=n===!0?{}:n;const u=s==="dark"?"dark":"light";if(!a){t[s]=createColorScheme({...n,palette:{mode:u,...n?.palette},colorSpace:e});return}const{palette:c,...h}=createThemeNoVars({...a,palette:{mode:u,...n?.palette},colorSpace:e});return t[s]={...n,palette:c,opacity:{...getOpacity(u),...n?.opacity},overlays:n?.overlays||getOverlays(u)},h}function createThemeWithVars(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:a,disableCssColorScheme:s=!1,cssVarPrefix:u="mui",nativeColor:c=!1,shouldSkipGeneratingVar:h=shouldSkipGeneratingVar,colorSchemeSelector:f=n.light&&n.dark?"media":void 0,rootSelector:m=":root",..._}=e,C=Object.keys(n)[0],b=a||(n.light&&C!=="light"?"light":C),T=createGetCssVar(u),{[b]:R,light:A,dark:I,...P}=n,N={...P};let S=R;if((b==="dark"&&!("dark"in n)||b==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(formatMuiErrorMessage(21,b));let k;c&&(k="oklch");const D=attachColorScheme$1(k,N,S,_,b);A&&!N.light&&attachColorScheme$1(k,N,A,void 0,"light"),I&&!N.dark&&attachColorScheme$1(k,N,I,void 0,"dark");let M={defaultColorScheme:b,...D,cssVarPrefix:u,colorSchemeSelector:f,rootSelector:m,getCssVar:T,colorSchemes:N,font:{...prepareTypographyVars(D.typography),...D.font},spacing:getSpacingVal(_.spacing)};Object.keys(M.colorSchemes).forEach(re=>{const F=M.colorSchemes[re].palette,J=$=>{const L=$.split("-"),W=L[1],U=L[2];return T($,F[W][U])};F.mode==="light"&&(setColor(F.common,"background","#fff"),setColor(F.common,"onBackground","#000")),F.mode==="dark"&&(setColor(F.common,"background","#000"),setColor(F.common,"onBackground","#fff"));function z($,L,W){if(k){let U;return $===private_safeAlpha&&(U=`transparent ${((1-W)*100).toFixed(0)}%`),$===private_safeDarken&&(U=`#000 ${(W*100).toFixed(0)}%`),$===private_safeLighten&&(U=`#fff ${(W*100).toFixed(0)}%`),`color-mix(in ${k}, ${L}, ${U})`}return $(L,W)}if(assignNode(F,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),F.mode==="light"){setColor(F.Alert,"errorColor",z(private_safeDarken,F.error.light,.6)),setColor(F.Alert,"infoColor",z(private_safeDarken,F.info.light,.6)),setColor(F.Alert,"successColor",z(private_safeDarken,F.success.light,.6)),setColor(F.Alert,"warningColor",z(private_safeDarken,F.warning.light,.6)),setColor(F.Alert,"errorFilledBg",J("palette-error-main")),setColor(F.Alert,"infoFilledBg",J("palette-info-main")),setColor(F.Alert,"successFilledBg",J("palette-success-main")),setColor(F.Alert,"warningFilledBg",J("palette-warning-main")),setColor(F.Alert,"errorFilledColor",silent(()=>F.getContrastText(F.error.main))),setColor(F.Alert,"infoFilledColor",silent(()=>F.getContrastText(F.info.main))),setColor(F.Alert,"successFilledColor",silent(()=>F.getContrastText(F.success.main))),setColor(F.Alert,"warningFilledColor",silent(()=>F.getContrastText(F.warning.main))),setColor(F.Alert,"errorStandardBg",z(private_safeLighten,F.error.light,.9)),setColor(F.Alert,"infoStandardBg",z(private_safeLighten,F.info.light,.9)),setColor(F.Alert,"successStandardBg",z(private_safeLighten,F.success.light,.9)),setColor(F.Alert,"warningStandardBg",z(private_safeLighten,F.warning.light,.9)),setColor(F.Alert,"errorIconColor",J("palette-error-main")),setColor(F.Alert,"infoIconColor",J("palette-info-main")),setColor(F.Alert,"successIconColor",J("palette-success-main")),setColor(F.Alert,"warningIconColor",J("palette-warning-main")),setColor(F.AppBar,"defaultBg",J("palette-grey-100")),setColor(F.Avatar,"defaultBg",J("palette-grey-400")),setColor(F.Button,"inheritContainedBg",J("palette-grey-300")),setColor(F.Button,"inheritContainedHoverBg",J("palette-grey-A100")),setColor(F.Chip,"defaultBorder",J("palette-grey-400")),setColor(F.Chip,"defaultAvatarColor",J("palette-grey-700")),setColor(F.Chip,"defaultIconColor",J("palette-grey-700")),setColor(F.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),setColor(F.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),setColor(F.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),setColor(F.LinearProgress,"primaryBg",z(private_safeLighten,F.primary.main,.62)),setColor(F.LinearProgress,"secondaryBg",z(private_safeLighten,F.secondary.main,.62)),setColor(F.LinearProgress,"errorBg",z(private_safeLighten,F.error.main,.62)),setColor(F.LinearProgress,"infoBg",z(private_safeLighten,F.info.main,.62)),setColor(F.LinearProgress,"successBg",z(private_safeLighten,F.success.main,.62)),setColor(F.LinearProgress,"warningBg",z(private_safeLighten,F.warning.main,.62)),setColor(F.Skeleton,"bg",k?z(private_safeAlpha,F.text.primary,.11):`rgba(${J("palette-text-primaryChannel")} / 0.11)`),setColor(F.Slider,"primaryTrack",z(private_safeLighten,F.primary.main,.62)),setColor(F.Slider,"secondaryTrack",z(private_safeLighten,F.secondary.main,.62)),setColor(F.Slider,"errorTrack",z(private_safeLighten,F.error.main,.62)),setColor(F.Slider,"infoTrack",z(private_safeLighten,F.info.main,.62)),setColor(F.Slider,"successTrack",z(private_safeLighten,F.success.main,.62)),setColor(F.Slider,"warningTrack",z(private_safeLighten,F.warning.main,.62));const $=k?z(private_safeDarken,F.background.default,.6825):private_safeEmphasize(F.background.default,.8);setColor(F.SnackbarContent,"bg",$),setColor(F.SnackbarContent,"color",silent(()=>k?dark.text.primary:F.getContrastText($))),setColor(F.SpeedDialAction,"fabHoverBg",private_safeEmphasize(F.background.paper,.15)),setColor(F.StepConnector,"border",J("palette-grey-400")),setColor(F.StepContent,"border",J("palette-grey-400")),setColor(F.Switch,"defaultColor",J("palette-common-white")),setColor(F.Switch,"defaultDisabledColor",J("palette-grey-100")),setColor(F.Switch,"primaryDisabledColor",z(private_safeLighten,F.primary.main,.62)),setColor(F.Switch,"secondaryDisabledColor",z(private_safeLighten,F.secondary.main,.62)),setColor(F.Switch,"errorDisabledColor",z(private_safeLighten,F.error.main,.62)),setColor(F.Switch,"infoDisabledColor",z(private_safeLighten,F.info.main,.62)),setColor(F.Switch,"successDisabledColor",z(private_safeLighten,F.success.main,.62)),setColor(F.Switch,"warningDisabledColor",z(private_safeLighten,F.warning.main,.62)),setColor(F.TableCell,"border",z(private_safeLighten,z(private_safeAlpha,F.divider,1),.88)),setColor(F.Tooltip,"bg",z(private_safeAlpha,F.grey[700],.92))}if(F.mode==="dark"){setColor(F.Alert,"errorColor",z(private_safeLighten,F.error.light,.6)),setColor(F.Alert,"infoColor",z(private_safeLighten,F.info.light,.6)),setColor(F.Alert,"successColor",z(private_safeLighten,F.success.light,.6)),setColor(F.Alert,"warningColor",z(private_safeLighten,F.warning.light,.6)),setColor(F.Alert,"errorFilledBg",J("palette-error-dark")),setColor(F.Alert,"infoFilledBg",J("palette-info-dark")),setColor(F.Alert,"successFilledBg",J("palette-success-dark")),setColor(F.Alert,"warningFilledBg",J("palette-warning-dark")),setColor(F.Alert,"errorFilledColor",silent(()=>F.getContrastText(F.error.dark))),setColor(F.Alert,"infoFilledColor",silent(()=>F.getContrastText(F.info.dark))),setColor(F.Alert,"successFilledColor",silent(()=>F.getContrastText(F.success.dark))),setColor(F.Alert,"warningFilledColor",silent(()=>F.getContrastText(F.warning.dark))),setColor(F.Alert,"errorStandardBg",z(private_safeDarken,F.error.light,.9)),setColor(F.Alert,"infoStandardBg",z(private_safeDarken,F.info.light,.9)),setColor(F.Alert,"successStandardBg",z(private_safeDarken,F.success.light,.9)),setColor(F.Alert,"warningStandardBg",z(private_safeDarken,F.warning.light,.9)),setColor(F.Alert,"errorIconColor",J("palette-error-main")),setColor(F.Alert,"infoIconColor",J("palette-info-main")),setColor(F.Alert,"successIconColor",J("palette-success-main")),setColor(F.Alert,"warningIconColor",J("palette-warning-main")),setColor(F.AppBar,"defaultBg",J("palette-grey-900")),setColor(F.AppBar,"darkBg",J("palette-background-paper")),setColor(F.AppBar,"darkColor",J("palette-text-primary")),setColor(F.Avatar,"defaultBg",J("palette-grey-600")),setColor(F.Button,"inheritContainedBg",J("palette-grey-800")),setColor(F.Button,"inheritContainedHoverBg",J("palette-grey-700")),setColor(F.Chip,"defaultBorder",J("palette-grey-700")),setColor(F.Chip,"defaultAvatarColor",J("palette-grey-300")),setColor(F.Chip,"defaultIconColor",J("palette-grey-300")),setColor(F.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),setColor(F.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),setColor(F.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),setColor(F.LinearProgress,"primaryBg",z(private_safeDarken,F.primary.main,.5)),setColor(F.LinearProgress,"secondaryBg",z(private_safeDarken,F.secondary.main,.5)),setColor(F.LinearProgress,"errorBg",z(private_safeDarken,F.error.main,.5)),setColor(F.LinearProgress,"infoBg",z(private_safeDarken,F.info.main,.5)),setColor(F.LinearProgress,"successBg",z(private_safeDarken,F.success.main,.5)),setColor(F.LinearProgress,"warningBg",z(private_safeDarken,F.warning.main,.5)),setColor(F.Skeleton,"bg",k?z(private_safeAlpha,F.text.primary,.13):`rgba(${J("palette-text-primaryChannel")} / 0.13)`),setColor(F.Slider,"primaryTrack",z(private_safeDarken,F.primary.main,.5)),setColor(F.Slider,"secondaryTrack",z(private_safeDarken,F.secondary.main,.5)),setColor(F.Slider,"errorTrack",z(private_safeDarken,F.error.main,.5)),setColor(F.Slider,"infoTrack",z(private_safeDarken,F.info.main,.5)),setColor(F.Slider,"successTrack",z(private_safeDarken,F.success.main,.5)),setColor(F.Slider,"warningTrack",z(private_safeDarken,F.warning.main,.5));const $=k?z(private_safeLighten,F.background.default,.985):private_safeEmphasize(F.background.default,.98);setColor(F.SnackbarContent,"bg",$),setColor(F.SnackbarContent,"color",silent(()=>k?light.text.primary:F.getContrastText($))),setColor(F.SpeedDialAction,"fabHoverBg",private_safeEmphasize(F.background.paper,.15)),setColor(F.StepConnector,"border",J("palette-grey-600")),setColor(F.StepContent,"border",J("palette-grey-600")),setColor(F.Switch,"defaultColor",J("palette-grey-300")),setColor(F.Switch,"defaultDisabledColor",J("palette-grey-600")),setColor(F.Switch,"primaryDisabledColor",z(private_safeDarken,F.primary.main,.55)),setColor(F.Switch,"secondaryDisabledColor",z(private_safeDarken,F.secondary.main,.55)),setColor(F.Switch,"errorDisabledColor",z(private_safeDarken,F.error.main,.55)),setColor(F.Switch,"infoDisabledColor",z(private_safeDarken,F.info.main,.55)),setColor(F.Switch,"successDisabledColor",z(private_safeDarken,F.success.main,.55)),setColor(F.Switch,"warningDisabledColor",z(private_safeDarken,F.warning.main,.55)),setColor(F.TableCell,"border",z(private_safeDarken,z(private_safeAlpha,F.divider,1),.68)),setColor(F.Tooltip,"bg",z(private_safeAlpha,F.grey[700],.92))}setColorChannel(F.background,"default"),setColorChannel(F.background,"paper"),setColorChannel(F.common,"background"),setColorChannel(F.common,"onBackground"),setColorChannel(F,"divider"),Object.keys(F).forEach($=>{const L=F[$];$!=="tonalOffset"&&L&&typeof L=="object"&&(L.main&&setColor(F[$],"mainChannel",private_safeColorChannel(toRgb(L.main))),L.light&&setColor(F[$],"lightChannel",private_safeColorChannel(toRgb(L.light))),L.dark&&setColor(F[$],"darkChannel",private_safeColorChannel(toRgb(L.dark))),L.contrastText&&setColor(F[$],"contrastTextChannel",private_safeColorChannel(toRgb(L.contrastText))),$==="text"&&(setColorChannel(F[$],"primary"),setColorChannel(F[$],"secondary")),$==="action"&&(L.active&&setColorChannel(F[$],"active"),L.selected&&setColorChannel(F[$],"selected")))})}),M=t.reduce((re,F)=>deepmerge(re,F),M);const j={prefix:u,disableCssColorScheme:s,shouldSkipGeneratingVar:h,getSelector:defaultGetSelector(M),enableContrastVars:c},{vars:H,generateThemeVars:X,generateStyleSheets:K}=prepareCssVars(M,j);return M.vars=H,Object.entries(M.colorSchemes[M.defaultColorScheme]).forEach(([re,F])=>{M[re]=F}),M.generateThemeVars=X,M.generateStyleSheets=K,M.generateSpacing=function(){return createSpacing(_.spacing,createUnarySpacing(this))},M.getColorSchemeSelector=createGetColorSchemeSelector(f),M.spacing=M.generateSpacing(),M.shouldSkipGeneratingVar=h,M.unstable_sxConfig={...defaultSxConfig,..._?.unstable_sxConfig},M.unstable_sx=function(F){return styleFunctionSx({sx:F,theme:this})},M.toRuntimeSource=stringifyTheme,M}function attachColorScheme(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:createPalette({...n===!0?{}:n.palette,mode:t})})}function createTheme(e={},...t){const{palette:n,cssVariables:a=!1,colorSchemes:s=n?void 0:{light:!0},defaultColorScheme:u=n?.mode,...c}=e,h=u||"light",f=s?.[h],m={...s,...n?{[h]:{...typeof f!="boolean"&&f,palette:n}}:void 0};if(a===!1){if(!("colorSchemes"in e))return createThemeNoVars(e,...t);let _=n;"palette"in e||m[h]&&(m[h]!==!0?_=m[h].palette:h==="dark"&&(_={mode:"dark"}));const C=createThemeNoVars({...e,palette:_},...t);return C.defaultColorScheme=h,C.colorSchemes=m,C.palette.mode==="light"&&(C.colorSchemes.light={...m.light!==!0&&m.light,palette:C.palette},attachColorScheme(C,"dark",m.dark)),C.palette.mode==="dark"&&(C.colorSchemes.dark={...m.dark!==!0&&m.dark,palette:C.palette},attachColorScheme(C,"light",m.light)),C}return!n&&!("light"in m)&&h==="light"&&(m.light=!0),createThemeWithVars({...c,colorSchemes:m,defaultColorScheme:h,...typeof a!="boolean"&&a},...t)}function getUnit(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function toUnitless(e){return parseFloat(e)}const defaultTheme$1=createTheme();function useTheme(){const e=useTheme$2(defaultTheme$1);return e[THEME_ID]||e}function slotShouldForwardProp(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const rootShouldForwardProp=e=>slotShouldForwardProp(e)&&e!=="classes",styled=createStyled({themeId:THEME_ID,defaultTheme:defaultTheme$1,rootShouldForwardProp});function ThemeProviderNoVars({theme:e,...t}){const n=THEME_ID in e?e[THEME_ID]:void 0;return jsxRuntimeExports.jsx(ThemeProvider$1,{...t,themeId:n?THEME_ID:void 0,theme:n||e})}const defaultConfig={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:InternalCssVarsProvider}=createCssVarsProvider({themeId:THEME_ID,theme:()=>createTheme({cssVariables:!0}),colorSchemeStorageKey:defaultConfig.colorSchemeStorageKey,modeStorageKey:defaultConfig.modeStorageKey,defaultColorScheme:{light:defaultConfig.defaultLightColorScheme,dark:defaultConfig.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:createTypography(e.palette,e.typography)};return t.unstable_sx=function(a){return styleFunctionSx({sx:a,theme:this})},t}}),CssVarsProvider=InternalCssVarsProvider;function ThemeProvider({theme:e,...t}){const n=reactExports.useMemo(()=>{if(typeof e=="function")return e;const a=THEME_ID in e?e[THEME_ID]:e;return"colorSchemes"in a?null:"vars"in a?e:{...e,vars:null}},[e]);return n?jsxRuntimeExports.jsx(ThemeProviderNoVars,{theme:n,...t}):jsxRuntimeExports.jsx(CssVarsProvider,{theme:e,...t})}function createChainedFunction(...e){return e.reduce((t,n)=>n==null?t:function(...s){t.apply(this,s),n.apply(this,s)},()=>{})}function GlobalStyles(e){return jsxRuntimeExports.jsx(GlobalStyles$1,{...e,defaultTheme:defaultTheme$1,themeId:THEME_ID})}function globalCss(e){return function(n){return jsxRuntimeExports.jsx(GlobalStyles,{styles:typeof e=="function"?a=>e({theme:a,...n}):e})}}function internal_createExtendSxProp(){return extendSxProp$1}const memoTheme=unstable_memoTheme;function useDefaultProps(e){return useDefaultProps$1(e)}function getSvgIconUtilityClass(e){return generateUtilityClass("MuiSvgIcon",e)}generateUtilityClasses("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const useUtilityClasses$A=e=>{const{color:t,fontSize:n,classes:a}=e,s={root:["root",t!=="inherit"&&`color${capitalize(t)}`,`fontSize${capitalize(n)}`]};return composeClasses(s,getSvgIconUtilityClass,a)},SvgIconRoot=styled("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${capitalize(n.color)}`],t[`fontSize${capitalize(n.fontSize)}`]]}})(memoTheme(({theme:e})=>({userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:e.transitions?.create?.("fill",{duration:(e.vars??e).transitions?.duration?.shorter}),variants:[{props:t=>!t.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:e.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:e.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:e.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,t])=>t&&t.main).map(([t])=>({props:{color:t},style:{color:(e.vars??e).palette?.[t]?.main}})),{props:{color:"action"},style:{color:(e.vars??e).palette?.action?.active}},{props:{color:"disabled"},style:{color:(e.vars??e).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}))),SvgIcon=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiSvgIcon"}),{children:s,className:u,color:c="inherit",component:h="svg",fontSize:f="medium",htmlColor:m,inheritViewBox:_=!1,titleAccess:C,viewBox:b="0 0 24 24",...T}=a,R=reactExports.isValidElement(s)&&s.type==="svg",A={...a,color:c,component:h,fontSize:f,instanceFontSize:t.fontSize,inheritViewBox:_,viewBox:b,hasSvgAsChild:R},I={};_||(I.viewBox=b);const P=useUtilityClasses$A(A);return jsxRuntimeExports.jsxs(SvgIconRoot,{as:h,className:clsx(P.root,u),focusable:"false",color:m,"aria-hidden":C?void 0:!0,role:C?"img":void 0,ref:n,...I,...T,...R&&s.props,ownerState:A,children:[R?s.props.children:s,C?jsxRuntimeExports.jsx("title",{children:C}):null]})});SvgIcon.muiName="SvgIcon";function createSvgIcon(e,t){function n(a,s){return jsxRuntimeExports.jsx(SvgIcon,{"data-testid":void 0,ref:s,...a,children:e})}return n.muiName=SvgIcon.muiName,reactExports.memo(reactExports.forwardRef(n))}function debounce(e,t=166){let n;function a(...s){const u=()=>{e.apply(this,s)};clearTimeout(n),n=setTimeout(u,t)}return a.clear=()=>{clearTimeout(n)},a}function ownerDocument(e){return e&&e.ownerDocument||document}function ownerWindow(e){return ownerDocument(e).defaultView||window}function setRef(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function useControlled(e){const{controlled:t,default:n,name:a,state:s="value"}=e,{current:u}=reactExports.useRef(t!==void 0),[c,h]=reactExports.useState(n),f=u?t:c,m=reactExports.useCallback(_=>{u||h(_)},[]);return[f,m]}function useEventCallback(e){const t=reactExports.useRef(e);return useEnhancedEffect(()=>{t.current=e}),reactExports.useRef((...n)=>(0,t.current)(...n)).current}function useForkRef(...e){const t=reactExports.useRef(void 0),n=reactExports.useCallback(a=>{const s=e.map(u=>{if(u==null)return null;if(typeof u=="function"){const c=u,h=c(a);return typeof h=="function"?h:()=>{c(null)}}return u.current=a,()=>{u.current=null}});return()=>{s.forEach(u=>u?.())}},e);return reactExports.useMemo(()=>e.every(a=>a==null)?null:a=>{t.current&&(t.current(),t.current=void 0),a!=null&&(t.current=n(a))},e)}function isEventHandler(e,t){const n=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&n>=65&&n<=90&&typeof t=="function"}function mergeSlotProps$1(e,t){if(!e)return t;function n(c,h){const f={};return Object.keys(h).forEach(m=>{isEventHandler(m,h[m])&&typeof c[m]=="function"&&(f[m]=(..._)=>{c[m](..._),h[m](..._)})}),f}if(typeof e=="function"||typeof t=="function")return c=>{const h=typeof t=="function"?t(c):t,f=typeof e=="function"?e({...c,...h}):e,m=clsx(c?.className,h?.className,f?.className),_=n(f,h);return{...h,...f,..._,...!!m&&{className:m},...h?.style&&f?.style&&{style:{...h.style,...f.style}},...h?.sx&&f?.sx&&{sx:[...Array.isArray(h.sx)?h.sx:[h.sx],...Array.isArray(f.sx)?f.sx:[f.sx]]}}};const a=t,s=n(e,a),u=clsx(a?.className,e?.className);return{...t,...e,...s,...!!u&&{className:u},...a?.style&&e?.style&&{style:{...a.style,...e.style}},...a?.sx&&e?.sx&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_setPrototypeOf(e,t)}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,_setPrototypeOf(e,t)}const config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function(t){return t.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=(function(e){_inheritsLoose(t,e);function t(a,s){var u;u=e.call(this,a,s)||this;var c=s,h=c&&!c.isMounting?a.enter:a.appear,f;return u.appearStatus=null,a.in?h?(f=EXITED,u.appearStatus=ENTERING):f=ENTERED:a.unmountOnExit||a.mountOnEnter?f=UNMOUNTED:f=EXITED,u.state={status:f},u.nextCallback=null,u}t.getDerivedStateFromProps=function(s,u){var c=s.in;return c&&u.status===UNMOUNTED?{status:EXITED}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var u=null;if(s!==this.props){var c=this.state.status;this.props.in?c!==ENTERING&&c!==ENTERED&&(u=ENTERING):(c===ENTERING||c===ENTERED)&&(u=EXITING)}this.updateStatus(!1,u)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,u,c,h;return u=c=h=s,s!=null&&typeof s!="number"&&(u=s.exit,c=s.enter,h=s.appear!==void 0?s.appear:c),{exit:u,enter:c,appear:h}},n.updateStatus=function(s,u){if(s===void 0&&(s=!1),u!==null)if(this.cancelNextCallback(),u===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);c&&forceReflow(c)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},n.performEnter=function(s){var u=this,c=this.props.enter,h=this.context?this.context.isMounting:s,f=this.props.nodeRef?[h]:[ReactDOM.findDOMNode(this),h],m=f[0],_=f[1],C=this.getTimeouts(),b=h?C.appear:C.enter;if(!s&&!c||config.disabled){this.safeSetState({status:ENTERED},function(){u.props.onEntered(m)});return}this.props.onEnter(m,_),this.safeSetState({status:ENTERING},function(){u.props.onEntering(m,_),u.onTransitionEnd(b,function(){u.safeSetState({status:ENTERED},function(){u.props.onEntered(m,_)})})})},n.performExit=function(){var s=this,u=this.props.exit,c=this.getTimeouts(),h=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!u||config.disabled){this.safeSetState({status:EXITED},function(){s.props.onExited(h)});return}this.props.onExit(h),this.safeSetState({status:EXITING},function(){s.props.onExiting(h),s.onTransitionEnd(c.exit,function(){s.safeSetState({status:EXITED},function(){s.props.onExited(h)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,u){u=this.setNextCallback(u),this.setState(s,u)},n.setNextCallback=function(s){var u=this,c=!0;return this.nextCallback=function(h){c&&(c=!1,u.nextCallback=null,s(h))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},n.onTransitionEnd=function(s,u){this.setNextCallback(u);var c=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),h=s==null&&!this.props.addEndListener;if(!c||h){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],m=f[0],_=f[1];this.props.addEndListener(m,_)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===UNMOUNTED)return null;var u=this.props,c=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var h=_objectWithoutPropertiesLoose(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof c=="function"?c(s,h):React.cloneElement(React.Children.only(c),h))},t})(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;function _assertThisInitialized(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function getChildMapping(e,t){var n=function(u){return t&&reactExports.isValidElement(u)?t(u):u},a=Object.create(null);return e&&reactExports.Children.map(e,function(s){return s}).forEach(function(s){a[s.key]=n(s)}),a}function mergeChildMappings(e,t){e=e||{},t=t||{};function n(_){return _ in t?t[_]:e[_]}var a=Object.create(null),s=[];for(var u in e)u in t?s.length&&(a[u]=s,s=[]):s.push(u);var c,h={};for(var f in t){if(a[f])for(c=0;c<a[f].length;c++){var m=a[f][c];h[a[f][c]]=n(m)}h[f]=n(f)}for(c=0;c<s.length;c++)h[s[c]]=n(s[c]);return h}function getProp(e,t,n){return n[t]!=null?n[t]:e.props[t]}function getInitialChildMapping(e,t){return getChildMapping(e.children,function(n){return reactExports.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:getProp(n,"appear",e),enter:getProp(n,"enter",e),exit:getProp(n,"exit",e)})})}function getNextChildMapping(e,t,n){var a=getChildMapping(e.children),s=mergeChildMappings(t,a);return Object.keys(s).forEach(function(u){var c=s[u];if(reactExports.isValidElement(c)){var h=u in t,f=u in a,m=t[u],_=reactExports.isValidElement(m)&&!m.props.in;f&&(!h||_)?s[u]=reactExports.cloneElement(c,{onExited:n.bind(null,c),in:!0,exit:getProp(c,"exit",e),enter:getProp(c,"enter",e)}):!f&&h&&!_?s[u]=reactExports.cloneElement(c,{in:!1}):f&&h&&reactExports.isValidElement(m)&&(s[u]=reactExports.cloneElement(c,{onExited:n.bind(null,c),in:m.props.in,exit:getProp(c,"exit",e),enter:getProp(c,"enter",e)}))}}),s}var values=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},defaultProps={component:"div",childFactory:function(t){return t}},TransitionGroup=(function(e){_inheritsLoose(t,e);function t(a,s){var u;u=e.call(this,a,s)||this;var c=u.handleExited.bind(_assertThisInitialized(u));return u.state={contextValue:{isMounting:!0},handleExited:c,firstRender:!0},u}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,u){var c=u.children,h=u.handleExited,f=u.firstRender;return{children:f?getInitialChildMapping(s,h):getNextChildMapping(s,c,h),firstRender:!1}},n.handleExited=function(s,u){var c=getChildMapping(this.props.children);s.key in c||(s.props.onExited&&s.props.onExited(u),this.mounted&&this.setState(function(h){var f=_extends({},h.children);return delete f[s.key],{children:f}}))},n.render=function(){var s=this.props,u=s.component,c=s.childFactory,h=_objectWithoutPropertiesLoose(s,["component","childFactory"]),f=this.state.contextValue,m=values(this.state.children).map(c);return delete h.appear,delete h.enter,delete h.exit,u===null?React.createElement(TransitionGroupContext.Provider,{value:f},m):React.createElement(TransitionGroupContext.Provider,{value:f},React.createElement(u,h,m))},t})(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const UNINITIALIZED={};function useLazyRef(e,t){const n=reactExports.useRef(UNINITIALIZED);return n.current===UNINITIALIZED&&(n.current=e(t)),n}const EMPTY=[];function useOnMount(e){reactExports.useEffect(e,EMPTY)}class Timeout{static create(){return new Timeout}currentId=null;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function useTimeout(){const e=useLazyRef(Timeout.create).current;return useOnMount(e.disposeEffect),e}const reflow=e=>e.scrollTop;function getTransitionProps(e,t){const{timeout:n,easing:a,style:s={}}=e;return{duration:s.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:s.transitionTimingFunction??(typeof a=="object"?a[t.mode]:a),delay:s.transitionDelay}}function getCollapseUtilityClass(e){return generateUtilityClass("MuiCollapse",e)}generateUtilityClasses("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const useUtilityClasses$z=e=>{const{orientation:t,classes:n}=e,a={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return composeClasses(a,getCollapseUtilityClass,n)},CollapseRoot=styled("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(memoTheme(({theme:e})=>({height:0,overflow:"hidden",transition:e.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:e.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:t})=>t.state==="exited"&&!t.in&&t.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),CollapseWrapper=styled("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),CollapseWrapperInner=styled("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Collapse=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiCollapse"}),{addEndListener:s,children:u,className:c,collapsedSize:h="0px",component:f,easing:m,in:_,onEnter:C,onEntered:b,onEntering:T,onExit:R,onExited:A,onExiting:I,orientation:P="vertical",style:N,timeout:S=duration.standard,TransitionComponent:k=Transition,...D}=a,M={...a,orientation:P,collapsedSize:h},j=useUtilityClasses$z(M),H=useTheme(),X=useTimeout(),K=reactExports.useRef(null),re=reactExports.useRef(),F=typeof h=="number"?`${h}px`:h,J=P==="horizontal",z=J?"width":"height",$=reactExports.useRef(null),L=useForkRef(n,$),W=de=>G=>{if(de){const Y=$.current;G===void 0?de(Y):de(Y,G)}},U=()=>K.current?K.current[J?"clientWidth":"clientHeight"]:0,V=W((de,G)=>{K.current&&J&&(K.current.style.position="absolute"),de.style[z]=F,C&&C(de,G)}),B=W((de,G)=>{const Y=U();K.current&&J&&(K.current.style.position="");const{duration:te,easing:ee}=getTransitionProps({style:N,timeout:S,easing:m},{mode:"enter"});if(S==="auto"){const se=H.transitions.getAutoHeightDuration(Y);de.style.transitionDuration=`${se}ms`,re.current=se}else de.style.transitionDuration=typeof te=="string"?te:`${te}ms`;de.style[z]=`${Y}px`,de.style.transitionTimingFunction=ee,T&&T(de,G)}),Z=W((de,G)=>{de.style[z]="auto",b&&b(de,G)}),ne=W(de=>{de.style[z]=`${U()}px`,R&&R(de)}),oe=W(A),ce=W(de=>{const G=U(),{duration:Y,easing:te}=getTransitionProps({style:N,timeout:S,easing:m},{mode:"exit"});if(S==="auto"){const ee=H.transitions.getAutoHeightDuration(G);de.style.transitionDuration=`${ee}ms`,re.current=ee}else de.style.transitionDuration=typeof Y=="string"?Y:`${Y}ms`;de.style[z]=F,de.style.transitionTimingFunction=te,I&&I(de)}),xe=de=>{S==="auto"&&X.start(re.current||0,de),s&&s($.current,de)};return jsxRuntimeExports.jsx(k,{in:_,onEnter:V,onEntered:Z,onEntering:B,onExit:ne,onExited:oe,onExiting:ce,addEndListener:xe,nodeRef:$,timeout:S==="auto"?null:S,...D,children:(de,{ownerState:G,...Y})=>jsxRuntimeExports.jsx(CollapseRoot,{as:f,className:clsx(j.root,c,{entered:j.entered,exited:!_&&F==="0px"&&j.hidden}[de]),style:{[J?"minWidth":"minHeight"]:F,...N},ref:L,ownerState:{...M,state:de},...Y,children:jsxRuntimeExports.jsx(CollapseWrapper,{ownerState:{...M,state:de},className:j.wrapper,ref:K,children:jsxRuntimeExports.jsx(CollapseWrapperInner,{ownerState:{...M,state:de},className:j.wrapperInner,children:u})})})})});Collapse&&(Collapse.muiSupportAuto=!0);function getPaperUtilityClass(e){return generateUtilityClass("MuiPaper",e)}generateUtilityClasses("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const useUtilityClasses$y=e=>{const{square:t,elevation:n,variant:a,classes:s}=e,u={root:["root",a,!t&&"rounded",a==="elevation"&&`elevation${n}`]};return composeClasses(u,getPaperUtilityClass,s)},PaperRoot=styled("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(memoTheme(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Paper=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiPaper"}),s=useTheme(),{className:u,component:c="div",elevation:h=1,square:f=!1,variant:m="elevation",..._}=a,C={...a,component:c,elevation:h,square:f,variant:m},b=useUtilityClasses$y(C);return jsxRuntimeExports.jsx(PaperRoot,{as:c,ownerState:C,className:clsx(b.root,u),ref:n,..._,style:{...m==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[h],...s.vars&&{"--Paper-overlay":s.vars.overlays?.[h]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${alpha("#fff",getOverlayAlpha(h))}, ${alpha("#fff",getOverlayAlpha(h))})`}},..._.style}})});function isHostComponent$1(e){return typeof e=="string"}function appendOwnerState(e,t,n){return e===void 0||isHostComponent$1(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function resolveComponentProps(e,t,n){return typeof e=="function"?e(t,n):e}function extractEventHandlers(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(a=>a.match(/^on[A-Z]/)&&typeof e[a]=="function"&&!t.includes(a)).forEach(a=>{n[a]=e[a]}),n}function omitEventHandlers(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function mergeSlotProps(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:a,externalForwardedProps:s,className:u}=e;if(!t){const T=clsx(n?.className,u,s?.className,a?.className),R={...n?.style,...s?.style,...a?.style},A={...n,...s,...a};return T.length>0&&(A.className=T),Object.keys(R).length>0&&(A.style=R),{props:A,internalRef:void 0}}const c=extractEventHandlers({...s,...a}),h=omitEventHandlers(a),f=omitEventHandlers(s),m=t(c),_=clsx(m?.className,n?.className,u,s?.className,a?.className),C={...m?.style,...n?.style,...s?.style,...a?.style},b={...m,...n,...f,...h};return _.length>0&&(b.className=_),Object.keys(C).length>0&&(b.style=C),{props:b,internalRef:m.ref}}function useSlot(e,t){const{className:n,elementType:a,ownerState:s,externalForwardedProps:u,internalForwardedProps:c,shouldForwardComponentProp:h=!1,...f}=t,{component:m,slots:_={[e]:void 0},slotProps:C={[e]:void 0},...b}=u,T=_[e]||a,R=resolveComponentProps(C[e],s),{props:{component:A,...I},internalRef:P}=mergeSlotProps({className:n,...f,externalForwardedProps:e==="root"?b:void 0,externalSlotProps:R}),N=useForkRef(P,R?.ref,t.ref),S=e==="root"?A||m:A,k=appendOwnerState(T,{...e==="root"&&!m&&!_[e]&&c,...e!=="root"&&!_[e]&&c,...I,...S&&!h&&{as:S},...S&&h&&{component:S},ref:N},s);return[T,k]}function isFocusVisible(e){try{return e.matches(":focus-visible")}catch{}return!1}class LazyRipple{static create(){return new LazyRipple}static use(){const t=useLazyRef(LazyRipple.create).current,[n,a]=reactExports.useState(!1);return t.shouldMount=n,t.setShouldMount=a,reactExports.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=createControlledPromise(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function useLazyRipple(){return LazyRipple.use()}function createControlledPromise(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});return n.resolve=e,n.reject=t,n}function Ripple(e){const{className:t,classes:n,pulsate:a=!1,rippleX:s,rippleY:u,rippleSize:c,in:h,onExited:f,timeout:m}=e,[_,C]=reactExports.useState(!1),b=clsx(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),T={width:c,height:c,top:-(c/2)+u,left:-(c/2)+s},R=clsx(n.child,_&&n.childLeaving,a&&n.childPulsate);return!h&&!_&&C(!0),reactExports.useEffect(()=>{if(!h&&f!=null){const A=setTimeout(f,m);return()=>{clearTimeout(A)}}},[f,h,m]),jsxRuntimeExports.jsx("span",{className:b,style:T,children:jsxRuntimeExports.jsx("span",{className:R})})}const touchRippleClasses=generateUtilityClasses("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),DURATION=550,DELAY_RIPPLE=80,enterKeyframe=keyframes`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,exitKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pulsateKeyframe=keyframes`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TouchRippleRoot=styled("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),TouchRippleRipple=styled(Ripple,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${touchRippleClasses.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${enterKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${touchRippleClasses.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${touchRippleClasses.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${touchRippleClasses.childLeaving} {
    opacity: 0;
    animation-name: ${exitKeyframe};
    animation-duration: ${DURATION}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${touchRippleClasses.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pulsateKeyframe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,TouchRipple=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:u={},className:c,...h}=a,[f,m]=reactExports.useState([]),_=reactExports.useRef(0),C=reactExports.useRef(null);reactExports.useEffect(()=>{C.current&&(C.current(),C.current=null)},[f]);const b=reactExports.useRef(!1),T=useTimeout(),R=reactExports.useRef(null),A=reactExports.useRef(null),I=reactExports.useCallback(k=>{const{pulsate:D,rippleX:M,rippleY:j,rippleSize:H,cb:X}=k;m(K=>[...K,jsxRuntimeExports.jsx(TouchRippleRipple,{classes:{ripple:clsx(u.ripple,touchRippleClasses.ripple),rippleVisible:clsx(u.rippleVisible,touchRippleClasses.rippleVisible),ripplePulsate:clsx(u.ripplePulsate,touchRippleClasses.ripplePulsate),child:clsx(u.child,touchRippleClasses.child),childLeaving:clsx(u.childLeaving,touchRippleClasses.childLeaving),childPulsate:clsx(u.childPulsate,touchRippleClasses.childPulsate)},timeout:DURATION,pulsate:D,rippleX:M,rippleY:j,rippleSize:H},_.current)]),_.current+=1,C.current=X},[u]),P=reactExports.useCallback((k={},D={},M=()=>{})=>{const{pulsate:j=!1,center:H=s||D.pulsate,fakeElement:X=!1}=D;if(k?.type==="mousedown"&&b.current){b.current=!1;return}k?.type==="touchstart"&&(b.current=!0);const K=X?null:A.current,re=K?K.getBoundingClientRect():{width:0,height:0,left:0,top:0};let F,J,z;if(H||k===void 0||k.clientX===0&&k.clientY===0||!k.clientX&&!k.touches)F=Math.round(re.width/2),J=Math.round(re.height/2);else{const{clientX:$,clientY:L}=k.touches&&k.touches.length>0?k.touches[0]:k;F=Math.round($-re.left),J=Math.round(L-re.top)}if(H)z=Math.sqrt((2*re.width**2+re.height**2)/3),z%2===0&&(z+=1);else{const $=Math.max(Math.abs((K?K.clientWidth:0)-F),F)*2+2,L=Math.max(Math.abs((K?K.clientHeight:0)-J),J)*2+2;z=Math.sqrt($**2+L**2)}k?.touches?R.current===null&&(R.current=()=>{I({pulsate:j,rippleX:F,rippleY:J,rippleSize:z,cb:M})},T.start(DELAY_RIPPLE,()=>{R.current&&(R.current(),R.current=null)})):I({pulsate:j,rippleX:F,rippleY:J,rippleSize:z,cb:M})},[s,I,T]),N=reactExports.useCallback(()=>{P({},{pulsate:!0})},[P]),S=reactExports.useCallback((k,D)=>{if(T.clear(),k?.type==="touchend"&&R.current){R.current(),R.current=null,T.start(0,()=>{S(k,D)});return}R.current=null,m(M=>M.length>0?M.slice(1):M),C.current=D},[T]);return reactExports.useImperativeHandle(n,()=>({pulsate:N,start:P,stop:S}),[N,P,S]),jsxRuntimeExports.jsx(TouchRippleRoot,{className:clsx(touchRippleClasses.root,u.root,c),ref:A,...h,children:jsxRuntimeExports.jsx(TransitionGroup,{component:null,exit:!0,children:f})})});function getButtonBaseUtilityClass(e){return generateUtilityClass("MuiButtonBase",e)}const buttonBaseClasses=generateUtilityClasses("MuiButtonBase",["root","disabled","focusVisible"]),useUtilityClasses$x=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:a,classes:s}=e,c=composeClasses({root:["root",t&&"disabled",n&&"focusVisible"]},getButtonBaseUtilityClass,s);return n&&a&&(c.root+=` ${a}`),c},ButtonBaseRoot=styled("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${buttonBaseClasses.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),ButtonBase=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:u=!1,children:c,className:h,component:f="button",disabled:m=!1,disableRipple:_=!1,disableTouchRipple:C=!1,focusRipple:b=!1,focusVisibleClassName:T,LinkComponent:R="a",onBlur:A,onClick:I,onContextMenu:P,onDragLeave:N,onFocus:S,onFocusVisible:k,onKeyDown:D,onKeyUp:M,onMouseDown:j,onMouseLeave:H,onMouseUp:X,onTouchEnd:K,onTouchMove:re,onTouchStart:F,tabIndex:J=0,TouchRippleProps:z,touchRippleRef:$,type:L,...W}=a,U=reactExports.useRef(null),V=useLazyRipple(),B=useForkRef(V.ref,$),[Z,ne]=reactExports.useState(!1);m&&Z&&ne(!1),reactExports.useImperativeHandle(s,()=>({focusVisible:()=>{ne(!0),U.current.focus()}}),[]);const oe=V.shouldMount&&!_&&!m;reactExports.useEffect(()=>{Z&&b&&!_&&V.pulsate()},[_,b,Z,V]);const ce=useRippleHandler(V,"start",j,C),xe=useRippleHandler(V,"stop",P,C),de=useRippleHandler(V,"stop",N,C),G=useRippleHandler(V,"stop",X,C),Y=useRippleHandler(V,"stop",Ae=>{Z&&Ae.preventDefault(),H&&H(Ae)},C),te=useRippleHandler(V,"start",F,C),ee=useRippleHandler(V,"stop",K,C),se=useRippleHandler(V,"stop",re,C),ue=useRippleHandler(V,"stop",Ae=>{isFocusVisible(Ae.target)||ne(!1),A&&A(Ae)},!1),be=useEventCallback(Ae=>{U.current||(U.current=Ae.currentTarget),isFocusVisible(Ae.target)&&(ne(!0),k&&k(Ae)),S&&S(Ae)}),ye=()=>{const Ae=U.current;return f&&f!=="button"&&!(Ae.tagName==="A"&&Ae.href)},Re=useEventCallback(Ae=>{b&&!Ae.repeat&&Z&&Ae.key===" "&&V.stop(Ae,()=>{V.start(Ae)}),Ae.target===Ae.currentTarget&&ye()&&Ae.key===" "&&Ae.preventDefault(),D&&D(Ae),Ae.target===Ae.currentTarget&&ye()&&Ae.key==="Enter"&&!m&&(Ae.preventDefault(),I&&I(Ae))}),Le=useEventCallback(Ae=>{b&&Ae.key===" "&&Z&&!Ae.defaultPrevented&&V.stop(Ae,()=>{V.pulsate(Ae)}),M&&M(Ae),I&&Ae.target===Ae.currentTarget&&ye()&&Ae.key===" "&&!Ae.defaultPrevented&&I(Ae)});let Oe=f;Oe==="button"&&(W.href||W.to)&&(Oe=R);const Ue={};Oe==="button"?(Ue.type=L===void 0?"button":L,Ue.disabled=m):(!W.href&&!W.to&&(Ue.role="button"),m&&(Ue["aria-disabled"]=m));const qe=useForkRef(n,U),rt={...a,centerRipple:u,component:f,disabled:m,disableRipple:_,disableTouchRipple:C,focusRipple:b,tabIndex:J,focusVisible:Z},He=useUtilityClasses$x(rt);return jsxRuntimeExports.jsxs(ButtonBaseRoot,{as:Oe,className:clsx(He.root,h),ownerState:rt,onBlur:ue,onClick:I,onContextMenu:xe,onFocus:be,onKeyDown:Re,onKeyUp:Le,onMouseDown:ce,onMouseLeave:Y,onMouseUp:G,onDragLeave:de,onTouchEnd:ee,onTouchMove:se,onTouchStart:te,ref:qe,tabIndex:m?-1:J,type:L,...Ue,...W,children:[c,oe?jsxRuntimeExports.jsx(TouchRipple,{ref:B,center:u,...z}):null]})});function useRippleHandler(e,t,n,a=!1){return useEventCallback(s=>(n&&n(s),a||e[t](s),!0))}function hasCorrectMainProperty(e){return typeof e.main=="string"}function checkSimplePaletteColorValues(e,t=[]){if(!hasCorrectMainProperty(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function createSimplePaletteValueFilter(e=[]){return([,t])=>t&&checkSimplePaletteColorValues(t,e)}function getAlertUtilityClass(e){return generateUtilityClass("MuiAlert",e)}const alertClasses=generateUtilityClasses("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function getCircularProgressUtilityClass(e){return generateUtilityClass("MuiCircularProgress",e)}generateUtilityClasses("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const SIZE=44,circularRotateKeyframe=keyframes`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,circularDashKeyframe=keyframes`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,rotateAnimation=typeof circularRotateKeyframe!="string"?css`
        animation: ${circularRotateKeyframe} 1.4s linear infinite;
      `:null,dashAnimation=typeof circularDashKeyframe!="string"?css`
        animation: ${circularDashKeyframe} 1.4s ease-in-out infinite;
      `:null,useUtilityClasses$w=e=>{const{classes:t,variant:n,color:a,disableShrink:s}=e,u={root:["root",n,`color${capitalize(a)}`],svg:["svg"],circle:["circle",`circle${capitalize(n)}`,s&&"circleDisableShrink"]};return composeClasses(u,getCircularProgressUtilityClass,t)},CircularProgressRoot=styled("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${capitalize(n.color)}`]]}})(memoTheme(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:rotateAnimation||{animation:`${circularRotateKeyframe} 1.4s linear infinite`}},...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),CircularProgressSVG=styled("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),CircularProgressCircle=styled("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${capitalize(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(memoTheme(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:dashAnimation||{animation:`${circularDashKeyframe} 1.4s ease-in-out infinite`}}]}))),CircularProgress=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiCircularProgress"}),{className:s,color:u="primary",disableShrink:c=!1,size:h=40,style:f,thickness:m=3.6,value:_=0,variant:C="indeterminate",...b}=a,T={...a,color:u,disableShrink:c,size:h,thickness:m,value:_,variant:C},R=useUtilityClasses$w(T),A={},I={},P={};if(C==="determinate"){const N=2*Math.PI*((SIZE-m)/2);A.strokeDasharray=N.toFixed(3),P["aria-valuenow"]=Math.round(_),A.strokeDashoffset=`${((100-_)/100*N).toFixed(3)}px`,I.transform="rotate(-90deg)"}return jsxRuntimeExports.jsx(CircularProgressRoot,{className:clsx(R.root,s),style:{width:h,height:h,...I,...f},ownerState:T,ref:n,role:"progressbar",...P,...b,children:jsxRuntimeExports.jsx(CircularProgressSVG,{className:R.svg,ownerState:T,viewBox:`${SIZE/2} ${SIZE/2} ${SIZE} ${SIZE}`,children:jsxRuntimeExports.jsx(CircularProgressCircle,{className:R.circle,style:A,ownerState:T,cx:SIZE,cy:SIZE,r:(SIZE-m)/2,fill:"none",strokeWidth:m})})})});function getIconButtonUtilityClass(e){return generateUtilityClass("MuiIconButton",e)}const iconButtonClasses=generateUtilityClasses("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),useUtilityClasses$v=e=>{const{classes:t,disabled:n,color:a,edge:s,size:u,loading:c}=e,h={root:["root",c&&"loading",n&&"disabled",a!=="default"&&`color${capitalize(a)}`,s&&`edge${capitalize(s)}`,`size${capitalize(u)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return composeClasses(h,getIconButtonUtilityClass,t)},IconButtonRoot=styled(ButtonBase,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${capitalize(n.color)}`],n.edge&&t[`edge${capitalize(n.edge)}`],t[`size${capitalize(n.size)}`]]}})(memoTheme(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),memoTheme(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${iconButtonClasses.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${iconButtonClasses.loading}`]:{color:"transparent"}}))),IconButtonLoadingIndicator=styled("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),IconButton=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiIconButton"}),{edge:s=!1,children:u,className:c,color:h="default",disabled:f=!1,disableFocusRipple:m=!1,size:_="medium",id:C,loading:b=null,loadingIndicator:T,...R}=a,A=useId(C),I=T??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":A,color:"inherit",size:16}),P={...a,edge:s,color:h,disabled:f,disableFocusRipple:m,loading:b,loadingIndicator:I,size:_},N=useUtilityClasses$v(P);return jsxRuntimeExports.jsxs(IconButtonRoot,{id:b?A:C,className:clsx(N.root,c),centerRipple:!0,focusRipple:!m,disabled:f||b,ref:n,...R,ownerState:P,children:[typeof b=="boolean"&&jsxRuntimeExports.jsx("span",{className:N.loadingWrapper,style:{display:"contents"},children:jsxRuntimeExports.jsx(IconButtonLoadingIndicator,{className:N.loadingIndicator,ownerState:P,children:b&&I})}),u]})}),SuccessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"})),ReportProblemOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"})),ErrorOutlineIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),InfoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"})),ClearIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),useUtilityClasses$u=e=>{const{variant:t,color:n,severity:a,classes:s}=e,u={root:["root",`color${capitalize(n||a)}`,`${t}${capitalize(n||a)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return composeClasses(u,getAlertUtilityClass,s)},AlertRoot=styled(Paper,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${capitalize(n.color||n.severity)}`]]}})(memoTheme(({theme:e})=>{const t=e.palette.mode==="light"?e.darken:e.lighten,n=e.palette.mode==="light"?e.lighten:e.darken;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(createSimplePaletteValueFilter(["light"])).map(([a])=>({props:{colorSeverity:a,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${a}Color`]:t(e.palette[a].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${a}StandardBg`]:n(e.palette[a].light,.9),[`& .${alertClasses.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}}})),...Object.entries(e.palette).filter(createSimplePaletteValueFilter(["light"])).map(([a])=>({props:{colorSeverity:a,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${a}Color`]:t(e.palette[a].light,.6),border:`1px solid ${(e.vars||e).palette[a].light}`,[`& .${alertClasses.icon}`]:e.vars?{color:e.vars.palette.Alert[`${a}IconColor`]}:{color:e.palette[a].main}}})),...Object.entries(e.palette).filter(createSimplePaletteValueFilter(["dark"])).map(([a])=>({props:{colorSeverity:a,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${a}FilledColor`],backgroundColor:e.vars.palette.Alert[`${a}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[a].dark:e.palette[a].main,color:e.palette.getContrastText(e.palette[a].main)}}}))]}})),AlertIcon=styled("div",{name:"MuiAlert",slot:"Icon"})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),AlertMessage=styled("div",{name:"MuiAlert",slot:"Message"})({padding:"8px 0",minWidth:0,overflow:"auto"}),AlertAction=styled("div",{name:"MuiAlert",slot:"Action"})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),defaultIconMapping={success:jsxRuntimeExports.jsx(SuccessOutlinedIcon,{fontSize:"inherit"}),warning:jsxRuntimeExports.jsx(ReportProblemOutlinedIcon,{fontSize:"inherit"}),error:jsxRuntimeExports.jsx(ErrorOutlineIcon,{fontSize:"inherit"}),info:jsxRuntimeExports.jsx(InfoOutlinedIcon,{fontSize:"inherit"})},Alert=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiAlert"}),{action:s,children:u,className:c,closeText:h="Close",color:f,components:m={},componentsProps:_={},icon:C,iconMapping:b=defaultIconMapping,onClose:T,role:R="alert",severity:A="success",slotProps:I={},slots:P={},variant:N="standard",...S}=a,k={...a,color:f,severity:A,variant:N,colorSeverity:f||A},D=useUtilityClasses$u(k),M={slots:{closeButton:m.CloseButton,closeIcon:m.CloseIcon,...P},slotProps:{..._,...I}},[j,H]=useSlot("root",{ref:n,shouldForwardComponentProp:!0,className:clsx(D.root,c),elementType:AlertRoot,externalForwardedProps:{...M,...S},ownerState:k,additionalProps:{role:R,elevation:0}}),[X,K]=useSlot("icon",{className:D.icon,elementType:AlertIcon,externalForwardedProps:M,ownerState:k}),[re,F]=useSlot("message",{className:D.message,elementType:AlertMessage,externalForwardedProps:M,ownerState:k}),[J,z]=useSlot("action",{className:D.action,elementType:AlertAction,externalForwardedProps:M,ownerState:k}),[$,L]=useSlot("closeButton",{elementType:IconButton,externalForwardedProps:M,ownerState:k}),[W,U]=useSlot("closeIcon",{elementType:ClearIcon,externalForwardedProps:M,ownerState:k});return jsxRuntimeExports.jsxs(j,{...H,children:[C!==!1?jsxRuntimeExports.jsx(X,{...K,children:C||b[A]||defaultIconMapping[A]}):null,jsxRuntimeExports.jsx(re,{...F,children:u}),s!=null?jsxRuntimeExports.jsx(J,{...z,children:s}):null,s==null&&T?jsxRuntimeExports.jsx(J,{...z,children:jsxRuntimeExports.jsx($,{size:"small","aria-label":h,title:h,color:"inherit",onClick:T,...L,children:jsxRuntimeExports.jsx(W,{fontSize:"small",...U})})}):null]})});function getTypographyUtilityClass(e){return generateUtilityClass("MuiTypography",e)}const typographyClasses=generateUtilityClasses("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),v6Colors={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},extendSxProp=internal_createExtendSxProp(),useUtilityClasses$t=e=>{const{align:t,gutterBottom:n,noWrap:a,paragraph:s,variant:u,classes:c}=e,h={root:["root",u,e.align!=="inherit"&&`align${capitalize(t)}`,n&&"gutterBottom",a&&"noWrap",s&&"paragraph"]};return composeClasses(h,getTypographyUtilityClass,c)},TypographyRoot=styled("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${capitalize(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(memoTheme(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,n])=>t!=="inherit"&&n&&typeof n=="object").map(([t,n])=>({props:{variant:t},style:n})),...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${capitalize(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),defaultVariantMapping={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Typography=reactExports.forwardRef(function(t,n){const{color:a,...s}=useDefaultProps({props:t,name:"MuiTypography"}),u=!v6Colors[a],c=extendSxProp({...s,...u&&{color:a}}),{align:h="inherit",className:f,component:m,gutterBottom:_=!1,noWrap:C=!1,paragraph:b=!1,variant:T="body1",variantMapping:R=defaultVariantMapping,...A}=c,I={...c,align:h,color:a,className:f,component:m,gutterBottom:_,noWrap:C,paragraph:b,variant:T,variantMapping:R},P=m||(b?"p":R[T]||defaultVariantMapping[T])||"span",N=useUtilityClasses$t(I);return jsxRuntimeExports.jsx(TypographyRoot,{as:P,ref:n,className:clsx(N.root,f),...A,ownerState:I,style:{...h!=="inherit"&&{"--Typography-textAlign":h},...A.style}})});function useSlotProps(e){const{elementType:t,externalSlotProps:n,ownerState:a,skipResolvingSlotProps:s=!1,...u}=e,c=s?{}:resolveComponentProps(n,a),{props:h,internalRef:f}=mergeSlotProps({...u,externalSlotProps:c}),m=useForkRef(f,c?.ref,e.additionalProps?.ref);return appendOwnerState(t,{...h,ref:m},a)}function getReactElementRef(e){return parseInt(reactExports.version,10)>=19?e?.props?.ref||null:e?.ref||null}function getContainer$1(e){return typeof e=="function"?e():e}const Portal=reactExports.forwardRef(function(t,n){const{children:a,container:s,disablePortal:u=!1}=t,[c,h]=reactExports.useState(null),f=useForkRef(reactExports.isValidElement(a)?getReactElementRef(a):null,n);if(useEnhancedEffect(()=>{u||h(getContainer$1(s)||document.body)},[s,u]),useEnhancedEffect(()=>{if(c&&!u)return setRef(n,c),()=>{setRef(n,null)}},[n,c,u]),u){if(reactExports.isValidElement(a)){const m={ref:f};return reactExports.cloneElement(a,m)}return a}return c&&reactDomExports.createPortal(a,c)});function getStyleValue(e){return parseInt(e,10)||0}const styles$2={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function isObjectEmpty(e){for(const t in e)return!1;return!0}function isEmpty$1(e){return isObjectEmpty(e)||e.outerHeightStyle===0&&!e.overflowing}const TextareaAutosize=reactExports.forwardRef(function(t,n){const{onChange:a,maxRows:s,minRows:u=1,style:c,value:h,...f}=t,{current:m}=reactExports.useRef(h!=null),_=reactExports.useRef(null),C=useForkRef(n,_),b=reactExports.useRef(null),T=reactExports.useRef(null),R=reactExports.useCallback(()=>{const S=_.current,k=T.current;if(!S||!k)return;const M=ownerWindow(S).getComputedStyle(S);if(M.width==="0px")return{outerHeightStyle:0,overflowing:!1};k.style.width=M.width,k.value=S.value||t.placeholder||"x",k.value.slice(-1)===`
`&&(k.value+=" ");const j=M.boxSizing,H=getStyleValue(M.paddingBottom)+getStyleValue(M.paddingTop),X=getStyleValue(M.borderBottomWidth)+getStyleValue(M.borderTopWidth),K=k.scrollHeight;k.value="x";const re=k.scrollHeight;let F=K;u&&(F=Math.max(Number(u)*re,F)),s&&(F=Math.min(Number(s)*re,F)),F=Math.max(F,re);const J=F+(j==="border-box"?H+X:0),z=Math.abs(F-K)<=1;return{outerHeightStyle:J,overflowing:z}},[s,u,t.placeholder]),A=useEventCallback(()=>{const S=_.current,k=R();if(!S||!k||isEmpty$1(k))return!1;const D=k.outerHeightStyle;return b.current!=null&&b.current!==D}),I=reactExports.useCallback(()=>{const S=_.current,k=R();if(!S||!k||isEmpty$1(k))return;const D=k.outerHeightStyle;b.current!==D&&(b.current=D,S.style.height=`${D}px`),S.style.overflow=k.overflowing?"hidden":""},[R]),P=reactExports.useRef(-1);useEnhancedEffect(()=>{const S=debounce(I),k=_?.current;if(!k)return;const D=ownerWindow(k);D.addEventListener("resize",S);let M;return typeof ResizeObserver<"u"&&(M=new ResizeObserver(()=>{A()&&(M.unobserve(k),cancelAnimationFrame(P.current),I(),P.current=requestAnimationFrame(()=>{M.observe(k)}))}),M.observe(k)),()=>{S.clear(),cancelAnimationFrame(P.current),D.removeEventListener("resize",S),M&&M.disconnect()}},[R,I,A]),useEnhancedEffect(()=>{I()});const N=S=>{m||I();const k=S.target,D=k.value.length,M=k.value.endsWith(`
`),j=k.selectionStart===D;M&&j&&k.setSelectionRange(D,D),a&&a(S)};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("textarea",{value:h,onChange:N,ref:C,rows:u,style:c,...f}),jsxRuntimeExports.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:T,tabIndex:-1,style:{...styles$2.shadow,...c,paddingTop:0,paddingBottom:0}})]})});function isHostComponent(e){return typeof e=="string"}function formControlState({props:e,states:t,muiFormControl:n}){return t.reduce((a,s)=>(a[s]=e[s],n&&typeof e[s]>"u"&&(a[s]=n[s]),a),{})}const FormControlContext=reactExports.createContext(void 0);function useFormControl(){return reactExports.useContext(FormControlContext)}function hasValue(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function isFilled(e,t=!1){return e&&(hasValue(e.value)&&e.value!==""||t&&hasValue(e.defaultValue)&&e.defaultValue!=="")}function isAdornedStart(e){return e.startAdornment}function getInputBaseUtilityClass(e){return generateUtilityClass("MuiInputBase",e)}const inputBaseClasses=generateUtilityClasses("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var _InputGlobalStyles;const rootOverridesResolver=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${capitalize(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},inputOverridesResolver=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},useUtilityClasses$s=e=>{const{classes:t,color:n,disabled:a,error:s,endAdornment:u,focused:c,formControl:h,fullWidth:f,hiddenLabel:m,multiline:_,readOnly:C,size:b,startAdornment:T,type:R}=e,A={root:["root",`color${capitalize(n)}`,a&&"disabled",s&&"error",f&&"fullWidth",c&&"focused",h&&"formControl",b&&b!=="medium"&&`size${capitalize(b)}`,_&&"multiline",T&&"adornedStart",u&&"adornedEnd",m&&"hiddenLabel",C&&"readOnly"],input:["input",a&&"disabled",R==="search"&&"inputTypeSearch",_&&"inputMultiline",b==="small"&&"inputSizeSmall",m&&"inputHiddenLabel",T&&"inputAdornedStart",u&&"inputAdornedEnd",C&&"readOnly"]};return composeClasses(A,getInputBaseUtilityClass,t)},InputBaseRoot=styled("div",{name:"MuiInputBase",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${inputBaseClasses.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),InputBaseInput=styled("input",{name:"MuiInputBase",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},a={opacity:"0 !important"},s=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${inputBaseClasses.formControl} &`]:{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${inputBaseClasses.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:u})=>!u.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:u})=>u.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),InputGlobalStyles=globalCss({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),InputBase=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:u,autoFocus:c,className:h,color:f,components:m={},componentsProps:_={},defaultValue:C,disabled:b,disableInjectingGlobalStyles:T,endAdornment:R,error:A,fullWidth:I=!1,id:P,inputComponent:N="input",inputProps:S={},inputRef:k,margin:D,maxRows:M,minRows:j,multiline:H=!1,name:X,onBlur:K,onChange:re,onClick:F,onFocus:J,onKeyDown:z,onKeyUp:$,placeholder:L,readOnly:W,renderSuffix:U,rows:V,size:B,slotProps:Z={},slots:ne={},startAdornment:oe,type:ce="text",value:xe,...de}=a,G=S.value!=null?S.value:xe,{current:Y}=reactExports.useRef(G!=null),te=reactExports.useRef(),ee=reactExports.useCallback(Xe=>{},[]),se=useForkRef(te,k,S.ref,ee),[ue,be]=reactExports.useState(!1),ye=useFormControl(),Re=formControlState({props:a,muiFormControl:ye,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Re.focused=ye?ye.focused:ue,reactExports.useEffect(()=>{!ye&&b&&ue&&(be(!1),K&&K())},[ye,b,ue,K]);const Le=ye&&ye.onFilled,Oe=ye&&ye.onEmpty,Ue=reactExports.useCallback(Xe=>{isFilled(Xe)?Le&&Le():Oe&&Oe()},[Le,Oe]);useEnhancedEffect(()=>{Y&&Ue({value:G})},[G,Ue,Y]);const qe=Xe=>{J&&J(Xe),S.onFocus&&S.onFocus(Xe),ye&&ye.onFocus?ye.onFocus(Xe):be(!0)},rt=Xe=>{K&&K(Xe),S.onBlur&&S.onBlur(Xe),ye&&ye.onBlur?ye.onBlur(Xe):be(!1)},He=(Xe,...Jt)=>{if(!Y){const er=Xe.target||te.current;if(er==null)throw new Error(formatMuiErrorMessage(1));Ue({value:er.value})}S.onChange&&S.onChange(Xe,...Jt),re&&re(Xe,...Jt)};reactExports.useEffect(()=>{Ue(te.current)},[]);const Ae=Xe=>{te.current&&Xe.currentTarget===Xe.target&&te.current.focus(),F&&F(Xe)};let xt=N,lt=S;H&&xt==="input"&&(V?lt={type:void 0,minRows:V,maxRows:V,...lt}:lt={type:void 0,maxRows:M,minRows:j,...lt},xt=TextareaAutosize);const Gt=Xe=>{Ue(Xe.animationName==="mui-auto-fill-cancel"?te.current:{value:"x"})};reactExports.useEffect(()=>{ye&&ye.setAdornedStart(!!oe)},[ye,oe]);const ot={...a,color:Re.color||"primary",disabled:Re.disabled,endAdornment:R,error:Re.error,focused:Re.focused,formControl:ye,fullWidth:I,hiddenLabel:Re.hiddenLabel,multiline:H,size:Re.size,startAdornment:oe,type:ce},ze=useUtilityClasses$s(ot),et=ne.root||m.Root||InputBaseRoot,Qe=Z.root||_.root||{},Nt=ne.input||m.Input||InputBaseInput;return lt={...lt,...Z.input??_.input},jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[!T&&typeof InputGlobalStyles=="function"&&(_InputGlobalStyles||(_InputGlobalStyles=jsxRuntimeExports.jsx(InputGlobalStyles,{}))),jsxRuntimeExports.jsxs(et,{...Qe,ref:n,onClick:Ae,...de,...!isHostComponent(et)&&{ownerState:{...ot,...Qe.ownerState}},className:clsx(ze.root,Qe.className,h,W&&"MuiInputBase-readOnly"),children:[oe,jsxRuntimeExports.jsx(FormControlContext.Provider,{value:null,children:jsxRuntimeExports.jsx(Nt,{"aria-invalid":Re.error,"aria-describedby":s,autoComplete:u,autoFocus:c,defaultValue:C,disabled:Re.disabled,id:P,onAnimationStart:Gt,name:X,placeholder:L,readOnly:W,required:Re.required,rows:V,value:G,onKeyDown:z,onKeyUp:$,type:ce,...lt,...!isHostComponent(Nt)&&{as:xt,ownerState:{...ot,...lt.ownerState}},ref:se,className:clsx(ze.input,lt.className,W&&"MuiInputBase-readOnly"),onBlur:rt,onChange:He,onFocus:qe})}),R,U?U({...Re,startAdornment:oe}):null]})]})});function getInputUtilityClass(e){return generateUtilityClass("MuiInput",e)}const inputClasses={...inputBaseClasses,...generateUtilityClasses("MuiInput",["root","underline","input"])};function getOutlinedInputUtilityClass(e){return generateUtilityClass("MuiOutlinedInput",e)}const outlinedInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiOutlinedInput",["root","notchedOutline","input"])};function getFilledInputUtilityClass(e){return generateUtilityClass("MuiFilledInput",e)}const filledInputClasses={...inputBaseClasses,...generateUtilityClasses("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},ArrowDropDownIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M7 10l5 5 5-5z"})),styles$1={entering:{opacity:1},entered:{opacity:1}},Fade=reactExports.forwardRef(function(t,n){const a=useTheme(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:u,appear:c=!0,children:h,easing:f,in:m,onEnter:_,onEntered:C,onEntering:b,onExit:T,onExited:R,onExiting:A,style:I,timeout:P=s,TransitionComponent:N=Transition,...S}=t,k=reactExports.useRef(null),D=useForkRef(k,getReactElementRef(h),n),M=z=>$=>{if(z){const L=k.current;$===void 0?z(L):z(L,$)}},j=M(b),H=M((z,$)=>{reflow(z);const L=getTransitionProps({style:I,timeout:P,easing:f},{mode:"enter"});z.style.webkitTransition=a.transitions.create("opacity",L),z.style.transition=a.transitions.create("opacity",L),_&&_(z,$)}),X=M(C),K=M(A),re=M(z=>{const $=getTransitionProps({style:I,timeout:P,easing:f},{mode:"exit"});z.style.webkitTransition=a.transitions.create("opacity",$),z.style.transition=a.transitions.create("opacity",$),T&&T(z)}),F=M(R),J=z=>{u&&u(k.current,z)};return jsxRuntimeExports.jsx(N,{appear:c,in:m,nodeRef:k,onEnter:H,onEntered:X,onEntering:j,onExit:re,onExited:F,onExiting:K,addEndListener:J,timeout:P,...S,children:(z,{ownerState:$,...L})=>reactExports.cloneElement(h,{style:{opacity:0,visibility:z==="exited"&&!m?"hidden":void 0,...styles$1[z],...I,...h.props.style},ref:D,...L})})});function getBackdropUtilityClass(e){return generateUtilityClass("MuiBackdrop",e)}generateUtilityClasses("MuiBackdrop",["root","invisible"]);const useUtilityClasses$r=e=>{const{classes:t,invisible:n}=e;return composeClasses({root:["root",n&&"invisible"]},getBackdropUtilityClass,t)},BackdropRoot=styled("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Backdrop=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiBackdrop"}),{children:s,className:u,component:c="div",invisible:h=!1,open:f,components:m={},componentsProps:_={},slotProps:C={},slots:b={},TransitionComponent:T,transitionDuration:R,...A}=a,I={...a,component:c,invisible:h},P=useUtilityClasses$r(I),N={transition:T,root:m.Root,...b},S={..._,...C},k={component:c,slots:N,slotProps:S},[D,M]=useSlot("root",{elementType:BackdropRoot,externalForwardedProps:k,className:clsx(P.root,u),ownerState:I}),[j,H]=useSlot("transition",{elementType:Fade,externalForwardedProps:k,ownerState:I});return jsxRuntimeExports.jsx(j,{in:f,timeout:R,...A,...H,children:jsxRuntimeExports.jsx(D,{"aria-hidden":!0,...M,classes:P,ref:n,children:s})})}),boxClasses=generateUtilityClasses("MuiBox",["root"]),defaultTheme=createTheme(),Box=createBox({themeId:THEME_ID,defaultTheme,defaultClassName:boxClasses.root,generateClassName:ClassNameGenerator.generate});function getButtonUtilityClass(e){return generateUtilityClass("MuiButton",e)}const buttonClasses=generateUtilityClasses("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),ButtonGroupContext=reactExports.createContext({}),ButtonGroupButtonContext=reactExports.createContext(void 0),useUtilityClasses$q=e=>{const{color:t,disableElevation:n,fullWidth:a,size:s,variant:u,loading:c,loadingPosition:h,classes:f}=e,m={root:["root",c&&"loading",u,`${u}${capitalize(t)}`,`size${capitalize(s)}`,`${u}Size${capitalize(s)}`,`color${capitalize(t)}`,n&&"disableElevation",a&&"fullWidth",c&&`loadingPosition${capitalize(h)}`],startIcon:["icon","startIcon",`iconSize${capitalize(s)}`],endIcon:["icon","endIcon",`iconSize${capitalize(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},_=composeClasses(m,getButtonUtilityClass,f);return{...f,..._}},commonIconStyles=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ButtonRoot=styled(ButtonBase,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${capitalize(n.color)}`],t[`size${capitalize(n.size)}`],t[`${n.variant}Size${capitalize(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(memoTheme(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${buttonClasses.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${buttonClasses.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${buttonClasses.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${buttonClasses.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a},style:{"--variant-textColor":(e.vars||e).palette[a].main,"--variant-outlinedColor":(e.vars||e).palette[a].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[a].main,.5),"--variant-containedColor":(e.vars||e).palette[a].contrastText,"--variant-containedBg":(e.vars||e).palette[a].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[a].dark,"--variant-textBg":e.alpha((e.vars||e).palette[a].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[a].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[a].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${buttonClasses.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${buttonClasses.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${buttonClasses.loading}`]:{color:"transparent"}}}]}})),ButtonStartIcon=styled("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${capitalize(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...commonIconStyles]})),ButtonEndIcon=styled("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${capitalize(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...commonIconStyles]})),ButtonLoadingIndicator=styled("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),ButtonLoadingIconPlaceholder=styled("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Button=reactExports.forwardRef(function(t,n){const a=reactExports.useContext(ButtonGroupContext),s=reactExports.useContext(ButtonGroupButtonContext),u=resolveProps(a,t),c=useDefaultProps({props:u,name:"MuiButton"}),{children:h,color:f="primary",component:m="button",className:_,disabled:C=!1,disableElevation:b=!1,disableFocusRipple:T=!1,endIcon:R,focusVisibleClassName:A,fullWidth:I=!1,id:P,loading:N=null,loadingIndicator:S,loadingPosition:k="center",size:D="medium",startIcon:M,type:j,variant:H="text",...X}=c,K=useId(P),re=S??jsxRuntimeExports.jsx(CircularProgress,{"aria-labelledby":K,color:"inherit",size:16}),F={...c,color:f,component:m,disabled:C,disableElevation:b,disableFocusRipple:T,fullWidth:I,loading:N,loadingIndicator:re,loadingPosition:k,size:D,type:j,variant:H},J=useUtilityClasses$q(F),z=(M||N&&k==="start")&&jsxRuntimeExports.jsx(ButtonStartIcon,{className:J.startIcon,ownerState:F,children:M||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:J.loadingIconPlaceholder,ownerState:F})}),$=(R||N&&k==="end")&&jsxRuntimeExports.jsx(ButtonEndIcon,{className:J.endIcon,ownerState:F,children:R||jsxRuntimeExports.jsx(ButtonLoadingIconPlaceholder,{className:J.loadingIconPlaceholder,ownerState:F})}),L=s||"",W=typeof N=="boolean"?jsxRuntimeExports.jsx("span",{className:J.loadingWrapper,style:{display:"contents"},children:N&&jsxRuntimeExports.jsx(ButtonLoadingIndicator,{className:J.loadingIndicator,ownerState:F,children:re})}):null;return jsxRuntimeExports.jsxs(ButtonRoot,{ownerState:F,className:clsx(a.className,J.root,_,L),component:m,disabled:C||N,focusRipple:!T,focusVisibleClassName:clsx(J.focusVisible,A),ref:n,type:j,id:N?K:P,...X,classes:J,children:[z,k!=="end"&&W,h,k==="end"&&W,$]})});function getScrollbarSize(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function isOverflowing(e){const t=ownerDocument(e);return t.body===e?ownerWindow(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ariaHidden(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function getPaddingRight(e){return parseInt(ownerWindow(e).getComputedStyle(e).paddingRight,10)||0}function isAriaHiddenForbiddenOnElement(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),a=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||a}function ariaHiddenSiblings(e,t,n,a,s){const u=[t,n,...a];[].forEach.call(e.children,c=>{const h=!u.includes(c),f=!isAriaHiddenForbiddenOnElement(c);h&&f&&ariaHidden(c,s)})}function findIndexOf(e,t){let n=-1;return e.some((a,s)=>t(a)?(n=s,!0):!1),n}function handleContainer(e,t){const n=[],a=e.container;if(!t.disableScrollLock){if(isOverflowing(a)){const c=getScrollbarSize(ownerWindow(a));n.push({value:a.style.paddingRight,property:"padding-right",el:a}),a.style.paddingRight=`${getPaddingRight(a)+c}px`;const h=ownerDocument(a).querySelectorAll(".mui-fixed");[].forEach.call(h,f=>{n.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${getPaddingRight(f)+c}px`})}let u;if(a.parentNode instanceof DocumentFragment)u=ownerDocument(a).body;else{const c=a.parentElement,h=ownerWindow(a);u=c?.nodeName==="HTML"&&h.getComputedStyle(c).overflowY==="scroll"?c:a}n.push({value:u.style.overflow,property:"overflow",el:u},{value:u.style.overflowX,property:"overflow-x",el:u},{value:u.style.overflowY,property:"overflow-y",el:u}),u.style.overflow="hidden"}return()=>{n.forEach(({value:u,el:c,property:h})=>{u?c.style.setProperty(h,u):c.style.removeProperty(h)})}}function getHiddenSiblings(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class ModalManager{constructor(){this.modals=[],this.containers=[]}add(t,n){let a=this.modals.indexOf(t);if(a!==-1)return a;a=this.modals.length,this.modals.push(t),t.modalRef&&ariaHidden(t.modalRef,!1);const s=getHiddenSiblings(n);ariaHiddenSiblings(n,t.mount,t.modalRef,s,!0);const u=findIndexOf(this.containers,c=>c.container===n);return u!==-1?(this.containers[u].modals.push(t),a):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:s}),a)}mount(t,n){const a=findIndexOf(this.containers,u=>u.modals.includes(t)),s=this.containers[a];s.restore||(s.restore=handleContainer(s,n))}remove(t,n=!0){const a=this.modals.indexOf(t);if(a===-1)return a;const s=findIndexOf(this.containers,c=>c.modals.includes(t)),u=this.containers[s];if(u.modals.splice(u.modals.indexOf(t),1),this.modals.splice(a,1),u.modals.length===0)u.restore&&u.restore(),t.modalRef&&ariaHidden(t.modalRef,n),ariaHiddenSiblings(u.container,t.mount,t.modalRef,u.hiddenSiblings,!1),this.containers.splice(s,1);else{const c=u.modals[u.modals.length-1];c.modalRef&&ariaHidden(c.modalRef,!1)}return a}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const candidatesSelector=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function getTabIndex(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function isNonTabbableRadio(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=a=>e.ownerDocument.querySelector(`input[type="radio"]${a}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function isNodeMatchingSelectorFocusable(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||isNonTabbableRadio(e))}function defaultGetTabbable(e){const t=[],n=[];return Array.from(e.querySelectorAll(candidatesSelector)).forEach((a,s)=>{const u=getTabIndex(a);u===-1||!isNodeMatchingSelectorFocusable(a)||(u===0?t.push(a):n.push({documentOrder:s,tabIndex:u,node:a}))}),n.sort((a,s)=>a.tabIndex===s.tabIndex?a.documentOrder-s.documentOrder:a.tabIndex-s.tabIndex).map(a=>a.node).concat(t)}function defaultIsEnabled(){return!0}function FocusTrap(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:a=!1,disableRestoreFocus:s=!1,getTabbable:u=defaultGetTabbable,isEnabled:c=defaultIsEnabled,open:h}=e,f=reactExports.useRef(!1),m=reactExports.useRef(null),_=reactExports.useRef(null),C=reactExports.useRef(null),b=reactExports.useRef(null),T=reactExports.useRef(!1),R=reactExports.useRef(null),A=useForkRef(getReactElementRef(t),R),I=reactExports.useRef(null);reactExports.useEffect(()=>{!h||!R.current||(T.current=!n)},[n,h]),reactExports.useEffect(()=>{if(!h||!R.current)return;const S=ownerDocument(R.current);return R.current.contains(S.activeElement)||(R.current.hasAttribute("tabIndex")||R.current.setAttribute("tabIndex","-1"),T.current&&R.current.focus()),()=>{s||(C.current&&C.current.focus&&(f.current=!0,C.current.focus()),C.current=null)}},[h]),reactExports.useEffect(()=>{if(!h||!R.current)return;const S=ownerDocument(R.current),k=j=>{I.current=j,!(a||!c()||j.key!=="Tab")&&S.activeElement===R.current&&j.shiftKey&&(f.current=!0,_.current&&_.current.focus())},D=()=>{const j=R.current;if(j===null)return;if(!S.hasFocus()||!c()||f.current){f.current=!1;return}if(j.contains(S.activeElement)||a&&S.activeElement!==m.current&&S.activeElement!==_.current)return;if(S.activeElement!==b.current)b.current=null;else if(b.current!==null)return;if(!T.current)return;let H=[];if((S.activeElement===m.current||S.activeElement===_.current)&&(H=u(R.current)),H.length>0){const X=!!(I.current?.shiftKey&&I.current?.key==="Tab"),K=H[0],re=H[H.length-1];typeof K!="string"&&typeof re!="string"&&(X?re.focus():K.focus())}else j.focus()};S.addEventListener("focusin",D),S.addEventListener("keydown",k,!0);const M=setInterval(()=>{S.activeElement&&S.activeElement.tagName==="BODY"&&D()},50);return()=>{clearInterval(M),S.removeEventListener("focusin",D),S.removeEventListener("keydown",k,!0)}},[n,a,s,c,h,u]);const P=S=>{C.current===null&&(C.current=S.relatedTarget),T.current=!0,b.current=S.target;const k=t.props.onFocus;k&&k(S)},N=S=>{C.current===null&&(C.current=S.relatedTarget),T.current=!0};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{tabIndex:h?0:-1,onFocus:N,ref:m,"data-testid":"sentinelStart"}),reactExports.cloneElement(t,{ref:A,onFocus:P}),jsxRuntimeExports.jsx("div",{tabIndex:h?0:-1,onFocus:N,ref:_,"data-testid":"sentinelEnd"})]})}function getContainer(e){return typeof e=="function"?e():e}function getHasTransition(e){return e?e.props.hasOwnProperty("in"):!1}const noop$1=()=>{},manager=new ModalManager;function useModal$1(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:a=!1,closeAfterTransition:s=!1,onTransitionEnter:u,onTransitionExited:c,children:h,onClose:f,open:m,rootRef:_}=e,C=reactExports.useRef({}),b=reactExports.useRef(null),T=reactExports.useRef(null),R=useForkRef(T,_),[A,I]=reactExports.useState(!m),P=getHasTransition(h);let N=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(N=!1);const S=()=>ownerDocument(b.current),k=()=>(C.current.modalRef=T.current,C.current.mount=b.current,C.current),D=()=>{manager.mount(k(),{disableScrollLock:a}),T.current&&(T.current.scrollTop=0)},M=useEventCallback(()=>{const $=getContainer(t)||S().body;manager.add(k(),$),T.current&&D()}),j=()=>manager.isTopModal(k()),H=useEventCallback($=>{b.current=$,$&&(m&&j()?D():T.current&&ariaHidden(T.current,N))}),X=reactExports.useCallback(()=>{manager.remove(k(),N)},[N]);reactExports.useEffect(()=>()=>{X()},[X]),reactExports.useEffect(()=>{m?M():(!P||!s)&&X()},[m,X,P,s,M]);const K=$=>L=>{$.onKeyDown?.(L),!(L.key!=="Escape"||L.which===229||!j())&&(n||(L.stopPropagation(),f&&f(L,"escapeKeyDown")))},re=$=>L=>{$.onClick?.(L),L.target===L.currentTarget&&f&&f(L,"backdropClick")};return{getRootProps:($={})=>{const L=extractEventHandlers(e);delete L.onTransitionEnter,delete L.onTransitionExited;const W={...L,...$};return{role:"presentation",...W,onKeyDown:K(W),ref:R}},getBackdropProps:($={})=>{const L=$;return{"aria-hidden":!0,...L,onClick:re(L),open:m}},getTransitionProps:()=>{const $=()=>{I(!1),u&&u()},L=()=>{I(!0),c&&c(),s&&X()};return{onEnter:createChainedFunction($,h?.props.onEnter??noop$1),onExited:createChainedFunction(L,h?.props.onExited??noop$1)}},rootRef:R,portalRef:H,isTopModal:j,exited:A,hasTransition:P}}function getModalUtilityClass(e){return generateUtilityClass("MuiModal",e)}generateUtilityClasses("MuiModal",["root","hidden","backdrop"]);const useUtilityClasses$p=e=>{const{open:t,exited:n,classes:a}=e;return composeClasses({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},getModalUtilityClass,a)},ModalRoot=styled("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(memoTheme(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),ModalBackdrop=styled(Backdrop,{name:"MuiModal",slot:"Backdrop"})({zIndex:-1}),Modal=reactExports.forwardRef(function(t,n){const a=useDefaultProps({name:"MuiModal",props:t}),{BackdropComponent:s=ModalBackdrop,BackdropProps:u,classes:c,className:h,closeAfterTransition:f=!1,children:m,container:_,component:C,components:b={},componentsProps:T={},disableAutoFocus:R=!1,disableEnforceFocus:A=!1,disableEscapeKeyDown:I=!1,disablePortal:P=!1,disableRestoreFocus:N=!1,disableScrollLock:S=!1,hideBackdrop:k=!1,keepMounted:D=!1,onClose:M,onTransitionEnter:j,onTransitionExited:H,open:X,slotProps:K={},slots:re={},theme:F,...J}=a,z={...a,closeAfterTransition:f,disableAutoFocus:R,disableEnforceFocus:A,disableEscapeKeyDown:I,disablePortal:P,disableRestoreFocus:N,disableScrollLock:S,hideBackdrop:k,keepMounted:D},{getRootProps:$,getBackdropProps:L,getTransitionProps:W,portalRef:U,isTopModal:V,exited:B,hasTransition:Z}=useModal$1({...z,rootRef:n}),ne={...z,exited:B},oe=useUtilityClasses$p(ne),ce={};if(m.props.tabIndex===void 0&&(ce.tabIndex="-1"),Z){const{onEnter:ee,onExited:se}=W();ce.onEnter=ee,ce.onExited=se}const xe={slots:{root:b.Root,backdrop:b.Backdrop,...re},slotProps:{...T,...K}},[de,G]=useSlot("root",{ref:n,elementType:ModalRoot,externalForwardedProps:{...xe,...J,component:C},getSlotProps:$,ownerState:ne,className:clsx(h,oe?.root,!ne.open&&ne.exited&&oe?.hidden)}),[Y,te]=useSlot("backdrop",{ref:u?.ref,elementType:s,externalForwardedProps:xe,shouldForwardComponentProp:!0,additionalProps:u,getSlotProps:ee=>L({...ee,onClick:se=>{ee?.onClick&&ee.onClick(se)}}),className:clsx(u?.className,oe?.backdrop),ownerState:ne});return!D&&!X&&(!Z||B)?null:jsxRuntimeExports.jsx(Portal,{ref:U,container:_,disablePortal:P,children:jsxRuntimeExports.jsxs(de,{...G,children:[!k&&s?jsxRuntimeExports.jsx(Y,{...te}):null,jsxRuntimeExports.jsx(FocusTrap,{disableEnforceFocus:A,disableAutoFocus:R,disableRestoreFocus:N,isEnabled:V,open:X,children:reactExports.cloneElement(m,ce)})]})})});function getDialogUtilityClass(e){return generateUtilityClass("MuiDialog",e)}const dialogClasses=generateUtilityClasses("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),DialogContext=reactExports.createContext({}),DialogBackdrop=styled(Backdrop,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),useUtilityClasses$o=e=>{const{classes:t,scroll:n,maxWidth:a,fullWidth:s,fullScreen:u}=e,c={root:["root"],container:["container",`scroll${capitalize(n)}`],paper:["paper",`paperScroll${capitalize(n)}`,`paperWidth${capitalize(String(a))}`,s&&"paperFullWidth",u&&"paperFullScreen"]};return composeClasses(c,getDialogUtilityClass,t)},DialogRoot=styled(Modal,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),DialogContainer=styled("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${capitalize(n.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),DialogPaper=styled(Paper,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${capitalize(n.scroll)}`],t[`paperWidth${capitalize(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(memoTheme(({theme:e})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:t})=>!t.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${dialogClasses.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(e.breakpoints.values).filter(t=>t!=="xs").map(t=>({props:{maxWidth:t},style:{maxWidth:`${e.breakpoints.values[t]}${e.breakpoints.unit}`,[`&.${dialogClasses.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:t})=>t.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:t})=>t.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${dialogClasses.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Dialog=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiDialog"}),s=useTheme(),u={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":h,"aria-modal":f=!0,BackdropComponent:m,BackdropProps:_,children:C,className:b,disableEscapeKeyDown:T=!1,fullScreen:R=!1,fullWidth:A=!1,maxWidth:I="sm",onClick:P,onClose:N,open:S,PaperComponent:k=Paper,PaperProps:D={},scroll:M="paper",slots:j={},slotProps:H={},TransitionComponent:X=Fade,transitionDuration:K=u,TransitionProps:re,...F}=a,J={...a,disableEscapeKeyDown:T,fullScreen:R,fullWidth:A,maxWidth:I,scroll:M},z=useUtilityClasses$o(J),$=reactExports.useRef(),L=be=>{$.current=be.target===be.currentTarget},W=be=>{P&&P(be),$.current&&($.current=null,N&&N(be,"backdropClick"))},U=useId(h),V=reactExports.useMemo(()=>({titleId:U}),[U]),B={transition:X,...j},Z={transition:re,paper:D,backdrop:_,...H},ne={slots:B,slotProps:Z},[oe,ce]=useSlot("root",{elementType:DialogRoot,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:J,className:clsx(z.root,b),ref:n}),[xe,de]=useSlot("backdrop",{elementType:DialogBackdrop,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:J}),[G,Y]=useSlot("paper",{elementType:DialogPaper,shouldForwardComponentProp:!0,externalForwardedProps:ne,ownerState:J,className:clsx(z.paper,D.className)}),[te,ee]=useSlot("container",{elementType:DialogContainer,externalForwardedProps:ne,ownerState:J,className:z.container}),[se,ue]=useSlot("transition",{elementType:Fade,externalForwardedProps:ne,ownerState:J,additionalProps:{appear:!0,in:S,timeout:K,role:"presentation"}});return jsxRuntimeExports.jsx(oe,{closeAfterTransition:!0,slots:{backdrop:xe},slotProps:{backdrop:{transitionDuration:K,as:m,...de}},disableEscapeKeyDown:T,onClose:N,open:S,onClick:W,...ce,...F,children:jsxRuntimeExports.jsx(se,{...ue,children:jsxRuntimeExports.jsx(te,{onMouseDown:L,...ee,children:jsxRuntimeExports.jsx(G,{as:k,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":U,"aria-modal":f,...Y,children:jsxRuntimeExports.jsx(DialogContext.Provider,{value:V,children:C})})})})})});function getDialogActionsUtilityClass(e){return generateUtilityClass("MuiDialogActions",e)}generateUtilityClasses("MuiDialogActions",["root","spacing"]);const useUtilityClasses$n=e=>{const{classes:t,disableSpacing:n}=e;return composeClasses({root:["root",!n&&"spacing"]},getDialogActionsUtilityClass,t)},DialogActionsRoot=styled("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:e})=>!e.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),DialogActions=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiDialogActions"}),{className:s,disableSpacing:u=!1,...c}=a,h={...a,disableSpacing:u},f=useUtilityClasses$n(h);return jsxRuntimeExports.jsx(DialogActionsRoot,{className:clsx(f.root,s),ownerState:h,ref:n,...c})});function getDialogContentUtilityClass(e){return generateUtilityClass("MuiDialogContent",e)}generateUtilityClasses("MuiDialogContent",["root","dividers"]);function getDialogTitleUtilityClass(e){return generateUtilityClass("MuiDialogTitle",e)}const dialogTitleClasses=generateUtilityClasses("MuiDialogTitle",["root"]),useUtilityClasses$m=e=>{const{classes:t,dividers:n}=e;return composeClasses({root:["root",n&&"dividers"]},getDialogContentUtilityClass,t)},DialogContentRoot=styled("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(memoTheme(({theme:e})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${dialogTitleClasses.root} + &`]:{paddingTop:0}}}]}))),DialogContent=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiDialogContent"}),{className:s,dividers:u=!1,...c}=a,h={...a,dividers:u},f=useUtilityClasses$m(h);return jsxRuntimeExports.jsx(DialogContentRoot,{className:clsx(f.root,s),ownerState:h,ref:n,...c})});function getDialogContentTextUtilityClass(e){return generateUtilityClass("MuiDialogContentText",e)}generateUtilityClasses("MuiDialogContentText",["root"]);const useUtilityClasses$l=e=>{const{classes:t}=e,a=composeClasses({root:["root"]},getDialogContentTextUtilityClass,t);return{...t,...a}},DialogContentTextRoot=styled(Typography,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiDialogContentText",slot:"Root"})({}),DialogContentText=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiDialogContentText"}),{children:s,className:u,...c}=a,h=useUtilityClasses$l(c);return jsxRuntimeExports.jsx(DialogContentTextRoot,{component:"p",variant:"body1",color:"textSecondary",ref:n,ownerState:c,className:clsx(h.root,u),...a,classes:h})}),useUtilityClasses$k=e=>{const{classes:t}=e;return composeClasses({root:["root"]},getDialogTitleUtilityClass,t)},DialogTitleRoot=styled(Typography,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),DialogTitle=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiDialogTitle"}),{className:s,id:u,...c}=a,h=a,f=useUtilityClasses$k(h),{titleId:m=u}=reactExports.useContext(DialogContext);return jsxRuntimeExports.jsx(DialogTitleRoot,{component:"h2",className:clsx(f.root,s),ownerState:h,ref:n,variant:"h6",id:u??m,...c})}),dividerClasses=generateUtilityClasses("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);function getTranslateValue(e,t,n){const a=t.getBoundingClientRect(),s=n&&n.getBoundingClientRect(),u=ownerWindow(t);let c;if(t.fakeTransform)c=t.fakeTransform;else{const m=u.getComputedStyle(t);c=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("transform")}let h=0,f=0;if(c&&c!=="none"&&typeof c=="string"){const m=c.split("(")[1].split(")")[0].split(",");h=parseInt(m[4],10),f=parseInt(m[5],10)}return e==="left"?s?`translateX(${s.right+h-a.left}px)`:`translateX(${u.innerWidth+h-a.left}px)`:e==="right"?s?`translateX(-${a.right-s.left-h}px)`:`translateX(-${a.left+a.width-h}px)`:e==="up"?s?`translateY(${s.bottom+f-a.top}px)`:`translateY(${u.innerHeight+f-a.top}px)`:s?`translateY(-${a.top-s.top+a.height-f}px)`:`translateY(-${a.top+a.height-f}px)`}function resolveContainer(e){return typeof e=="function"?e():e}function setTranslateValue(e,t,n){const a=resolveContainer(n),s=getTranslateValue(e,t,a);s&&(t.style.webkitTransform=s,t.style.transform=s)}const Slide=reactExports.forwardRef(function(t,n){const a=useTheme(),s={enter:a.transitions.easing.easeOut,exit:a.transitions.easing.sharp},u={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{addEndListener:c,appear:h=!0,children:f,container:m,direction:_="down",easing:C=s,in:b,onEnter:T,onEntered:R,onEntering:A,onExit:I,onExited:P,onExiting:N,style:S,timeout:k=u,TransitionComponent:D=Transition,...M}=t,j=reactExports.useRef(null),H=useForkRef(getReactElementRef(f),j,n),X=U=>V=>{U&&(V===void 0?U(j.current):U(j.current,V))},K=X((U,V)=>{setTranslateValue(_,U,m),reflow(U),T&&T(U,V)}),re=X((U,V)=>{const B=getTransitionProps({timeout:k,style:S,easing:C},{mode:"enter"});U.style.webkitTransition=a.transitions.create("-webkit-transform",{...B}),U.style.transition=a.transitions.create("transform",{...B}),U.style.webkitTransform="none",U.style.transform="none",A&&A(U,V)}),F=X(R),J=X(N),z=X(U=>{const V=getTransitionProps({timeout:k,style:S,easing:C},{mode:"exit"});U.style.webkitTransition=a.transitions.create("-webkit-transform",V),U.style.transition=a.transitions.create("transform",V),setTranslateValue(_,U,m),I&&I(U)}),$=X(U=>{U.style.webkitTransition="",U.style.transition="",P&&P(U)}),L=U=>{c&&c(j.current,U)},W=reactExports.useCallback(()=>{j.current&&setTranslateValue(_,j.current,m)},[_,m]);return reactExports.useEffect(()=>{if(b||_==="down"||_==="right")return;const U=debounce(()=>{j.current&&setTranslateValue(_,j.current,m)}),V=ownerWindow(j.current);return V.addEventListener("resize",U),()=>{U.clear(),V.removeEventListener("resize",U)}},[_,b,m]),reactExports.useEffect(()=>{b||W()},[b,W]),jsxRuntimeExports.jsx(D,{nodeRef:j,onEnter:K,onEntered:F,onEntering:re,onExit:z,onExited:$,onExiting:J,addEndListener:L,appear:h,in:b,timeout:k,...M,children:(U,{ownerState:V,...B})=>reactExports.cloneElement(f,{ref:H,style:{visibility:U==="exited"&&!b?"hidden":void 0,...S,...f.props.style},...B})})});function getDrawerUtilityClass(e){return generateUtilityClass("MuiDrawer",e)}generateUtilityClasses("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const overridesResolver$2=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},useUtilityClasses$j=e=>{const{classes:t,anchor:n,variant:a}=e,s={root:["root",`anchor${capitalize(n)}`],docked:[(a==="permanent"||a==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${capitalize(n)}`,a!=="temporary"&&`paperAnchorDocked${capitalize(n)}`]};return composeClasses(s,getDrawerUtilityClass,t)},DrawerRoot=styled(Modal,{name:"MuiDrawer",slot:"Root",overridesResolver:overridesResolver$2})(memoTheme(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer}))),DrawerDockedRoot=styled("div",{shouldForwardProp:rootShouldForwardProp,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:overridesResolver$2})({flex:"0 0 auto"}),DrawerPaper=styled(Paper,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${capitalize(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${capitalize(n.anchor)}`]]}})(memoTheme(({theme:e})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:t})=>t.anchor==="left"&&t.variant!=="temporary",style:{borderRight:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="top"&&t.variant!=="temporary",style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="right"&&t.variant!=="temporary",style:{borderLeft:`1px solid ${(e.vars||e).palette.divider}`}},{props:({ownerState:t})=>t.anchor==="bottom"&&t.variant!=="temporary",style:{borderTop:`1px solid ${(e.vars||e).palette.divider}`}}]}))),oppositeDirection={left:"right",right:"left",top:"down",bottom:"up"};function isHorizontal(e){return["left","right"].includes(e)}function getAnchor({direction:e},t){return e==="rtl"&&isHorizontal(t)?oppositeDirection[t]:t}const Drawer=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiDrawer"}),s=useTheme(),u=useRtl(),c={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{anchor:h="left",BackdropProps:f,children:m,className:_,elevation:C=16,hideBackdrop:b=!1,ModalProps:{BackdropProps:T,...R}={},onClose:A,open:I=!1,PaperProps:P={},SlideProps:N,TransitionComponent:S,transitionDuration:k=c,variant:D="temporary",slots:M={},slotProps:j={},...H}=a,X=reactExports.useRef(!1);reactExports.useEffect(()=>{X.current=!0},[]);const K=getAnchor({direction:u?"rtl":"ltr"},h),F={...a,anchor:h,elevation:C,open:I,variant:D,...H},J=useUtilityClasses$j(F),z={slots:{transition:S,...M},slotProps:{paper:P,transition:N,...j,backdrop:mergeSlotProps$1(j.backdrop||{...f,...T},{transitionDuration:k})}},[$,L]=useSlot("root",{ref:n,elementType:DrawerRoot,className:clsx(J.root,J.modal,_),shouldForwardComponentProp:!0,ownerState:F,externalForwardedProps:{...z,...H,...R},additionalProps:{open:I,onClose:A,hideBackdrop:b,slots:{backdrop:z.slots.backdrop},slotProps:{backdrop:z.slotProps.backdrop}}}),[W,U]=useSlot("paper",{elementType:DrawerPaper,shouldForwardComponentProp:!0,className:clsx(J.paper,P.className),ownerState:F,externalForwardedProps:z,additionalProps:{elevation:D==="temporary"?C:0,square:!0}}),[V,B]=useSlot("docked",{elementType:DrawerDockedRoot,ref:n,className:clsx(J.root,J.docked,_),ownerState:F,externalForwardedProps:z,additionalProps:H}),[Z,ne]=useSlot("transition",{elementType:Slide,ownerState:F,externalForwardedProps:z,additionalProps:{in:I,direction:oppositeDirection[K],timeout:k,appear:X.current}}),oe=jsxRuntimeExports.jsx(W,{...U,children:m});if(D==="permanent")return jsxRuntimeExports.jsx(V,{...B,children:oe});const ce=jsxRuntimeExports.jsx(Z,{...ne,children:oe});return D==="persistent"?jsxRuntimeExports.jsx(V,{...B,children:ce}):jsxRuntimeExports.jsx($,{...L,children:ce})}),useUtilityClasses$i=e=>{const{classes:t,disableUnderline:n,startAdornment:a,endAdornment:s,size:u,hiddenLabel:c,multiline:h}=e,f={root:["root",!n&&"underline",a&&"adornedStart",s&&"adornedEnd",u==="small"&&`size${capitalize(u)}`,c&&"hiddenLabel",h&&"multiline"],input:["input"]},m=composeClasses(f,getFilledInputUtilityClass,t);return{...t,...m}},FilledInputRoot=styled(InputBaseRoot,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...rootOverridesResolver(e,t),!n.disableUnderline&&t.underline]}})(memoTheme(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",u=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a}},[`&.${filledInputClasses.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:a},[`&.${filledInputClasses.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:u},variants:[{props:({ownerState:c})=>!c.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${filledInputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${filledInputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline):n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${filledInputClasses.disabled}, .${filledInputClasses.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${filledInputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([c])=>({props:{disableUnderline:!1,color:c},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[c]?.main}`}}})),{props:({ownerState:c})=>c.startAdornment,style:{paddingLeft:12}},{props:({ownerState:c})=>c.endAdornment,style:{paddingRight:12}},{props:({ownerState:c})=>c.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:c,size:h})=>c.multiline&&h==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:c})=>c.multiline&&c.hiddenLabel&&c.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),FilledInputInput=styled(InputBaseInput,{name:"MuiFilledInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),FilledInput=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:u={},componentsProps:c,fullWidth:h=!1,hiddenLabel:f,inputComponent:m="input",multiline:_=!1,slotProps:C,slots:b={},type:T="text",...R}=a,A={...a,disableUnderline:s,fullWidth:h,inputComponent:m,multiline:_,type:T},I=useUtilityClasses$i(a),P={root:{ownerState:A},input:{ownerState:A}},N=C??c?deepmerge(P,C??c):P,S=b.root??u.Root??FilledInputRoot,k=b.input??u.Input??FilledInputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:S,input:k},slotProps:N,fullWidth:h,inputComponent:m,multiline:_,ref:n,type:T,...R,classes:I})});FilledInput.muiName="Input";function getFormControlUtilityClasses(e){return generateUtilityClass("MuiFormControl",e)}generateUtilityClasses("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const useUtilityClasses$h=e=>{const{classes:t,margin:n,fullWidth:a}=e,s={root:["root",n!=="none"&&`margin${capitalize(n)}`,a&&"fullWidth"]};return composeClasses(s,getFormControlUtilityClasses,t)},FormControlRoot=styled("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`margin${capitalize(n.margin)}`],n.fullWidth&&t.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),FormControl=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiFormControl"}),{children:s,className:u,color:c="primary",component:h="div",disabled:f=!1,error:m=!1,focused:_,fullWidth:C=!1,hiddenLabel:b=!1,margin:T="none",required:R=!1,size:A="medium",variant:I="outlined",...P}=a,N={...a,color:c,component:h,disabled:f,error:m,fullWidth:C,hiddenLabel:b,margin:T,required:R,size:A,variant:I},S=useUtilityClasses$h(N),[k,D]=reactExports.useState(()=>{let $=!1;return s&&reactExports.Children.forEach(s,L=>{if(!isMuiElement(L,["Input","Select"]))return;const W=isMuiElement(L,["Select"])?L.props.input:L;W&&isAdornedStart(W.props)&&($=!0)}),$}),[M,j]=reactExports.useState(()=>{let $=!1;return s&&reactExports.Children.forEach(s,L=>{isMuiElement(L,["Input","Select"])&&(isFilled(L.props,!0)||isFilled(L.props.inputProps,!0))&&($=!0)}),$}),[H,X]=reactExports.useState(!1);f&&H&&X(!1);const K=_!==void 0&&!f?_:H;let re;reactExports.useRef(!1);const F=reactExports.useCallback(()=>{j(!0)},[]),J=reactExports.useCallback(()=>{j(!1)},[]),z=reactExports.useMemo(()=>({adornedStart:k,setAdornedStart:D,color:c,disabled:f,error:m,filled:M,focused:K,fullWidth:C,hiddenLabel:b,size:A,onBlur:()=>{X(!1)},onFocus:()=>{X(!0)},onEmpty:J,onFilled:F,registerEffect:re,required:R,variant:I}),[k,c,f,m,M,K,C,b,re,J,F,R,A,I]);return jsxRuntimeExports.jsx(FormControlContext.Provider,{value:z,children:jsxRuntimeExports.jsx(FormControlRoot,{as:h,ownerState:N,className:clsx(S.root,u),ref:n,...P,children:s})})});function getFormHelperTextUtilityClasses(e){return generateUtilityClass("MuiFormHelperText",e)}const formHelperTextClasses=generateUtilityClasses("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var _span$2;const useUtilityClasses$g=e=>{const{classes:t,contained:n,size:a,disabled:s,error:u,filled:c,focused:h,required:f}=e,m={root:["root",s&&"disabled",u&&"error",a&&`size${capitalize(a)}`,n&&"contained",h&&"focused",c&&"filled",f&&"required"]};return composeClasses(m,getFormHelperTextUtilityClasses,t)},FormHelperTextRoot=styled("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${capitalize(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(memoTheme(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${formHelperTextClasses.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${formHelperTextClasses.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),FormHelperText=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiFormHelperText"}),{children:s,className:u,component:c="p",disabled:h,error:f,filled:m,focused:_,margin:C,required:b,variant:T,...R}=a,A=useFormControl(),I=formControlState({props:a,muiFormControl:A,states:["variant","size","disabled","error","filled","focused","required"]}),P={...a,component:c,contained:I.variant==="filled"||I.variant==="outlined",variant:I.variant,size:I.size,disabled:I.disabled,error:I.error,filled:I.filled,focused:I.focused,required:I.required};delete P.ownerState;const N=useUtilityClasses$g(P);return jsxRuntimeExports.jsx(FormHelperTextRoot,{as:c,className:clsx(N.root,u),ref:n,...R,ownerState:P,children:s===" "?_span$2||(_span$2=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):s})});function getFormLabelUtilityClasses(e){return generateUtilityClass("MuiFormLabel",e)}const formLabelClasses=generateUtilityClasses("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),useUtilityClasses$f=e=>{const{classes:t,color:n,focused:a,disabled:s,error:u,filled:c,required:h}=e,f={root:["root",`color${capitalize(n)}`,s&&"disabled",u&&"error",c&&"filled",a&&"focused",h&&"required"],asterisk:["asterisk",u&&"error"]};return composeClasses(f,getFormLabelUtilityClasses,t)},FormLabelRoot=styled("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color==="secondary"&&t.colorSecondary,n.filled&&t.filled]}})(memoTheme(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([t])=>({props:{color:t},style:{[`&.${formLabelClasses.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${formLabelClasses.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${formLabelClasses.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),AsteriskComponent=styled("span",{name:"MuiFormLabel",slot:"Asterisk"})(memoTheme(({theme:e})=>({[`&.${formLabelClasses.error}`]:{color:(e.vars||e).palette.error.main}}))),FormLabel=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiFormLabel"}),{children:s,className:u,color:c,component:h="label",disabled:f,error:m,filled:_,focused:C,required:b,...T}=a,R=useFormControl(),A=formControlState({props:a,muiFormControl:R,states:["color","required","focused","disabled","error","filled"]}),I={...a,color:A.color||"primary",component:h,disabled:A.disabled,error:A.error,filled:A.filled,focused:A.focused,required:A.required},P=useUtilityClasses$f(I);return jsxRuntimeExports.jsxs(FormLabelRoot,{as:h,ownerState:I,className:clsx(P.root,u),ref:n,...T,children:[s,A.required&&jsxRuntimeExports.jsxs(AsteriskComponent,{ownerState:I,"aria-hidden":!0,className:P.asterisk,children:[" ","*"]})]})});function getScale(e){return`scale(${e}, ${e**2})`}const styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},isWebKit154=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Grow=reactExports.forwardRef(function(t,n){const{addEndListener:a,appear:s=!0,children:u,easing:c,in:h,onEnter:f,onEntered:m,onEntering:_,onExit:C,onExited:b,onExiting:T,style:R,timeout:A="auto",TransitionComponent:I=Transition,...P}=t,N=useTimeout(),S=reactExports.useRef(),k=useTheme(),D=reactExports.useRef(null),M=useForkRef(D,getReactElementRef(u),n),j=$=>L=>{if($){const W=D.current;L===void 0?$(W):$(W,L)}},H=j(_),X=j(($,L)=>{reflow($);const{duration:W,delay:U,easing:V}=getTransitionProps({style:R,timeout:A,easing:c},{mode:"enter"});let B;A==="auto"?(B=k.transitions.getAutoHeightDuration($.clientHeight),S.current=B):B=W,$.style.transition=[k.transitions.create("opacity",{duration:B,delay:U}),k.transitions.create("transform",{duration:isWebKit154?B:B*.666,delay:U,easing:V})].join(","),f&&f($,L)}),K=j(m),re=j(T),F=j($=>{const{duration:L,delay:W,easing:U}=getTransitionProps({style:R,timeout:A,easing:c},{mode:"exit"});let V;A==="auto"?(V=k.transitions.getAutoHeightDuration($.clientHeight),S.current=V):V=L,$.style.transition=[k.transitions.create("opacity",{duration:V,delay:W}),k.transitions.create("transform",{duration:isWebKit154?V:V*.666,delay:isWebKit154?W:W||V*.333,easing:U})].join(","),$.style.opacity=0,$.style.transform=getScale(.75),C&&C($)}),J=j(b),z=$=>{A==="auto"&&N.start(S.current||0,$),a&&a(D.current,$)};return jsxRuntimeExports.jsx(I,{appear:s,in:h,nodeRef:D,onEnter:X,onEntered:K,onEntering:H,onExit:F,onExited:J,onExiting:re,addEndListener:z,timeout:A==="auto"?null:A,...P,children:($,{ownerState:L,...W})=>reactExports.cloneElement(u,{style:{opacity:0,transform:getScale(.75),visibility:$==="exited"&&!h?"hidden":void 0,...styles[$],...R,...u.props.style},ref:M,...W})})});Grow&&(Grow.muiSupportAuto=!0);const useUtilityClasses$e=e=>{const{classes:t,disableUnderline:n}=e,s=composeClasses({root:["root",!n&&"underline"],input:["input"]},getInputUtilityClass,t);return{...t,...s}},InputRoot=styled(InputBaseRoot,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...rootOverridesResolver(e,t),!n.disableUnderline&&t.underline]}})(memoTheme(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=e.alpha(e.vars.palette.common.onBackground,e.vars.opacity.inputUnderline)),{position:"relative",variants:[{props:({ownerState:a})=>a.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:a})=>!a.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${inputClasses.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${inputClasses.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${inputClasses.disabled}, .${inputClasses.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${inputClasses.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([a])=>({props:{color:a,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[a].main}`}}}))]}})),InputInput=styled(InputBaseInput,{name:"MuiInput",slot:"Input",overridesResolver:inputOverridesResolver})({}),Input=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiInput"}),{disableUnderline:s=!1,components:u={},componentsProps:c,fullWidth:h=!1,inputComponent:f="input",multiline:m=!1,slotProps:_,slots:C={},type:b="text",...T}=a,R=useUtilityClasses$e(a),I={root:{ownerState:{disableUnderline:s}}},P=_??c?deepmerge(_??c,I):I,N=C.root??u.Root??InputRoot,S=C.input??u.Input??InputInput;return jsxRuntimeExports.jsx(InputBase,{slots:{root:N,input:S},slotProps:P,fullWidth:h,inputComponent:f,multiline:m,ref:n,type:b,...T,classes:R})});Input.muiName="Input";function getInputLabelUtilityClasses(e){return generateUtilityClass("MuiInputLabel",e)}generateUtilityClasses("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const useUtilityClasses$d=e=>{const{classes:t,formControl:n,size:a,shrink:s,disableAnimation:u,variant:c,required:h}=e,f={root:["root",n&&"formControl",!u&&"animated",s&&"shrink",a&&a!=="medium"&&`size${capitalize(a)}`,c],asterisk:[h&&"asterisk"]},m=composeClasses(f,getInputLabelUtilityClasses,t);return{...t,...m}},InputLabelRoot=styled(FormLabel,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${formLabelClasses.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(memoTheme(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:a})=>t==="filled"&&n.shrink&&a==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),InputLabel=reactExports.forwardRef(function(t,n){const a=useDefaultProps({name:"MuiInputLabel",props:t}),{disableAnimation:s=!1,margin:u,shrink:c,variant:h,className:f,...m}=a,_=useFormControl();let C=c;typeof C>"u"&&_&&(C=_.filled||_.focused||_.adornedStart);const b=formControlState({props:a,muiFormControl:_,states:["size","variant","required","focused"]}),T={...a,disableAnimation:s,formControl:_,shrink:C,size:b.size,variant:b.variant,required:b.required,focused:b.focused},R=useUtilityClasses$d(T);return jsxRuntimeExports.jsx(InputLabelRoot,{"data-shrink":C,ref:n,className:clsx(R.root,f),...m,ownerState:T,classes:R})}),ListContext=reactExports.createContext({});function getListUtilityClass(e){return generateUtilityClass("MuiList",e)}generateUtilityClasses("MuiList",["root","padding","dense","subheader"]);const useUtilityClasses$c=e=>{const{classes:t,disablePadding:n,dense:a,subheader:s}=e;return composeClasses({root:["root",!n&&"padding",a&&"dense",s&&"subheader"]},getListUtilityClass,t)},ListRoot=styled("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),List=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiList"}),{children:s,className:u,component:c="ul",dense:h=!1,disablePadding:f=!1,subheader:m,..._}=a,C=reactExports.useMemo(()=>({dense:h}),[h]),b={...a,component:c,dense:h,disablePadding:f},T=useUtilityClasses$c(b);return jsxRuntimeExports.jsx(ListContext.Provider,{value:C,children:jsxRuntimeExports.jsxs(ListRoot,{as:c,className:clsx(T.root,u),ref:n,ownerState:b,..._,children:[m,s]})})});function getListItemButtonUtilityClass(e){return generateUtilityClass("MuiListItemButton",e)}const listItemButtonClasses=generateUtilityClasses("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),overridesResolver$1=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},useUtilityClasses$b=e=>{const{alignItems:t,classes:n,dense:a,disabled:s,disableGutters:u,divider:c,selected:h}=e,m=composeClasses({root:["root",a&&"dense",!u&&"gutters",c&&"divider",s&&"disabled",t==="flex-start"&&"alignItemsFlexStart",h&&"selected"]},getListItemButtonUtilityClass,n);return{...n,...m}},ListItemButtonRoot=styled(ButtonBase,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:overridesResolver$1})(memoTheme(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${listItemButtonClasses.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${listItemButtonClasses.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${listItemButtonClasses.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${listItemButtonClasses.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${listItemButtonClasses.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.dense,style:{paddingTop:4,paddingBottom:4}}]}))),ListItemButton=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiListItemButton"}),{alignItems:s="center",autoFocus:u=!1,component:c="div",children:h,dense:f=!1,disableGutters:m=!1,divider:_=!1,focusVisibleClassName:C,selected:b=!1,className:T,...R}=a,A=reactExports.useContext(ListContext),I=reactExports.useMemo(()=>({dense:f||A.dense||!1,alignItems:s,disableGutters:m}),[s,A.dense,f,m]),P=reactExports.useRef(null);useEnhancedEffect(()=>{u&&P.current&&P.current.focus()},[u]);const N={...a,alignItems:s,dense:I.dense,disableGutters:m,divider:_,selected:b},S=useUtilityClasses$b(N),k=useForkRef(P,n);return jsxRuntimeExports.jsx(ListContext.Provider,{value:I,children:jsxRuntimeExports.jsx(ListItemButtonRoot,{ref:k,href:R.href||R.to,component:(R.href||R.to)&&c==="div"?"button":c,focusVisibleClassName:clsx(S.focusVisible,C),ownerState:N,className:clsx(S.root,T),...R,classes:S,children:h})})});function getListItemIconUtilityClass(e){return generateUtilityClass("MuiListItemIcon",e)}const listItemIconClasses=generateUtilityClasses("MuiListItemIcon",["root","alignItemsFlexStart"]),useUtilityClasses$a=e=>{const{alignItems:t,classes:n}=e;return composeClasses({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},getListItemIconUtilityClass,n)},ListItemIconRoot=styled("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(memoTheme(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),ListItemIcon=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiListItemIcon"}),{className:s,...u}=a,c=reactExports.useContext(ListContext),h={...a,alignItems:c.alignItems},f=useUtilityClasses$a(h);return jsxRuntimeExports.jsx(ListItemIconRoot,{className:clsx(f.root,s),ownerState:h,ref:n,...u})});function getListItemTextUtilityClass(e){return generateUtilityClass("MuiListItemText",e)}const listItemTextClasses=generateUtilityClasses("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),useUtilityClasses$9=e=>{const{classes:t,inset:n,primary:a,secondary:s,dense:u}=e;return composeClasses({root:["root",n&&"inset",u&&"dense",a&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},getListItemTextUtilityClass,t)},ListItemTextRoot=styled("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${listItemTextClasses.primary}`]:t.primary},{[`& .${listItemTextClasses.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${typographyClasses.root}:where(& .${listItemTextClasses.primary})`]:{display:"block"},[`.${typographyClasses.root}:where(& .${listItemTextClasses.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),ListItemText=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiListItemText"}),{children:s,className:u,disableTypography:c=!1,inset:h=!1,primary:f,primaryTypographyProps:m,secondary:_,secondaryTypographyProps:C,slots:b={},slotProps:T={},...R}=a,{dense:A}=reactExports.useContext(ListContext);let I=f??s,P=_;const N={...a,disableTypography:c,inset:h,primary:!!I,secondary:!!P,dense:A},S=useUtilityClasses$9(N),k={slots:b,slotProps:{primary:m,secondary:C,...T}},[D,M]=useSlot("root",{className:clsx(S.root,u),elementType:ListItemTextRoot,externalForwardedProps:{...k,...R},ownerState:N,ref:n}),[j,H]=useSlot("primary",{className:S.primary,elementType:Typography,externalForwardedProps:k,ownerState:N}),[X,K]=useSlot("secondary",{className:S.secondary,elementType:Typography,externalForwardedProps:k,ownerState:N});return I!=null&&I.type!==Typography&&!c&&(I=jsxRuntimeExports.jsx(j,{variant:A?"body2":"body1",component:H?.variant?void 0:"span",...H,children:I})),P!=null&&P.type!==Typography&&!c&&(P=jsxRuntimeExports.jsx(X,{variant:"body2",color:"textSecondary",...K,children:P})),jsxRuntimeExports.jsxs(D,{...M,children:[I,P]})});function nextItem(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function previousItem(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function textCriteriaMatches(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function moveFocus(e,t,n,a,s,u){let c=!1,h=s(e,t,t?n:!1);for(;h;){if(h===e.firstChild){if(c)return!1;c=!0}const f=a?!1:h.disabled||h.getAttribute("aria-disabled")==="true";if(!h.hasAttribute("tabindex")||!textCriteriaMatches(h,u)||f)h=s(e,h,n);else return h.focus(),!0}return!1}const MenuList=reactExports.forwardRef(function(t,n){const{actions:a,autoFocus:s=!1,autoFocusItem:u=!1,children:c,className:h,disabledItemsFocusable:f=!1,disableListWrap:m=!1,onKeyDown:_,variant:C="selectedMenu",...b}=t,T=reactExports.useRef(null),R=reactExports.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});useEnhancedEffect(()=>{s&&T.current.focus()},[s]),reactExports.useImperativeHandle(a,()=>({adjustStyleForScrollbar:(S,{direction:k})=>{const D=!T.current.style.width;if(S.clientHeight<T.current.clientHeight&&D){const M=`${getScrollbarSize(ownerWindow(S))}px`;T.current.style[k==="rtl"?"paddingLeft":"paddingRight"]=M,T.current.style.width=`calc(100% + ${M})`}return T.current}}),[]);const A=S=>{const k=T.current,D=S.key;if(S.ctrlKey||S.metaKey||S.altKey){_&&_(S);return}const j=ownerDocument(k).activeElement;if(D==="ArrowDown")S.preventDefault(),moveFocus(k,j,m,f,nextItem);else if(D==="ArrowUp")S.preventDefault(),moveFocus(k,j,m,f,previousItem);else if(D==="Home")S.preventDefault(),moveFocus(k,null,m,f,nextItem);else if(D==="End")S.preventDefault(),moveFocus(k,null,m,f,previousItem);else if(D.length===1){const H=R.current,X=D.toLowerCase(),K=performance.now();H.keys.length>0&&(K-H.lastTime>500?(H.keys=[],H.repeating=!0,H.previousKeyMatched=!0):H.repeating&&X!==H.keys[0]&&(H.repeating=!1)),H.lastTime=K,H.keys.push(X);const re=j&&!H.repeating&&textCriteriaMatches(j,H);H.previousKeyMatched&&(re||moveFocus(k,j,!1,f,nextItem,H))?S.preventDefault():H.previousKeyMatched=!1}_&&_(S)},I=useForkRef(T,n);let P=-1;reactExports.Children.forEach(c,(S,k)=>{if(!reactExports.isValidElement(S)){P===k&&(P+=1,P>=c.length&&(P=-1));return}S.props.disabled||(C==="selectedMenu"&&S.props.selected||P===-1)&&(P=k),P===k&&(S.props.disabled||S.props.muiSkipListHighlight||S.type.muiSkipListHighlight)&&(P+=1,P>=c.length&&(P=-1))});const N=reactExports.Children.map(c,(S,k)=>{if(k===P){const D={};return u&&(D.autoFocus=!0),S.props.tabIndex===void 0&&C==="selectedMenu"&&(D.tabIndex=0),reactExports.cloneElement(S,D)}return S});return jsxRuntimeExports.jsx(List,{role:"menu",ref:I,className:h,onKeyDown:A,tabIndex:s?0:-1,...b,children:N})});function getPopoverUtilityClass(e){return generateUtilityClass("MuiPopover",e)}generateUtilityClasses("MuiPopover",["root","paper"]);function getOffsetTop(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function getOffsetLeft(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function getTransformOriginValue(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function resolveAnchorEl(e){return typeof e=="function"?e():e}const useUtilityClasses$8=e=>{const{classes:t}=e;return composeClasses({root:["root"],paper:["paper"]},getPopoverUtilityClass,t)},PopoverRoot=styled(Modal,{name:"MuiPopover",slot:"Root"})({}),PopoverPaper=styled(Paper,{name:"MuiPopover",slot:"Paper"})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Popover=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiPopover"}),{action:s,anchorEl:u,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:h,anchorReference:f="anchorEl",children:m,className:_,container:C,elevation:b=8,marginThreshold:T=16,open:R,PaperProps:A={},slots:I={},slotProps:P={},transformOrigin:N={vertical:"top",horizontal:"left"},TransitionComponent:S,transitionDuration:k="auto",TransitionProps:D={},disableScrollLock:M=!1,...j}=a,H=reactExports.useRef(),X={...a,anchorOrigin:c,anchorReference:f,elevation:b,marginThreshold:T,transformOrigin:N,TransitionComponent:S,transitionDuration:k,TransitionProps:D},K=useUtilityClasses$8(X),re=reactExports.useCallback(()=>{if(f==="anchorPosition")return h;const ee=resolveAnchorEl(u),ue=(ee&&ee.nodeType===1?ee:ownerDocument(H.current).body).getBoundingClientRect();return{top:ue.top+getOffsetTop(ue,c.vertical),left:ue.left+getOffsetLeft(ue,c.horizontal)}},[u,c.horizontal,c.vertical,h,f]),F=reactExports.useCallback(ee=>({vertical:getOffsetTop(ee,N.vertical),horizontal:getOffsetLeft(ee,N.horizontal)}),[N.horizontal,N.vertical]),J=reactExports.useCallback(ee=>{const se={width:ee.offsetWidth,height:ee.offsetHeight},ue=F(se);if(f==="none")return{top:null,left:null,transformOrigin:getTransformOriginValue(ue)};const be=re();let ye=be.top-ue.vertical,Re=be.left-ue.horizontal;const Le=ye+se.height,Oe=Re+se.width,Ue=ownerWindow(resolveAnchorEl(u)),qe=Ue.innerHeight-T,rt=Ue.innerWidth-T;if(T!==null&&ye<T){const He=ye-T;ye-=He,ue.vertical+=He}else if(T!==null&&Le>qe){const He=Le-qe;ye-=He,ue.vertical+=He}if(T!==null&&Re<T){const He=Re-T;Re-=He,ue.horizontal+=He}else if(Oe>rt){const He=Oe-rt;Re-=He,ue.horizontal+=He}return{top:`${Math.round(ye)}px`,left:`${Math.round(Re)}px`,transformOrigin:getTransformOriginValue(ue)}},[u,f,re,F,T]),[z,$]=reactExports.useState(R),L=reactExports.useCallback(()=>{const ee=H.current;if(!ee)return;const se=J(ee);se.top!==null&&ee.style.setProperty("top",se.top),se.left!==null&&(ee.style.left=se.left),ee.style.transformOrigin=se.transformOrigin,$(!0)},[J]);reactExports.useEffect(()=>(M&&window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L)),[u,M,L]);const W=()=>{L()},U=()=>{$(!1)};reactExports.useEffect(()=>{R&&L()}),reactExports.useImperativeHandle(s,()=>R?{updatePosition:()=>{L()}}:null,[R,L]),reactExports.useEffect(()=>{if(!R)return;const ee=debounce(()=>{L()}),se=ownerWindow(resolveAnchorEl(u));return se.addEventListener("resize",ee),()=>{ee.clear(),se.removeEventListener("resize",ee)}},[u,R,L]);let V=k;const B={slots:{transition:S,...I},slotProps:{transition:D,paper:A,...P}},[Z,ne]=useSlot("transition",{elementType:Grow,externalForwardedProps:B,ownerState:X,getSlotProps:ee=>({...ee,onEntering:(se,ue)=>{ee.onEntering?.(se,ue),W()},onExited:se=>{ee.onExited?.(se),U()}}),additionalProps:{appear:!0,in:R}});k==="auto"&&!Z.muiSupportAuto&&(V=void 0);const oe=C||(u?ownerDocument(resolveAnchorEl(u)).body:void 0),[ce,{slots:xe,slotProps:de,...G}]=useSlot("root",{ref:n,elementType:PopoverRoot,externalForwardedProps:{...B,...j},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:I.backdrop},slotProps:{backdrop:mergeSlotProps$1(typeof P.backdrop=="function"?P.backdrop(X):P.backdrop,{invisible:!0})},container:oe,open:R},ownerState:X,className:clsx(K.root,_)}),[Y,te]=useSlot("paper",{ref:H,className:K.paper,elementType:PopoverPaper,externalForwardedProps:B,shouldForwardComponentProp:!0,additionalProps:{elevation:b,style:z?void 0:{opacity:0}},ownerState:X});return jsxRuntimeExports.jsx(ce,{...G,...!isHostComponent(ce)&&{slots:xe,slotProps:de,disableScrollLock:M},children:jsxRuntimeExports.jsx(Z,{...ne,timeout:V,children:jsxRuntimeExports.jsx(Y,{...te,children:m})})})});function getMenuUtilityClass(e){return generateUtilityClass("MuiMenu",e)}generateUtilityClasses("MuiMenu",["root","paper","list"]);const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},useUtilityClasses$7=e=>{const{classes:t}=e;return composeClasses({root:["root"],paper:["paper"],list:["list"]},getMenuUtilityClass,t)},MenuRoot=styled(Popover,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiMenu",slot:"Root"})({}),MenuPaper=styled(PopoverPaper,{name:"MuiMenu",slot:"Paper"})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),MenuMenuList=styled(MenuList,{name:"MuiMenu",slot:"List"})({outline:0}),Menu=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiMenu"}),{autoFocus:s=!0,children:u,className:c,disableAutoFocusItem:h=!1,MenuListProps:f={},onClose:m,open:_,PaperProps:C={},PopoverClasses:b,transitionDuration:T="auto",TransitionProps:{onEntering:R,...A}={},variant:I="selectedMenu",slots:P={},slotProps:N={},...S}=a,k=useRtl(),D={...a,autoFocus:s,disableAutoFocusItem:h,MenuListProps:f,onEntering:R,PaperProps:C,transitionDuration:T,TransitionProps:A,variant:I},M=useUtilityClasses$7(D),j=s&&!h&&_,H=reactExports.useRef(null),X=(V,B)=>{H.current&&H.current.adjustStyleForScrollbar(V,{direction:k?"rtl":"ltr"}),R&&R(V,B)},K=V=>{V.key==="Tab"&&(V.preventDefault(),m&&m(V,"tabKeyDown"))};let re=-1;reactExports.Children.map(u,(V,B)=>{reactExports.isValidElement(V)&&(V.props.disabled||(I==="selectedMenu"&&V.props.selected||re===-1)&&(re=B))});const F={slots:P,slotProps:{list:f,transition:A,paper:C,...N}},J=useSlotProps({elementType:P.root,externalSlotProps:N.root,ownerState:D,className:[M.root,c]}),[z,$]=useSlot("paper",{className:M.paper,elementType:MenuPaper,externalForwardedProps:F,shouldForwardComponentProp:!0,ownerState:D}),[L,W]=useSlot("list",{className:clsx(M.list,f.className),elementType:MenuMenuList,shouldForwardComponentProp:!0,externalForwardedProps:F,getSlotProps:V=>({...V,onKeyDown:B=>{K(B),V.onKeyDown?.(B)}}),ownerState:D}),U=typeof F.slotProps.transition=="function"?F.slotProps.transition(D):F.slotProps.transition;return jsxRuntimeExports.jsx(MenuRoot,{onClose:m,anchorOrigin:{vertical:"bottom",horizontal:k?"right":"left"},transformOrigin:k?RTL_ORIGIN:LTR_ORIGIN,slots:{root:P.root,paper:z,backdrop:P.backdrop,...P.transition&&{transition:P.transition}},slotProps:{root:J,paper:$,backdrop:typeof N.backdrop=="function"?N.backdrop(D):N.backdrop,transition:{...U,onEntering:(...V)=>{X(...V),U?.onEntering?.(...V)}}},open:_,ref:n,transitionDuration:T,ownerState:D,...S,classes:b,children:jsxRuntimeExports.jsx(L,{actions:H,autoFocus:s&&(re===-1||h),autoFocusItem:j,variant:I,...W,children:u})})});function getMenuItemUtilityClass(e){return generateUtilityClass("MuiMenuItem",e)}const menuItemClasses=generateUtilityClasses("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),overridesResolver=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},useUtilityClasses$6=e=>{const{disabled:t,dense:n,divider:a,disableGutters:s,selected:u,classes:c}=e,f=composeClasses({root:["root",n&&"dense",t&&"disabled",!s&&"gutters",a&&"divider",u&&"selected"]},getMenuItemUtilityClass,c);return{...c,...f}},MenuItemRoot=styled(ButtonBase,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver})(memoTheme(({theme:e})=>({...e.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${menuItemClasses.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${menuItemClasses.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${menuItemClasses.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${menuItemClasses.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${dividerClasses.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${dividerClasses.inset}`]:{marginLeft:52},[`& .${listItemTextClasses.root}`]:{marginTop:0,marginBottom:0},[`& .${listItemTextClasses.inset}`]:{paddingLeft:36},[`& .${listItemIconClasses.root}`]:{minWidth:36},variants:[{props:({ownerState:t})=>!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>!t.dense,style:{[e.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:t})=>t.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...e.typography.body2,[`& .${listItemIconClasses.root} svg`]:{fontSize:"1.25rem"}}}]}))),MenuItem=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiMenuItem"}),{autoFocus:s=!1,component:u="li",dense:c=!1,divider:h=!1,disableGutters:f=!1,focusVisibleClassName:m,role:_="menuitem",tabIndex:C,className:b,...T}=a,R=reactExports.useContext(ListContext),A=reactExports.useMemo(()=>({dense:c||R.dense||!1,disableGutters:f}),[R.dense,c,f]),I=reactExports.useRef(null);useEnhancedEffect(()=>{s&&I.current&&I.current.focus()},[s]);const P={...a,dense:A.dense,divider:h,disableGutters:f},N=useUtilityClasses$6(a),S=useForkRef(I,n);let k;return a.disabled||(k=C!==void 0?C:-1),jsxRuntimeExports.jsx(ListContext.Provider,{value:A,children:jsxRuntimeExports.jsx(MenuItemRoot,{ref:S,role:_,tabIndex:k,component:u,focusVisibleClassName:clsx(N.focusVisible,m),className:clsx(N.root,b),...T,ownerState:P,classes:N})})});function getNativeSelectUtilityClasses(e){return generateUtilityClass("MuiNativeSelect",e)}const nativeSelectClasses=generateUtilityClasses("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),useUtilityClasses$5=e=>{const{classes:t,variant:n,disabled:a,multiple:s,open:u,error:c}=e,h={select:["select",n,a&&"disabled",s&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(n)}`,u&&"iconOpen",a&&"disabled"]};return composeClasses(h,getNativeSelectUtilityClasses,t)},StyledSelectSelect=styled("select",{name:"MuiNativeSelect"})(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${nativeSelectClasses.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),NativeSelectSelect=styled(StyledSelectSelect,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:rootShouldForwardProp,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${nativeSelectClasses.multiple}`]:t.multiple}]}})({}),StyledSelectIcon=styled("svg",{name:"MuiNativeSelect"})(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${nativeSelectClasses.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),NativeSelectIcon=styled(StyledSelectIcon,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${capitalize(n.variant)}`],n.open&&t.iconOpen]}})({}),NativeSelectInput=reactExports.forwardRef(function(t,n){const{className:a,disabled:s,error:u,IconComponent:c,inputRef:h,variant:f="standard",...m}=t,_={...t,disabled:s,variant:f,error:u},C=useUtilityClasses$5(_);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(NativeSelectSelect,{ownerState:_,className:clsx(C.select,a),disabled:s,ref:h||n,...m}),t.multiple?null:jsxRuntimeExports.jsx(NativeSelectIcon,{as:c,ownerState:_,className:C.icon})]})});var _span$1;const NotchedOutlineRoot$1=styled("fieldset",{name:"MuiNotchedOutlined",shouldForwardProp:rootShouldForwardProp})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),NotchedOutlineLegend=styled("legend",{name:"MuiNotchedOutlined",shouldForwardProp:rootShouldForwardProp})(memoTheme(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function NotchedOutline(e){const{children:t,classes:n,className:a,label:s,notched:u,...c}=e,h=s!=null&&s!=="",f={...e,notched:u,withLabel:h};return jsxRuntimeExports.jsx(NotchedOutlineRoot$1,{"aria-hidden":!0,className:a,ownerState:f,...c,children:jsxRuntimeExports.jsx(NotchedOutlineLegend,{ownerState:f,children:h?jsxRuntimeExports.jsx("span",{children:s}):_span$1||(_span$1=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const useUtilityClasses$4=e=>{const{classes:t}=e,a=composeClasses({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},getOutlinedInputUtilityClass,t);return{...t,...a}},OutlinedInputRoot=styled(InputBaseRoot,{shouldForwardProp:e=>rootShouldForwardProp(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:rootOverridesResolver})(memoTheme(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${outlinedInputClasses.notchedOutline}`]:{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}},[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(createSimplePaletteValueFilter()).map(([n])=>({props:{color:n},style:{[`&.${outlinedInputClasses.focused} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${outlinedInputClasses.error} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${outlinedInputClasses.disabled} .${outlinedInputClasses.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:a})=>n.multiline&&a==="small",style:{padding:"8.5px 14px"}}]}})),NotchedOutlineRoot=styled(NotchedOutline,{name:"MuiOutlinedInput",slot:"NotchedOutline"})(memoTheme(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?e.alpha(e.vars.palette.common.onBackground,.23):t}})),OutlinedInputInput=styled(InputBaseInput,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:inputOverridesResolver})(memoTheme(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),OutlinedInput=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiOutlinedInput"}),{components:s={},fullWidth:u=!1,inputComponent:c="input",label:h,multiline:f=!1,notched:m,slots:_={},slotProps:C={},type:b="text",...T}=a,R=useUtilityClasses$4(a),A=useFormControl(),I=formControlState({props:a,muiFormControl:A,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),P={...a,color:I.color||"primary",disabled:I.disabled,error:I.error,focused:I.focused,formControl:A,fullWidth:u,hiddenLabel:I.hiddenLabel,multiline:f,size:I.size,type:b},N=_.root??s.Root??OutlinedInputRoot,S=_.input??s.Input??OutlinedInputInput,[k,D]=useSlot("notchedOutline",{elementType:NotchedOutlineRoot,className:R.notchedOutline,shouldForwardComponentProp:!0,ownerState:P,externalForwardedProps:{slots:_,slotProps:C},additionalProps:{label:h!=null&&h!==""&&I.required?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[h," ","*"]}):h}});return jsxRuntimeExports.jsx(InputBase,{slots:{root:N,input:S},slotProps:C,renderSuffix:M=>jsxRuntimeExports.jsx(k,{...D,notched:typeof m<"u"?m:!!(M.startAdornment||M.filled||M.focused)}),fullWidth:u,inputComponent:c,multiline:f,ref:n,type:b,...T,classes:{...R,notchedOutline:null}})});OutlinedInput.muiName="Input";function getSelectUtilityClasses(e){return generateUtilityClass("MuiSelect",e)}const selectClasses=generateUtilityClasses("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var _span;const SelectSelect=styled(StyledSelectSelect,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${selectClasses.select}`]:t.select},{[`&.${selectClasses.select}`]:t[n.variant]},{[`&.${selectClasses.error}`]:t.error},{[`&.${selectClasses.multiple}`]:t.multiple}]}})({[`&.${selectClasses.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),SelectIcon=styled(StyledSelectIcon,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${capitalize(n.variant)}`],n.open&&t.iconOpen]}})({}),SelectNativeInput=styled("input",{shouldForwardProp:e=>slotShouldForwardProp(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput"})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function areEqualValues(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function isEmpty(e){return e==null||typeof e=="string"&&!e.trim()}const useUtilityClasses$3=e=>{const{classes:t,variant:n,disabled:a,multiple:s,open:u,error:c}=e,h={select:["select",n,a&&"disabled",s&&"multiple",c&&"error"],icon:["icon",`icon${capitalize(n)}`,u&&"iconOpen",a&&"disabled"],nativeInput:["nativeInput"]};return composeClasses(h,getSelectUtilityClasses,t)},SelectInput=reactExports.forwardRef(function(t,n){const{"aria-describedby":a,"aria-label":s,autoFocus:u,autoWidth:c,children:h,className:f,defaultOpen:m,defaultValue:_,disabled:C,displayEmpty:b,error:T=!1,IconComponent:R,inputRef:A,labelId:I,MenuProps:P={},multiple:N,name:S,onBlur:k,onChange:D,onClose:M,onFocus:j,onOpen:H,open:X,readOnly:K,renderValue:re,required:F,SelectDisplayProps:J={},tabIndex:z,type:$,value:L,variant:W="standard",...U}=t,[V,B]=useControlled({controlled:L,default:_,name:"Select"}),[Z,ne]=useControlled({controlled:X,default:m,name:"Select"}),oe=reactExports.useRef(null),ce=reactExports.useRef(null),[xe,de]=reactExports.useState(null),{current:G}=reactExports.useRef(X!=null),[Y,te]=reactExports.useState(),ee=useForkRef(n,A),se=reactExports.useCallback(Ge=>{ce.current=Ge,Ge&&de(Ge)},[]),ue=xe?.parentNode;reactExports.useImperativeHandle(ee,()=>({focus:()=>{ce.current.focus()},node:oe.current,value:V}),[V]),reactExports.useEffect(()=>{m&&Z&&xe&&!G&&(te(c?null:ue.clientWidth),ce.current.focus())},[xe,c]),reactExports.useEffect(()=>{u&&ce.current.focus()},[u]),reactExports.useEffect(()=>{if(!I)return;const Ge=ownerDocument(ce.current).getElementById(I);if(Ge){const at=()=>{getSelection().isCollapsed&&ce.current.focus()};return Ge.addEventListener("click",at),()=>{Ge.removeEventListener("click",at)}}},[I]);const be=(Ge,at)=>{Ge?H&&H(at):M&&M(at),G||(te(c?null:ue.clientWidth),ne(Ge))},ye=Ge=>{Ge.button===0&&(Ge.preventDefault(),ce.current.focus(),be(!0,Ge))},Re=Ge=>{be(!1,Ge)},Le=reactExports.Children.toArray(h),Oe=Ge=>{const at=Le.find(dt=>dt.props.value===Ge.target.value);at!==void 0&&(B(at.props.value),D&&D(Ge,at))},Ue=Ge=>at=>{let dt;if(at.currentTarget.hasAttribute("tabindex")){if(N){dt=Array.isArray(V)?V.slice():[];const tr=V.indexOf(Ge.props.value);tr===-1?dt.push(Ge.props.value):dt.splice(tr,1)}else dt=Ge.props.value;if(Ge.props.onClick&&Ge.props.onClick(at),V!==dt&&(B(dt),D)){const tr=at.nativeEvent||at,wr=new tr.constructor(tr.type,tr);Object.defineProperty(wr,"target",{writable:!0,value:{value:dt,name:S}}),D(wr,Ge)}N||be(!1,at)}},qe=Ge=>{K||[" ","ArrowUp","ArrowDown","Enter"].includes(Ge.key)&&(Ge.preventDefault(),be(!0,Ge))},rt=xe!==null&&Z,He=Ge=>{!rt&&k&&(Object.defineProperty(Ge,"target",{writable:!0,value:{value:V,name:S}}),k(Ge))};delete U["aria-invalid"];let Ae,xt;const lt=[];let Gt=!1;(isFilled({value:V})||b)&&(re?Ae=re(V):Gt=!0);const ot=Le.map(Ge=>{if(!reactExports.isValidElement(Ge))return null;let at;if(N){if(!Array.isArray(V))throw new Error(formatMuiErrorMessage(2));at=V.some(dt=>areEqualValues(dt,Ge.props.value)),at&&Gt&&lt.push(Ge.props.children)}else at=areEqualValues(V,Ge.props.value),at&&Gt&&(xt=Ge.props.children);return reactExports.cloneElement(Ge,{"aria-selected":at?"true":"false",onClick:Ue(Ge),onKeyUp:dt=>{dt.key===" "&&dt.preventDefault(),Ge.props.onKeyUp&&Ge.props.onKeyUp(dt)},role:"option",selected:at,value:void 0,"data-value":Ge.props.value})});Gt&&(N?lt.length===0?Ae=null:Ae=lt.reduce((Ge,at,dt)=>(Ge.push(at),dt<lt.length-1&&Ge.push(", "),Ge),[]):Ae=xt);let ze=Y;!c&&G&&xe&&(ze=ue.clientWidth);let et;typeof z<"u"?et=z:et=C?null:0;const Qe=J.id||(S?`mui-component-select-${S}`:void 0),Nt={...t,variant:W,value:V,open:rt,error:T},Xe=useUtilityClasses$3(Nt),Jt={...P.PaperProps,...typeof P.slotProps?.paper=="function"?P.slotProps.paper(Nt):P.slotProps?.paper},er={...P.MenuListProps,...typeof P.slotProps?.list=="function"?P.slotProps.list(Nt):P.slotProps?.list},gr=useId();return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SelectSelect,{as:"div",ref:se,tabIndex:et,role:"combobox","aria-controls":rt?gr:void 0,"aria-disabled":C?"true":void 0,"aria-expanded":rt?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[I,Qe].filter(Boolean).join(" ")||void 0,"aria-describedby":a,"aria-required":F?"true":void 0,"aria-invalid":T?"true":void 0,onKeyDown:qe,onMouseDown:C||K?null:ye,onBlur:He,onFocus:j,...J,ownerState:Nt,className:clsx(J.className,Xe.select,f),id:Qe,children:isEmpty(Ae)?_span||(_span=jsxRuntimeExports.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):Ae}),jsxRuntimeExports.jsx(SelectNativeInput,{"aria-invalid":T,value:Array.isArray(V)?V.join(","):V,name:S,ref:oe,"aria-hidden":!0,onChange:Oe,tabIndex:-1,disabled:C,className:Xe.nativeInput,autoFocus:u,required:F,...U,ownerState:Nt}),jsxRuntimeExports.jsx(SelectIcon,{as:R,className:Xe.icon,ownerState:Nt}),jsxRuntimeExports.jsx(Menu,{id:`menu-${S||""}`,anchorEl:ue,open:rt,onClose:Re,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...P,slotProps:{...P.slotProps,list:{"aria-labelledby":I,role:"listbox","aria-multiselectable":N?"true":void 0,disableListWrap:!0,id:gr,...er},paper:{...Jt,style:{minWidth:ze,...Jt!=null?Jt.style:null}}},children:ot})]})}),useUtilityClasses$2=e=>{const{classes:t}=e,a=composeClasses({root:["root"]},getSelectUtilityClasses,t);return{...t,...a}},styledRootConfig={name:"MuiSelect",slot:"Root",shouldForwardProp:e=>rootShouldForwardProp(e)&&e!=="variant"},StyledInput=styled(Input,styledRootConfig)(""),StyledOutlinedInput=styled(OutlinedInput,styledRootConfig)(""),StyledFilledInput=styled(FilledInput,styledRootConfig)(""),Select=reactExports.forwardRef(function(t,n){const a=useDefaultProps({name:"MuiSelect",props:t}),{autoWidth:s=!1,children:u,classes:c={},className:h,defaultOpen:f=!1,displayEmpty:m=!1,IconComponent:_=ArrowDropDownIcon,id:C,input:b,inputProps:T,label:R,labelId:A,MenuProps:I,multiple:P=!1,native:N=!1,onClose:S,onOpen:k,open:D,renderValue:M,SelectDisplayProps:j,variant:H="outlined",...X}=a,K=N?NativeSelectInput:SelectInput,re=useFormControl(),F=formControlState({props:a,muiFormControl:re,states:["variant","error"]}),J=F.variant||H,z={...a,variant:J,classes:c},$=useUtilityClasses$2(z),{root:L,...W}=$,U=b||{standard:jsxRuntimeExports.jsx(StyledInput,{ownerState:z}),outlined:jsxRuntimeExports.jsx(StyledOutlinedInput,{label:R,ownerState:z}),filled:jsxRuntimeExports.jsx(StyledFilledInput,{ownerState:z})}[J],V=useForkRef(n,getReactElementRef(U));return jsxRuntimeExports.jsx(reactExports.Fragment,{children:reactExports.cloneElement(U,{inputComponent:K,inputProps:{children:u,error:F.error,IconComponent:_,variant:J,type:void 0,multiple:P,...N?{id:C}:{autoWidth:s,defaultOpen:f,displayEmpty:m,labelId:A,MenuProps:I,onClose:S,onOpen:k,open:D,renderValue:M,SelectDisplayProps:{id:C,...j}},...T,classes:T?deepmerge(W,T.classes):W,...b?b.props.inputProps:{}},...(P&&N||m)&&J==="outlined"?{notched:!0}:{},ref:V,className:clsx(U.props.className,h,$.root),...!b&&{variant:J},...X})})});Select.muiName="Select";function getSkeletonUtilityClass(e){return generateUtilityClass("MuiSkeleton",e)}generateUtilityClasses("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const useUtilityClasses$1=e=>{const{classes:t,variant:n,animation:a,hasChildren:s,width:u,height:c}=e;return composeClasses({root:["root",n,a,s&&"withChildren",s&&!u&&"fitContent",s&&!c&&"heightAuto"]},getSkeletonUtilityClass,t)},pulseKeyframe=keyframes`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,waveKeyframe=keyframes`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,pulseAnimation=typeof pulseKeyframe!="string"?css`
        animation: ${pulseKeyframe} 2s ease-in-out 0.5s infinite;
      `:null,waveAnimation=typeof waveKeyframe!="string"?css`
        &::after {
          animation: ${waveKeyframe} 2s linear 0.5s infinite;
        }
      `:null,SkeletonRoot=styled("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.animation!==!1&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(memoTheme(({theme:e})=>{const t=getUnit(e.shape.borderRadius)||"px",n=toUnitless(e.shape.borderRadius);return{display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:e.alpha(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${n}${t}/${Math.round(n/.6*10)/10}${t}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:({ownerState:a})=>a.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:a})=>a.hasChildren&&!a.width,style:{maxWidth:"fit-content"}},{props:({ownerState:a})=>a.hasChildren&&!a.height,style:{height:"auto"}},{props:{animation:"pulse"},style:pulseAnimation||{animation:`${pulseKeyframe} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(e.vars||e).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:waveAnimation||{"&::after":{animation:`${waveKeyframe} 2s linear 0.5s infinite`}}}]}})),Skeleton=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiSkeleton"}),{animation:s="pulse",className:u,component:c="span",height:h,style:f,variant:m="text",width:_,...C}=a,b={...a,animation:s,component:c,variant:m,hasChildren:!!C.children},T=useUtilityClasses$1(b);return jsxRuntimeExports.jsx(SkeletonRoot,{as:c,ref:n,className:clsx(T.root,u),ownerState:b,...C,style:{width:_,height:h,...f}})}),Stack=createStack({createStyledComponent:styled("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>useDefaultProps({props:e,name:"MuiStack"})});function getTextFieldUtilityClass(e){return generateUtilityClass("MuiTextField",e)}generateUtilityClasses("MuiTextField",["root"]);const variantComponent={standard:Input,filled:FilledInput,outlined:OutlinedInput},useUtilityClasses=e=>{const{classes:t}=e;return composeClasses({root:["root"]},getTextFieldUtilityClass,t)},TextFieldRoot=styled(FormControl,{name:"MuiTextField",slot:"Root"})({}),TextField=reactExports.forwardRef(function(t,n){const a=useDefaultProps({props:t,name:"MuiTextField"}),{autoComplete:s,autoFocus:u=!1,children:c,className:h,color:f="primary",defaultValue:m,disabled:_=!1,error:C=!1,FormHelperTextProps:b,fullWidth:T=!1,helperText:R,id:A,InputLabelProps:I,inputProps:P,InputProps:N,inputRef:S,label:k,maxRows:D,minRows:M,multiline:j=!1,name:H,onBlur:X,onChange:K,onFocus:re,placeholder:F,required:J=!1,rows:z,select:$=!1,SelectProps:L,slots:W={},slotProps:U={},type:V,value:B,variant:Z="outlined",...ne}=a,oe={...a,autoFocus:u,color:f,disabled:_,error:C,fullWidth:T,multiline:j,required:J,select:$,variant:Z},ce=useUtilityClasses(oe),xe=useId(A),de=R&&xe?`${xe}-helper-text`:void 0,G=k&&xe?`${xe}-label`:void 0,Y=variantComponent[Z],te={slots:W,slotProps:{input:N,inputLabel:I,htmlInput:P,formHelperText:b,select:L,...U}},ee={},se=te.slotProps.inputLabel;Z==="outlined"&&(se&&typeof se.shrink<"u"&&(ee.notched=se.shrink),ee.label=k),$&&((!L||!L.native)&&(ee.id=void 0),ee["aria-describedby"]=void 0);const[ue,be]=useSlot("root",{elementType:TextFieldRoot,shouldForwardComponentProp:!0,externalForwardedProps:{...te,...ne},ownerState:oe,className:clsx(ce.root,h),ref:n,additionalProps:{disabled:_,error:C,fullWidth:T,required:J,color:f,variant:Z}}),[ye,Re]=useSlot("input",{elementType:Y,externalForwardedProps:te,additionalProps:ee,ownerState:oe}),[Le,Oe]=useSlot("inputLabel",{elementType:InputLabel,externalForwardedProps:te,ownerState:oe}),[Ue,qe]=useSlot("htmlInput",{elementType:"input",externalForwardedProps:te,ownerState:oe}),[rt,He]=useSlot("formHelperText",{elementType:FormHelperText,externalForwardedProps:te,ownerState:oe}),[Ae,xt]=useSlot("select",{elementType:Select,externalForwardedProps:te,ownerState:oe}),lt=jsxRuntimeExports.jsx(ye,{"aria-describedby":de,autoComplete:s,autoFocus:u,defaultValue:m,fullWidth:T,multiline:j,name:H,rows:z,maxRows:D,minRows:M,type:V,value:B,id:xe,inputRef:S,onBlur:X,onChange:K,onFocus:re,placeholder:F,inputProps:qe,slots:{input:W.htmlInput?Ue:void 0},...Re});return jsxRuntimeExports.jsxs(ue,{...be,children:[k!=null&&k!==""&&jsxRuntimeExports.jsx(Le,{htmlFor:xe,id:G,...Oe,children:k}),$?jsxRuntimeExports.jsx(Ae,{"aria-describedby":de,id:xe,labelId:G,value:B,input:lt,...xt,children:c}):lt,R&&jsxRuntimeExports.jsx(rt,{id:de,...He,children:R})]})}),ApiError=observer(()=>{const e=reactExports.useContext(APIContext);return e.message?jsxRuntimeExports.jsx(Box,{display:"flex",className:"justify-center items-center !fixed left-0 top-0 w-screen p-3",children:jsxRuntimeExports.jsx(Alert,{severity:"error",variant:"filled",children:e.message})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})});observer(({children:e})=>reactExports.useContext(APIContext).isLoading?e:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}));const withAPI=e=>()=>jsxRuntimeExports.jsxs(APIProvider,{children:[jsxRuntimeExports.jsx(e,{}),jsxRuntimeExports.jsx(ApiError,{})]});class EdgeDto{fromKey;toKey;label;constructor(t,n,a="false"){this.fromKey=t,this.toKey=n,this.label=a}}class NodeDto{key;name;displayName;templateId;props;constructor(t){this.key=t.id.toString(),this.name=t.type??void 0,this.displayName=t.title,this.templateId=t.templateId,this.props=t.getProperties}}const EditorPage=withAPI(()=>jsxRuntimeExports.jsx(Layout,{mainArea:jsxRuntimeExports.jsx(MainArea,{}),sideArea:jsxRuntimeExports.jsx(SideArea,{}),bottomArea:jsxRuntimeExports.jsx(BottomArea,{})})),Layout=({mainArea:e,sideArea:t,bottomArea:n})=>jsxRuntimeExports.jsx(Box,{className:clsx("grid w-screen h-screen overflow-hidden"),style:{gridTemplateColumns:SIDEAREA_WIDTH+"px 1fr",gridTemplateRows:"1fr auto"},children:jsxRuntimeExports.jsxs(EditorPageProvider,{children:[jsxRuntimeExports.jsx(Box,{className:"row-span-2",children:t}),jsxRuntimeExports.jsx(Box,{className:"relative max-w-full max-h-full overflow-hidden",children:e}),jsxRuntimeExports.jsx(Box,{className:"h-fit",children:n})]})}),GraphCanvasContext=reactExports.createContext(void 0),GraphCanvasProvider=({children:e})=>{const[t,n]=reactExports.useState(null),[a,s]=reactExports.useState([]),u=reactExports.useCallback(h=>s(f=>[...f,h]),[]),c=reactExports.useCallback(h=>s(f=>f.filter(m=>m!==h)),[]);return reactExports.useEffect(()=>{t&&(t.graph.afterChange=()=>{for(const h of a)h()})},[t,a]),jsxRuntimeExports.jsx(GraphCanvasContext.Provider,{value:{canvas:t,setCanvas:n,setAfterChange:u,removeAfterChange:c},children:e})};var litegraph={},hasRequiredLitegraph;function requireLitegraph(){return hasRequiredLitegraph||(hasRequiredLitegraph=1,(function(exports){(function(global){var LiteGraph=global.LiteGraph={VERSION:.4,CANVAS_GRID_SIZE:10,NODE_TITLE_HEIGHT:30,NODE_TITLE_TEXT_Y:20,NODE_SLOT_HEIGHT:20,NODE_WIDGET_HEIGHT:20,NODE_WIDTH:140,NODE_MIN_WIDTH:50,NODE_COLLAPSED_RADIUS:10,NODE_COLLAPSED_WIDTH:80,NODE_TITLE_COLOR:"#999",NODE_SELECTED_TITLE_COLOR:"#FFF",NODE_TEXT_SIZE:14,NODE_TEXT_COLOR:"#AAA",NODE_SUBTEXT_SIZE:12,NODE_DEFAULT_COLOR:"#333",NODE_DEFAULT_BGCOLOR:"#353535",NODE_DEFAULT_BOXCOLOR:"#666",NODE_DEFAULT_SHAPE:"box",NODE_BOX_OUTLINE_COLOR:"#FFF",DEFAULT_SHADOW_COLOR:"rgba(0,0,0,0.5)",DEFAULT_GROUP_FONT:24,WIDGET_BGCOLOR:"#222",WIDGET_OUTLINE_COLOR:"#666",WIDGET_TEXT_COLOR:"#DDD",WIDGET_SECONDARY_TEXT_COLOR:"#999",LINK_COLOR:"#9A9",EVENT_LINK_COLOR:"#A86",CONNECTING_LINK_COLOR:"#AFA",MAX_NUMBER_OF_NODES:1e3,DEFAULT_POSITION:[100,100],VALID_SHAPES:["default","box","round","card"],BOX_SHAPE:1,ROUND_SHAPE:2,CIRCLE_SHAPE:3,CARD_SHAPE:4,ARROW_SHAPE:5,GRID_SHAPE:6,INPUT:1,OUTPUT:2,EVENT:-1,ACTION:-1,NODE_MODES:["Always","On Event","Never","On Trigger"],NODE_MODES_COLORS:["#666","#422","#333","#224","#626"],ALWAYS:0,ON_EVENT:1,NEVER:2,ON_TRIGGER:3,UP:1,DOWN:2,LEFT:3,RIGHT:4,CENTER:5,LINK_RENDER_MODES:["Straight","Linear","Spline"],STRAIGHT_LINK:0,LINEAR_LINK:1,SPLINE_LINK:2,NORMAL_TITLE:0,NO_TITLE:1,TRANSPARENT_TITLE:2,AUTOHIDE_TITLE:3,VERTICAL_LAYOUT:"vertical",proxy:null,node_images_path:"",debug:!1,catch_exceptions:!0,throw_errors:!0,allow_scripts:!1,use_deferred_actions:!0,registered_node_types:{},node_types_by_file_extension:{},Nodes:{},Globals:{},searchbox_extras:{},auto_sort_node_types:!1,node_box_coloured_when_on:!1,node_box_coloured_by_mode:!1,dialog_close_on_mouse_leave:!0,dialog_close_on_mouse_leave_delay:500,shift_click_do_break_link_from:!1,click_do_break_link_to:!1,search_hide_on_mouse_leave:!0,search_filter_enabled:!1,search_show_all_on_open:!0,auto_load_slot_types:!1,registered_slot_in_types:{},registered_slot_out_types:{},slot_types_in:[],slot_types_out:[],slot_types_default_in:[],slot_types_default_out:[],alt_drag_do_clone_nodes:!1,do_add_triggers_slots:!1,allow_multi_output_for_events:!0,middle_click_slot_add_default_node:!1,release_link_on_empty_shows_menu:!1,pointerevents_method:"mouse",ctrl_shift_v_paste_connect_unselected_outputs:!1,use_uuids:!1,registerNodeType:function(e,t){if(!t.prototype)throw"Cannot register a simple object, it must be a class with a prototype";t.type=e,LiteGraph.debug&&console.log("Node registered: "+e);const n=t.name,a=e.lastIndexOf("/");t.category=e.substring(0,a),t.title||(t.title=n);for(var s in LGraphNode.prototype)t.prototype[s]||(t.prototype[s]=LGraphNode.prototype[s]);const u=this.registered_node_types[e];if(u&&console.log("replacing node type: "+e),!Object.prototype.hasOwnProperty.call(t.prototype,"shape")&&(Object.defineProperty(t.prototype,"shape",{set:function(c){switch(c){case"default":delete this._shape;break;case"box":this._shape=LiteGraph.BOX_SHAPE;break;case"round":this._shape=LiteGraph.ROUND_SHAPE;break;case"circle":this._shape=LiteGraph.CIRCLE_SHAPE;break;case"card":this._shape=LiteGraph.CARD_SHAPE;break;default:this._shape=c}},get:function(){return this._shape},enumerable:!0,configurable:!0}),t.supported_extensions))for(let c in t.supported_extensions){const h=t.supported_extensions[c];h&&h.constructor===String&&(this.node_types_by_file_extension[h.toLowerCase()]=t)}this.registered_node_types[e]=t,t.constructor.name&&(this.Nodes[n]=t),LiteGraph.onNodeTypeRegistered&&LiteGraph.onNodeTypeRegistered(e,t),u&&LiteGraph.onNodeTypeReplaced&&LiteGraph.onNodeTypeReplaced(e,t,u),t.prototype.onPropertyChange&&console.warn("LiteGraph node class "+e+" has onPropertyChange method, it must be called onPropertyChanged with d at the end"),this.auto_load_slot_types&&new t(t.title||"tmpnode")},unregisterNodeType:function(e){const t=e.constructor===String?this.registered_node_types[e]:e;if(!t)throw"node type not found: "+e;delete this.registered_node_types[t.type],t.constructor.name&&delete this.Nodes[t.constructor.name]},registerNodeAndSlotType:function(e,t,n){n=n||!1;const s=(e.constructor===String&&this.registered_node_types[e]!=="anonymous"?this.registered_node_types[e]:e).constructor.type;let u=[];typeof t=="string"?u=t.split(","):t==this.EVENT||t==this.ACTION?u=["_event_"]:u=["*"];for(let c=0;c<u.length;++c){let h=u[c];h===""&&(h="*");const f=n?"registered_slot_out_types":"registered_slot_in_types";this[f][h]===void 0&&(this[f][h]={nodes:[]}),this[f][h].nodes.includes(s)||this[f][h].nodes.push(s),n?this.slot_types_out.includes(h.toLowerCase())||(this.slot_types_out.push(h.toLowerCase()),this.slot_types_out.sort()):this.slot_types_in.includes(h.toLowerCase())||(this.slot_types_in.push(h.toLowerCase()),this.slot_types_in.sort())}},buildNodeClassFromObject:function(e,t){var n="";if(t.inputs)for(var a=0;a<t.inputs.length;++a){var s=t.inputs[a][0],u=t.inputs[a][1];u&&u.constructor===String&&(u='"'+u+'"'),n+="this.addInput('"+s+"',"+u+`);
`}if(t.outputs)for(var a=0;a<t.outputs.length;++a){var s=t.outputs[a][0],u=t.outputs[a][1];u&&u.constructor===String&&(u='"'+u+'"'),n+="this.addOutput('"+s+"',"+u+`);
`}if(t.properties)for(var a in t.properties){var c=t.properties[a];c&&c.constructor===String&&(c='"'+c+'"'),n+="this.addProperty('"+a+"',"+c+`);
`}n+="if(this.onCreate)this.onCreate()";var h=Function(n);for(var a in t)a!="inputs"&&a!="outputs"&&a!="properties"&&(h.prototype[a]=t[a]);return h.title=t.title||e.split("/").pop(),h.desc=t.desc||"Generated from object",this.registerNodeType(e,h),h},wrapFunctionAsNode:function(e,t,n,a,s){var u=Array(t.length),c="";if(n!==null)for(var h=LiteGraph.getParameterNames(t),f=0;f<h.length;++f){var m=0;n&&(n[f]!=null&&n[f].constructor===String?m="'"+n[f]+"'":n[f]!=null&&(m=n[f])),c+="this.addInput('"+h[f]+"',"+m+`);
`}a!==null&&(c+="this.addOutput('out',"+(a!=null?a.constructor===String?"'"+a+"'":a:0)+`);
`),s&&(c+="this.properties = "+JSON.stringify(s)+`;
`);var _=Function(c);return _.title=e.split("/").pop(),_.desc="Generated from "+t.name,_.prototype.onExecute=function(){for(var b=0;b<u.length;++b)u[b]=this.getInputData(b);var T=t.apply(this,u);this.setOutputData(0,T)},this.registerNodeType(e,_),_},clearRegisteredTypes:function(){this.registered_node_types={},this.node_types_by_file_extension={},this.Nodes={},this.searchbox_extras={}},addNodeMethod:function(e,t){LGraphNode.prototype[e]=t;for(var n in this.registered_node_types){var a=this.registered_node_types[n];a.prototype[e]&&(a.prototype["_"+e]=a.prototype[e]),a.prototype[e]=t}},createNode:function(e,t,n){var a=this.registered_node_types[e];if(!a)return LiteGraph.debug&&console.log('GraphNode type "'+e+'" not registered.'),null;a.prototype,t=t||a.title||e;var s=null;if(LiteGraph.catch_exceptions)try{s=new a(t)}catch(c){return console.error(c),null}else s=new a(t);if(s.type=e,!s.title&&t&&(s.title=t),s.properties||(s.properties={}),s.properties_info||(s.properties_info=[]),s.flags||(s.flags={}),s.size||(s.size=s.computeSize()),s.pos||(s.pos=LiteGraph.DEFAULT_POSITION.concat()),s.mode||(s.mode=LiteGraph.ALWAYS),n)for(var u in n)s[u]=n[u];return s.onNodeCreated&&s.onNodeCreated(),s},getNodeType:function(e){return this.registered_node_types[e]},getNodeTypesInCategory:function(e,t){var n=[];for(var a in this.registered_node_types){var s=this.registered_node_types[a];s.filter==t&&(e==""?s.category==null&&n.push(s):s.category==e&&n.push(s))}return this.auto_sort_node_types&&n.sort(function(u,c){return u.title.localeCompare(c.title)}),n},getNodeTypesCategories:function(e){var t={"":1};for(var n in this.registered_node_types){var a=this.registered_node_types[n];if(a.category&&!a.skip_list){if(a.filter!=e)continue;t[a.category]=1}}var s=[];for(var n in t)s.push(n);return this.auto_sort_node_types?s.sort():s},reloadNodes:function(e){for(var t=document.getElementsByTagName("script"),n=[],a=0;a<t.length;a++)n.push(t[a]);var s=document.getElementsByTagName("head")[0];e=document.location.href+e;for(var a=0;a<n.length;a++){var u=n[a].src;if(!(!u||u.substr(0,e.length)!=e))try{LiteGraph.debug&&console.log("Reloading: "+u);var c=document.createElement("script");c.type="text/javascript",c.src=u,s.appendChild(c),s.removeChild(n[a])}catch(f){if(LiteGraph.throw_errors)throw f;LiteGraph.debug&&console.log("Error while reloading "+u)}}LiteGraph.debug&&console.log("Nodes reloaded")},cloneObject:function(e,t){if(e==null)return null;var n=JSON.parse(JSON.stringify(e));if(!t)return n;for(var a in n)t[a]=n[a];return t},uuidv4:function(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,e=>(e^Math.random()*16>>e/4).toString(16))},isValidConnection:function(e,t){if((e==""||e==="*")&&(e=0),(t==""||t==="*")&&(t=0),!e||!t||e==t||e==LiteGraph.EVENT&&t==LiteGraph.ACTION)return!0;if(e=String(e),t=String(t),e=e.toLowerCase(),t=t.toLowerCase(),e.indexOf(",")==-1&&t.indexOf(",")==-1)return e==t;for(var n=e.split(","),a=t.split(","),s=0;s<n.length;++s)for(var u=0;u<a.length;++u)if(this.isValidConnection(n[s],a[u]))return!0;return!1},registerSearchboxExtra:function(e,t,n){this.searchbox_extras[t.toLowerCase()]={type:e,desc:t,data:n}},fetchFile:function(e,t,n,a){if(!e)return null;if(t=t||"text",e.constructor===String)return e.substr(0,4)=="http"&&LiteGraph.proxy&&(e=LiteGraph.proxy+e.substr(e.indexOf(":")+3)),fetch(e).then(function(u){if(!u.ok)throw new Error("File not found");if(t=="arraybuffer")return u.arrayBuffer();if(t=="text"||t=="string")return u.text();if(t=="json")return u.json();if(t=="blob")return u.blob()}).then(function(u){n&&n(u)}).catch(function(u){console.error("error fetching file:",e),a&&a(u)});if(e.constructor===File||e.constructor===Blob){var s=new FileReader;if(s.onload=function(u){var c=u.target.result;t=="json"&&(c=JSON.parse(c)),n&&n(c)},t=="arraybuffer")return s.readAsArrayBuffer(e);if(t=="text"||t=="json")return s.readAsText(e);if(t=="blob")return s.readAsBinaryString(e)}return null}};typeof performance<"u"?LiteGraph.getTime=performance.now.bind(performance):typeof Date<"u"&&Date.now?LiteGraph.getTime=Date.now.bind(Date):typeof process<"u"?LiteGraph.getTime=function(){var e=process.hrtime();return e[0]*.001+e[1]*1e-6}:LiteGraph.getTime=function(){return new Date().getTime()};function LGraph(e){LiteGraph.debug&&console.log("Graph created"),this.list_of_graphcanvas=null,this.clear(),e&&this.configure(e)}global.LGraph=LiteGraph.LGraph=LGraph,LGraph.supported_types=["number","string","boolean"],LGraph.prototype.getSupportedTypes=function(){return this.supported_types||LGraph.supported_types},LGraph.STATUS_STOPPED=1,LGraph.STATUS_RUNNING=2,LGraph.prototype.clear=function(){if(this.stop(),this.status=LGraph.STATUS_STOPPED,this.last_node_id=0,this.last_link_id=0,this._version=-1,this._nodes)for(var e=0;e<this._nodes.length;++e){var t=this._nodes[e];t.onRemoved&&t.onRemoved()}this._nodes=[],this._nodes_by_id={},this._nodes_in_order=[],this._nodes_executable=null,this._groups=[],this.links={},this.iteration=0,this.config={},this.vars={},this.extra={},this.globaltime=0,this.runningtime=0,this.fixedtime=0,this.fixedtime_lapse=.01,this.elapsed_time=.01,this.last_update_time=0,this.starttime=0,this.catch_errors=!0,this.nodes_executing=[],this.nodes_actioning=[],this.nodes_executedAction=[],this.inputs={},this.outputs={},this.change(),this.sendActionToCanvas("clear")},LGraph.prototype.attachCanvas=function(e){if(e.constructor!=LGraphCanvas)throw"attachCanvas expects a LGraphCanvas instance";e.graph&&e.graph!=this&&e.graph.detachCanvas(e),e.graph=this,this.list_of_graphcanvas||(this.list_of_graphcanvas=[]),this.list_of_graphcanvas.push(e)},LGraph.prototype.detachCanvas=function(e){if(this.list_of_graphcanvas){var t=this.list_of_graphcanvas.indexOf(e);t!=-1&&(e.graph=null,this.list_of_graphcanvas.splice(t,1))}},LGraph.prototype.start=function(e){if(this.status!=LGraph.STATUS_RUNNING){this.status=LGraph.STATUS_RUNNING,this.onPlayEvent&&this.onPlayEvent(),this.sendEventToAllNodes("onStart"),this.starttime=LiteGraph.getTime(),this.last_update_time=this.starttime,e=e||0;var t=this;if(e==0&&typeof window<"u"&&window.requestAnimationFrame){let a=function(){t.execution_timer_id==-1&&(window.requestAnimationFrame(a),t.onBeforeStep&&t.onBeforeStep(),t.runStep(1,!t.catch_errors),t.onAfterStep&&t.onAfterStep())};var n=a;this.execution_timer_id=-1,a()}else this.execution_timer_id=setInterval(function(){t.onBeforeStep&&t.onBeforeStep(),t.runStep(1,!t.catch_errors),t.onAfterStep&&t.onAfterStep()},e)}},LGraph.prototype.stop=function(){this.status!=LGraph.STATUS_STOPPED&&(this.status=LGraph.STATUS_STOPPED,this.onStopEvent&&this.onStopEvent(),this.execution_timer_id!=null&&(this.execution_timer_id!=-1&&clearInterval(this.execution_timer_id),this.execution_timer_id=null),this.sendEventToAllNodes("onStop"))},LGraph.prototype.runStep=function(e,t,n){e=e||1;var a=LiteGraph.getTime();this.globaltime=.001*(a-this.starttime);var s=this._nodes_executable?this._nodes_executable:this._nodes;if(s){if(n=n||s.length,t){for(var u=0;u<e;u++){for(var c=0;c<n;++c){var h=s[c];LiteGraph.use_deferred_actions&&h._waiting_actions&&h._waiting_actions.length&&h.executePendingActions(),h.mode==LiteGraph.ALWAYS&&h.onExecute&&h.doExecute()}this.fixedtime+=this.fixedtime_lapse,this.onExecuteStep&&this.onExecuteStep()}this.onAfterExecute&&this.onAfterExecute()}else try{for(var u=0;u<e;u++){for(var c=0;c<n;++c){var h=s[c];LiteGraph.use_deferred_actions&&h._waiting_actions&&h._waiting_actions.length&&h.executePendingActions(),h.mode==LiteGraph.ALWAYS&&h.onExecute&&h.onExecute()}this.fixedtime+=this.fixedtime_lapse,this.onExecuteStep&&this.onExecuteStep()}this.onAfterExecute&&this.onAfterExecute(),this.errors_in_execution=!1}catch(_){if(this.errors_in_execution=!0,LiteGraph.throw_errors)throw _;LiteGraph.debug&&console.log("Error during execution: "+_),this.stop()}var f=LiteGraph.getTime(),m=f-a;m==0&&(m=1),this.execution_time=.001*m,this.globaltime+=.001*m,this.iteration+=1,this.elapsed_time=(f-this.last_update_time)*.001,this.last_update_time=f,this.nodes_executing=[],this.nodes_actioning=[],this.nodes_executedAction=[]}},LGraph.prototype.updateExecutionOrder=function(){this._nodes_in_order=this.computeExecutionOrder(!1),this._nodes_executable=[];for(var e=0;e<this._nodes_in_order.length;++e)this._nodes_in_order[e].onExecute&&this._nodes_executable.push(this._nodes_in_order[e])},LGraph.prototype.computeExecutionOrder=function(e,t){for(var n=[],a=[],s={},u={},c={},h=0,I=this._nodes.length;h<I;++h){var f=this._nodes[h];if(!(e&&!f.onExecute)){s[f.id]=f;var m=0;if(f.inputs)for(var _=0,C=f.inputs.length;_<C;_++)f.inputs[_]&&f.inputs[_].link!=null&&(m+=1);m==0?(a.push(f),t&&(f._level=1)):(t&&(f._level=0),c[f.id]=m)}}for(;a.length!=0;){var f=a.shift();if(n.push(f),delete s[f.id],!!f.outputs)for(var h=0;h<f.outputs.length;h++){var b=f.outputs[h];if(!(b==null||b.links==null||b.links.length==0))for(var _=0;_<b.links.length;_++){var T=b.links[_],R=this.links[T];if(R&&!u[R.id]){var A=this.getNodeById(R.target_id);if(A==null){u[R.id]=!0;continue}t&&(!A._level||A._level<=f._level)&&(A._level=f._level+1),u[R.id]=!0,c[A.id]-=1,c[A.id]==0&&a.push(A)}}}}for(var h in s)n.push(s[h]);n.length!=this._nodes.length&&LiteGraph.debug&&console.warn("something went wrong, nodes missing");for(var I=n.length,h=0;h<I;++h)n[h].order=h;n=n.sort(function(P,N){var S=P.constructor.priority||P.priority||0,k=N.constructor.priority||N.priority||0;return S==k?P.order-N.order:S-k});for(var h=0;h<I;++h)n[h].order=h;return n},LGraph.prototype.getAncestors=function(e){for(var t=[],n=[e],a={};n.length;){var s=n.shift();if(s.inputs){!a[s.id]&&s!=e&&(a[s.id]=!0,t.push(s));for(var u=0;u<s.inputs.length;++u){var c=s.getInputNode(u);c&&t.indexOf(c)==-1&&n.push(c)}}}return t.sort(function(h,f){return h.order-f.order}),t},LGraph.prototype.arrange=function(e,t){e=e||100;const n=this.computeExecutionOrder(!1,!0),a=[];for(let u=0;u<n.length;++u){const c=n[u],h=c._level||1;a[h]||(a[h]=[]),a[h].push(c)}let s=e;for(let u=0;u<a.length;++u){const c=a[u];if(!c)continue;let h=100,f=e+LiteGraph.NODE_TITLE_HEIGHT;for(let m=0;m<c.length;++m){const _=c[m];_.pos[0]=t==LiteGraph.VERTICAL_LAYOUT?f:s,_.pos[1]=t==LiteGraph.VERTICAL_LAYOUT?s:f;const C=t==LiteGraph.VERTICAL_LAYOUT?1:0;_.size[C]>h&&(h=_.size[C]);const b=t==LiteGraph.VERTICAL_LAYOUT?0:1;f+=_.size[b]+e+LiteGraph.NODE_TITLE_HEIGHT}s+=h+e}this.setDirtyCanvas(!0,!0)},LGraph.prototype.getTime=function(){return this.globaltime},LGraph.prototype.getFixedTime=function(){return this.fixedtime},LGraph.prototype.getElapsedTime=function(){return this.elapsed_time},LGraph.prototype.sendEventToAllNodes=function(e,t,n){n=n||LiteGraph.ALWAYS;var a=this._nodes_in_order?this._nodes_in_order:this._nodes;if(a)for(var s=0,u=a.length;s<u;++s){var c=a[s];if(c.constructor===LiteGraph.Subgraph&&e!="onExecute"){c.mode==n&&c.sendEventToAllNodes(e,t,n);continue}!c[e]||c.mode!=n||(t===void 0?c[e]():t&&t.constructor===Array?c[e].apply(c,t):c[e](t))}},LGraph.prototype.sendActionToCanvas=function(e,t){if(this.list_of_graphcanvas)for(var n=0;n<this.list_of_graphcanvas.length;++n){var a=this.list_of_graphcanvas[n];a[e]&&a[e].apply(a,t)}},LGraph.prototype.add=function(e,t){if(e){if(e.constructor===LGraphGroup){this._groups.push(e),this.setDirtyCanvas(!0),this.change(),e.graph=this,this._version++;return}if(e.id!=-1&&this._nodes_by_id[e.id]!=null&&(console.warn("LiteGraph: there is already a node with this ID, changing it"),LiteGraph.use_uuids?e.id=LiteGraph.uuidv4():e.id=++this.last_node_id),this._nodes.length>=LiteGraph.MAX_NUMBER_OF_NODES)throw"LiteGraph: max number of nodes in a graph reached";return LiteGraph.use_uuids?(e.id==null||e.id==-1)&&(e.id=LiteGraph.uuidv4()):e.id==null||e.id==-1?e.id=++this.last_node_id:this.last_node_id<e.id&&(this.last_node_id=e.id),e.graph=this,this._version++,this._nodes.push(e),this._nodes_by_id[e.id]=e,e.onAdded&&e.onAdded(this),this.config.align_to_grid&&e.alignToGrid(),t||this.updateExecutionOrder(),this.onNodeAdded&&this.onNodeAdded(e),this.setDirtyCanvas(!0),this.change(),e}},LGraph.prototype.remove=function(e){if(e.constructor===LiteGraph.LGraphGroup){var t=this._groups.indexOf(e);t!=-1&&this._groups.splice(t,1),e.graph=null,this._version++,this.setDirtyCanvas(!0,!0),this.change();return}if(this._nodes_by_id[e.id]!=null&&!e.ignore_remove){if(this.beforeChange(),e.inputs)for(var n=0;n<e.inputs.length;n++){var a=e.inputs[n];a.link!=null&&e.disconnectInput(n)}if(e.outputs)for(var n=0;n<e.outputs.length;n++){var a=e.outputs[n];a.links!=null&&a.links.length&&e.disconnectOutput(n)}if(e.onRemoved&&e.onRemoved(),e.graph=null,this._version++,this.list_of_graphcanvas)for(var n=0;n<this.list_of_graphcanvas.length;++n){var s=this.list_of_graphcanvas[n];s.selected_nodes[e.id]&&delete s.selected_nodes[e.id],s.node_dragged==e&&(s.node_dragged=null)}var u=this._nodes.indexOf(e);u!=-1&&this._nodes.splice(u,1),delete this._nodes_by_id[e.id],this.onNodeRemoved&&this.onNodeRemoved(e),this.sendActionToCanvas("checkPanels"),this.setDirtyCanvas(!0,!0),this.afterChange(),this.change(),this.updateExecutionOrder()}},LGraph.prototype.getNodeById=function(e){return e==null?null:this._nodes_by_id[e]},LGraph.prototype.findNodesByClass=function(e,t){t=t||[],t.length=0;for(var n=0,a=this._nodes.length;n<a;++n)this._nodes[n].constructor===e&&t.push(this._nodes[n]);return t},LGraph.prototype.findNodesByType=function(n,t){var n=n.toLowerCase();t=t||[],t.length=0;for(var a=0,s=this._nodes.length;a<s;++a)this._nodes[a].type.toLowerCase()==n&&t.push(this._nodes[a]);return t},LGraph.prototype.findNodeByTitle=function(e){for(var t=0,n=this._nodes.length;t<n;++t)if(this._nodes[t].title==e)return this._nodes[t];return null},LGraph.prototype.findNodesByTitle=function(e){for(var t=[],n=0,a=this._nodes.length;n<a;++n)this._nodes[n].title==e&&t.push(this._nodes[n]);return t},LGraph.prototype.getNodeOnPos=function(e,t,n,a){n=n||this._nodes;for(var s=null,u=n.length-1;u>=0;u--){var c=n[u];if(c.isPointInside(e,t,a))return c}return s},LGraph.prototype.getGroupOnPos=function(e,t){for(var n=this._groups.length-1;n>=0;n--){var a=this._groups[n];if(a.isPointInside(e,t,2,!0))return a}return null},LGraph.prototype.checkNodeTypes=function(){for(var e=0;e<this._nodes.length;e++){var t=this._nodes[e],n=LiteGraph.registered_node_types[t.type];if(t.constructor!=n){console.log("node being replaced by newer version: "+t.type);var a=LiteGraph.createNode(t.type);this._nodes[e]=a,a.configure(t.serialize()),a.graph=this,this._nodes_by_id[a.id]=a,t.inputs&&(a.inputs=t.inputs.concat()),t.outputs&&(a.outputs=t.outputs.concat())}}this.updateExecutionOrder()},LGraph.prototype.onAction=function(e,t,n){this._input_nodes=this.findNodesByClass(LiteGraph.GraphInput,this._input_nodes);for(var a=0;a<this._input_nodes.length;++a){var s=this._input_nodes[a];if(s.properties.name==e){s.actionDo(e,t,n);break}}},LGraph.prototype.trigger=function(e,t){this.onTrigger&&this.onTrigger(e,t)},LGraph.prototype.addInput=function(e,t,n){var a=this.inputs[e];a||(this.beforeChange(),this.inputs[e]={name:e,type:t,value:n},this._version++,this.afterChange(),this.onInputAdded&&this.onInputAdded(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange())},LGraph.prototype.setInputData=function(e,t){var n=this.inputs[e];n&&(n.value=t)},LGraph.prototype.getInputData=function(e){var t=this.inputs[e];return t?t.value:null},LGraph.prototype.renameInput=function(e,t){if(t!=e){if(!this.inputs[e])return!1;if(this.inputs[t])return console.error("there is already one input with that name"),!1;this.inputs[t]=this.inputs[e],delete this.inputs[e],this._version++,this.onInputRenamed&&this.onInputRenamed(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange()}},LGraph.prototype.changeInputType=function(e,t){if(!this.inputs[e])return!1;this.inputs[e].type&&String(this.inputs[e].type).toLowerCase()==String(t).toLowerCase()||(this.inputs[e].type=t,this._version++,this.onInputTypeChanged&&this.onInputTypeChanged(e,t))},LGraph.prototype.removeInput=function(e){return this.inputs[e]?(delete this.inputs[e],this._version++,this.onInputRemoved&&this.onInputRemoved(e),this.onInputsOutputsChange&&this.onInputsOutputsChange(),!0):!1},LGraph.prototype.addOutput=function(e,t,n){this.outputs[e]={name:e,type:t,value:n},this._version++,this.onOutputAdded&&this.onOutputAdded(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange()},LGraph.prototype.setOutputData=function(e,t){var n=this.outputs[e];n&&(n.value=t)},LGraph.prototype.getOutputData=function(e){var t=this.outputs[e];return t?t.value:null},LGraph.prototype.renameOutput=function(e,t){if(!this.outputs[e])return!1;if(this.outputs[t])return console.error("there is already one output with that name"),!1;this.outputs[t]=this.outputs[e],delete this.outputs[e],this._version++,this.onOutputRenamed&&this.onOutputRenamed(e,t),this.onInputsOutputsChange&&this.onInputsOutputsChange()},LGraph.prototype.changeOutputType=function(e,t){if(!this.outputs[e])return!1;this.outputs[e].type&&String(this.outputs[e].type).toLowerCase()==String(t).toLowerCase()||(this.outputs[e].type=t,this._version++,this.onOutputTypeChanged&&this.onOutputTypeChanged(e,t))},LGraph.prototype.removeOutput=function(e){return this.outputs[e]?(delete this.outputs[e],this._version++,this.onOutputRemoved&&this.onOutputRemoved(e),this.onInputsOutputsChange&&this.onInputsOutputsChange(),!0):!1},LGraph.prototype.triggerInput=function(e,t){for(var n=this.findNodesByTitle(e),a=0;a<n.length;++a)n[a].onTrigger(t)},LGraph.prototype.setCallback=function(e,t){for(var n=this.findNodesByTitle(e),a=0;a<n.length;++a)n[a].setTrigger(t)},LGraph.prototype.beforeChange=function(e){this.onBeforeChange&&this.onBeforeChange(this,e),this.sendActionToCanvas("onBeforeChange",this)},LGraph.prototype.afterChange=function(e){this.onAfterChange&&this.onAfterChange(this,e),this.sendActionToCanvas("onAfterChange",this)},LGraph.prototype.connectionChange=function(e,t){this.updateExecutionOrder(),this.onConnectionChange&&this.onConnectionChange(e),this._version++,this.sendActionToCanvas("onConnectionChange")},LGraph.prototype.isLive=function(){if(!this.list_of_graphcanvas)return!1;for(var e=0;e<this.list_of_graphcanvas.length;++e){var t=this.list_of_graphcanvas[e];if(t.live_mode)return!0}return!1},LGraph.prototype.clearTriggeredSlots=function(){for(var e in this.links){var t=this.links[e];t&&t._last_time&&(t._last_time=0)}},LGraph.prototype.change=function(){LiteGraph.debug&&console.log("Graph changed"),this.sendActionToCanvas("setDirty",[!0,!0]),this.on_change&&this.on_change(this)},LGraph.prototype.setDirtyCanvas=function(e,t){this.sendActionToCanvas("setDirty",[e,t])},LGraph.prototype.removeLink=function(e){var t=this.links[e];if(t){var n=this.getNodeById(t.target_id);n&&n.disconnectInput(t.target_slot)}},LGraph.prototype.serialize=function(){for(var e=[],t=0,n=this._nodes.length;t<n;++t)e.push(this._nodes[t].serialize());var a=[];for(var t in this.links){var s=this.links[t];if(!s.serialize){console.warn("weird LLink bug, link info is not a LLink but a regular object");var u=new LLink;for(var c in s)u[c]=s[c];this.links[t]=u,s=u}a.push(s.serialize())}for(var h=[],t=0;t<this._groups.length;++t)h.push(this._groups[t].serialize());var f={last_node_id:this.last_node_id,last_link_id:this.last_link_id,nodes:e,links:a,groups:h,config:this.config,extra:this.extra,version:LiteGraph.VERSION};return this.onSerialize&&this.onSerialize(f),f},LGraph.prototype.configure=function(e,t){if(e){t||this.clear();var n=e.nodes;if(e.links&&e.links.constructor===Array){for(var a=[],s=0;s<e.links.length;++s){var u=e.links[s];if(!u){console.warn("serialized graph link data contains errors, skipping.");continue}var c=new LLink;c.configure(u),a[c.id]=c}e.links=a}for(var s in e)s=="nodes"||s=="groups"||(this[s]=e[s]);var h=!1;if(this._nodes=[],n){for(var s=0,f=n.length;s<f;++s){var m=n[s],_=LiteGraph.createNode(m.type,m.title);_||(LiteGraph.debug&&console.log("Node not found or has errors: "+m.type),_=new LGraphNode,_.last_serialization=m,_.has_errors=!0,h=!0),_.id=m.id,this.add(_,!0)}for(var s=0,f=n.length;s<f;++s){var m=n[s],_=this.getNodeById(m.id);_&&_.configure(m)}}if(this._groups.length=0,e.groups)for(var s=0;s<e.groups.length;++s){var C=new LiteGraph.LGraphGroup;C.configure(e.groups[s]),this.add(C)}return this.updateExecutionOrder(),this.extra=e.extra||{},this.onConfigure&&this.onConfigure(e),this._version++,this.setDirtyCanvas(!0,!0),h}},LGraph.prototype.load=function(e,t){var n=this;if(e.constructor===File||e.constructor===Blob){var a=new FileReader;a.addEventListener("load",function(u){var c=JSON.parse(u.target.result);n.configure(c),t&&t()}),a.readAsText(e);return}var s=new XMLHttpRequest;s.open("GET",e,!0),s.send(null),s.onload=function(u){if(s.status!==200){console.error("Error loading graph:",s.status,s.response);return}var c=JSON.parse(s.response);n.configure(c),t&&t()},s.onerror=function(u){console.error("Error loading graph:",u)}},LGraph.prototype.onNodeTrace=function(e,t,n){};function LLink(e,t,n,a,s,u){this.id=e,this.type=t,this.origin_id=n,this.origin_slot=a,this.target_id=s,this.target_slot=u,this._data=null,this._pos=new Float32Array(2)}LLink.prototype.configure=function(e){e.constructor===Array?(this.id=e[0],this.origin_id=e[1],this.origin_slot=e[2],this.target_id=e[3],this.target_slot=e[4],this.type=e[5]):(this.id=e.id,this.type=e.type,this.origin_id=e.origin_id,this.origin_slot=e.origin_slot,this.target_id=e.target_id,this.target_slot=e.target_slot)},LLink.prototype.serialize=function(){return[this.id,this.origin_id,this.origin_slot,this.target_id,this.target_slot,this.type]},LiteGraph.LLink=LLink;function LGraphNode(e){this._ctor(e)}global.LGraphNode=LiteGraph.LGraphNode=LGraphNode,LGraphNode.prototype._ctor=function(e){this.title=e||"Unnamed",this.size=[LiteGraph.NODE_WIDTH,60],this.graph=null,this._pos=new Float32Array(10,10),Object.defineProperty(this,"pos",{set:function(t){!t||t.length<2||(this._pos[0]=t[0],this._pos[1]=t[1])},get:function(){return this._pos},enumerable:!0}),LiteGraph.use_uuids?this.id=LiteGraph.uuidv4():this.id=-1,this.type=null,this.inputs=[],this.outputs=[],this.connections=[],this.properties={},this.properties_info=[],this.flags={}},LGraphNode.prototype.configure=function(e){this.graph&&this.graph._version++;for(var t in e){if(t=="properties"){for(var n in e.properties)this.properties[n]=e.properties[n],this.onPropertyChanged&&this.onPropertyChanged(n,e.properties[n]);continue}e[t]!=null&&(typeof e[t]=="object"?this[t]&&this[t].configure?this[t].configure(e[t]):this[t]=LiteGraph.cloneObject(e[t],this[t]):this[t]=e[t])}if(e.title||(this.title=this.constructor.title),this.inputs)for(var a=0;a<this.inputs.length;++a){var s=this.inputs[a],u=this.graph?this.graph.links[s.link]:null;this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.INPUT,a,!0,u,s),this.onInputAdded&&this.onInputAdded(s)}if(this.outputs)for(var a=0;a<this.outputs.length;++a){var c=this.outputs[a];if(c.links){for(var t=0;t<c.links.length;++t){var u=this.graph?this.graph.links[c.links[t]]:null;this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,a,!0,u,c)}this.onOutputAdded&&this.onOutputAdded(c)}}if(this.widgets){for(var a=0;a<this.widgets.length;++a){var h=this.widgets[a];h&&h.options&&h.options.property&&this.properties[h.options.property]!=null&&(h.value=JSON.parse(JSON.stringify(this.properties[h.options.property])))}if(e.widgets_values)for(var a=0;a<e.widgets_values.length;++a)this.widgets[a]&&(this.widgets[a].value=e.widgets_values[a])}this.onConfigure&&this.onConfigure(e)},LGraphNode.prototype.serialize=function(){var e={id:this.id,type:this.type,pos:this.pos,size:this.size,flags:LiteGraph.cloneObject(this.flags),order:this.order,mode:this.mode};if(this.constructor===LGraphNode&&this.last_serialization)return this.last_serialization;if(this.inputs&&(e.inputs=this.inputs),this.outputs){for(var t=0;t<this.outputs.length;t++)delete this.outputs[t]._data;e.outputs=this.outputs}if(this.title&&this.title!=this.constructor.title&&(e.title=this.title),this.properties&&(e.properties=LiteGraph.cloneObject(this.properties)),this.widgets&&this.serialize_widgets){e.widgets_values=[];for(var t=0;t<this.widgets.length;++t)this.widgets[t]?e.widgets_values[t]=this.widgets[t].value:e.widgets_values[t]=null}return e.type||(e.type=this.constructor.type),this.color&&(e.color=this.color),this.bgcolor&&(e.bgcolor=this.bgcolor),this.boxcolor&&(e.boxcolor=this.boxcolor),this.shape&&(e.shape=this.shape),this.onSerialize&&this.onSerialize(e)&&console.warn("node onSerialize shouldnt return anything, data should be stored in the object pass in the first parameter"),e},LGraphNode.prototype.clone=function(){var e=LiteGraph.createNode(this.type);if(!e)return null;var t=LiteGraph.cloneObject(this.serialize());if(t.inputs)for(var n=0;n<t.inputs.length;++n)t.inputs[n].link=null;if(t.outputs)for(var n=0;n<t.outputs.length;++n)t.outputs[n].links&&(t.outputs[n].links.length=0);return delete t.id,LiteGraph.use_uuids&&(t.id=LiteGraph.uuidv4()),e.configure(t),e},LGraphNode.prototype.toString=function(){return JSON.stringify(this.serialize())},LGraphNode.prototype.getTitle=function(){return this.title||this.constructor.title},LGraphNode.prototype.setProperty=function(e,t){if(this.properties||(this.properties={}),t!==this.properties[e]){var n=this.properties[e];if(this.properties[e]=t,this.onPropertyChanged&&this.onPropertyChanged(e,t,n)===!1&&(this.properties[e]=n),this.widgets)for(var a=0;a<this.widgets.length;++a){var s=this.widgets[a];if(s&&s.options.property==e){s.value=t;break}}}},LGraphNode.prototype.setOutputData=function(e,t){if(this.outputs&&!(e==-1||e>=this.outputs.length)){var n=this.outputs[e];if(n&&(n._data=t,this.outputs[e].links))for(var a=0;a<this.outputs[e].links.length;a++){var s=this.outputs[e].links[a],u=this.graph.links[s];u&&(u.data=t)}}},LGraphNode.prototype.setOutputDataType=function(e,t){if(this.outputs&&!(e==-1||e>=this.outputs.length)){var n=this.outputs[e];if(n&&(n.type=t,this.outputs[e].links))for(var a=0;a<this.outputs[e].links.length;a++){var s=this.outputs[e].links[a];this.graph.links[s].type=t}}},LGraphNode.prototype.getInputData=function(e,t){if(this.inputs&&!(e>=this.inputs.length||this.inputs[e].link==null)){var n=this.inputs[e].link,a=this.graph.links[n];if(!a)return null;if(!t)return a.data;var s=this.graph.getNodeById(a.origin_id);return s&&(s.updateOutputData?s.updateOutputData(a.origin_slot):s.onExecute&&s.onExecute()),a.data}},LGraphNode.prototype.getInputDataType=function(e){if(!this.inputs||e>=this.inputs.length||this.inputs[e].link==null)return null;var t=this.inputs[e].link,n=this.graph.links[t];if(!n)return null;var a=this.graph.getNodeById(n.origin_id);if(!a)return n.type;var s=a.outputs[n.origin_slot];return s?s.type:null},LGraphNode.prototype.getInputDataByName=function(e,t){var n=this.findInputSlot(e);return n==-1?null:this.getInputData(n,t)},LGraphNode.prototype.isInputConnected=function(e){return this.inputs?e<this.inputs.length&&this.inputs[e].link!=null:!1},LGraphNode.prototype.getInputInfo=function(e){return this.inputs&&e<this.inputs.length?this.inputs[e]:null},LGraphNode.prototype.getInputLink=function(e){if(!this.inputs)return null;if(e<this.inputs.length){var t=this.inputs[e];return this.graph.links[t.link]}return null},LGraphNode.prototype.getInputNode=function(e){if(!this.inputs||e>=this.inputs.length)return null;var t=this.inputs[e];if(!t||t.link===null)return null;var n=this.graph.links[t.link];return n?this.graph.getNodeById(n.origin_id):null},LGraphNode.prototype.getInputOrProperty=function(e){if(!this.inputs||!this.inputs.length)return this.properties?this.properties[e]:null;for(var t=0,n=this.inputs.length;t<n;++t){var a=this.inputs[t];if(e==a.name&&a.link!=null){var s=this.graph.links[a.link];if(s)return s.data}}return this.properties[e]},LGraphNode.prototype.getOutputData=function(e){if(!this.outputs||e>=this.outputs.length)return null;var t=this.outputs[e];return t._data},LGraphNode.prototype.getOutputInfo=function(e){return this.outputs&&e<this.outputs.length?this.outputs[e]:null},LGraphNode.prototype.isOutputConnected=function(e){return this.outputs?e<this.outputs.length&&this.outputs[e].links&&this.outputs[e].links.length:!1},LGraphNode.prototype.isAnyOutputConnected=function(){if(!this.outputs)return!1;for(var e=0;e<this.outputs.length;++e)if(this.outputs[e].links&&this.outputs[e].links.length)return!0;return!1},LGraphNode.prototype.getOutputNodes=function(e){if(!this.outputs||this.outputs.length==0||e>=this.outputs.length)return null;var t=this.outputs[e];if(!t.links||t.links.length==0)return null;for(var n=[],a=0;a<t.links.length;a++){var s=t.links[a],u=this.graph.links[s];if(u){var c=this.graph.getNodeById(u.target_id);c&&n.push(c)}}return n},LGraphNode.prototype.addOnTriggerInput=function(){var e=this.findInputSlot("onTrigger");if(e==-1){//!trigS || 
return this.addInput("onTrigger",LiteGraph.EVENT,{optional:!0,nameLocked:!0}),this.findInputSlot("onTrigger")}return e},LGraphNode.prototype.addOnExecutedOutput=function(){var e=this.findOutputSlot("onExecuted");if(e==-1){//!trigS || 
return this.addOutput("onExecuted",LiteGraph.ACTION,{optional:!0,nameLocked:!0}),this.findOutputSlot("onExecuted")}return e},LGraphNode.prototype.onAfterExecuteNode=function(e,t){var n=this.findOutputSlot("onExecuted");n!=-1&&this.triggerSlot(n,e,null,t)},LGraphNode.prototype.changeMode=function(e){switch(e){case LiteGraph.ON_EVENT:break;case LiteGraph.ON_TRIGGER:this.addOnTriggerInput(),this.addOnExecutedOutput();break;case LiteGraph.NEVER:break;case LiteGraph.ALWAYS:break;case LiteGraph.ON_REQUEST:break;default:return!1}return this.mode=e,!0},LGraphNode.prototype.executePendingActions=function(){if(!(!this._waiting_actions||!this._waiting_actions.length)){for(var e=0;e<this._waiting_actions.length;++e){var t=this._waiting_actions[e];this.onAction(t[0],t[1],t[2],t[3],t[4])}this._waiting_actions.length=0}},LGraphNode.prototype.doExecute=function(e,t){t=t||{},this.onExecute&&(t.action_call||(t.action_call=this.id+"_exec_"+Math.floor(Math.random()*9999)),this.graph.nodes_executing[this.id]=!0,this.onExecute(e,t),this.graph.nodes_executing[this.id]=!1,this.exec_version=this.graph.iteration,t&&t.action_call&&(this.action_call=t.action_call,this.graph.nodes_executedAction[this.id]=t.action_call)),this.execute_triggered=2,this.onAfterExecuteNode&&this.onAfterExecuteNode(e,t)},LGraphNode.prototype.actionDo=function(e,t,n,a){n=n||{},this.onAction&&(n.action_call||(n.action_call=this.id+"_"+(e||"action")+"_"+Math.floor(Math.random()*9999)),this.graph.nodes_actioning[this.id]=e||"actioning",this.onAction(e,t,n,a),this.graph.nodes_actioning[this.id]=!1,n&&n.action_call&&(this.action_call=n.action_call,this.graph.nodes_executedAction[this.id]=n.action_call)),this.action_triggered=2,this.onAfterExecuteNode&&this.onAfterExecuteNode(t,n)},LGraphNode.prototype.trigger=function(e,t,n){if(!(!this.outputs||!this.outputs.length)){this.graph&&(this.graph._last_trigger_time=LiteGraph.getTime());for(var a=0;a<this.outputs.length;++a){var s=this.outputs[a];!s||s.type!==LiteGraph.EVENT||e&&s.name!=e||this.triggerSlot(a,t,null,n)}}},LGraphNode.prototype.triggerSlot=function(e,t,n,a){if(a=a||{},!!this.outputs){if(e==null){console.error("slot must be a number");return}e.constructor!==Number&&console.warn("slot must be a number, use node.trigger('name') if you want to use a string");var s=this.outputs[e];if(s){var u=s.links;if(!(!u||!u.length)){this.graph&&(this.graph._last_trigger_time=LiteGraph.getTime());for(var c=0;c<u.length;++c){var h=u[c];if(!(n!=null&&n!=h)){var f=this.graph.links[u[c]];if(f){f._last_time=LiteGraph.getTime();var m=this.graph.getNodeById(f.target_id);if(m){var _=m.inputs[f.target_slot];if(m.mode===LiteGraph.ON_TRIGGER)a.action_call||(a.action_call=this.id+"_trigg_"+Math.floor(Math.random()*9999)),m.onExecute&&m.doExecute(t,a);else if(m.onAction){a.action_call||(a.action_call=this.id+"_act_"+Math.floor(Math.random()*9999));var _=m.inputs[f.target_slot];LiteGraph.use_deferred_actions&&m.onExecute?(m._waiting_actions||(m._waiting_actions=[]),m._waiting_actions.push([_.name,t,a,f.target_slot])):m.actionDo(_.name,t,a,f.target_slot)}}}}}}}}},LGraphNode.prototype.clearTriggeredSlot=function(e,t){if(this.outputs){var n=this.outputs[e];if(n){var a=n.links;if(!(!a||!a.length))for(var s=0;s<a.length;++s){var u=a[s];if(!(t!=null&&t!=u)){var c=this.graph.links[a[s]];c&&(c._last_time=0)}}}}},LGraphNode.prototype.setSize=function(e){this.size=e,this.onResize&&this.onResize(this.size)},LGraphNode.prototype.addProperty=function(e,t,n,a){var s={name:e,type:n,default_value:t};if(a)for(var u in a)s[u]=a[u];return this.properties_info||(this.properties_info=[]),this.properties_info.push(s),this.properties||(this.properties={}),this.properties[e]=t,s},LGraphNode.prototype.addOutput=function(e,t,n){var a={name:e,type:t,links:null};if(n)for(var s in n)a[s]=n[s];return this.outputs||(this.outputs=[]),this.outputs.push(a),this.onOutputAdded&&this.onOutputAdded(a),LiteGraph.auto_load_slot_types&&LiteGraph.registerNodeAndSlotType(this,t,!0),this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0),a},LGraphNode.prototype.addOutputs=function(e){for(var t=0;t<e.length;++t){var n=e[t],a={name:n[0],type:n[1],link:null};if(e[2])for(var s in n[2])a[s]=n[2][s];this.outputs||(this.outputs=[]),this.outputs.push(a),this.onOutputAdded&&this.onOutputAdded(a),LiteGraph.auto_load_slot_types&&LiteGraph.registerNodeAndSlotType(this,n[1],!0)}this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.removeOutput=function(e){this.disconnectOutput(e),this.outputs.splice(e,1);for(var t=e;t<this.outputs.length;++t)if(!(!this.outputs[t]||!this.outputs[t].links))for(var n=this.outputs[t].links,a=0;a<n.length;++a){var s=this.graph.links[n[a]];s&&(s.origin_slot-=1)}this.setSize(this.computeSize()),this.onOutputRemoved&&this.onOutputRemoved(e),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.addInput=function(e,t,n){t=t||0;var a={name:e,type:t,link:null};if(n)for(var s in n)a[s]=n[s];return this.inputs||(this.inputs=[]),this.inputs.push(a),this.setSize(this.computeSize()),this.onInputAdded&&this.onInputAdded(a),LiteGraph.registerNodeAndSlotType(this,t),this.setDirtyCanvas(!0,!0),a},LGraphNode.prototype.addInputs=function(e){for(var t=0;t<e.length;++t){var n=e[t],a={name:n[0],type:n[1],link:null};if(e[2])for(var s in n[2])a[s]=n[2][s];this.inputs||(this.inputs=[]),this.inputs.push(a),this.onInputAdded&&this.onInputAdded(a),LiteGraph.registerNodeAndSlotType(this,n[1])}this.setSize(this.computeSize()),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.removeInput=function(e){this.disconnectInput(e);for(var t=this.inputs.splice(e,1),n=e;n<this.inputs.length;++n)if(this.inputs[n]){var a=this.graph.links[this.inputs[n].link];a&&(a.target_slot-=1)}this.setSize(this.computeSize()),this.onInputRemoved&&this.onInputRemoved(e,t[0]),this.setDirtyCanvas(!0,!0)},LGraphNode.prototype.addConnection=function(e,t,n,a){var s={name:e,type:t,pos:n,direction:a,links:null};return this.connections.push(s),s},LGraphNode.prototype.computeSize=function(e){if(this.constructor.size)return this.constructor.size.concat();var t=Math.max(this.inputs?this.inputs.length:1,this.outputs?this.outputs.length:1),n=e||new Float32Array([0,0]);t=Math.max(t,1);var a=LiteGraph.NODE_TEXT_SIZE,s=R(this.title),u=0,c=0;if(this.inputs)for(var h=0,f=this.inputs.length;h<f;++h){var m=this.inputs[h],_=m.label||m.name||"",C=R(_);u<C&&(u=C)}if(this.outputs)for(var h=0,f=this.outputs.length;h<f;++h){var b=this.outputs[h],_=b.label||b.name||"",C=R(_);c<C&&(c=C)}n[0]=Math.max(u+c+10,s),n[0]=Math.max(n[0],LiteGraph.NODE_WIDTH),this.widgets&&this.widgets.length&&(n[0]=Math.max(n[0],LiteGraph.NODE_WIDTH*1.5)),n[1]=(this.constructor.slot_start_y||0)+t*LiteGraph.NODE_SLOT_HEIGHT;var T=0;if(this.widgets&&this.widgets.length){for(var h=0,f=this.widgets.length;h<f;++h)this.widgets[h].computeSize?T+=this.widgets[h].computeSize(n[0])[1]+4:T+=LiteGraph.NODE_WIDGET_HEIGHT+4;T+=8}this.widgets_up?n[1]=Math.max(n[1],T):this.widgets_start_y!=null?n[1]=Math.max(n[1],T+this.widgets_start_y):n[1]+=T;function R(A){return A?a*A.length*.6:0}return this.constructor.min_height&&n[1]<this.constructor.min_height&&(n[1]=this.constructor.min_height),n[1]+=6,n},LGraphNode.prototype.getPropertyInfo=function(e){var t=null;if(this.properties_info){for(var n=0;n<this.properties_info.length;++n)if(this.properties_info[n].name==e){t=this.properties_info[n];break}}return this.constructor["@"+e]&&(t=this.constructor["@"+e]),this.constructor.widgets_info&&this.constructor.widgets_info[e]&&(t=this.constructor.widgets_info[e]),!t&&this.onGetPropertyInfo&&(t=this.onGetPropertyInfo(e)),t||(t={}),t.type||(t.type=typeof this.properties[e]),t.widget=="combo"&&(t.type="enum"),t},LGraphNode.prototype.addWidget=function(e,t,n,a,s){this.widgets||(this.widgets=[]),!s&&a&&a.constructor===Object&&(s=a,a=null),s&&s.constructor===String&&(s={property:s}),a&&a.constructor===String&&(s||(s={}),s.property=a,a=null),a&&a.constructor!==Function&&(console.warn("addWidget: callback must be a function"),a=null);var u={type:e.toLowerCase(),name:t,value:n,callback:a,options:s||{}};if(u.options.y!==void 0&&(u.y=u.options.y),!a&&!u.options.callback&&!u.options.property&&console.warn("LiteGraph addWidget(...) without a callback or property assigned"),e=="combo"&&!u.options.values)throw"LiteGraph addWidget('combo',...) requires to pass values in options: { values:['red','blue'] }";return this.widgets.push(u),this.setSize(this.computeSize()),u},LGraphNode.prototype.addCustomWidget=function(e){return this.widgets||(this.widgets=[]),this.widgets.push(e),e},LGraphNode.prototype.getBounding=function(e,t){e=e||new Float32Array(4);const n=this.pos,a=this.flags.collapsed,s=this.size;let u=0,c=1,h=0,f=0;return t&&(u=4,c=6+u,h=4,f=5+h),e[0]=n[0]-u,e[1]=n[1]-LiteGraph.NODE_TITLE_HEIGHT-h,e[2]=a?(this._collapsed_width||LiteGraph.NODE_COLLAPSED_WIDTH)+c:s[0]+c,e[3]=a?LiteGraph.NODE_TITLE_HEIGHT+f:s[1]+LiteGraph.NODE_TITLE_HEIGHT+f,this.onBounding&&this.onBounding(e),e},LGraphNode.prototype.isPointInside=function(e,t,n,a){n=n||0;var s=this.graph&&this.graph.isLive()?0:LiteGraph.NODE_TITLE_HEIGHT;if(a&&(s=0),this.flags&&this.flags.collapsed){if(isInsideRectangle(e,t,this.pos[0]-n,this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT-n,(this._collapsed_width||LiteGraph.NODE_COLLAPSED_WIDTH)+2*n,LiteGraph.NODE_TITLE_HEIGHT+2*n))return!0}else if(this.pos[0]-4-n<e&&this.pos[0]+this.size[0]+4+n>e&&this.pos[1]-s-n<t&&this.pos[1]+this.size[1]+n>t)return!0;return!1},LGraphNode.prototype.getSlotInPosition=function(e,t){var n=new Float32Array(2);if(this.inputs)for(var a=0,s=this.inputs.length;a<s;++a){var u=this.inputs[a];if(this.getConnectionPos(!0,a,n),isInsideRectangle(e,t,n[0]-10,n[1]-5,20,10))return{input:u,slot:a,link_pos:n}}if(this.outputs)for(var a=0,s=this.outputs.length;a<s;++a){var c=this.outputs[a];if(this.getConnectionPos(!1,a,n),isInsideRectangle(e,t,n[0]-10,n[1]-5,20,10))return{output:c,slot:a,link_pos:n}}return null},LGraphNode.prototype.findInputSlot=function(e,t){if(!this.inputs)return-1;for(var n=0,a=this.inputs.length;n<a;++n)if(e==this.inputs[n].name)return t?this.inputs[n]:n;return-1},LGraphNode.prototype.findOutputSlot=function(e,t){if(t=t||!1,!this.outputs)return-1;for(var n=0,a=this.outputs.length;n<a;++n)if(e==this.outputs[n].name)return t?this.outputs[n]:n;return-1},LGraphNode.prototype.findInputSlotFree=function(t){var t=t||{},n={returnObj:!1,typesNotAccepted:[]},a=Object.assign(n,t);if(!this.inputs)return-1;for(var s=0,u=this.inputs.length;s<u;++s)if(!(this.inputs[s].link&&this.inputs[s].link!=null)&&!(a.typesNotAccepted&&a.typesNotAccepted.includes&&a.typesNotAccepted.includes(this.inputs[s].type)))return a.returnObj?this.inputs[s]:s;return-1},LGraphNode.prototype.findOutputSlotFree=function(t){var t=t||{},n={returnObj:!1,typesNotAccepted:[]},a=Object.assign(n,t);if(!this.outputs)return-1;for(var s=0,u=this.outputs.length;s<u;++s)if(!(this.outputs[s].links&&this.outputs[s].links!=null)&&!(a.typesNotAccepted&&a.typesNotAccepted.includes&&a.typesNotAccepted.includes(this.outputs[s].type)))return a.returnObj?this.outputs[s]:s;return-1},LGraphNode.prototype.findInputSlotByType=function(e,t,n,a){return this.findSlotByType(!0,e,t,n,a)},LGraphNode.prototype.findOutputSlotByType=function(e,t,n,a){return this.findSlotByType(!1,e,t,n,a)},LGraphNode.prototype.findSlotByType=function(e,t,n,a,s){e=e||!1,n=n||!1,a=a||!1,s=s||!1;var u=e?this.inputs:this.outputs;if(!u)return-1;(t==""||t=="*")&&(t=0);for(var c=0,h=u.length;c<h;++c){var f=(t+"").toLowerCase().split(","),m=u[c].type=="0"||u[c].type=="*"?"0":u[c].type;m=(m+"").toLowerCase().split(",");for(var _=0;_<f.length;_++)for(var C=0;C<m.length;C++)if(f[_]=="_event_"&&(f[_]=LiteGraph.EVENT),m[_]=="_event_"&&(m[_]=LiteGraph.EVENT),f[_]=="*"&&(f[_]=0),m[_]=="*"&&(m[_]=0),f[_]==m[C]){if(a&&u[c].links&&u[c].links!==null)continue;return n?u[c]:c}}if(a&&!s)for(var c=0,h=u.length;c<h;++c){var f=(t+"").toLowerCase().split(","),m=u[c].type=="0"||u[c].type=="*"?"0":u[c].type;m=(m+"").toLowerCase().split(",");for(var _=0;_<f.length;_++)for(var C=0;C<m.length;C++)if(f[_]=="*"&&(f[_]=0),m[_]=="*"&&(m[_]=0),f[_]==m[C])return n?u[c]:c}return-1},LGraphNode.prototype.connectByType=function(e,t,n,s){var s=s||{},u={createEventInCase:!0,firstFreeIfOutputGeneralInCase:!0,generalTypeInCase:!0},c=Object.assign(u,s);t&&t.constructor===Number&&(t=this.graph.getNodeById(t));var h=t.findInputSlotByType(n,!1,!0);if(h>=0&&h!==null)return this.connect(e,t,h);if(c.createEventInCase&&n==LiteGraph.EVENT)return this.connect(e,t,-1);if(c.generalTypeInCase){var h=t.findInputSlotByType(0,!1,!0,!0);if(h>=0)return this.connect(e,t,h)}if(c.firstFreeIfOutputGeneralInCase&&(n==0||n=="*"||n=="")){var h=t.findInputSlotFree({typesNotAccepted:[LiteGraph.EVENT]});if(h>=0)return this.connect(e,t,h)}return console.debug("no way to connect type: ",n," to targetNODE ",t),null},LGraphNode.prototype.connectByTypeOutput=function(e,t,n,s){var s=s||{},u={createEventInCase:!0,firstFreeIfInputGeneralInCase:!0,generalTypeInCase:!0},c=Object.assign(u,s);t&&t.constructor===Number&&(t=this.graph.getNodeById(t));var h=t.findOutputSlotByType(n,!1,!0);if(h>=0&&h!==null)return t.connect(h,this,e);if(c.generalTypeInCase){var h=t.findOutputSlotByType(0,!1,!0,!0);if(h>=0)return t.connect(h,this,e)}if(c.createEventInCase&&n==LiteGraph.EVENT&&LiteGraph.do_add_triggers_slots){var h=t.addOnExecutedOutput();return t.connect(h,this,e)}if(c.firstFreeIfInputGeneralInCase&&(n==0||n=="*"||n=="")){var h=t.findOutputSlotFree({typesNotAccepted:[LiteGraph.EVENT]});if(h>=0)return t.connect(h,this,e)}return console.debug("no way to connect byOUT type: ",n," to sourceNODE ",t),null},LGraphNode.prototype.connect=function(e,t,n){if(n=n||0,!this.graph)return console.log("Connect: Error, node doesn't belong to any graph. Nodes must be added first to a graph before connecting them."),null;if(e.constructor===String){if(e=this.findOutputSlot(e),e==-1)return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+e),null}else if(!this.outputs||e>=this.outputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),null;if(t&&t.constructor===Number&&(t=this.graph.getNodeById(t)),!t)throw"target node is null";if(t==this)return null;if(n.constructor===String){if(n=t.findInputSlot(n),n==-1)return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+n),null}else if(n===LiteGraph.EVENT)if(LiteGraph.do_add_triggers_slots)t.changeMode(LiteGraph.ON_TRIGGER),n=t.findInputSlot("onTrigger");else return null;else if(!t.inputs||n>=t.inputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),null;var a=!1,s=t.inputs[n],u=null,c=this.outputs[e];if(!this.outputs[e])return null;if(t.onBeforeConnectInput&&(n=t.onBeforeConnectInput(n)),n===!1||n===null||!LiteGraph.isValidConnection(c.type,s.type))return this.setDirtyCanvas(!1,!0),a&&this.graph.connectionChange(this,u),null;if(t.onConnectInput&&t.onConnectInput(n,c.type,c,this,e)===!1||this.onConnectOutput&&this.onConnectOutput(e,s.type,s,t,n)===!1)return null;if(t.inputs[n]&&t.inputs[n].link!=null&&(this.graph.beforeChange(),t.disconnectInput(n,{doProcessChange:!1}),a=!0),c.links!==null&&c.links.length)switch(c.type){case LiteGraph.EVENT:LiteGraph.allow_multi_output_for_events||(this.graph.beforeChange(),this.disconnectOutput(e,!1,{doProcessChange:!1}),a=!0);break}var h;return LiteGraph.use_uuids?h=LiteGraph.uuidv4():h=++this.graph.last_link_id,u=new LLink(h,s.type||c.type,this.id,e,t.id,n),this.graph.links[u.id]=u,c.links==null&&(c.links=[]),c.links.push(u.id),t.inputs[n].link=u.id,this.graph&&this.graph._version++,this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,e,!0,u,c),t.onConnectionsChange&&t.onConnectionsChange(LiteGraph.INPUT,n,!0,u,s),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.INPUT,t,n,this,e),this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,e,t,n)),this.setDirtyCanvas(!1,!0),this.graph.afterChange(),this.graph.connectionChange(this,u),u},LGraphNode.prototype.disconnectOutput=function(e,t){if(e.constructor===String){if(e=this.findOutputSlot(e),e==-1)return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+e),!1}else if(!this.outputs||e>=this.outputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),!1;var n=this.outputs[e];if(!n||!n.links||n.links.length==0)return!1;if(t){if(t.constructor===Number&&(t=this.graph.getNodeById(t)),!t)throw"Target Node not found";for(var a=0,s=n.links.length;a<s;a++){var u=n.links[a],c=this.graph.links[u];if(c.target_id==t.id){n.links.splice(a,1);var h=t.inputs[c.target_slot];h.link=null,delete this.graph.links[u],this.graph&&this.graph._version++,t.onConnectionsChange&&t.onConnectionsChange(LiteGraph.INPUT,c.target_slot,!1,c,h),this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,e,!1,c,n),this.graph&&this.graph.onNodeConnectionChange&&this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,e),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,e),this.graph.onNodeConnectionChange(LiteGraph.INPUT,t,c.target_slot));break}}}else{for(var a=0,s=n.links.length;a<s;a++){var u=n.links[a],c=this.graph.links[u];if(c){var t=this.graph.getNodeById(c.target_id),h=null;this.graph&&this.graph._version++,t&&(h=t.inputs[c.target_slot],h.link=null,t.onConnectionsChange&&t.onConnectionsChange(LiteGraph.INPUT,c.target_slot,!1,c,h),this.graph&&this.graph.onNodeConnectionChange&&this.graph.onNodeConnectionChange(LiteGraph.INPUT,t,c.target_slot)),delete this.graph.links[u],this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.OUTPUT,e,!1,c,n),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,this,e),this.graph.onNodeConnectionChange(LiteGraph.INPUT,t,c.target_slot))}}n.links=null}return this.setDirtyCanvas(!1,!0),this.graph.connectionChange(this),!0},LGraphNode.prototype.disconnectInput=function(e){if(e.constructor===String){if(e=this.findInputSlot(e),e==-1)return LiteGraph.debug&&console.log("Connect: Error, no slot of name "+e),!1}else if(!this.inputs||e>=this.inputs.length)return LiteGraph.debug&&console.log("Connect: Error, slot number not found"),!1;var t=this.inputs[e];if(!t)return!1;var n=this.inputs[e].link;if(n!=null){this.inputs[e].link=null;var a=this.graph.links[n];if(a){var s=this.graph.getNodeById(a.origin_id);if(!s)return!1;var u=s.outputs[a.origin_slot];if(!u||!u.links||u.links.length==0)return!1;for(var c=0,h=u.links.length;c<h;c++)if(u.links[c]==n){u.links.splice(c,1);break}delete this.graph.links[n],this.graph&&this.graph._version++,this.onConnectionsChange&&this.onConnectionsChange(LiteGraph.INPUT,e,!1,a,t),s.onConnectionsChange&&s.onConnectionsChange(LiteGraph.OUTPUT,c,!1,a,u),this.graph&&this.graph.onNodeConnectionChange&&(this.graph.onNodeConnectionChange(LiteGraph.OUTPUT,s,c),this.graph.onNodeConnectionChange(LiteGraph.INPUT,this,e))}}return this.setDirtyCanvas(!1,!0),this.graph&&this.graph.connectionChange(this),!0},LGraphNode.prototype.getConnectionPos=function(e,t,n){n=n||new Float32Array(2);var a=0;e&&this.inputs&&(a=this.inputs.length),!e&&this.outputs&&(a=this.outputs.length);var s=LiteGraph.NODE_SLOT_HEIGHT*.5;if(this.flags.collapsed){var u=this._collapsed_width||LiteGraph.NODE_COLLAPSED_WIDTH;return this.horizontal?(n[0]=this.pos[0]+u*.5,e?n[1]=this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT:n[1]=this.pos[1]):(e?n[0]=this.pos[0]:n[0]=this.pos[0]+u,n[1]=this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT*.5),n}return e&&t==-1?(n[0]=this.pos[0]+LiteGraph.NODE_TITLE_HEIGHT*.5,n[1]=this.pos[1]+LiteGraph.NODE_TITLE_HEIGHT*.5,n):e&&a>t&&this.inputs[t].pos?(n[0]=this.pos[0]+this.inputs[t].pos[0],n[1]=this.pos[1]+this.inputs[t].pos[1],n):!e&&a>t&&this.outputs[t].pos?(n[0]=this.pos[0]+this.outputs[t].pos[0],n[1]=this.pos[1]+this.outputs[t].pos[1],n):this.horizontal?(n[0]=this.pos[0]+(t+.5)*(this.size[0]/a),e?n[1]=this.pos[1]-LiteGraph.NODE_TITLE_HEIGHT:n[1]=this.pos[1]+this.size[1],n):(e?n[0]=this.pos[0]+s:n[0]=this.pos[0]+this.size[0]+1-s,n[1]=this.pos[1]+(t+.7)*LiteGraph.NODE_SLOT_HEIGHT+(this.constructor.slot_start_y||0),n)},LGraphNode.prototype.alignToGrid=function(){this.pos[0]=LiteGraph.CANVAS_GRID_SIZE*Math.round(this.pos[0]/LiteGraph.CANVAS_GRID_SIZE),this.pos[1]=LiteGraph.CANVAS_GRID_SIZE*Math.round(this.pos[1]/LiteGraph.CANVAS_GRID_SIZE)},LGraphNode.prototype.trace=function(e){this.console||(this.console=[]),this.console.push(e),this.console.length>LGraphNode.MAX_CONSOLE&&this.console.shift(),this.graph.onNodeTrace&&this.graph.onNodeTrace(this,e)},LGraphNode.prototype.setDirtyCanvas=function(e,t){this.graph&&this.graph.sendActionToCanvas("setDirty",[e,t])},LGraphNode.prototype.loadImage=function(e){var t=new Image;t.src=LiteGraph.node_images_path+e,t.ready=!1;var n=this;return t.onload=function(){this.ready=!0,n.setDirtyCanvas(!0)},t},LGraphNode.prototype.captureInput=function(e){if(!(!this.graph||!this.graph.list_of_graphcanvas))for(var t=this.graph.list_of_graphcanvas,n=0;n<t.length;++n){var a=t[n];!e&&a.node_capturing_input!=this||(a.node_capturing_input=e?this:null)}},LGraphNode.prototype.collapse=function(e){this.graph._version++,!(this.constructor.collapsable===!1&&!e)&&(this.flags.collapsed?this.flags.collapsed=!1:this.flags.collapsed=!0,this.setDirtyCanvas(!0,!0))},LGraphNode.prototype.pin=function(e){this.graph._version++,e===void 0?this.flags.pinned=!this.flags.pinned:this.flags.pinned=e},LGraphNode.prototype.localToScreen=function(e,t,n){return[(e+this.pos[0])*n.scale+n.offset[0],(t+this.pos[1])*n.scale+n.offset[1]]};function LGraphGroup(e){this._ctor(e)}global.LGraphGroup=LiteGraph.LGraphGroup=LGraphGroup,LGraphGroup.prototype._ctor=function(e){this.title=e||"Group",this.font_size=24,this.color=LGraphCanvas.node_colors.pale_blue?LGraphCanvas.node_colors.pale_blue.groupcolor:"#AAA",this._bounding=new Float32Array([10,10,140,80]),this._pos=this._bounding.subarray(0,2),this._size=this._bounding.subarray(2,4),this._nodes=[],this.graph=null,Object.defineProperty(this,"pos",{set:function(t){!t||t.length<2||(this._pos[0]=t[0],this._pos[1]=t[1])},get:function(){return this._pos},enumerable:!0}),Object.defineProperty(this,"size",{set:function(t){!t||t.length<2||(this._size[0]=Math.max(140,t[0]),this._size[1]=Math.max(80,t[1]))},get:function(){return this._size},enumerable:!0})},LGraphGroup.prototype.configure=function(e){this.title=e.title,this._bounding.set(e.bounding),this.color=e.color,this.font_size=e.font_size},LGraphGroup.prototype.serialize=function(){var e=this._bounding;return{title:this.title,bounding:[Math.round(e[0]),Math.round(e[1]),Math.round(e[2]),Math.round(e[3])],color:this.color,font_size:this.font_size}},LGraphGroup.prototype.move=function(e,t,n){if(this._pos[0]+=e,this._pos[1]+=t,!n)for(var a=0;a<this._nodes.length;++a){var s=this._nodes[a];s.pos[0]+=e,s.pos[1]+=t}},LGraphGroup.prototype.recomputeInsideNodes=function(){this._nodes.length=0;for(var e=this.graph._nodes,t=new Float32Array(4),n=0;n<e.length;++n){var a=e[n];a.getBounding(t),overlapBounding(this._bounding,t)&&this._nodes.push(a)}},LGraphGroup.prototype.isPointInside=LGraphNode.prototype.isPointInside,LGraphGroup.prototype.setDirtyCanvas=LGraphNode.prototype.setDirtyCanvas;function DragAndScale(e,t){this.offset=new Float32Array([0,0]),this.scale=1,this.max_scale=10,this.min_scale=.1,this.onredraw=null,this.enabled=!0,this.last_mouse=[0,0],this.element=null,this.visible_area=new Float32Array(4),e&&(this.element=e,t||this.bindEvents(e))}LiteGraph.DragAndScale=DragAndScale,DragAndScale.prototype.bindEvents=function(e){this.last_mouse=new Float32Array(2),this._binded_mouse_callback=this.onMouse.bind(this),LiteGraph.pointerListenerAdd(e,"down",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(e,"move",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(e,"up",this._binded_mouse_callback),e.addEventListener("mousewheel",this._binded_mouse_callback,!1),e.addEventListener("wheel",this._binded_mouse_callback,!1)},DragAndScale.prototype.computeVisibleArea=function(e){if(!this.element){this.visible_area[0]=this.visible_area[1]=this.visible_area[2]=this.visible_area[3]=0;return}var t=this.element.width,n=this.element.height,a=-this.offset[0],s=-this.offset[1];e&&(a+=e[0]/this.scale,s+=e[1]/this.scale,t=e[2],n=e[3]);var u=a+t/this.scale,c=s+n/this.scale;this.visible_area[0]=a,this.visible_area[1]=s,this.visible_area[2]=u-a,this.visible_area[3]=c-s},DragAndScale.prototype.onMouse=function(e){if(this.enabled){var t=this.element,n=t.getBoundingClientRect(),a=e.clientX-n.left,s=e.clientY-n.top;e.canvasx=a,e.canvasy=s,e.dragging=this.dragging;var u=!this.viewport||this.viewport&&a>=this.viewport[0]&&a<this.viewport[0]+this.viewport[2]&&s>=this.viewport[1]&&s<this.viewport[1]+this.viewport[3],c=!1;if(this.onmouse&&(c=this.onmouse(e)),e.type==LiteGraph.pointerevents_method+"down"&&u)this.dragging=!0,LiteGraph.pointerListenerRemove(t,"move",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(document,"move",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(document,"up",this._binded_mouse_callback);else if(e.type==LiteGraph.pointerevents_method+"move"){if(!c){var h=a-this.last_mouse[0],f=s-this.last_mouse[1];this.dragging&&this.mouseDrag(h,f)}}else e.type==LiteGraph.pointerevents_method+"up"?(this.dragging=!1,LiteGraph.pointerListenerRemove(document,"move",this._binded_mouse_callback),LiteGraph.pointerListenerRemove(document,"up",this._binded_mouse_callback),LiteGraph.pointerListenerAdd(t,"move",this._binded_mouse_callback)):u&&(e.type=="mousewheel"||e.type=="wheel"||e.type=="DOMMouseScroll")&&(e.eventType="mousewheel",e.type=="wheel"?e.wheel=-e.deltaY:e.wheel=e.wheelDeltaY!=null?e.wheelDeltaY:e.detail*-60,e.delta=e.wheelDelta?e.wheelDelta/40:e.deltaY?-e.deltaY/3:0,this.changeDeltaScale(1+e.delta*.05));if(this.last_mouse[0]=a,this.last_mouse[1]=s,u)return e.preventDefault(),e.stopPropagation(),!1}},DragAndScale.prototype.toCanvasContext=function(e){e.scale(this.scale,this.scale),e.translate(this.offset[0],this.offset[1])},DragAndScale.prototype.convertOffsetToCanvas=function(e){return[(e[0]+this.offset[0])*this.scale,(e[1]+this.offset[1])*this.scale]},DragAndScale.prototype.convertCanvasToOffset=function(e,t){return t=t||[0,0],t[0]=e[0]/this.scale-this.offset[0],t[1]=e[1]/this.scale-this.offset[1],t},DragAndScale.prototype.mouseDrag=function(e,t){this.offset[0]+=e/this.scale,this.offset[1]+=t/this.scale,this.onredraw&&this.onredraw(this)},DragAndScale.prototype.changeScale=function(e,t){if(e<this.min_scale?e=this.min_scale:e>this.max_scale&&(e=this.max_scale),e!=this.scale&&this.element){var n=this.element.getBoundingClientRect();if(n){t=t||[n.width*.5,n.height*.5];var a=this.convertCanvasToOffset(t);this.scale=e,Math.abs(this.scale-1)<.01&&(this.scale=1);var s=this.convertCanvasToOffset(t),u=[s[0]-a[0],s[1]-a[1]];this.offset[0]+=u[0],this.offset[1]+=u[1],this.onredraw&&this.onredraw(this)}}},DragAndScale.prototype.changeDeltaScale=function(e,t){this.changeScale(this.scale*e,t)},DragAndScale.prototype.reset=function(){this.scale=1,this.offset[0]=0,this.offset[1]=0};function LGraphCanvas(e,t,n){this.options=n=n||{},this.background_image=LGraphCanvas.DEFAULT_BACKGROUND_IMAGE,e&&e.constructor===String&&(e=document.querySelector(e)),this.ds=new DragAndScale,this.zoom_modify_alpha=!0,this.title_text_font=""+LiteGraph.NODE_TEXT_SIZE+"px Arial",this.inner_text_font="normal "+LiteGraph.NODE_SUBTEXT_SIZE+"px Arial",this.node_title_color=LiteGraph.NODE_TITLE_COLOR,this.default_link_color=LiteGraph.LINK_COLOR,this.default_connection_color={input_off:"#778",input_on:"#7F7",output_off:"#778",output_on:"#7F7"},this.default_connection_color_byType={},this.default_connection_color_byTypeOff={},this.highquality_render=!0,this.use_gradients=!1,this.editor_alpha=1,this.pause_rendering=!1,this.clear_background=!0,this.clear_background_color="#222",this.read_only=!1,this.render_only_selected=!0,this.live_mode=!1,this.show_info=!0,this.allow_dragcanvas=!0,this.allow_dragnodes=!0,this.allow_interaction=!0,this.multi_select=!1,this.allow_searchbox=!0,this.allow_reconnect_links=!0,this.align_to_grid=!1,this.drag_mode=!1,this.dragging_rectangle=null,this.filter=null,this.set_canvas_dirty_on_mouse_event=!0,this.always_render_background=!1,this.render_shadows=!0,this.render_canvas_border=!0,this.render_connections_shadows=!1,this.render_connections_border=!0,this.render_curved_connections=!1,this.render_connection_arrows=!1,this.render_collapsed_slots=!0,this.render_execution_order=!1,this.render_title_colored=!0,this.render_link_tooltip=!0,this.links_render_mode=LiteGraph.SPLINE_LINK,this.mouse=[0,0],this.graph_mouse=[0,0],this.canvas_mouse=this.graph_mouse,this.onSearchBox=null,this.onSearchBoxSelection=null,this.onMouse=null,this.onDrawBackground=null,this.onDrawForeground=null,this.onDrawOverlay=null,this.onDrawLinkTooltip=null,this.onNodeMoved=null,this.onSelectionChange=null,this.onConnectingChange=null,this.onBeforeChange=null,this.onAfterChange=null,this.connections_width=3,this.round_radius=8,this.current_node=null,this.node_widget=null,this.over_link_center=null,this.last_mouse_position=[0,0],this.visible_area=this.ds.visible_area,this.visible_links=[],this.viewport=n.viewport||null,t&&t.attachCanvas(this),this.setCanvas(e,n.skip_events),this.clear(),n.skip_render||this.startRendering(),this.autoresize=n.autoresize}global.LGraphCanvas=LiteGraph.LGraphCanvas=LGraphCanvas,LGraphCanvas.DEFAULT_BACKGROUND_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQBJREFUeNrs1rEKwjAUhlETUkj3vP9rdmr1Ysammk2w5wdxuLgcMHyptfawuZX4pJSWZTnfnu/lnIe/jNNxHHGNn//HNbbv+4dr6V+11uF527arU7+u63qfa/bnmh8sWLBgwYJlqRf8MEptXPBXJXa37BSl3ixYsGDBMliwFLyCV/DeLIMFCxYsWLBMwSt4Be/NggXLYMGCBUvBK3iNruC9WbBgwYJlsGApeAWv4L1ZBgsWLFiwYJmCV/AK3psFC5bBggULloJX8BpdwXuzYMGCBctgwVLwCl7Be7MMFixYsGDBsu8FH1FaSmExVfAxBa/gvVmwYMGCZbBg/W4vAQYA5tRF9QYlv/QAAAAASUVORK5CYII=",LGraphCanvas.link_type_colors={"-1":LiteGraph.EVENT_LINK_COLOR,number:"#AAA",node:"#DCA"},LGraphCanvas.gradients={},LGraphCanvas.prototype.clear=function(){this.frame=0,this.last_draw_time=0,this.render_time=0,this.fps=0,this.dragging_rectangle=null,this.selected_nodes={},this.selected_group=null,this.visible_nodes=[],this.node_dragged=null,this.node_over=null,this.node_capturing_input=null,this.connecting_node=null,this.highlighted_links={},this.dragging_canvas=!1,this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.dirty_area=null,this.node_in_panel=null,this.node_widget=null,this.last_mouse=[0,0],this.last_mouseclick=0,this.pointer_is_down=!1,this.pointer_is_double=!1,this.visible_area.set([0,0,0,0]),this.onClear&&this.onClear()},LGraphCanvas.prototype.setGraph=function(e,t){if(this.graph!=e){if(t||this.clear(),!e&&this.graph){this.graph.detachCanvas(this);return}e.attachCanvas(this),this._graph_stack&&(this._graph_stack=null),this.setDirty(!0,!0)}},LGraphCanvas.prototype.getTopGraph=function(){return this._graph_stack.length?this._graph_stack[0]:this.graph},LGraphCanvas.prototype.openSubgraph=function(e){if(!e)throw"graph cannot be null";if(this.graph==e)throw"graph cannot be the same";this.clear(),this.graph&&(this._graph_stack||(this._graph_stack=[]),this._graph_stack.push(this.graph)),e.attachCanvas(this),this.checkPanels(),this.setDirty(!0,!0)},LGraphCanvas.prototype.closeSubgraph=function(){if(!(!this._graph_stack||this._graph_stack.length==0)){var e=this.graph._subgraph_node,t=this._graph_stack.pop();this.selected_nodes={},this.highlighted_links={},t.attachCanvas(this),this.setDirty(!0,!0),e&&(this.centerOnNode(e),this.selectNodes([e])),this.ds.offset=[0,0],this.ds.scale=1}},LGraphCanvas.prototype.getCurrentGraph=function(){return this.graph},LGraphCanvas.prototype.setCanvas=function(e,t){if(e&&e.constructor===String&&(e=document.getElementById(e),!e))throw"Error creating LiteGraph canvas: Canvas not found";if(e!==this.canvas&&(!e&&this.canvas&&(t||this.unbindEvents()),this.canvas=e,this.ds.element=e,!!e)){if(e.className+=" lgraphcanvas",e.data=this,e.tabindex="1",this.bgcanvas=null,this.bgcanvas||(this.bgcanvas=document.createElement("canvas"),this.bgcanvas.width=this.canvas.width,this.bgcanvas.height=this.canvas.height),e.getContext==null)throw e.localName!="canvas"?"Element supplied for LGraphCanvas must be a <canvas> element, you passed a "+e.localName:"This browser doesn't support Canvas";var n=this.ctx=e.getContext("2d");n==null&&(e.webgl_enabled||console.warn("This canvas seems to be WebGL, enabling WebGL renderer"),this.enableWebGL()),t||this.bindEvents()}},LGraphCanvas.prototype._doNothing=function(t){return t.preventDefault(),!1},LGraphCanvas.prototype._doReturnTrue=function(t){return t.preventDefault(),!0},LGraphCanvas.prototype.bindEvents=function(){if(this._events_binded){console.warn("LGraphCanvas: events already binded");return}var e=this.canvas,t=this.getCanvasWindow(),n=t.document;this._mousedown_callback=this.processMouseDown.bind(this),this._mousewheel_callback=this.processMouseWheel.bind(this),this._mousemove_callback=this.processMouseMove.bind(this),this._mouseup_callback=this.processMouseUp.bind(this),LiteGraph.pointerListenerAdd(e,"down",this._mousedown_callback,!0),e.addEventListener("mousewheel",this._mousewheel_callback,!1),LiteGraph.pointerListenerAdd(e,"up",this._mouseup_callback,!0),LiteGraph.pointerListenerAdd(e,"move",this._mousemove_callback),e.addEventListener("contextmenu",this._doNothing),e.addEventListener("DOMMouseScroll",this._mousewheel_callback,!1),this._key_callback=this.processKey.bind(this),e.setAttribute("tabindex",1),e.addEventListener("keydown",this._key_callback,!0),n.addEventListener("keyup",this._key_callback,!0),this._ondrop_callback=this.processDrop.bind(this),e.addEventListener("dragover",this._doNothing,!1),e.addEventListener("dragend",this._doNothing,!1),e.addEventListener("drop",this._ondrop_callback,!1),e.addEventListener("dragenter",this._doReturnTrue,!1),this._events_binded=!0},LGraphCanvas.prototype.unbindEvents=function(){if(!this._events_binded){console.warn("LGraphCanvas: no events binded");return}var e=this.getCanvasWindow(),t=e.document;LiteGraph.pointerListenerRemove(this.canvas,"move",this._mousedown_callback),LiteGraph.pointerListenerRemove(this.canvas,"up",this._mousedown_callback),LiteGraph.pointerListenerRemove(this.canvas,"down",this._mousedown_callback),this.canvas.removeEventListener("mousewheel",this._mousewheel_callback),this.canvas.removeEventListener("DOMMouseScroll",this._mousewheel_callback),this.canvas.removeEventListener("keydown",this._key_callback),t.removeEventListener("keyup",this._key_callback),this.canvas.removeEventListener("contextmenu",this._doNothing),this.canvas.removeEventListener("drop",this._ondrop_callback),this.canvas.removeEventListener("dragenter",this._doReturnTrue),this._mousedown_callback=null,this._mousewheel_callback=null,this._key_callback=null,this._ondrop_callback=null,this._events_binded=!1},LGraphCanvas.getFileExtension=function(e){var t=e.indexOf("?");t!=-1&&(e=e.substr(0,t));var n=e.lastIndexOf(".");return n==-1?"":e.substr(n+1).toLowerCase()},LGraphCanvas.prototype.enableWebGL=function(){if(typeof GL>"u")throw"litegl.js must be included to use a WebGL canvas";if(typeof enableWebGLCanvas>"u")throw"webglCanvas.js must be included to use this feature";this.gl=this.ctx=enableWebGLCanvas(this.canvas),this.ctx.webgl=!0,this.bgcanvas=this.canvas,this.bgctx=this.gl,this.canvas.webgl_enabled=!0},LGraphCanvas.prototype.setDirty=function(e,t){e&&(this.dirty_canvas=!0),t&&(this.dirty_bgcanvas=!0)},LGraphCanvas.prototype.getCanvasWindow=function(){if(!this.canvas)return window;var e=this.canvas.ownerDocument;return e.defaultView||e.parentWindow},LGraphCanvas.prototype.startRendering=function(){if(this.is_rendering)return;this.is_rendering=!0,e.call(this);function e(){this.pause_rendering||this.draw();var t=this.getCanvasWindow();this.is_rendering&&t.requestAnimationFrame(e.bind(this))}},LGraphCanvas.prototype.stopRendering=function(){this.is_rendering=!1},LGraphCanvas.prototype.blockClick=function(){this.block_click=!0,this.last_mouseclick=0},LGraphCanvas.prototype.processMouseDown=function(e){if(this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),!!this.graph){this.adjustMouseEvent(e);var t=this.getCanvasWindow();t.document,LGraphCanvas.active_canvas=this;var n=this,a=e.clientX,s=e.clientY;this.ds.viewport=this.viewport;var u=!this.viewport||this.viewport&&a>=this.viewport[0]&&a<this.viewport[0]+this.viewport[2]&&s>=this.viewport[1]&&s<this.viewport[1]+this.viewport[3];if(this.options.skip_events||(LiteGraph.pointerListenerRemove(this.canvas,"move",this._mousemove_callback),LiteGraph.pointerListenerAdd(t.document,"move",this._mousemove_callback,!0),LiteGraph.pointerListenerAdd(t.document,"up",this._mouseup_callback,!0)),!!u){var c=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes,5),h=!1,f=LiteGraph.getTime(),m=e.isPrimary===void 0||!e.isPrimary,_=f-this.last_mouseclick<300&&m;if(this.mouse[0]=e.clientX,this.mouse[1]=e.clientY,this.graph_mouse[0]=e.canvasX,this.graph_mouse[1]=e.canvasY,this.last_click_position=[this.mouse[0],this.mouse[1]],this.pointer_is_down&&m?this.pointer_is_double=!0:this.pointer_is_double=!1,this.pointer_is_down=!0,this.canvas.focus(),LiteGraph.closeAllContextMenus(t),!(this.onMouse&&this.onMouse(e)==!0)){if(e.which==1&&!this.pointer_is_double){e.ctrlKey&&(this.dragging_rectangle=new Float32Array(4),this.dragging_rectangle[0]=e.canvasX,this.dragging_rectangle[1]=e.canvasY,this.dragging_rectangle[2]=1,this.dragging_rectangle[3]=1,h=!0),LiteGraph.alt_drag_do_clone_nodes&&e.altKey&&c&&this.allow_interaction&&!h&&!this.read_only&&(cloned=c.clone())&&(cloned.pos[0]+=5,cloned.pos[1]+=5,this.graph.add(cloned,!1,{doCalcSize:!1}),c=cloned,h=!0,N||(this.allow_dragnodes&&(this.graph.beforeChange(),this.node_dragged=c),this.selected_nodes[c.id]||this.processNodeSelected(c,e)));var C=!1;if(c&&(this.allow_interaction||c.flags.allow_interaction)&&!h&&!this.read_only){if(!this.live_mode&&!c.flags.pinned&&this.bringToFront(c),this.allow_interaction&&!this.connecting_node&&!c.flags.collapsed&&!this.live_mode)if(!h&&c.resizable!==!1&&isInsideRectangle(e.canvasX,e.canvasY,c.pos[0]+c.size[0]-5,c.pos[1]+c.size[1]-5,10,10))this.graph.beforeChange(),this.resizing_node=c,this.canvas.style.cursor="se-resize",h=!0;else{if(c.outputs)for(var b=0,T=c.outputs.length;b<T;++b){var R=c.outputs[b],A=c.getConnectionPos(!1,b);if(isInsideRectangle(e.canvasX,e.canvasY,A[0]-15,A[1]-10,30,20)){this.connecting_node=c,this.connecting_output=R,this.connecting_output.slot_index=b,this.connecting_pos=c.getConnectionPos(!1,b),this.connecting_slot=b,LiteGraph.shift_click_do_break_link_from&&e.shiftKey&&c.disconnectOutput(b),_?c.onOutputDblClick&&c.onOutputDblClick(b,e):c.onOutputClick&&c.onOutputClick(b,e),h=!0;break}}if(c.inputs)for(var b=0,T=c.inputs.length;b<T;++b){var I=c.inputs[b],A=c.getConnectionPos(!0,b);if(isInsideRectangle(e.canvasX,e.canvasY,A[0]-15,A[1]-10,30,20)){if(_?c.onInputDblClick&&c.onInputDblClick(b,e):c.onInputClick&&c.onInputClick(b,e),I.link!==null){var P=this.graph.links[I.link];LiteGraph.click_do_break_link_to&&(c.disconnectInput(b),this.dirty_bgcanvas=!0,h=!0),(this.allow_reconnect_links||e.shiftKey)&&(LiteGraph.click_do_break_link_to||c.disconnectInput(b),this.connecting_node=this.graph._nodes_by_id[P.origin_id],this.connecting_slot=P.origin_slot,this.connecting_output=this.connecting_node.outputs[this.connecting_slot],this.connecting_pos=this.connecting_node.getConnectionPos(!1,this.connecting_slot),this.dirty_bgcanvas=!0,h=!0)}h||(this.connecting_node=c,this.connecting_input=I,this.connecting_input.slot_index=b,this.connecting_pos=c.getConnectionPos(!0,b),this.connecting_slot=b,this.dirty_bgcanvas=!0,h=!0)}}}if(!h){var N=!1,S=[e.canvasX-c.pos[0],e.canvasY-c.pos[1]],k=this.processNodeWidgets(c,this.graph_mouse,e);if(k&&(N=!0,this.node_widget=[c,k]),this.allow_interaction&&_&&this.selected_nodes[c.id]&&(c.onDblClick&&c.onDblClick(e,S,this),this.processNodeDblClicked(c),N=!0),c.onMouseDown&&c.onMouseDown(e,S,this))N=!0;else{if(c.subgraph&&!c.skip_subgraph_button&&!c.flags.collapsed&&S[0]>c.size[0]-LiteGraph.NODE_TITLE_HEIGHT&&S[1]<0){var n=this;setTimeout(function(){n.openSubgraph(c.subgraph)},10)}this.live_mode&&(C=!0,N=!0)}N?c.is_selected||this.processNodeSelected(c,e):(this.allow_dragnodes&&(this.graph.beforeChange(),this.node_dragged=c),this.processNodeSelected(c,e)),this.dirty_canvas=!0}}else if(!h){if(!this.read_only)for(var b=0;b<this.visible_links.length;++b){var D=this.visible_links[b],M=D._pos;if(!(!M||e.canvasX<M[0]-4||e.canvasX>M[0]+4||e.canvasY<M[1]-4||e.canvasY>M[1]+4)){this.showLinkMenu(D,e),this.over_link_center=null;break}}if(this.selected_group=this.graph.getGroupOnPos(e.canvasX,e.canvasY),this.selected_group_resizing=!1,this.selected_group&&!this.read_only){e.ctrlKey&&(this.dragging_rectangle=null);var j=distance([e.canvasX,e.canvasY],[this.selected_group.pos[0]+this.selected_group.size[0],this.selected_group.pos[1]+this.selected_group.size[1]]);j*this.ds.scale<10?this.selected_group_resizing=!0:this.selected_group.recomputeInsideNodes()}_&&!this.read_only&&this.allow_searchbox&&(this.showSearchBox(e),e.preventDefault(),e.stopPropagation()),C=!0}!h&&C&&this.allow_dragcanvas&&(this.dragging_canvas=!0)}else if(e.which==2)if(LiteGraph.middle_click_slot_add_default_node){if(c&&this.allow_interaction&&!h&&!this.read_only&&!this.connecting_node&&!c.flags.collapsed&&!this.live_mode){var H=!1,X=!1,K=!1;if(c.outputs)for(var b=0,T=c.outputs.length;b<T;++b){var R=c.outputs[b],A=c.getConnectionPos(!1,b);if(isInsideRectangle(e.canvasX,e.canvasY,A[0]-15,A[1]-10,30,20)){H=R,X=b,K=!0;break}}if(c.inputs)for(var b=0,T=c.inputs.length;b<T;++b){var I=c.inputs[b],A=c.getConnectionPos(!0,b);if(isInsideRectangle(e.canvasX,e.canvasY,A[0]-15,A[1]-10,30,20)){H=I,X=b,K=!1;break}}if(H&&X!==!1){var re=.5-(X+1)/(K?c.outputs.length:c.inputs.length),F=c.getBounding(),J=[K?F[0]+F[2]:F[0],e.canvasY-80];this.createDefaultNodeForSlot({nodeFrom:K?c:null,slotFrom:K?X:null,nodeTo:K?null:c,slotTo:K?null:X,position:J,nodeType:"AUTO",posAdd:[K?30:-30,-re*130],posSizeFix:[K?0:-1,0]})}}}else!h&&this.allow_dragcanvas&&(this.dragging_canvas=!0);else(e.which==3||this.pointer_is_double)&&this.allow_interaction&&!h&&!this.read_only&&(c&&(Object.keys(this.selected_nodes).length&&(this.selected_nodes[c.id]||e.shiftKey||e.ctrlKey||e.metaKey)?this.selected_nodes[c.id]||this.selectNodes([c],!0):this.selectNodes([c])),this.processContextMenu(c,e));return this.last_mouse[0]=e.clientX,this.last_mouse[1]=e.clientY,this.last_mouseclick=LiteGraph.getTime(),this.last_mouse_dragging=!0,this.graph.change(),(!t.document.activeElement||t.document.activeElement.nodeName.toLowerCase()!="input"&&t.document.activeElement.nodeName.toLowerCase()!="textarea")&&e.preventDefault(),e.stopPropagation(),this.onMouseDown&&this.onMouseDown(e),!1}}}},LGraphCanvas.prototype.processMouseMove=function(e){if(this.autoresize&&this.resize(),this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),!!this.graph){LGraphCanvas.active_canvas=this,this.adjustMouseEvent(e);var t=[e.clientX,e.clientY];this.mouse[0]=t[0],this.mouse[1]=t[1];var n=[t[0]-this.last_mouse[0],t[1]-this.last_mouse[1]];if(this.last_mouse=t,this.graph_mouse[0]=e.canvasX,this.graph_mouse[1]=e.canvasY,this.block_click)return e.preventDefault(),!1;e.dragging=this.last_mouse_dragging,this.node_widget&&(this.processNodeWidgets(this.node_widget[0],this.graph_mouse,e,this.node_widget[1]),this.dirty_canvas=!0);var a=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes);if(this.dragging_rectangle)this.dragging_rectangle[2]=e.canvasX-this.dragging_rectangle[0],this.dragging_rectangle[3]=e.canvasY-this.dragging_rectangle[1],this.dirty_canvas=!0;else if(this.selected_group&&!this.read_only){if(this.selected_group_resizing)this.selected_group.size=[e.canvasX-this.selected_group.pos[0],e.canvasY-this.selected_group.pos[1]];else{var s=n[0]/this.ds.scale,u=n[1]/this.ds.scale;this.selected_group.move(s,u,e.ctrlKey),this.selected_group._nodes.length&&(this.dirty_canvas=!0)}this.dirty_bgcanvas=!0}else if(this.dragging_canvas)this.ds.offset[0]+=n[0]/this.ds.scale,this.ds.offset[1]+=n[1]/this.ds.scale,this.dirty_canvas=!0,this.dirty_bgcanvas=!0;else if((this.allow_interaction||a&&a.flags.allow_interaction)&&!this.read_only){this.connecting_node&&(this.dirty_canvas=!0);for(var c=0,h=this.graph._nodes.length;c<h;++c)this.graph._nodes[c].mouseOver&&a!=this.graph._nodes[c]&&(this.graph._nodes[c].mouseOver=!1,this.node_over&&this.node_over.onMouseLeave&&this.node_over.onMouseLeave(e),this.node_over=null,this.dirty_canvas=!0);if(a){if(a.redraw_on_mouse&&(this.dirty_canvas=!0),a.mouseOver||(a.mouseOver=!0,this.node_over=a,this.dirty_canvas=!0,a.onMouseEnter&&a.onMouseEnter(e)),a.onMouseMove&&a.onMouseMove(e,[e.canvasX-a.pos[0],e.canvasY-a.pos[1]],this),this.connecting_node){if(this.connecting_output){var f=this._highlight_input||[0,0];if(!this.isOverNodeBox(a,e.canvasX,e.canvasY)){var m=this.isOverNodeInput(a,e.canvasX,e.canvasY,f);if(m!=-1&&a.inputs[m]){var _=a.inputs[m].type;LiteGraph.isValidConnection(this.connecting_output.type,_)&&(this._highlight_input=f,this._highlight_input_slot=a.inputs[m])}else this._highlight_input=null,this._highlight_input_slot=null}}else if(this.connecting_input){var f=this._highlight_output||[0,0];if(!this.isOverNodeBox(a,e.canvasX,e.canvasY)){var m=this.isOverNodeOutput(a,e.canvasX,e.canvasY,f);if(m!=-1&&a.outputs[m]){var _=a.outputs[m].type;LiteGraph.isValidConnection(this.connecting_input.type,_)&&(this._highlight_output=f)}else this._highlight_output=null}}}this.canvas&&(isInsideRectangle(e.canvasX,e.canvasY,a.pos[0]+a.size[0]-5,a.pos[1]+a.size[1]-5,5,5)?this.canvas.style.cursor="se-resize":this.canvas.style.cursor="crosshair")}else{for(var C=null,c=0;c<this.visible_links.length;++c){var b=this.visible_links[c],T=b._pos;if(!(!T||e.canvasX<T[0]-4||e.canvasX>T[0]+4||e.canvasY<T[1]-4||e.canvasY>T[1]+4)){C=b;break}}C!=this.over_link_center&&(this.over_link_center=C,this.dirty_canvas=!0),this.canvas&&(this.canvas.style.cursor="")}if(this.node_capturing_input&&this.node_capturing_input!=a&&this.node_capturing_input.onMouseMove&&this.node_capturing_input.onMouseMove(e,[e.canvasX-this.node_capturing_input.pos[0],e.canvasY-this.node_capturing_input.pos[1]],this),this.node_dragged&&!this.live_mode){for(var c in this.selected_nodes){var R=this.selected_nodes[c];R.pos[0]+=n[0]/this.ds.scale,R.pos[1]+=n[1]/this.ds.scale,R.is_selected||this.processNodeSelected(R,e)}this.dirty_canvas=!0,this.dirty_bgcanvas=!0}if(this.resizing_node&&!this.live_mode){var A=[e.canvasX-this.resizing_node.pos[0],e.canvasY-this.resizing_node.pos[1]],I=this.resizing_node.computeSize();A[0]=Math.max(I[0],A[0]),A[1]=Math.max(I[1],A[1]),this.resizing_node.setSize(A),this.canvas.style.cursor="se-resize",this.dirty_canvas=!0,this.dirty_bgcanvas=!0}}return e.preventDefault(),!1}},LGraphCanvas.prototype.processMouseUp=function(e){var t=e.isPrimary===void 0||e.isPrimary;if(!t)return!1;if(this.set_canvas_dirty_on_mouse_event&&(this.dirty_canvas=!0),!!this.graph){var n=this.getCanvasWindow(),a=n.document;LGraphCanvas.active_canvas=this,this.options.skip_events||(LiteGraph.pointerListenerRemove(a,"move",this._mousemove_callback,!0),LiteGraph.pointerListenerAdd(this.canvas,"move",this._mousemove_callback,!0),LiteGraph.pointerListenerRemove(a,"up",this._mouseup_callback,!0)),this.adjustMouseEvent(e);var s=LiteGraph.getTime();if(e.click_time=s-this.last_mouseclick,this.last_mouse_dragging=!1,this.last_click_position=null,this.block_click&&(this.block_click=!1),e.which==1){if(this.node_widget&&this.processNodeWidgets(this.node_widget[0],this.graph_mouse,e),this.node_widget=null,this.selected_group){var u=this.selected_group.pos[0]-Math.round(this.selected_group.pos[0]),c=this.selected_group.pos[1]-Math.round(this.selected_group.pos[1]);this.selected_group.move(u,c,e.ctrlKey),this.selected_group.pos[0]=Math.round(this.selected_group.pos[0]),this.selected_group.pos[1]=Math.round(this.selected_group.pos[1]),this.selected_group._nodes.length&&(this.dirty_canvas=!0),this.selected_group=null}this.selected_group_resizing=!1;var h=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes);if(this.dragging_rectangle){if(this.graph){var f=this.graph._nodes,m=new Float32Array(4),_=Math.abs(this.dragging_rectangle[2]),C=Math.abs(this.dragging_rectangle[3]),b=this.dragging_rectangle[2]<0?this.dragging_rectangle[0]-_:this.dragging_rectangle[0],T=this.dragging_rectangle[3]<0?this.dragging_rectangle[1]-C:this.dragging_rectangle[1];if(this.dragging_rectangle[0]=b,this.dragging_rectangle[1]=T,this.dragging_rectangle[2]=_,this.dragging_rectangle[3]=C,!h||_>10&&C>10){for(var R=[],A=0;A<f.length;++A){var I=f[A];I.getBounding(m),overlapBounding(this.dragging_rectangle,m)&&R.push(I)}R.length&&this.selectNodes(R,e.shiftKey)}else this.selectNodes([h],e.shiftKey||e.ctrlKey)}this.dragging_rectangle=null}else if(this.connecting_node){this.dirty_canvas=!0,this.dirty_bgcanvas=!0;var P=this.connecting_output||this.connecting_input,N=P.type;if(h){if(this.connecting_output){var S=this.isOverNodeInput(h,e.canvasX,e.canvasY);S!=-1?this.connecting_node.connect(this.connecting_slot,h,S):this.connecting_node.connectByType(this.connecting_slot,h,N)}else if(this.connecting_input){var S=this.isOverNodeOutput(h,e.canvasX,e.canvasY);S!=-1?h.connect(S,this.connecting_node,this.connecting_slot):this.connecting_node.connectByTypeOutput(this.connecting_slot,h,N)}}else LiteGraph.release_link_on_empty_shows_menu&&(e.shiftKey&&this.allow_searchbox?this.connecting_output?this.showSearchBox(e,{node_from:this.connecting_node,slot_from:this.connecting_output,type_filter_in:this.connecting_output.type}):this.connecting_input&&this.showSearchBox(e,{node_to:this.connecting_node,slot_from:this.connecting_input,type_filter_out:this.connecting_input.type}):this.connecting_output?this.showConnectionMenu({nodeFrom:this.connecting_node,slotFrom:this.connecting_output,e}):this.connecting_input&&this.showConnectionMenu({nodeTo:this.connecting_node,slotTo:this.connecting_input,e}));this.connecting_output=null,this.connecting_input=null,this.connecting_pos=null,this.connecting_node=null,this.connecting_slot=-1}else if(this.resizing_node)this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.graph.afterChange(this.resizing_node),this.resizing_node=null;else if(this.node_dragged){var h=this.node_dragged;h&&e.click_time<300&&isInsideRectangle(e.canvasX,e.canvasY,h.pos[0],h.pos[1]-LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT)&&h.collapse(),this.dirty_canvas=!0,this.dirty_bgcanvas=!0,this.node_dragged.pos[0]=Math.round(this.node_dragged.pos[0]),this.node_dragged.pos[1]=Math.round(this.node_dragged.pos[1]),(this.graph.config.align_to_grid||this.align_to_grid)&&this.node_dragged.alignToGrid(),this.onNodeMoved&&this.onNodeMoved(this.node_dragged),this.graph.afterChange(this.node_dragged),this.node_dragged=null}else{var h=this.graph.getNodeOnPos(e.canvasX,e.canvasY,this.visible_nodes);!h&&e.click_time<300&&this.deselectAllNodes(),this.dirty_canvas=!0,this.dragging_canvas=!1,this.node_over&&this.node_over.onMouseUp&&this.node_over.onMouseUp(e,[e.canvasX-this.node_over.pos[0],e.canvasY-this.node_over.pos[1]],this),this.node_capturing_input&&this.node_capturing_input.onMouseUp&&this.node_capturing_input.onMouseUp(e,[e.canvasX-this.node_capturing_input.pos[0],e.canvasY-this.node_capturing_input.pos[1]])}}else e.which==2?(this.dirty_canvas=!0,this.dragging_canvas=!1):e.which==3&&(this.dirty_canvas=!0,this.dragging_canvas=!1);return t&&(this.pointer_is_down=!1,this.pointer_is_double=!1),this.graph.change(),e.stopPropagation(),e.preventDefault(),!1}},LGraphCanvas.prototype.processMouseWheel=function(e){if(!(!this.graph||!this.allow_dragcanvas)){var t=e.wheelDeltaY!=null?e.wheelDeltaY:e.detail*-60;this.adjustMouseEvent(e);var n=e.clientX,a=e.clientY,s=!this.viewport||this.viewport&&n>=this.viewport[0]&&n<this.viewport[0]+this.viewport[2]&&a>=this.viewport[1]&&a<this.viewport[1]+this.viewport[3];if(s){var u=this.ds.scale;return t>0?u*=1.1:t<0&&(u*=1/1.1),this.ds.changeScale(u,[e.clientX,e.clientY]),this.graph.change(),e.preventDefault(),!1}}},LGraphCanvas.prototype.isOverNodeBox=function(e,t,n){var a=LiteGraph.NODE_TITLE_HEIGHT;return!!isInsideRectangle(t,n,e.pos[0]+2,e.pos[1]+2-a,a-4,a-4)},LGraphCanvas.prototype.isOverNodeInput=function(e,t,n,a){if(e.inputs)for(var s=0,u=e.inputs.length;s<u;++s){e.inputs[s];var c=e.getConnectionPos(!0,s),h=!1;if(e.horizontal?h=isInsideRectangle(t,n,c[0]-5,c[1]-10,10,20):h=isInsideRectangle(t,n,c[0]-10,c[1]-5,40,10),h)return a&&(a[0]=c[0],a[1]=c[1]),s}return-1},LGraphCanvas.prototype.isOverNodeOutput=function(e,t,n,a){if(e.outputs)for(var s=0,u=e.outputs.length;s<u;++s){e.outputs[s];var c=e.getConnectionPos(!1,s),h=!1;if(e.horizontal?h=isInsideRectangle(t,n,c[0]-5,c[1]-10,10,20):h=isInsideRectangle(t,n,c[0]-10,c[1]-5,40,10),h)return a&&(a[0]=c[0],a[1]=c[1]),s}return-1},LGraphCanvas.prototype.processKey=function(e){if(this.graph){var t=!1;if(e.target.localName!="input"){if(e.type=="keydown"){if(e.keyCode==32&&(this.dragging_canvas=!0,t=!0),e.keyCode==27&&(this.node_panel&&this.node_panel.close(),this.options_panel&&this.options_panel.close(),t=!0),e.keyCode==65&&e.ctrlKey&&(this.selectNodes(),t=!0),e.keyCode===67&&(e.metaKey||e.ctrlKey)&&!e.shiftKey&&this.selected_nodes&&(this.copyToClipboard(),t=!0),e.keyCode===86&&(e.metaKey||e.ctrlKey)&&this.pasteFromClipboard(e.shiftKey),(e.keyCode==46||e.keyCode==8)&&e.target.localName!="input"&&e.target.localName!="textarea"&&(this.deleteSelectedNodes(),t=!0),this.selected_nodes)for(var n in this.selected_nodes)this.selected_nodes[n].onKeyDown&&this.selected_nodes[n].onKeyDown(e)}else if(e.type=="keyup"&&(e.keyCode==32&&(this.dragging_canvas=!1),this.selected_nodes))for(var n in this.selected_nodes)this.selected_nodes[n].onKeyUp&&this.selected_nodes[n].onKeyUp(e);if(this.graph.change(),t)return e.preventDefault(),e.stopImmediatePropagation(),!1}}},LGraphCanvas.prototype.copyToClipboard=function(){var e={nodes:[],links:[]},t=0,n=[];for(var a in this.selected_nodes){var s=this.selected_nodes[a];s.clonable!==!1&&(s._relative_id=t,n.push(s),t+=1)}for(var a=0;a<n.length;++a){var s=n[a];if(s.clonable!==!1){var u=s.clone();if(!u){console.warn("node type not found: "+s.type);continue}if(e.nodes.push(u.serialize()),s.inputs&&s.inputs.length)for(var c=0;c<s.inputs.length;++c){var h=s.inputs[c];if(!(!h||h.link==null)){var f=this.graph.links[h.link];if(f){var m=this.graph.getNodeById(f.origin_id);m&&e.links.push([m._relative_id,f.origin_slot,s._relative_id,f.target_slot,m.id])}}}}}localStorage.setItem("litegrapheditor_clipboard",JSON.stringify(e))},LGraphCanvas.prototype.pasteFromClipboard=function(e=!1){if(!(!LiteGraph.ctrl_shift_v_paste_connect_unselected_outputs&&e)){var t=localStorage.getItem("litegrapheditor_clipboard");if(t){this.graph.beforeChange();for(var n=JSON.parse(t),a=!1,s=!1,u=0;u<n.nodes.length;++u)a?(a[0]>n.nodes[u].pos[0]&&(a[0]=n.nodes[u].pos[0],s[0]=u),a[1]>n.nodes[u].pos[1]&&(a[1]=n.nodes[u].pos[1],s[1]=u)):(a=[n.nodes[u].pos[0],n.nodes[u].pos[1]],s=[u,u]);for(var c=[],u=0;u<n.nodes.length;++u){var h=n.nodes[u],f=LiteGraph.createNode(h.type);f&&(f.configure(h),f.pos[0]+=this.graph_mouse[0]-a[0],f.pos[1]+=this.graph_mouse[1]-a[1],this.graph.add(f,{doProcessChange:!1}),c.push(f))}for(var u=0;u<n.links.length;++u){var m=n.links[u],_,C=m[0];if(C!=null)_=c[C];else if(LiteGraph.ctrl_shift_v_paste_connect_unselected_outputs&&e){var b=m[4];b&&(_=this.graph.getNodeById(b))}var T=c[m[2]];_&&T?_.connect(m[1],T,m[3]):console.warn("Warning, nodes missing on pasting")}this.selectNodes(c),this.graph.afterChange()}}},LGraphCanvas.prototype.processDrop=function(e){e.preventDefault(),this.adjustMouseEvent(e);var t=e.clientX,n=e.clientY,a=!this.viewport||this.viewport&&t>=this.viewport[0]&&t<this.viewport[0]+this.viewport[2]&&n>=this.viewport[1]&&n<this.viewport[1]+this.viewport[3];if(a){var s=[e.canvasX,e.canvasY],u=this.graph?this.graph.getNodeOnPos(s[0],s[1]):null;if(!u){var c=null;this.onDropItem&&(c=this.onDropItem(event)),c||this.checkDropItem(e);return}if(u.onDropFile||u.onDropData){var h=e.dataTransfer.files;if(h&&h.length)for(var f=0;f<h.length;f++){var m=e.dataTransfer.files[0],_=m.name;if(LGraphCanvas.getFileExtension(_),u.onDropFile&&u.onDropFile(m),u.onDropData){var C=new FileReader;C.onload=function(T){var R=T.target.result;u.onDropData(R,_,m)};var b=m.type.split("/")[0];b=="text"||b==""?C.readAsText(m):b=="image"?C.readAsDataURL(m):C.readAsArrayBuffer(m)}}}return u.onDropItem&&u.onDropItem(event)?!0:this.onDropItem?this.onDropItem(event):!1}},LGraphCanvas.prototype.checkDropItem=function(e){if(e.dataTransfer.files.length){var t=e.dataTransfer.files[0],n=LGraphCanvas.getFileExtension(t.name).toLowerCase(),a=LiteGraph.node_types_by_file_extension[n];if(a){this.graph.beforeChange();var s=LiteGraph.createNode(a.type);s.pos=[e.canvasX,e.canvasY],this.graph.add(s),s.onDropFile&&s.onDropFile(t),this.graph.afterChange()}}},LGraphCanvas.prototype.processNodeDblClicked=function(e){this.onShowNodePanel?this.onShowNodePanel(e):this.showShowNodePanel(e),this.onNodeDblClicked&&this.onNodeDblClicked(e),this.setDirty(!0)},LGraphCanvas.prototype.processNodeSelected=function(e,t){this.selectNode(e,t&&(t.shiftKey||t.ctrlKey||this.multi_select)),this.onNodeSelected&&this.onNodeSelected(e)},LGraphCanvas.prototype.selectNode=function(e,t){e==null?this.deselectAllNodes():this.selectNodes([e],t)},LGraphCanvas.prototype.selectNodes=function(e,t){t||this.deselectAllNodes(),e=e||this.graph._nodes,typeof e=="string"&&(e=[e]);for(var n in e){var a=e[n];if(a.is_selected){this.deselectNode(a);continue}if(!a.is_selected&&a.onSelected&&a.onSelected(),a.is_selected=!0,this.selected_nodes[a.id]=a,a.inputs)for(var s=0;s<a.inputs.length;++s)this.highlighted_links[a.inputs[s].link]=!0;if(a.outputs)for(var s=0;s<a.outputs.length;++s){var u=a.outputs[s];if(u.links)for(var c=0;c<u.links.length;++c)this.highlighted_links[u.links[c]]=!0}}this.onSelectionChange&&this.onSelectionChange(this.selected_nodes),this.setDirty(!0)},LGraphCanvas.prototype.deselectNode=function(e){if(e.is_selected){if(e.onDeselected&&e.onDeselected(),e.is_selected=!1,this.onNodeDeselected&&this.onNodeDeselected(e),e.inputs)for(var t=0;t<e.inputs.length;++t)delete this.highlighted_links[e.inputs[t].link];if(e.outputs)for(var t=0;t<e.outputs.length;++t){var n=e.outputs[t];if(n.links)for(var a=0;a<n.links.length;++a)delete this.highlighted_links[n.links[a]]}}},LGraphCanvas.prototype.deselectAllNodes=function(){if(this.graph){for(var e=this.graph._nodes,t=0,n=e.length;t<n;++t){var a=e[t];a.is_selected&&(a.onDeselected&&a.onDeselected(),a.is_selected=!1,this.onNodeDeselected&&this.onNodeDeselected(a))}this.selected_nodes={},this.current_node=null,this.highlighted_links={},this.onSelectionChange&&this.onSelectionChange(this.selected_nodes),this.setDirty(!0)}},LGraphCanvas.prototype.deleteSelectedNodes=function(){this.graph.beforeChange();for(var e in this.selected_nodes){var t=this.selected_nodes[e];if(!t.block_delete){if(t.inputs&&t.inputs.length&&t.outputs&&t.outputs.length&&LiteGraph.isValidConnection(t.inputs[0].type,t.outputs[0].type)&&t.inputs[0].link&&t.outputs[0].links&&t.outputs[0].links.length){var n=t.graph.links[t.inputs[0].link],a=t.graph.links[t.outputs[0].links[0]],s=t.getInputNode(0),u=t.getOutputNodes(0)[0];s&&u&&s.connect(n.origin_slot,u,a.target_slot)}this.graph.remove(t),this.onNodeDeselected&&this.onNodeDeselected(t)}}this.selected_nodes={},this.current_node=null,this.highlighted_links={},this.setDirty(!0),this.graph.afterChange()},LGraphCanvas.prototype.centerOnNode=function(e){this.ds.offset[0]=-e.pos[0]-e.size[0]*.5+this.canvas.width*.5/this.ds.scale,this.ds.offset[1]=-e.pos[1]-e.size[1]*.5+this.canvas.height*.5/this.ds.scale,this.setDirty(!0,!0)},LGraphCanvas.prototype.adjustMouseEvent=function(e){var t=0,n=0;if(this.canvas){var a=this.canvas.getBoundingClientRect();t=e.clientX-a.left,n=e.clientY-a.top}else t=e.clientX,n=e.clientY;this.last_mouse_position[0]=t,this.last_mouse_position[1]=n,e.canvasX=t/this.ds.scale-this.ds.offset[0],e.canvasY=n/this.ds.scale-this.ds.offset[1]},LGraphCanvas.prototype.setZoom=function(e,t){this.ds.changeScale(e,t),this.dirty_canvas=!0,this.dirty_bgcanvas=!0},LGraphCanvas.prototype.convertOffsetToCanvas=function(e,t){return this.ds.convertOffsetToCanvas(e,t)},LGraphCanvas.prototype.convertCanvasToOffset=function(e,t){return this.ds.convertCanvasToOffset(e,t)},LGraphCanvas.prototype.convertEventToCanvasOffset=function(e){var t=this.canvas.getBoundingClientRect();return this.convertCanvasToOffset([e.clientX-t.left,e.clientY-t.top])},LGraphCanvas.prototype.bringToFront=function(e){var t=this.graph._nodes.indexOf(e);t!=-1&&(this.graph._nodes.splice(t,1),this.graph._nodes.push(e))},LGraphCanvas.prototype.sendToBack=function(e){var t=this.graph._nodes.indexOf(e);t!=-1&&(this.graph._nodes.splice(t,1),this.graph._nodes.unshift(e))};var temp=new Float32Array(4);LGraphCanvas.prototype.computeVisibleNodes=function(e,t){var n=t||[];n.length=0,e=e||this.graph._nodes;for(var a=0,s=e.length;a<s;++a){var u=e[a];this.live_mode&&!u.onDrawBackground&&!u.onDrawForeground||overlapBounding(this.visible_area,u.getBounding(temp,!0))&&n.push(u)}return n},LGraphCanvas.prototype.draw=function(e,t){if(!(!this.canvas||this.canvas.width==0||this.canvas.height==0)){var n=LiteGraph.getTime();this.render_time=(n-this.last_draw_time)*.001,this.last_draw_time=n,this.graph&&this.ds.computeVisibleArea(this.viewport),(this.dirty_bgcanvas||t||this.always_render_background||this.graph&&this.graph._last_trigger_time&&n-this.graph._last_trigger_time<1e3)&&this.drawBackCanvas(),(this.dirty_canvas||e)&&this.drawFrontCanvas(),this.fps=this.render_time?1/this.render_time:0,this.frame+=1}},LGraphCanvas.prototype.drawFrontCanvas=function(){this.dirty_canvas=!1,this.ctx||(this.ctx=this.bgcanvas.getContext("2d"));var e=this.ctx;if(e){var t=this.canvas;e.start2D&&!this.viewport&&(e.start2D(),e.restore(),e.setTransform(1,0,0,1,0,0));var n=this.viewport||this.dirty_area;if(n&&(e.save(),e.beginPath(),e.rect(n[0],n[1],n[2],n[3]),e.clip()),this.clear_background&&(n?e.clearRect(n[0],n[1],n[2],n[3]):e.clearRect(0,0,t.width,t.height)),this.bgcanvas==this.canvas?this.drawBackCanvas():e.drawImage(this.bgcanvas,0,0),this.onRender&&this.onRender(t,e),this.show_info&&this.renderInfo(e,n?n[0]:0,n?n[1]:0),this.graph){e.save(),this.ds.toCanvasContext(e);for(var a=this.computeVisibleNodes(null,this.visible_nodes),s=0;s<a.length;++s){var u=a[s];e.save(),e.translate(u.pos[0],u.pos[1]),this.drawNode(u,e),e.restore()}if(this.render_execution_order&&this.drawExecutionOrder(e),this.graph.config.links_ontop&&(this.live_mode||this.drawConnections(e)),this.connecting_pos!=null){e.lineWidth=this.connections_width;var c=null,h=this.connecting_output||this.connecting_input,f=h.type,m=h.dir;m==null&&(this.connecting_output?m=this.connecting_node.horizontal?LiteGraph.DOWN:LiteGraph.RIGHT:m=this.connecting_node.horizontal?LiteGraph.UP:LiteGraph.LEFT);var _=h.shape;switch(f){case LiteGraph.EVENT:c=LiteGraph.EVENT_LINK_COLOR;break;default:c=LiteGraph.CONNECTING_LINK_COLOR}if(this.renderLink(e,this.connecting_pos,[this.graph_mouse[0],this.graph_mouse[1]],null,!1,null,c,m,LiteGraph.CENTER),e.beginPath(),f===LiteGraph.EVENT||_===LiteGraph.BOX_SHAPE?(e.rect(this.connecting_pos[0]-6+.5,this.connecting_pos[1]-5+.5,14,10),e.fill(),e.beginPath(),e.rect(this.graph_mouse[0]-6+.5,this.graph_mouse[1]-5+.5,14,10)):_===LiteGraph.ARROW_SHAPE?(e.moveTo(this.connecting_pos[0]+8,this.connecting_pos[1]+.5),e.lineTo(this.connecting_pos[0]-4,this.connecting_pos[1]+6+.5),e.lineTo(this.connecting_pos[0]-4,this.connecting_pos[1]-6+.5),e.closePath()):(e.arc(this.connecting_pos[0],this.connecting_pos[1],4,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(this.graph_mouse[0],this.graph_mouse[1],4,0,Math.PI*2)),e.fill(),e.fillStyle="#ffcc00",this._highlight_input){e.beginPath();var C=this._highlight_input_slot.shape;C===LiteGraph.ARROW_SHAPE?(e.moveTo(this._highlight_input[0]+8,this._highlight_input[1]+.5),e.lineTo(this._highlight_input[0]-4,this._highlight_input[1]+6+.5),e.lineTo(this._highlight_input[0]-4,this._highlight_input[1]-6+.5),e.closePath()):e.arc(this._highlight_input[0],this._highlight_input[1],6,0,Math.PI*2),e.fill()}this._highlight_output&&(e.beginPath(),C===LiteGraph.ARROW_SHAPE?(e.moveTo(this._highlight_output[0]+8,this._highlight_output[1]+.5),e.lineTo(this._highlight_output[0]-4,this._highlight_output[1]+6+.5),e.lineTo(this._highlight_output[0]-4,this._highlight_output[1]-6+.5),e.closePath()):e.arc(this._highlight_output[0],this._highlight_output[1],6,0,Math.PI*2),e.fill())}this.dragging_rectangle&&(e.strokeStyle="#FFF",e.strokeRect(this.dragging_rectangle[0],this.dragging_rectangle[1],this.dragging_rectangle[2],this.dragging_rectangle[3])),this.over_link_center&&this.render_link_tooltip?this.drawLinkTooltip(e,this.over_link_center):this.onDrawLinkTooltip&&this.onDrawLinkTooltip(e,null),this.onDrawForeground&&this.onDrawForeground(e,this.visible_rect),e.restore()}this._graph_stack&&this._graph_stack.length&&this.drawSubgraphPanel(e),this.onDrawOverlay&&this.onDrawOverlay(e),n&&e.restore(),e.finish2D&&e.finish2D()}},LGraphCanvas.prototype.drawSubgraphPanel=function(e){var t=this.graph,n=t._subgraph_node;if(!n){console.warn("subgraph without subnode");return}this.drawSubgraphPanelLeft(t,n,e),this.drawSubgraphPanelRight(t,n,e)},LGraphCanvas.prototype.drawSubgraphPanelLeft=function(e,t,n){var a=t.inputs?t.inputs.length:0,s=200,u=Math.floor(LiteGraph.NODE_SLOT_HEIGHT*1.6);if(n.fillStyle="#111",n.globalAlpha=.8,n.beginPath(),n.roundRect(10,10,s,(a+1)*u+50,[8]),n.fill(),n.globalAlpha=1,n.fillStyle="#888",n.font="14px Arial",n.textAlign="left",n.fillText("Graph Inputs",20,34),this.drawButton(s-20,20,20,20,"X","#151515")){this.closeSubgraph();return}var c=50;if(n.font="14px Arial",t.inputs)for(var h=0;h<t.inputs.length;++h){var f=t.inputs[h];if(!f.not_subgraph_input){if(this.drawButton(20,c+2,s-20,u-2)){var m=t.constructor.input_node_type||"graph/input";this.graph.beforeChange();var _=LiteGraph.createNode(m);_?(e.add(_),this.block_click=!1,this.last_click_position=null,this.selectNodes([_]),this.node_dragged=_,this.dragging_canvas=!1,_.setProperty("name",f.name),_.setProperty("type",f.type),this.node_dragged.pos[0]=this.graph_mouse[0]-5,this.node_dragged.pos[1]=this.graph_mouse[1]-5,this.graph.afterChange()):console.error("graph input node not found:",m)}n.fillStyle="#9C9",n.beginPath(),n.arc(s-16,c+u*.5,5,0,2*Math.PI),n.fill(),n.fillStyle="#AAA",n.fillText(f.name,30,c+u*.75),n.fillStyle="#777",n.fillText(f.type,130,c+u*.75),c+=u}}this.drawButton(20,c+2,s-20,u-2,"+","#151515","#222")&&this.showSubgraphPropertiesDialog(t)},LGraphCanvas.prototype.drawSubgraphPanelRight=function(e,t,n){var a=t.outputs?t.outputs.length:0,s=this.bgcanvas.width,u=200,c=Math.floor(LiteGraph.NODE_SLOT_HEIGHT*1.6);n.fillStyle="#111",n.globalAlpha=.8,n.beginPath(),n.roundRect(s-u-10,10,u,(a+1)*c+50,[8]),n.fill(),n.globalAlpha=1,n.fillStyle="#888",n.font="14px Arial",n.textAlign="left";var h="Graph Outputs",f=n.measureText(h).width;if(n.fillText(h,s-f-20,34),this.drawButton(s-u,20,20,20,"X","#151515")){this.closeSubgraph();return}var m=50;if(n.font="14px Arial",t.outputs)for(var _=0;_<t.outputs.length;++_){var C=t.outputs[_];if(!C.not_subgraph_input){if(this.drawButton(s-u,m+2,u-20,c-2)){var b=t.constructor.output_node_type||"graph/output";this.graph.beforeChange();var T=LiteGraph.createNode(b);T?(e.add(T),this.block_click=!1,this.last_click_position=null,this.selectNodes([T]),this.node_dragged=T,this.dragging_canvas=!1,T.setProperty("name",C.name),T.setProperty("type",C.type),this.node_dragged.pos[0]=this.graph_mouse[0]-5,this.node_dragged.pos[1]=this.graph_mouse[1]-5,this.graph.afterChange()):console.error("graph input node not found:",b)}n.fillStyle="#9C9",n.beginPath(),n.arc(s-u+16,m+c*.5,5,0,2*Math.PI),n.fill(),n.fillStyle="#AAA",n.fillText(C.name,s-u+30,m+c*.75),n.fillStyle="#777",n.fillText(C.type,s-u+130,m+c*.75),m+=c}}this.drawButton(s-u,m+2,u-20,c-2,"+","#151515","#222")&&this.showSubgraphPropertiesDialogRight(t)},LGraphCanvas.prototype.drawButton=function(e,t,n,a,s,u,c,h){var f=this.ctx;u=u||LiteGraph.NODE_DEFAULT_COLOR,c=c||"#555",h=h||LiteGraph.NODE_TEXT_COLOR;var m=this.ds.convertOffsetToCanvas(this.graph_mouse),_=LiteGraph.isInsideRectangle(m[0],m[1],e,t,n,a);if(m=this.last_click_position?[this.last_click_position[0],this.last_click_position[1]]:null,m){var C=this.canvas.getBoundingClientRect();m[0]-=C.left,m[1]-=C.top}var b=m&&LiteGraph.isInsideRectangle(m[0],m[1],e,t,n,a);f.fillStyle=_?c:u,b&&(f.fillStyle="#AAA"),f.beginPath(),f.roundRect(e,t,n,a,[4]),f.fill(),s!=null&&s.constructor==String&&(f.fillStyle=h,f.textAlign="center",f.font=(a*.65|0)+"px Arial",f.fillText(s,e+n*.5,t+a*.75),f.textAlign="left");var T=b&&!this.block_click;return b&&this.blockClick(),T},LGraphCanvas.prototype.isAreaClicked=function(e,t,n,a,s){var u=this.mouse;LiteGraph.isInsideRectangle(u[0],u[1],e,t,n,a),u=this.last_click_position;var c=u&&LiteGraph.isInsideRectangle(u[0],u[1],e,t,n,a),h=c&&!this.block_click;return c&&s&&this.blockClick(),h},LGraphCanvas.prototype.renderInfo=function(e,t,n){t=t||10,n=n||this.canvas.height-80,e.save(),e.translate(t,n),e.font="10px Arial",e.fillStyle="#888",e.textAlign="left",this.graph?(e.fillText("T: "+this.graph.globaltime.toFixed(2)+"s",5,13),e.fillText("I: "+this.graph.iteration,5,26),e.fillText("N: "+this.graph._nodes.length+" ["+this.visible_nodes.length+"]",5,39),e.fillText("V: "+this.graph._version,5,52),e.fillText("FPS:"+this.fps.toFixed(2),5,65)):e.fillText("No graph selected",5,13),e.restore()},LGraphCanvas.prototype.drawBackCanvas=function(){var e=this.bgcanvas;(e.width!=this.canvas.width||e.height!=this.canvas.height)&&(e.width=this.canvas.width,e.height=this.canvas.height),this.bgctx||(this.bgctx=this.bgcanvas.getContext("2d"));var t=this.bgctx;t.start&&t.start();var n=this.viewport||[0,0,t.canvas.width,t.canvas.height];if(this.clear_background&&t.clearRect(n[0],n[1],n[2],n[3]),this._graph_stack&&this._graph_stack.length){t.save(),this._graph_stack[this._graph_stack.length-1];var a=this.graph._subgraph_node;t.strokeStyle=a.bgcolor,t.lineWidth=10,t.strokeRect(1,1,e.width-2,e.height-2),t.lineWidth=1,t.font="40px Arial",t.textAlign="center",t.fillStyle=a.bgcolor||"#AAA";for(var s="",u=1;u<this._graph_stack.length;++u)s+=this._graph_stack[u]._subgraph_node.getTitle()+" >> ";t.fillText(s+a.getTitle(),e.width*.5,40),t.restore()}var c=!1;if(this.onRenderBackground&&(c=this.onRenderBackground(e,t)),this.viewport||(t.restore(),t.setTransform(1,0,0,1,0,0)),this.visible_links.length=0,this.graph){if(t.save(),this.ds.toCanvasContext(t),this.ds.scale<1.5&&!c&&this.clear_background_color&&(t.fillStyle=this.clear_background_color,t.fillRect(this.visible_area[0],this.visible_area[1],this.visible_area[2],this.visible_area[3])),this.background_image&&this.ds.scale>.5&&!c){if(this.zoom_modify_alpha?t.globalAlpha=(1-.5/this.ds.scale)*this.editor_alpha:t.globalAlpha=this.editor_alpha,t.imageSmoothingEnabled=t.imageSmoothingEnabled=!1,!this._bg_img||this._bg_img.name!=this.background_image){this._bg_img=new Image,this._bg_img.name=this.background_image,this._bg_img.src=this.background_image;var h=this;this._bg_img.onload=function(){h.draw(!0,!0)}}var f=null;this._pattern==null&&this._bg_img.width>0?(f=t.createPattern(this._bg_img,"repeat"),this._pattern_img=this._bg_img,this._pattern=f):f=this._pattern,f&&(t.fillStyle=f,t.fillRect(this.visible_area[0],this.visible_area[1],this.visible_area[2],this.visible_area[3]),t.fillStyle="transparent"),t.globalAlpha=1,t.imageSmoothingEnabled=t.imageSmoothingEnabled=!0}this.graph._groups.length&&!this.live_mode&&this.drawGroups(e,t),this.onDrawBackground&&this.onDrawBackground(t,this.visible_area),this.onBackgroundRender&&(console.error("WARNING! onBackgroundRender deprecated, now is named onDrawBackground "),this.onBackgroundRender=null),this.render_canvas_border&&(t.strokeStyle="#235",t.strokeRect(0,0,e.width,e.height)),this.render_connections_shadows?(t.shadowColor="#000",t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=6):t.shadowColor="rgba(0,0,0,0)",this.live_mode||this.drawConnections(t),t.shadowColor="rgba(0,0,0,0)",t.restore()}t.finish&&t.finish(),this.dirty_bgcanvas=!1,this.dirty_canvas=!0};var temp_vec2=new Float32Array(2);LGraphCanvas.prototype.drawNode=function(e,t){this.current_node=e;var n=e.color||e.constructor.color||LiteGraph.NODE_DEFAULT_COLOR,a=e.bgcolor||e.constructor.bgcolor||LiteGraph.NODE_DEFAULT_BGCOLOR;e.mouseOver;var s=this.ds.scale<.6;if(this.live_mode){e.flags.collapsed||(t.shadowColor="transparent",e.onDrawForeground&&e.onDrawForeground(t,this,this.canvas));return}var u=this.editor_alpha;if(t.globalAlpha=u,this.render_shadows&&!s?(t.shadowColor=LiteGraph.DEFAULT_SHADOW_COLOR,t.shadowOffsetX=2*this.ds.scale,t.shadowOffsetY=2*this.ds.scale,t.shadowBlur=3*this.ds.scale):t.shadowColor="transparent",!(e.flags.collapsed&&e.onDrawCollapsed&&e.onDrawCollapsed(t,this)==!0)){var c=e._shape||LiteGraph.BOX_SHAPE,h=temp_vec2;temp_vec2.set(e.size);var f=e.horizontal;if(e.flags.collapsed){t.font=this.inner_text_font;var m=e.getTitle?e.getTitle():e.title;m!=null&&(e._collapsed_width=Math.min(e.size[0],t.measureText(m).width+LiteGraph.NODE_TITLE_HEIGHT*2),h[0]=e._collapsed_width,h[1]=0)}e.clip_area&&(t.save(),t.beginPath(),c==LiteGraph.BOX_SHAPE?t.rect(0,0,h[0],h[1]):c==LiteGraph.ROUND_SHAPE?t.roundRect(0,0,h[0],h[1],[10]):c==LiteGraph.CIRCLE_SHAPE&&t.arc(h[0]*.5,h[1]*.5,h[0]*.5,0,Math.PI*2),t.clip()),e.has_errors&&(a="red"),this.drawNodeShape(e,t,h,n,a,e.is_selected,e.mouseOver),t.shadowColor="transparent",e.onDrawForeground&&e.onDrawForeground(t,this,this.canvas),t.textAlign=f?"center":"left",t.font=this.inner_text_font;var _=!s,C=this.connecting_output,b=this.connecting_input;t.lineWidth=1;var T=0,R=new Float32Array(2);if(e.flags.collapsed){if(this.render_collapsed_slots){var j=null,H=null;if(e.inputs)for(var A=0;A<e.inputs.length;A++){var I=e.inputs[A];if(I.link!=null){j=I;break}}if(e.outputs)for(var A=0;A<e.outputs.length;A++){var I=e.outputs[A];!I.links||!I.links.length||(H=I)}if(j){var X=0,K=LiteGraph.NODE_TITLE_HEIGHT*-.5;f&&(X=e._collapsed_width*.5,K=-LiteGraph.NODE_TITLE_HEIGHT),t.fillStyle="#686",t.beginPath(),I.type===LiteGraph.EVENT||I.shape===LiteGraph.BOX_SHAPE?t.rect(X-7+.5,K-4,14,8):I.shape===LiteGraph.ARROW_SHAPE?(t.moveTo(X+8,K),t.lineTo(X+-4,K-4),t.lineTo(X+-4,K+4),t.closePath()):t.arc(X,K,4,0,Math.PI*2),t.fill()}if(H){var X=e._collapsed_width,K=LiteGraph.NODE_TITLE_HEIGHT*-.5;f&&(X=e._collapsed_width*.5,K=0),t.fillStyle="#686",t.strokeStyle="black",t.beginPath(),I.type===LiteGraph.EVENT||I.shape===LiteGraph.BOX_SHAPE?t.rect(X-7+.5,K-4,14,8):I.shape===LiteGraph.ARROW_SHAPE?(t.moveTo(X+6,K),t.lineTo(X-6,K-4),t.lineTo(X-6,K+4),t.closePath()):t.arc(X,K,4,0,Math.PI*2),t.fill()}}}else{if(e.inputs)for(var A=0;A<e.inputs.length;A++){var I=e.inputs[A],P=I.type,N=I.shape;t.globalAlpha=u,this.connecting_output&&!LiteGraph.isValidConnection(I.type,C.type)&&(t.globalAlpha=.4*u),t.fillStyle=I.link!=null?I.color_on||this.default_connection_color_byType[P]||this.default_connection_color.input_on:I.color_off||this.default_connection_color_byTypeOff[P]||this.default_connection_color_byType[P]||this.default_connection_color.input_off;var S=e.getConnectionPos(!0,A,R);S[0]-=e.pos[0],S[1]-=e.pos[1],T<S[1]+LiteGraph.NODE_SLOT_HEIGHT*.5&&(T=S[1]+LiteGraph.NODE_SLOT_HEIGHT*.5),t.beginPath(),P=="array"&&(N=LiteGraph.GRID_SHAPE);var k=!0;if(I.type===LiteGraph.EVENT||I.shape===LiteGraph.BOX_SHAPE?f?t.rect(S[0]-5+.5,S[1]-8+.5,10,14):t.rect(S[0]-6+.5,S[1]-5+.5,14,10):N===LiteGraph.ARROW_SHAPE?(t.moveTo(S[0]+8,S[1]+.5),t.lineTo(S[0]-4,S[1]+6+.5),t.lineTo(S[0]-4,S[1]-6+.5),t.closePath()):N===LiteGraph.GRID_SHAPE?(t.rect(S[0]-4,S[1]-4,2,2),t.rect(S[0]-1,S[1]-4,2,2),t.rect(S[0]+2,S[1]-4,2,2),t.rect(S[0]-4,S[1]-1,2,2),t.rect(S[0]-1,S[1]-1,2,2),t.rect(S[0]+2,S[1]-1,2,2),t.rect(S[0]-4,S[1]+2,2,2),t.rect(S[0]-1,S[1]+2,2,2),t.rect(S[0]+2,S[1]+2,2,2),k=!1):s?t.rect(S[0]-4,S[1]-4,8,8):t.arc(S[0],S[1],4,0,Math.PI*2),t.fill(),_){var D=I.label!=null?I.label:I.name;D&&(t.fillStyle=LiteGraph.NODE_TEXT_COLOR,f||I.dir==LiteGraph.UP?t.fillText(D,S[0],S[1]-10):t.fillText(D,S[0]+10,S[1]+5))}}if(t.textAlign=f?"center":"right",t.strokeStyle="black",e.outputs)for(var A=0;A<e.outputs.length;A++){var I=e.outputs[A],P=I.type,N=I.shape;this.connecting_input&&!LiteGraph.isValidConnection(P,b.type)&&(t.globalAlpha=.4*u);var S=e.getConnectionPos(!1,A,R);S[0]-=e.pos[0],S[1]-=e.pos[1],T<S[1]+LiteGraph.NODE_SLOT_HEIGHT*.5&&(T=S[1]+LiteGraph.NODE_SLOT_HEIGHT*.5),t.fillStyle=I.links&&I.links.length?I.color_on||this.default_connection_color_byType[P]||this.default_connection_color.output_on:I.color_off||this.default_connection_color_byTypeOff[P]||this.default_connection_color_byType[P]||this.default_connection_color.output_off,t.beginPath(),P=="array"&&(N=LiteGraph.GRID_SHAPE);var k=!0;if(P===LiteGraph.EVENT||N===LiteGraph.BOX_SHAPE?f?t.rect(S[0]-5+.5,S[1]-8+.5,10,14):t.rect(S[0]-6+.5,S[1]-5+.5,14,10):N===LiteGraph.ARROW_SHAPE?(t.moveTo(S[0]+8,S[1]+.5),t.lineTo(S[0]-4,S[1]+6+.5),t.lineTo(S[0]-4,S[1]-6+.5),t.closePath()):N===LiteGraph.GRID_SHAPE?(t.rect(S[0]-4,S[1]-4,2,2),t.rect(S[0]-1,S[1]-4,2,2),t.rect(S[0]+2,S[1]-4,2,2),t.rect(S[0]-4,S[1]-1,2,2),t.rect(S[0]-1,S[1]-1,2,2),t.rect(S[0]+2,S[1]-1,2,2),t.rect(S[0]-4,S[1]+2,2,2),t.rect(S[0]-1,S[1]+2,2,2),t.rect(S[0]+2,S[1]+2,2,2),k=!1):s?t.rect(S[0]-4,S[1]-4,8,8):t.arc(S[0],S[1],4,0,Math.PI*2),t.fill(),!s&&k&&t.stroke(),_){var D=I.label!=null?I.label:I.name;D&&(t.fillStyle=LiteGraph.NODE_TEXT_COLOR,f||I.dir==LiteGraph.DOWN?t.fillText(D,S[0],S[1]-8):t.fillText(D,S[0]-10,S[1]+5))}}if(t.textAlign="left",t.globalAlpha=1,e.widgets){var M=T;(f||e.widgets_up)&&(M=2),e.widgets_start_y!=null&&(M=e.widgets_start_y),this.drawNodeWidgets(e,M,t,this.node_widget&&this.node_widget[0]==e?this.node_widget[1]:null)}}e.clip_area&&t.restore(),t.globalAlpha=1}},LGraphCanvas.prototype.drawLinkTooltip=function(e,t){var n=t._pos;if(e.fillStyle="black",e.beginPath(),e.arc(n[0],n[1],3,0,Math.PI*2),e.fill(),t.data!=null&&!(this.onDrawLinkTooltip&&this.onDrawLinkTooltip(e,t,this)==!0)){var a=t.data,s=null;if(a.constructor===Number?s=a.toFixed(2):a.constructor===String?s='"'+a+'"':a.constructor===Boolean?s=String(a):a.toToolTip?s=a.toToolTip():s="["+a.constructor.name+"]",s!=null){s=s.substr(0,30),e.font="14px Courier New";var u=e.measureText(s),c=u.width+20,h=24;e.shadowColor="black",e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowBlur=3,e.fillStyle="#454",e.beginPath(),e.roundRect(n[0]-c*.5,n[1]-15-h,c,h,[3]),e.moveTo(n[0]-10,n[1]-15),e.lineTo(n[0]+10,n[1]-15),e.lineTo(n[0],n[1]-5),e.fill(),e.shadowColor="transparent",e.textAlign="center",e.fillStyle="#CEC",e.fillText(s,n[0],n[1]-15-h*.3)}}};var tmp_area=new Float32Array(4);LGraphCanvas.prototype.drawNodeShape=function(e,t,n,a,s,u,c){t.strokeStyle=a,t.fillStyle=s;var h=LiteGraph.NODE_TITLE_HEIGHT,f=this.ds.scale<.5,m=e._shape||e.constructor.shape||LiteGraph.ROUND_SHAPE,_=e.constructor.title_mode,C=!0;_==LiteGraph.TRANSPARENT_TITLE||_==LiteGraph.NO_TITLE?C=!1:_==LiteGraph.AUTOHIDE_TITLE&&c&&(C=!0);var b=tmp_area;b[0]=0,b[1]=C?-h:0,b[2]=n[0]+1,b[3]=C?n[1]+h:n[1];var T=t.globalAlpha;if(t.beginPath(),m==LiteGraph.BOX_SHAPE||f?t.fillRect(b[0],b[1],b[2],b[3]):m==LiteGraph.ROUND_SHAPE||m==LiteGraph.CARD_SHAPE?t.roundRect(b[0],b[1],b[2],b[3],m==LiteGraph.CARD_SHAPE?[this.round_radius,this.round_radius,0,0]:[this.round_radius]):m==LiteGraph.CIRCLE_SHAPE&&t.arc(n[0]*.5,n[1]*.5,n[0]*.5,0,Math.PI*2),t.fill(),!e.flags.collapsed&&C&&(t.shadowColor="transparent",t.fillStyle="rgba(0,0,0,0.2)",t.fillRect(0,-1,b[2],2)),t.shadowColor="transparent",e.onDrawBackground&&e.onDrawBackground(t,this,this.canvas,this.graph_mouse),C||_==LiteGraph.TRANSPARENT_TITLE){if(e.onDrawTitleBar)e.onDrawTitleBar(t,h,n,this.ds.scale,a);else if(_!=LiteGraph.TRANSPARENT_TITLE&&(e.constructor.title_color||this.render_title_colored)){var R=e.constructor.title_color||a;if(e.flags.collapsed&&(t.shadowColor=LiteGraph.DEFAULT_SHADOW_COLOR),this.use_gradients){var A=LGraphCanvas.gradients[R];A||(A=LGraphCanvas.gradients[R]=t.createLinearGradient(0,0,400,0),A.addColorStop(0,R),A.addColorStop(1,"#000")),t.fillStyle=A}else t.fillStyle=R;t.beginPath(),m==LiteGraph.BOX_SHAPE||f?t.rect(0,-h,n[0]+1,h):(m==LiteGraph.ROUND_SHAPE||m==LiteGraph.CARD_SHAPE)&&t.roundRect(0,-h,n[0]+1,h,e.flags.collapsed?[this.round_radius]:[this.round_radius,this.round_radius,0,0]),t.fill(),t.shadowColor="transparent"}var I=!1;LiteGraph.node_box_coloured_by_mode&&LiteGraph.NODE_MODES_COLORS[e.mode]&&(I=LiteGraph.NODE_MODES_COLORS[e.mode]),LiteGraph.node_box_coloured_when_on&&(I=e.action_triggered?"#FFF":e.execute_triggered?"#AAA":I);var P=10;if(e.onDrawTitleBox?e.onDrawTitleBox(t,h,n,this.ds.scale):m==LiteGraph.ROUND_SHAPE||m==LiteGraph.CIRCLE_SHAPE||m==LiteGraph.CARD_SHAPE?(f&&(t.fillStyle="black",t.beginPath(),t.arc(h*.5,h*-.5,P*.5+1,0,Math.PI*2),t.fill()),t.fillStyle=e.boxcolor||I||LiteGraph.NODE_DEFAULT_BOXCOLOR,f?t.fillRect(h*.5-P*.5,h*-.5-P*.5,P,P):(t.beginPath(),t.arc(h*.5,h*-.5,P*.5,0,Math.PI*2),t.fill())):(f&&(t.fillStyle="black",t.fillRect((h-P)*.5-1,(h+P)*-.5-1,P+2,P+2)),t.fillStyle=e.boxcolor||I||LiteGraph.NODE_DEFAULT_BOXCOLOR,t.fillRect((h-P)*.5,(h+P)*-.5,P,P)),t.globalAlpha=T,e.onDrawTitleText&&e.onDrawTitleText(t,h,n,this.ds.scale,this.title_text_font,u),!f){t.font=this.title_text_font;var N=String(e.getTitle());N&&(u?t.fillStyle=LiteGraph.NODE_SELECTED_TITLE_COLOR:t.fillStyle=e.constructor.title_text_color||this.node_title_color,e.flags.collapsed?(t.textAlign="left",t.measureText(N),t.fillText(N.substr(0,20),h,LiteGraph.NODE_TITLE_TEXT_Y-h),t.textAlign="left"):(t.textAlign="left",t.fillText(N,h,LiteGraph.NODE_TITLE_TEXT_Y-h)))}if(!e.flags.collapsed&&e.subgraph&&!e.skip_subgraph_button){var S=LiteGraph.NODE_TITLE_HEIGHT,k=e.size[0]-S,D=LiteGraph.isInsideRectangle(this.graph_mouse[0]-e.pos[0],this.graph_mouse[1]-e.pos[1],k+2,-S+2,S-4,S-4);t.fillStyle=D?"#888":"#555",m==LiteGraph.BOX_SHAPE||f?t.fillRect(k+2,-S+2,S-4,S-4):(t.beginPath(),t.roundRect(k+2,-S+2,S-4,S-4,[4]),t.fill()),t.fillStyle="#333",t.beginPath(),t.moveTo(k+S*.2,-S*.6),t.lineTo(k+S*.8,-S*.6),t.lineTo(k+S*.5,-S*.3),t.fill()}e.onDrawTitle&&e.onDrawTitle(t)}u&&(e.onBounding&&e.onBounding(b),_==LiteGraph.TRANSPARENT_TITLE&&(b[1]-=h,b[3]+=h),t.lineWidth=1,t.globalAlpha=.8,t.beginPath(),m==LiteGraph.BOX_SHAPE?t.rect(-6+b[0],-6+b[1],12+b[2],12+b[3]):m==LiteGraph.ROUND_SHAPE||m==LiteGraph.CARD_SHAPE&&e.flags.collapsed?t.roundRect(-6+b[0],-6+b[1],12+b[2],12+b[3],[this.round_radius*2]):m==LiteGraph.CARD_SHAPE?t.roundRect(-6+b[0],-6+b[1],12+b[2],12+b[3],[this.round_radius*2,2,this.round_radius*2,2]):m==LiteGraph.CIRCLE_SHAPE&&t.arc(n[0]*.5,n[1]*.5,n[0]*.5+6,0,Math.PI*2),t.strokeStyle=LiteGraph.NODE_BOX_OUTLINE_COLOR,t.stroke(),t.strokeStyle=a,t.globalAlpha=1),e.execute_triggered>0&&e.execute_triggered--,e.action_triggered>0&&e.action_triggered--};var margin_area=new Float32Array(4),link_bounding=new Float32Array(4),tempA=new Float32Array(2),tempB=new Float32Array(2);LGraphCanvas.prototype.drawConnections=function(e){var t=LiteGraph.getTime(),n=this.visible_area;margin_area[0]=n[0]-20,margin_area[1]=n[1]-20,margin_area[2]=n[2]+40,margin_area[3]=n[3]+40,e.lineWidth=this.connections_width,e.fillStyle="#AAA",e.strokeStyle="#AAA",e.globalAlpha=this.editor_alpha;for(var a=this.graph._nodes,s=0,u=a.length;s<u;++s){var c=a[s];if(!(!c.inputs||!c.inputs.length))for(var h=0;h<c.inputs.length;++h){var f=c.inputs[h];if(!(!f||f.link==null)){var m=f.link,_=this.graph.links[m];if(_){var C=this.graph.getNodeById(_.origin_id);if(C!=null){var b=_.origin_slot,T=null;b==-1?T=[C.pos[0]+10,C.pos[1]+10]:T=C.getConnectionPos(!1,b,tempA);var R=c.getConnectionPos(!0,h,tempB);if(link_bounding[0]=T[0],link_bounding[1]=T[1],link_bounding[2]=R[0]-T[0],link_bounding[3]=R[1]-T[1],link_bounding[2]<0&&(link_bounding[0]+=link_bounding[2],link_bounding[2]=Math.abs(link_bounding[2])),link_bounding[3]<0&&(link_bounding[1]+=link_bounding[3],link_bounding[3]=Math.abs(link_bounding[3])),!!overlapBounding(link_bounding,margin_area)){var A=C.outputs[b],I=c.inputs[h];if(!(!A||!I)){var P=A.dir||(C.horizontal?LiteGraph.DOWN:LiteGraph.RIGHT),N=I.dir||(c.horizontal?LiteGraph.UP:LiteGraph.LEFT);if(this.renderLink(e,T,R,_,!1,0,null,P,N),_&&_._last_time&&t-_._last_time<1e3){var S=2-(t-_._last_time)*.002,k=e.globalAlpha;e.globalAlpha=k*S,this.renderLink(e,T,R,_,!0,S,"white",P,N),e.globalAlpha=k}}}}}}}}e.globalAlpha=1},LGraphCanvas.prototype.renderLink=function(e,t,n,a,s,u,c,h,f,m){a&&this.visible_links.push(a),!c&&a&&(c=a.color||LGraphCanvas.link_type_colors[a.type]),c||(c=this.default_link_color),a!=null&&this.highlighted_links[a.id]&&(c="#FFF"),h=h||LiteGraph.RIGHT,f=f||LiteGraph.LEFT;var _=distance(t,n);this.render_connections_border&&this.ds.scale>.6&&(e.lineWidth=this.connections_width+4),e.lineJoin="round",m=m||1,m>1&&(e.lineWidth=.5),e.beginPath();for(var C=0;C<m;C+=1){var b=(C-(m-1)*.5)*5;if(this.links_render_mode==LiteGraph.SPLINE_LINK){e.moveTo(t[0],t[1]+b);var T=0,R=0,A=0,I=0;switch(h){case LiteGraph.LEFT:T=_*-.25;break;case LiteGraph.RIGHT:T=_*.25;break;case LiteGraph.UP:R=_*-.25;break;case LiteGraph.DOWN:R=_*.25;break}switch(f){case LiteGraph.LEFT:A=_*-.25;break;case LiteGraph.RIGHT:A=_*.25;break;case LiteGraph.UP:I=_*-.25;break;case LiteGraph.DOWN:I=_*.25;break}e.bezierCurveTo(t[0]+T,t[1]+R+b,n[0]+A,n[1]+I+b,n[0],n[1]+b)}else if(this.links_render_mode==LiteGraph.LINEAR_LINK){e.moveTo(t[0],t[1]+b);var T=0,R=0,A=0,I=0;switch(h){case LiteGraph.LEFT:T=-1;break;case LiteGraph.RIGHT:T=1;break;case LiteGraph.UP:R=-1;break;case LiteGraph.DOWN:R=1;break}switch(f){case LiteGraph.LEFT:A=-1;break;case LiteGraph.RIGHT:A=1;break;case LiteGraph.UP:I=-1;break;case LiteGraph.DOWN:I=1;break}var P=15;e.lineTo(t[0]+T*P,t[1]+R*P+b),e.lineTo(n[0]+A*P,n[1]+I*P+b),e.lineTo(n[0],n[1]+b)}else if(this.links_render_mode==LiteGraph.STRAIGHT_LINK){e.moveTo(t[0],t[1]);var N=t[0],S=t[1],k=n[0],D=n[1];h==LiteGraph.RIGHT?N+=10:S+=10,f==LiteGraph.LEFT?k-=10:D-=10,e.lineTo(N,S),e.lineTo((N+k)*.5,S),e.lineTo((N+k)*.5,D),e.lineTo(k,D),e.lineTo(n[0],n[1])}else return}this.render_connections_border&&this.ds.scale>.6&&!s&&(e.strokeStyle="rgba(0,0,0,0.5)",e.stroke()),e.lineWidth=this.connections_width,e.fillStyle=e.strokeStyle=c,e.stroke();var M=this.computeConnectionPoint(t,n,.5,h,f);if(a&&a._pos&&(a._pos[0]=M[0],a._pos[1]=M[1]),this.ds.scale>=.6&&this.highquality_render&&f!=LiteGraph.CENTER){if(this.render_connection_arrows){var j=this.computeConnectionPoint(t,n,.25,h,f),H=this.computeConnectionPoint(t,n,.26,h,f),X=this.computeConnectionPoint(t,n,.75,h,f),K=this.computeConnectionPoint(t,n,.76,h,f),re=0,F=0;this.render_curved_connections?(re=-Math.atan2(H[0]-j[0],H[1]-j[1]),F=-Math.atan2(K[0]-X[0],K[1]-X[1])):F=re=n[1]>t[1]?0:Math.PI,e.save(),e.translate(j[0],j[1]),e.rotate(re),e.beginPath(),e.moveTo(-5,-3),e.lineTo(0,7),e.lineTo(5,-3),e.fill(),e.restore(),e.save(),e.translate(X[0],X[1]),e.rotate(F),e.beginPath(),e.moveTo(-5,-3),e.lineTo(0,7),e.lineTo(5,-3),e.fill(),e.restore()}e.beginPath(),e.arc(M[0],M[1],5,0,Math.PI*2),e.fill()}if(u){e.fillStyle=c;for(var C=0;C<5;++C){var J=(LiteGraph.getTime()*.001+C*.2)%1,M=this.computeConnectionPoint(t,n,J,h,f);e.beginPath(),e.arc(M[0],M[1],5,0,2*Math.PI),e.fill()}}},LGraphCanvas.prototype.computeConnectionPoint=function(e,t,n,a,s){a=a||LiteGraph.RIGHT,s=s||LiteGraph.LEFT;var u=distance(e,t),c=e,h=[e[0],e[1]],f=[t[0],t[1]],m=t;switch(a){case LiteGraph.LEFT:h[0]+=u*-.25;break;case LiteGraph.RIGHT:h[0]+=u*.25;break;case LiteGraph.UP:h[1]+=u*-.25;break;case LiteGraph.DOWN:h[1]+=u*.25;break}switch(s){case LiteGraph.LEFT:f[0]+=u*-.25;break;case LiteGraph.RIGHT:f[0]+=u*.25;break;case LiteGraph.UP:f[1]+=u*-.25;break;case LiteGraph.DOWN:f[1]+=u*.25;break}var _=(1-n)*(1-n)*(1-n),C=3*((1-n)*(1-n))*n,b=3*(1-n)*(n*n),T=n*n*n,R=_*c[0]+C*h[0]+b*f[0]+T*m[0],A=_*c[1]+C*h[1]+b*f[1]+T*m[1];return[R,A]},LGraphCanvas.prototype.drawExecutionOrder=function(e){e.shadowColor="transparent",e.globalAlpha=.25,e.textAlign="center",e.strokeStyle="white",e.globalAlpha=.75;for(var t=this.visible_nodes,n=0;n<t.length;++n){var a=t[n];e.fillStyle="black",e.fillRect(a.pos[0]-LiteGraph.NODE_TITLE_HEIGHT,a.pos[1]-LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT),a.order==0&&e.strokeRect(a.pos[0]-LiteGraph.NODE_TITLE_HEIGHT+.5,a.pos[1]-LiteGraph.NODE_TITLE_HEIGHT+.5,LiteGraph.NODE_TITLE_HEIGHT,LiteGraph.NODE_TITLE_HEIGHT),e.fillStyle="#FFF",e.fillText(a.order,a.pos[0]+LiteGraph.NODE_TITLE_HEIGHT*-.5,a.pos[1]-6)}e.globalAlpha=1},LGraphCanvas.prototype.drawNodeWidgets=function(e,t,n,a){if(!e.widgets||!e.widgets.length)return 0;var s=e.size[0],u=e.widgets;t+=2;var c=LiteGraph.NODE_WIDGET_HEIGHT,h=this.ds.scale>.5;n.save(),n.globalAlpha=this.editor_alpha;for(var f=LiteGraph.WIDGET_OUTLINE_COLOR,m=LiteGraph.WIDGET_BGCOLOR,_=LiteGraph.WIDGET_TEXT_COLOR,C=LiteGraph.WIDGET_SECONDARY_TEXT_COLOR,b=15,T=0;T<u.length;++T){var R=u[T],A=t;R.y&&(A=R.y),R.last_y=A,n.strokeStyle=f,n.fillStyle="#222",n.textAlign="left",R.disabled&&(n.globalAlpha*=.5);var I=R.width||s;switch(R.type){case"button":R.clicked&&(n.fillStyle="#AAA",R.clicked=!1,this.dirty_canvas=!0),n.fillRect(b,A,I-b*2,c),h&&!R.disabled&&n.strokeRect(b,A,I-b*2,c),h&&(n.textAlign="center",n.fillStyle=_,n.fillText(R.label||R.name,I*.5,A+c*.7));break;case"toggle":if(n.textAlign="left",n.strokeStyle=f,n.fillStyle=m,n.beginPath(),h?n.roundRect(b,A,I-b*2,c,[c*.5]):n.rect(b,A,I-b*2,c),n.fill(),h&&!R.disabled&&n.stroke(),n.fillStyle=R.value?"#89A":"#333",n.beginPath(),n.arc(I-b*2,A+c*.5,c*.36,0,Math.PI*2),n.fill(),h){n.fillStyle=C;const M=R.label||R.name;M!=null&&n.fillText(M,b*2,A+c*.7),n.fillStyle=R.value?_:C,n.textAlign="right",n.fillText(R.value?R.options.on||"true":R.options.off||"false",I-40,A+c*.7)}break;case"slider":n.fillStyle=m,n.fillRect(b,A,I-b*2,c);var P=R.options.max-R.options.min,N=(R.value-R.options.min)/P;if(N<0&&(N=0),N>1&&(N=1),n.fillStyle=R.options.hasOwnProperty("slider_color")?R.options.slider_color:a==R?"#89A":"#678",n.fillRect(b,A,N*(I-b*2),c),h&&!R.disabled&&n.strokeRect(b,A,I-b*2,c),R.marker){var S=(R.marker-R.options.min)/P;S<0&&(S=0),S>1&&(S=1),n.fillStyle=R.options.hasOwnProperty("marker_color")?R.options.marker_color:"#AA9",n.fillRect(b+S*(I-b*2),A,2,c)}h&&(n.textAlign="center",n.fillStyle=_,n.fillText(R.label||R.name+"  "+Number(R.value).toFixed(R.options.precision!=null?R.options.precision:3),I*.5,A+c*.7));break;case"number":case"combo":if(n.textAlign="left",n.strokeStyle=f,n.fillStyle=m,n.beginPath(),h?n.roundRect(b,A,I-b*2,c,[c*.5]):n.rect(b,A,I-b*2,c),n.fill(),h)if(R.disabled||n.stroke(),n.fillStyle=_,R.disabled||(n.beginPath(),n.moveTo(b+16,A+5),n.lineTo(b+6,A+c*.5),n.lineTo(b+16,A+c-5),n.fill(),n.beginPath(),n.moveTo(I-b-16,A+5),n.lineTo(I-b-6,A+c*.5),n.lineTo(I-b-16,A+c-5),n.fill()),n.fillStyle=C,n.fillText(R.label||R.name,b*2+5,A+c*.7),n.fillStyle=_,n.textAlign="right",R.type=="number")n.fillText(Number(R.value).toFixed(R.options.precision!==void 0?R.options.precision:3),I-b*2-20,A+c*.7);else{var k=R.value;if(R.options.values){var D=R.options.values;D.constructor===Function&&(D=D()),D&&D.constructor!==Array&&(k=D[R.value])}n.fillText(k,I-b*2-20,A+c*.7)}break;case"string":case"text":if(n.textAlign="left",n.strokeStyle=f,n.fillStyle=m,n.beginPath(),h?n.roundRect(b,A,I-b*2,c,[c*.5]):n.rect(b,A,I-b*2,c),n.fill(),h){R.disabled||n.stroke(),n.save(),n.beginPath(),n.rect(b,A,I-b*2,c),n.clip(),n.fillStyle=C;const M=R.label||R.name;M!=null&&n.fillText(M,b*2,A+c*.7),n.fillStyle=_,n.textAlign="right",n.fillText(String(R.value).substr(0,30),I-b*2,A+c*.7),n.restore()}break;default:R.draw&&R.draw(n,e,I,A,c);break}t+=(R.computeSize?R.computeSize(I)[1]:c)+4,n.globalAlpha=this.editor_alpha}n.restore(),n.textAlign="left"},LGraphCanvas.prototype.processNodeWidgets=function(node,pos,event,active_widget){if(!node.widgets||!node.widgets.length||!this.allow_interaction&&!node.flags.allow_interaction)return null;for(var x=pos[0]-node.pos[0],y=pos[1]-node.pos[1],width=node.size[0],deltaX=event.deltaX||event.deltax||0,that=this,ref_window=this.getCanvasWindow(),i=0;i<node.widgets.length;++i){var w=node.widgets[i];if(!(!w||w.disabled)){var widget_height=w.computeSize?w.computeSize(width)[1]:LiteGraph.NODE_WIDGET_HEIGHT,widget_width=w.width||width;if(!(w!=active_widget&&(x<6||x>widget_width-12||y<w.last_y||y>w.last_y+widget_height||w.last_y===void 0))){var old_value=w.value;switch(w.type){case"button":event.type===LiteGraph.pointerevents_method+"down"&&(w.callback&&setTimeout(function(){w.callback(w,that,node,pos,event)},20),w.clicked=!0,this.dirty_canvas=!0);break;case"slider":var old_value=w.value,nvalue=clamp((x-15)/(widget_width-30),0,1);if(w.options.read_only)break;w.value=w.options.min+(w.options.max-w.options.min)*nvalue,old_value!=w.value&&setTimeout(function(){inner_value_change(w,w.value)},20),this.dirty_canvas=!0;break;case"number":case"combo":var old_value=w.value;if(event.type==LiteGraph.pointerevents_method+"move"&&w.type=="number")deltaX&&(w.value+=deltaX*.1*(w.options.step||1)),w.options.min!=null&&w.value<w.options.min&&(w.value=w.options.min),w.options.max!=null&&w.value>w.options.max&&(w.value=w.options.max);else if(event.type==LiteGraph.pointerevents_method+"down"){var values=w.options.values;values&&values.constructor===Function&&(values=w.options.values(w,node));var values_list=null;w.type!="number"&&(values_list=values.constructor===Array?values:Object.keys(values));var delta=x<40?-1:x>widget_width-40?1:0;if(w.type=="number")w.value+=delta*.1*(w.options.step||1),w.options.min!=null&&w.value<w.options.min&&(w.value=w.options.min),w.options.max!=null&&w.value>w.options.max&&(w.value=w.options.max);else if(delta){var index=-1;this.last_mouseclick=0,values.constructor===Object?index=values_list.indexOf(String(w.value))+delta:index=values_list.indexOf(w.value)+delta,index>=values_list.length&&(index=values_list.length-1),index<0&&(index=0),values.constructor===Array?w.value=values[index]:w.value=index}else{let e=function(t,n,a){return values!=values_list&&(t=text_values.indexOf(t)),this.value=t,inner_value_change(this,t),that.dirty_canvas=!0,!1};var inner_clicked=e,text_values=values!=values_list?Object.values(values):values;new LiteGraph.ContextMenu(text_values,{scale:Math.max(1,this.ds.scale),event,className:"dark",callback:e.bind(w)},ref_window)}}else if(event.type==LiteGraph.pointerevents_method+"up"&&w.type=="number"){var delta=x<40?-1:x>widget_width-40?1:0;event.click_time<200&&delta==0&&this.prompt("Value",w.value,(function(v){if(/^[0-9+\-*/()\s]+|\d+\.\d+$/.test(v))try{v=eval(v)}catch(e){}this.value=Number(v),inner_value_change(this,this.value)}).bind(w),event)}old_value!=w.value&&setTimeout((function(){inner_value_change(this,this.value)}).bind(w),20),this.dirty_canvas=!0;break;case"toggle":event.type==LiteGraph.pointerevents_method+"down"&&(w.value=!w.value,setTimeout(function(){inner_value_change(w,w.value)},20));break;case"string":case"text":event.type==LiteGraph.pointerevents_method+"down"&&this.prompt("Value",w.value,(function(e){inner_value_change(this,e)}).bind(w),event,w.options?w.options.multiline:!1);break;default:w.mouse&&(this.dirty_canvas=w.mouse(event,[x,y],node));break}return old_value!=w.value&&(node.onWidgetChanged&&node.onWidgetChanged(w.name,w.value,old_value,w),node.graph._version++),w}}}function inner_value_change(e,t){e.type=="number"&&(t=Number(t)),e.value=t,e.options&&e.options.property&&node.properties[e.options.property]!==void 0&&node.setProperty(e.options.property,t),e.callback&&e.callback(e.value,that,node,pos,event)}return null},LGraphCanvas.prototype.drawGroups=function(e,t){if(this.graph){var n=this.graph._groups;t.save(),t.globalAlpha=.5*this.editor_alpha;for(var a=0;a<n.length;++a){var s=n[a];if(overlapBounding(this.visible_area,s._bounding)){t.fillStyle=s.color||"#335",t.strokeStyle=s.color||"#335";var u=s._pos,c=s._size;t.globalAlpha=.25*this.editor_alpha,t.beginPath(),t.rect(u[0]+.5,u[1]+.5,c[0],c[1]),t.fill(),t.globalAlpha=this.editor_alpha,t.stroke(),t.beginPath(),t.moveTo(u[0]+c[0],u[1]+c[1]),t.lineTo(u[0]+c[0]-10,u[1]+c[1]),t.lineTo(u[0]+c[0],u[1]+c[1]-10),t.fill();var h=s.font_size||LiteGraph.DEFAULT_GROUP_FONT_SIZE;t.font=h+"px Arial",t.textAlign="left",t.fillText(s.title,u[0]+4,u[1]+h)}}t.restore()}},LGraphCanvas.prototype.adjustNodesSize=function(){for(var e=this.graph._nodes,t=0;t<e.length;++t)e[t].size=e[t].computeSize();this.setDirty(!0,!0)},LGraphCanvas.prototype.resize=function(e,t){if(!e&&!t){var n=this.canvas.parentNode;e=n.offsetWidth,t=n.offsetHeight}this.canvas.width==e&&this.canvas.height==t||(this.canvas.width=e,this.canvas.height=t,this.bgcanvas.width=this.canvas.width,this.bgcanvas.height=this.canvas.height,this.setDirty(!0,!0))},LGraphCanvas.prototype.switchLiveMode=function(e){if(!e){this.live_mode=!this.live_mode,this.dirty_canvas=!0,this.dirty_bgcanvas=!0;return}var t=this,n=this.live_mode?1.1:.9;this.live_mode&&(this.live_mode=!1,this.editor_alpha=.1);var a=setInterval(function(){t.editor_alpha*=n,t.dirty_canvas=!0,t.dirty_bgcanvas=!0,n<1&&t.editor_alpha<.01&&(clearInterval(a),n<1&&(t.live_mode=!0)),n>1&&t.editor_alpha>.99&&(clearInterval(a),t.editor_alpha=1)},1)},LGraphCanvas.prototype.onNodeSelectionChange=function(e){},LGraphCanvas.onGroupAdd=function(e,t,n){var a=LGraphCanvas.active_canvas;a.getCanvasWindow();var s=new LiteGraph.LGraphGroup;s.pos=a.convertEventToCanvasOffset(n),a.graph.add(s)},LGraphCanvas.getBoundaryNodes=function(e){let t=null,n=null,a=null,s=null;for(const u in e){const c=e[u],[h,f]=c.pos,[m,_]=c.size;(t===null||f<t.pos[1])&&(t=c),(n===null||h+m>n.pos[0]+n.size[0])&&(n=c),(a===null||f+_>a.pos[1]+a.size[1])&&(a=c),(s===null||h<s.pos[0])&&(s=c)}return{top:t,right:n,bottom:a,left:s}},LGraphCanvas.prototype.boundaryNodesForSelection=function(){return LGraphCanvas.getBoundaryNodes(Object.values(this.selected_nodes))},LGraphCanvas.alignNodes=function(e,t,n){if(!e)return;const a=LGraphCanvas.active_canvas;let s=[];n===void 0?s=LGraphCanvas.getBoundaryNodes(e):s={top:n,right:n,bottom:n,left:n};for(const[u,c]of Object.entries(a.selected_nodes))switch(t){case"right":c.pos[0]=s.right.pos[0]+s.right.size[0]-c.size[0];break;case"left":c.pos[0]=s.left.pos[0];break;case"top":c.pos[1]=s.top.pos[1];break;case"bottom":c.pos[1]=s.bottom.pos[1]+s.bottom.size[1]-c.size[1];break}a.dirty_canvas=!0,a.dirty_bgcanvas=!0},LGraphCanvas.onNodeAlign=function(e,t,n,a,s){new LiteGraph.ContextMenu(["Top","Bottom","Left","Right"],{event:n,callback:u,parentMenu:a});function u(c){LGraphCanvas.alignNodes(LGraphCanvas.active_canvas.selected_nodes,c.toLowerCase(),s)}},LGraphCanvas.onGroupAlign=function(e,t,n,a){new LiteGraph.ContextMenu(["Top","Bottom","Left","Right"],{event:n,callback:s,parentMenu:a});function s(u){LGraphCanvas.alignNodes(LGraphCanvas.active_canvas.selected_nodes,u.toLowerCase())}},LGraphCanvas.onMenuAdd=function(e,t,n,a,s){var u=LGraphCanvas.active_canvas,c=u.getCanvasWindow(),h=u.graph;if(!h)return;function f(m,_){var C=LiteGraph.getNodeTypesCategories(u.filter||h.filter).filter(function(R){return R.startsWith(m)}),b=[];C.map(function(R){if(R){var A=new RegExp("^("+m+")"),I=R.replace(A,"").split("/")[0],P=m===""?I+"/":m+I+"/",N=I;N.indexOf("::")!=-1&&(N=N.split("::")[1]);var S=b.findIndex(function(k){return k.value===P});S===-1&&b.push({value:P,content:N,has_submenu:!0,callback:function(k,D,M,j){f(k.value,j)}})}});var T=LiteGraph.getNodeTypesInCategory(m.slice(0,-1),u.filter||h.filter);T.map(function(R){if(!R.skip_list){var A={value:R.type,content:R.title,has_submenu:!1,callback:function(I,P,N,S){var k=S.getFirstEvent();u.graph.beforeChange();var D=LiteGraph.createNode(I.value);D&&(D.pos=u.convertEventToCanvasOffset(k),u.graph.add(D)),s&&s(D),u.graph.afterChange()}};b.push(A)}}),new LiteGraph.ContextMenu(b,{event:n,parentMenu:_},c)}return f("",a),!1},LGraphCanvas.onMenuCollapseAll=function(){},LGraphCanvas.onMenuNodeEdit=function(){},LGraphCanvas.showMenuNodeOptionalInputs=function(e,f,n,a,s){if(!s)return;var u=this,c=LGraphCanvas.active_canvas,h=c.getCanvasWindow(),f=s.optional_inputs;s.onGetInputs&&(f=s.onGetInputs());var m=[];if(f)for(var _=0;_<f.length;_++){var C=f[_];if(!C){m.push(null);continue}var b=C[0];C[2]||(C[2]={}),C[2].label&&(b=C[2].label),C[2].removable=!0;var T={content:b,value:C};C[1]==LiteGraph.ACTION&&(T.className="event"),m.push(T)}if(s.onMenuNodeInputs){var R=s.onMenuNodeInputs(m);R&&(m=R)}if(!m.length){console.log("no input entries");return}new LiteGraph.ContextMenu(m,{event:n,callback:A,parentMenu:a,node:s},h);function A(I,P,N){s&&(I.callback&&I.callback.call(u,s,I,P,N),I.value&&(s.graph.beforeChange(),s.addInput(I.value[0],I.value[1],I.value[2]),s.onNodeInputAdd&&s.onNodeInputAdd(I.value),s.setDirtyCanvas(!0,!0),s.graph.afterChange()))}return!1},LGraphCanvas.showMenuNodeOptionalOutputs=function(e,f,n,a,s){if(!s)return;var u=this,c=LGraphCanvas.active_canvas,h=c.getCanvasWindow(),f=s.optional_outputs;s.onGetOutputs&&(f=s.onGetOutputs());var m=[];if(f)for(var _=0;_<f.length;_++){var C=f[_];if(!C){m.push(null);continue}if(!(s.flags&&s.flags.skip_repeated_outputs&&s.findOutputSlot(C[0])!=-1)){var b=C[0];C[2]||(C[2]={}),C[2].label&&(b=C[2].label),C[2].removable=!0;var T={content:b,value:C};C[1]==LiteGraph.EVENT&&(T.className="event"),m.push(T)}}if(this.onMenuNodeOutputs&&(m=this.onMenuNodeOutputs(m)),LiteGraph.do_add_triggers_slots&&s.findOutputSlot("onExecuted")==-1&&m.push({content:"On Executed",value:["onExecuted",LiteGraph.EVENT,{nameLocked:!0}],className:"event"}),s.onMenuNodeOutputs){var R=s.onMenuNodeOutputs(m);R&&(m=R)}if(!m.length)return;new LiteGraph.ContextMenu(m,{event:n,callback:A,parentMenu:a,node:s},h);function A(I,P,N){if(s&&(I.callback&&I.callback.call(u,s,I,P,N),!!I.value)){var S=I.value[1];if(S&&(S.constructor===Object||S.constructor===Array)){var k=[];for(var D in S)k.push({content:D,value:S[D]});return new LiteGraph.ContextMenu(k,{event:P,callback:A,parentMenu:a,node:s}),!1}else s.graph.beforeChange(),s.addOutput(I.value[0],I.value[1],I.value[2]),s.onNodeOutputAdd&&s.onNodeOutputAdd(I.value),s.setDirtyCanvas(!0,!0),s.graph.afterChange()}}return!1},LGraphCanvas.onShowMenuNodeProperties=function(e,t,n,a,s){if(!s||!s.properties)return;var u=LGraphCanvas.active_canvas,c=u.getCanvasWindow(),h=[];for(var f in s.properties){var e=s.properties[f]!==void 0?s.properties[f]:" ";typeof e=="object"&&(e=JSON.stringify(e));var m=s.getPropertyInfo(f);(m.type=="enum"||m.type=="combo")&&(e=LGraphCanvas.getPropertyPrintableValue(e,m.values)),e=LGraphCanvas.decodeHTML(e),h.push({content:"<span class='property_name'>"+(m.label?m.label:f)+"</span><span class='property_value'>"+e+"</span>",value:f})}if(!h.length)return;new LiteGraph.ContextMenu(h,{event:n,callback:_,parentMenu:a,allow_html:!0,node:s},c);function _(C,b,T,R){if(s){var A=this.getBoundingClientRect();u.showEditPropertyValue(s,C.value,{position:[A.left,A.top]})}}return!1},LGraphCanvas.decodeHTML=function(e){var t=document.createElement("div");return t.innerText=e,t.innerHTML},LGraphCanvas.onMenuResizeNode=function(e,t,n,a,s){if(s){var u=function(f){f.size=f.computeSize(),f.onResize&&f.onResize(f.size)},c=LGraphCanvas.active_canvas;if(!c.selected_nodes||Object.keys(c.selected_nodes).length<=1)u(s);else for(var h in c.selected_nodes)u(c.selected_nodes[h]);s.setDirtyCanvas(!0,!0)}},LGraphCanvas.prototype.showLinkMenu=function(e,t){var n=this,a=n.graph.getNodeById(e.origin_id),s=n.graph.getNodeById(e.target_id),u=!1;a&&a.outputs&&a.outputs[e.origin_slot]&&(u=a.outputs[e.origin_slot].type);var c=!1;s&&s.outputs&&s.outputs[e.target_slot]&&(c=s.inputs[e.target_slot].type);var h=["Add Node",null,"Delete",null],f=new LiteGraph.ContextMenu(h,{event:t,title:e.data!=null?e.data.constructor.name:null,callback:m});function m(_,C,b){switch(_){case"Add Node":LGraphCanvas.onMenuAdd(null,null,b,f,function(T){!T.inputs||!T.inputs.length||!T.outputs||!T.outputs.length||a.connectByType(e.origin_slot,T,u)&&(T.connectByType(e.target_slot,s,c),T.pos[0]-=T.size[0]*.5)});break;case"Delete":n.graph.removeLink(e.id);break}}return!1},LGraphCanvas.prototype.createDefaultNodeForSlot=function(t){var t=t||{},n=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,position:[],nodeType:null,posAdd:[0,0],posSizeFix:[0,0]},t),a=this,s=n.nodeFrom&&n.slotFrom!==null,u=!s&&n.nodeTo&&n.slotTo!==null;if(!s&&!u)return console.warn("No data passed to createDefaultNodeForSlot "+n.nodeFrom+" "+n.slotFrom+" "+n.nodeTo+" "+n.slotTo),!1;if(!n.nodeType)return console.warn("No type to createDefaultNodeForSlot"),!1;var c=s?n.nodeFrom:n.nodeTo,h=s?n.slotFrom:n.slotTo,f=!1;switch(typeof h){case"string":f=s?c.findOutputSlot(h,!1):c.findInputSlot(h,!1),h=s?c.outputs[h]:c.inputs[h];break;case"object":f=s?c.findOutputSlot(h.name):c.findInputSlot(h.name);break;case"number":f=h,h=s?c.outputs[h]:c.inputs[h];break;case"undefined":default:return console.warn("Cant get slot information "+h),!1}(h===!1||f===!1)&&console.warn("createDefaultNodeForSlot bad slotX "+h+" "+f);var m=h.type==LiteGraph.EVENT?"_event_":h.type,_=s?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in;if(_&&_[m]){if(h.link,nodeNewType=!1,typeof _[m]=="object"||typeof _[m]=="array"){for(var C in _[m])if(n.nodeType==_[m][C]||n.nodeType=="AUTO"){nodeNewType=_[m][C];break}}else(n.nodeType==_[m]||n.nodeType=="AUTO")&&(nodeNewType=_[m]);if(nodeNewType){var b=!1;typeof nodeNewType=="object"&&nodeNewType.node&&(b=nodeNewType,nodeNewType=nodeNewType.node);var T=LiteGraph.createNode(nodeNewType);if(T){if(b){if(b.properties)for(var R in b.properties)T.addProperty(R,b.properties[R]);if(b.inputs){T.inputs=[];for(var R in b.inputs)T.addOutput(b.inputs[R][0],b.inputs[R][1])}if(b.outputs){T.outputs=[];for(var R in b.outputs)T.addOutput(b.outputs[R][0],b.outputs[R][1])}b.title&&(T.title=b.title),b.json&&T.configure(b.json)}return a.graph.add(T),T.pos=[n.position[0]+n.posAdd[0]+(n.posSizeFix[0]?n.posSizeFix[0]*T.size[0]:0),n.position[1]+n.posAdd[1]+(n.posSizeFix[1]?n.posSizeFix[1]*T.size[1]:0)],s?n.nodeFrom.connectByType(f,T,m):n.nodeTo.connectByTypeOutput(f,T,m),!0}else console.log("failed creating "+nodeNewType)}}return!1},LGraphCanvas.prototype.showConnectionMenu=function(t){var t=t||{},n=Object.assign({nodeFrom:null,slotFrom:null,nodeTo:null,slotTo:null,e:null},t),a=this,s=n.nodeFrom&&n.slotFrom,u=!s&&n.nodeTo&&n.slotTo;if(!s&&!u)return console.warn("No data passed to showConnectionMenu"),!1;var c=s?n.nodeFrom:n.nodeTo,h=s?n.slotFrom:n.slotTo,f=!1;switch(typeof h){case"string":f=s?c.findOutputSlot(h,!1):c.findInputSlot(h,!1),h=s?c.outputs[h]:c.inputs[h];break;case"object":f=s?c.findOutputSlot(h.name):c.findInputSlot(h.name);break;case"number":f=h,h=s?c.outputs[h]:c.inputs[h];break;default:return console.warn("Cant get slot information "+h),!1}var m=["Add Node",null];a.allow_searchbox&&(m.push("Search"),m.push(null));var _=h.type==LiteGraph.EVENT?"_event_":h.type,C=s?LiteGraph.slot_types_default_out:LiteGraph.slot_types_default_in;if(C&&C[_])if(typeof C[_]=="object"||typeof C[_]=="array")for(var b in C[_])m.push(C[_][b]);else m.push(C[_]);var T=new LiteGraph.ContextMenu(m,{event:n.e,title:(h&&h.name!=""?h.name+(_?" | ":""):"")+(h&&_?_:""),callback:R});function R(A,I,P){switch(A){case"Add Node":LGraphCanvas.onMenuAdd(null,null,P,T,function(N){s?n.nodeFrom.connectByType(f,N,_):n.nodeTo.connectByTypeOutput(f,N,_)});break;case"Search":s?a.showSearchBox(P,{node_from:n.nodeFrom,slot_from:h,type_filter_in:_}):a.showSearchBox(P,{node_to:n.nodeTo,slot_from:h,type_filter_out:_});break;default:a.createDefaultNodeForSlot(Object.assign(n,{position:[n.e.canvasX,n.e.canvasY],nodeType:A}));break}}return!1},LGraphCanvas.onShowPropertyEditor=function(e,t,n,a,s){var u=e.property||"title",c=s[u],h=document.createElement("div");h.is_modified=!1,h.className="graphdialog",h.innerHTML="<span class='name'></span><input autofocus type='text' class='value'/><button>OK</button>",h.close=function(){h.parentNode&&h.parentNode.removeChild(h)};var f=h.querySelector(".name");f.innerText=u;var m=h.querySelector(".value");m&&(m.value=c,m.addEventListener("blur",function(S){this.focus()}),m.addEventListener("keydown",function(S){if(h.is_modified=!0,S.keyCode==27)h.close();else if(S.keyCode==13)P();else if(S.keyCode!=13&&S.target.localName!="textarea")return;S.preventDefault(),S.stopPropagation()}));var _=LGraphCanvas.active_canvas,C=_.canvas,b=C.getBoundingClientRect(),T=-20,R=-20;b&&(T-=b.left,R-=b.top),event?(h.style.left=event.clientX+T+"px",h.style.top=event.clientY+R+"px"):(h.style.left=C.width*.5+T+"px",h.style.top=C.height*.5+R+"px");var A=h.querySelector("button");A.addEventListener("click",P),C.parentNode.appendChild(h),m&&m.focus();var I=null;h.addEventListener("mouseleave",function(S){LiteGraph.dialog_close_on_mouse_leave&&!h.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(I=setTimeout(h.close,LiteGraph.dialog_close_on_mouse_leave_delay))}),h.addEventListener("mouseenter",function(S){LiteGraph.dialog_close_on_mouse_leave&&I&&clearTimeout(I)});function P(){m&&N(m.value)}function N(S){e.type=="Number"?S=Number(S):e.type=="Boolean"&&(S=!!S),s[u]=S,h.parentNode&&h.parentNode.removeChild(h),s.setDirtyCanvas(!0,!0)}},LGraphCanvas.prototype.prompt=function(e,t,n,a,s){var u=this;e=e||"";var c=document.createElement("div");c.is_modified=!1,c.className="graphdialog rounded",s?c.innerHTML="<span class='name'></span> <textarea autofocus class='value'></textarea><button class='rounded'>OK</button>":c.innerHTML="<span class='name'></span> <input autofocus type='text' class='value'/><button class='rounded'>OK</button>",c.close=function(){u.prompt_box=null,c.parentNode&&c.parentNode.removeChild(c)};var h=LGraphCanvas.active_canvas,f=h.canvas;f.parentNode.appendChild(c),this.ds.scale>1&&(c.style.transform="scale("+this.ds.scale+")");var m=null,_=!1;LiteGraph.pointerListenerAdd(c,"leave",function(S){_||LiteGraph.dialog_close_on_mouse_leave&&!c.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(m=setTimeout(c.close,LiteGraph.dialog_close_on_mouse_leave_delay))}),LiteGraph.pointerListenerAdd(c,"enter",function(S){LiteGraph.dialog_close_on_mouse_leave&&m&&clearTimeout(m)});var C=c.querySelectorAll("select");C&&C.forEach(function(S){S.addEventListener("click",function(k){_++}),S.addEventListener("blur",function(k){_=0}),S.addEventListener("change",function(k){_=-1})}),u.prompt_box&&u.prompt_box.close(),u.prompt_box=c;var b=c.querySelector(".name");b.innerText=e;var T=c.querySelector(".value");T.value=t;var R=T;R.addEventListener("keydown",function(S){if(c.is_modified=!0,S.keyCode==27)c.close();else if(S.keyCode==13&&S.target.localName!="textarea")n&&n(this.value),c.close();else return;S.preventDefault(),S.stopPropagation()});var A=c.querySelector("button");A.addEventListener("click",function(S){n&&n(R.value),u.setDirty(!0),c.close()});var I=f.getBoundingClientRect(),P=-20,N=-20;return I&&(P-=I.left,N-=I.top),a?(c.style.left=a.clientX+P+"px",c.style.top=a.clientY+N+"px"):(c.style.left=f.width*.5+P+"px",c.style.top=f.height*.5+N+"px"),setTimeout(function(){R.focus()},10),c},LGraphCanvas.search_limit=-1,LGraphCanvas.prototype.showSearchBox=function(e,t){var n={slot_from:null,node_from:null,node_to:null,do_type_filter:LiteGraph.search_filter_enabled,type_filter_in:!1,type_filter_out:!1,show_general_if_none_on_typefilter:!0,show_general_after_typefiltered:!0,hide_on_mouse_leave:LiteGraph.search_hide_on_mouse_leave,show_all_if_empty:!0,show_all_on_open:LiteGraph.search_show_all_on_open};t=Object.assign(n,t||{});var a=this,s=LGraphCanvas.active_canvas,u=s.canvas,c=u.ownerDocument||document,h=document.createElement("div");if(h.className="litegraph litesearchbox graphdialog rounded",h.innerHTML="<span class='name'>Search</span> <input autofocus type='text' class='value rounded'/>",t.do_type_filter&&(h.innerHTML+="<select class='slot_in_type_filter'><option value=''></option></select>",h.innerHTML+="<select class='slot_out_type_filter'><option value=''></option></select>"),h.innerHTML+="<div class='helper'></div>",c.fullscreenElement?c.fullscreenElement.appendChild(h):(c.body.appendChild(h),c.body.style.overflow="hidden"),t.do_type_filter)var f=h.querySelector(".slot_in_type_filter"),m=h.querySelector(".slot_out_type_filter");if(h.close=function(){a.search_box=null,this.blur(),u.focus(),c.body.style.overflow="",setTimeout(function(){a.canvas.focus()},20),h.parentNode&&h.parentNode.removeChild(h)},this.ds.scale>1&&(h.style.transform="scale("+this.ds.scale+")"),t.hide_on_mouse_leave){var _=!1,C=null;LiteGraph.pointerListenerAdd(h,"enter",function(re){C&&(clearTimeout(C),C=null)}),LiteGraph.pointerListenerAdd(h,"leave",function(re){_||(C=setTimeout(function(){h.close()},500))}),t.do_type_filter&&(f.addEventListener("click",function(re){_++}),f.addEventListener("blur",function(re){_=0}),f.addEventListener("change",function(re){_=-1}),m.addEventListener("click",function(re){_++}),m.addEventListener("blur",function(re){_=0}),m.addEventListener("change",function(re){_=-1}))}a.search_box&&a.search_box.close(),a.search_box=h;var b=h.querySelector(".helper"),T=null,R=null,A=null,I=h.querySelector("input");if(I&&(I.addEventListener("blur",function(re){a.search_box&&this.focus()}),I.addEventListener("keydown",function(re){if(re.keyCode==38)X(!1);else if(re.keyCode==40)X(!0);else if(re.keyCode==27)h.close();else if(re.keyCode==13)K(),A?H(A.innerHTML):T?H(T):h.close();else{R&&clearInterval(R),R=setTimeout(K,250);return}return re.preventDefault(),re.stopPropagation(),re.stopImmediatePropagation(),!0})),t.do_type_filter){if(f){var P=LiteGraph.slot_types_in,N=P.length;(t.type_filter_in==LiteGraph.EVENT||t.type_filter_in==LiteGraph.ACTION)&&(t.type_filter_in="_event_");for(var S=0;S<N;S++){var k=document.createElement("option");k.value=P[S],k.innerHTML=P[S],f.appendChild(k),t.type_filter_in!==!1&&(t.type_filter_in+"").toLowerCase()==(P[S]+"").toLowerCase()&&(k.selected=!0)}f.addEventListener("change",function(){K()})}if(m){var P=LiteGraph.slot_types_out,N=P.length;(t.type_filter_out==LiteGraph.EVENT||t.type_filter_out==LiteGraph.ACTION)&&(t.type_filter_out="_event_");for(var S=0;S<N;S++){var k=document.createElement("option");k.value=P[S],k.innerHTML=P[S],m.appendChild(k),t.type_filter_out!==!1&&(t.type_filter_out+"").toLowerCase()==(P[S]+"").toLowerCase()&&(k.selected=!0)}m.addEventListener("change",function(){K()})}}var D=u.getBoundingClientRect(),M=(e?e.clientX:D.left+D.width*.5)-80,j=(e?e.clientY:D.top+D.height*.5)-20;h.style.left=M+"px",h.style.top=j+"px",e.layerY>D.height-200&&(b.style.maxHeight=D.height-e.layerY-20+"px"),I.focus(),t.show_all_on_open&&K();function H(re){if(re)if(a.onSearchBoxSelection)a.onSearchBoxSelection(re,e,s);else{var F=LiteGraph.searchbox_extras[re.toLowerCase()];F&&(re=F.type),s.graph.beforeChange();var J=LiteGraph.createNode(re);if(J&&(J.pos=s.convertEventToCanvasOffset(e),s.graph.add(J,!1)),F&&F.data){if(F.data.properties)for(var z in F.data.properties)J.addProperty(z,F.data.properties[z]);if(F.data.inputs){J.inputs=[];for(var z in F.data.inputs)J.addOutput(F.data.inputs[z][0],F.data.inputs[z][1])}if(F.data.outputs){J.outputs=[];for(var z in F.data.outputs)J.addOutput(F.data.outputs[z][0],F.data.outputs[z][1])}F.data.title&&(J.title=F.data.title),F.data.json&&J.configure(F.data.json)}if(t.node_from){var $=!1;switch(typeof t.slot_from){case"string":$=t.node_from.findOutputSlot(t.slot_from);break;case"object":t.slot_from.name?$=t.node_from.findOutputSlot(t.slot_from.name):$=-1,$==-1&&typeof t.slot_from.slot_index<"u"&&($=t.slot_from.slot_index);break;case"number":$=t.slot_from;break;default:$=0}typeof t.node_from.outputs[$]<"u"&&$!==!1&&$>-1&&t.node_from.connectByType($,J,t.node_from.outputs[$].type)}if(t.node_to){var $=!1;switch(typeof t.slot_from){case"string":$=t.node_to.findInputSlot(t.slot_from);break;case"object":t.slot_from.name?$=t.node_to.findInputSlot(t.slot_from.name):$=-1,$==-1&&typeof t.slot_from.slot_index<"u"&&($=t.slot_from.slot_index);break;case"number":$=t.slot_from;break;default:$=0}typeof t.node_to.inputs[$]<"u"&&$!==!1&&$>-1&&t.node_to.connectByTypeOutput($,J,t.node_to.inputs[$].type)}s.graph.afterChange()}h.close()}function X(re){var F=A;A&&A.classList.remove("selected"),A?(A=re?A.nextSibling:A.previousSibling,A||(A=F)):A=re?b.childNodes[0]:b.childNodes[b.childNodes.length],A&&(A.classList.add("selected"),A.scrollIntoView({block:"end",behavior:"smooth"}))}function K(){R=null;var re=I.value;if(T=null,b.innerHTML="",!re&&!t.show_all_if_empty)return;if(a.onSearchBox){var F=a.onSearchBox(b,re,s);if(F)for(var J=0;J<F.length;++J)ne(F[J])}else{let ce=function(xe,G){var G=G||{},Y={skipFilter:!1,inTypeOverride:!1,outTypeOverride:!1},te=Object.assign(Y,G),ee=LiteGraph.registered_node_types[xe];if($&&ee.filter!=$||(!t.show_all_if_empty||re)&&xe.toLowerCase().indexOf(re)===-1)return!1;if(t.do_type_filter&&!te.skipFilter){var se=xe,be=L.value;if(te.inTypeOverride!==!1&&(be=te.inTypeOverride),L&&be&&LiteGraph.registered_slot_in_types[be]&&LiteGraph.registered_slot_in_types[be].nodes){var ue=LiteGraph.registered_slot_in_types[be].nodes.includes(se);if(ue===!1)return!1}var be=W.value;if(te.outTypeOverride!==!1&&(be=te.outTypeOverride),W&&be&&LiteGraph.registered_slot_out_types[be]&&LiteGraph.registered_slot_out_types[be].nodes){var ue=LiteGraph.registered_slot_out_types[be].nodes.includes(se);if(ue===!1)return!1}}return!0};var oe=ce,z=0;re=re.toLowerCase();var $=s.filter||s.graph.filter;if(t.do_type_filter&&a.search_box)var L=a.search_box.querySelector(".slot_in_type_filter"),W=a.search_box.querySelector(".slot_out_type_filter");else var L=!1,W=!1;for(var J in LiteGraph.searchbox_extras){var U=LiteGraph.searchbox_extras[J];if(!((!t.show_all_if_empty||re)&&U.desc.toLowerCase().indexOf(re)===-1)){var V=LiteGraph.registered_node_types[U.type];if(!(V&&V.filter!=$)&&ce(U.type)&&(ne(U.desc,"searchbox_extra"),LGraphCanvas.search_limit!==-1&&z++>LGraphCanvas.search_limit))break}}var B=null;if(Array.prototype.filter)var Z=Object.keys(LiteGraph.registered_node_types),B=Z.filter(ce);else{B=[];for(var J in LiteGraph.registered_node_types)ce(J)&&B.push(J)}for(var J=0;J<B.length&&(ne(B[J]),!(LGraphCanvas.search_limit!==-1&&z++>LGraphCanvas.search_limit));J++);if(t.show_general_after_typefiltered&&(L.value||W.value)){filtered_extra=[];for(var J in LiteGraph.registered_node_types)ce(J,{inTypeOverride:L&&L.value?"*":!1,outTypeOverride:W&&W.value?"*":!1})&&filtered_extra.push(J);for(var J=0;J<filtered_extra.length&&(ne(filtered_extra[J],"generic_type"),!(LGraphCanvas.search_limit!==-1&&z++>LGraphCanvas.search_limit));J++);}if((L.value||W.value)&&b.childNodes.length==0&&t.show_general_if_none_on_typefilter){filtered_extra=[];for(var J in LiteGraph.registered_node_types)ce(J,{skipFilter:!0})&&filtered_extra.push(J);for(var J=0;J<filtered_extra.length&&(ne(filtered_extra[J],"not_in_filter"),!(LGraphCanvas.search_limit!==-1&&z++>LGraphCanvas.search_limit));J++);}}function ne(ce,xe){var de=document.createElement("div");T||(T=ce),de.innerText=ce,de.dataset.type=escape(ce),de.className="litegraph lite-search-item",xe&&(de.className+=" "+xe),de.addEventListener("click",function(G){H(unescape(this.dataset.type))}),b.appendChild(de)}}return h},LGraphCanvas.prototype.showEditPropertyValue=function(e,t,n){if(!e||e.properties[t]===void 0)return;n=n||{};var a=e.getPropertyInfo(t),s=a.type,u="";if(s=="string"||s=="number"||s=="array"||s=="object")u="<input autofocus type='text' class='value'/>";else if((s=="enum"||s=="combo")&&a.values){u="<select autofocus type='text' class='value'>";for(var c in a.values){var h=c;a.values.constructor===Array&&(h=a.values[c]),u+="<option value='"+h+"' "+(h==e.properties[t]?"selected":"")+">"+a.values[c]+"</option>"}u+="</select>"}else if(s=="boolean"||s=="toggle")u="<input autofocus type='checkbox' class='value' "+(e.properties[t]?"checked":"")+"/>";else{console.warn("unknown type: "+s);return}var f=this.createDialog("<span class='name'>"+(a.label?a.label:t)+"</span>"+u+"<button>OK</button>",n),m=!1;if((s=="enum"||s=="combo")&&a.values)m=f.querySelector("select"),m.addEventListener("change",function(T){f.modified(),b(T.target.value)});else if(s=="boolean"||s=="toggle")m=f.querySelector("input"),m&&m.addEventListener("click",function(T){f.modified(),b(!!m.checked)});else if(m=f.querySelector("input"),m){m.addEventListener("blur",function(R){this.focus()});var h=e.properties[t]!==void 0?e.properties[t]:"";s!=="string"&&(h=JSON.stringify(h)),m.value=h,m.addEventListener("keydown",function(R){if(R.keyCode==27)f.close();else if(R.keyCode==13)C();else if(R.keyCode!=13){f.modified();return}R.preventDefault(),R.stopPropagation()})}m&&m.focus();var _=f.querySelector("button");_.addEventListener("click",C);function C(){b(m.value)}function b(T){a&&a.values&&a.values.constructor===Object&&a.values[T]!=null&&(T=a.values[T]),typeof e.properties[t]=="number"&&(T=Number(T)),(s=="array"||s=="object")&&(T=JSON.parse(T)),e.properties[t]=T,e.graph&&e.graph._version++,e.onPropertyChanged&&e.onPropertyChanged(t,T),n.onclose&&n.onclose(),f.close(),e.setDirtyCanvas(!0,!0)}return f},LGraphCanvas.prototype.createDialog=function(e,t){var n={checkForInput:!1,closeOnLeave:!0,closeOnLeave_checkModified:!0};t=Object.assign(n,t||{});var a=document.createElement("div");a.className="graphdialog",a.innerHTML=e,a.is_modified=!1;var s=this.canvas.getBoundingClientRect(),u=-20,c=-20;if(s&&(u-=s.left,c-=s.top),t.position?(u+=t.position[0],c+=t.position[1]):t.event?(u+=t.event.clientX,c+=t.event.clientY):(u+=this.canvas.width*.5,c+=this.canvas.height*.5),a.style.left=u+"px",a.style.top=c+"px",this.canvas.parentNode.appendChild(a),t.checkForInput){var h=[],f=!1;(h=a.querySelectorAll("input"))&&h.forEach(function(b){b.addEventListener("keydown",function(T){if(a.modified(),T.keyCode==27)a.close();else if(T.keyCode!=13)return;T.preventDefault(),T.stopPropagation()}),f||b.focus()})}a.modified=function(){a.is_modified=!0},a.close=function(){a.parentNode&&a.parentNode.removeChild(a)};var m=null,_=!1;a.addEventListener("mouseleave",function(b){_||(t.closeOnLeave||LiteGraph.dialog_close_on_mouse_leave)&&!a.is_modified&&LiteGraph.dialog_close_on_mouse_leave&&(m=setTimeout(a.close,LiteGraph.dialog_close_on_mouse_leave_delay))}),a.addEventListener("mouseenter",function(b){(t.closeOnLeave||LiteGraph.dialog_close_on_mouse_leave)&&m&&clearTimeout(m)});var C=a.querySelectorAll("select");return C&&C.forEach(function(b){b.addEventListener("click",function(T){_++}),b.addEventListener("blur",function(T){_=0}),b.addEventListener("change",function(T){_=-1})}),a},LGraphCanvas.prototype.createPanel=function(e,t){t=t||{};var n=t.window||window,a=document.createElement("div");if(a.className="litegraph dialog",a.innerHTML="<div class='dialog-header'><span class='dialog-title'></span></div><div class='dialog-content'></div><div style='display:none;' class='dialog-alt-content'></div><div class='dialog-footer'></div>",a.header=a.querySelector(".dialog-header"),t.width&&(a.style.width=t.width+(t.width.constructor===Number?"px":"")),t.height&&(a.style.height=t.height+(t.height.constructor===Number?"px":"")),t.closable){var s=document.createElement("span");s.innerHTML="&#10005;",s.classList.add("close"),s.addEventListener("click",function(){a.close()}),a.header.appendChild(s)}return a.title_element=a.querySelector(".dialog-title"),a.title_element.innerText=e,a.content=a.querySelector(".dialog-content"),a.alt_content=a.querySelector(".dialog-alt-content"),a.footer=a.querySelector(".dialog-footer"),a.close=function(){a.onClose&&typeof a.onClose=="function"&&a.onClose(),a.parentNode&&a.parentNode.removeChild(a),this.parentNode&&this.parentNode.removeChild(this)},a.toggleAltContent=function(u){if(typeof u<"u")var c=u?"block":"none",h=u?"none":"block";else var c=a.alt_content.style.display!="block"?"block":"none",h=a.alt_content.style.display!="block"?"none":"block";a.alt_content.style.display=c,a.content.style.display=h},a.toggleFooterVisibility=function(u){if(typeof u<"u")var c=u?"block":"none";else var c=a.footer.style.display!="block"?"block":"none";a.footer.style.display=c},a.clear=function(){this.content.innerHTML=""},a.addHTML=function(u,c,h){var f=document.createElement("div");return c&&(f.className=c),f.innerHTML=u,h?a.footer.appendChild(f):a.content.appendChild(f),f},a.addButton=function(u,c,h){var f=document.createElement("button");return f.innerText=u,f.options=h,f.classList.add("btn"),f.addEventListener("click",c),a.footer.appendChild(f),f},a.addSeparator=function(){var u=document.createElement("div");u.className="separator",a.content.appendChild(u)},a.addWidget=function(u,c,h,f,m){f=f||{};var _=String(h);u=u.toLowerCase(),u=="number"&&(_=h.toFixed(3));var C=document.createElement("div");C.className="property",C.innerHTML="<span class='property_name'></span><span class='property_value'></span>",C.querySelector(".property_name").innerText=f.label||c;var b=C.querySelector(".property_value");if(b.innerText=_,C.dataset.property=c,C.dataset.type=f.type||u,C.options=f,C.value=h,u=="code")C.addEventListener("click",function(R){a.inner_showCodePad(this.dataset.property)});else if(u=="boolean")C.classList.add("boolean"),h&&C.classList.add("bool-on"),C.addEventListener("click",function(){var R=this.dataset.property;this.value=!this.value,this.classList.toggle("bool-on"),this.querySelector(".property_value").innerText=this.value?"true":"false",T(R,this.value)});else if(u=="string"||u=="number")b.setAttribute("contenteditable",!0),b.addEventListener("keydown",function(R){R.code=="Enter"&&(u!="string"||!R.shiftKey)&&(R.preventDefault(),this.blur())}),b.addEventListener("blur",function(){var R=this.innerText,A=this.parentNode.dataset.property,I=this.parentNode.dataset.type;I=="number"&&(R=Number(R)),T(A,R)});else if(u=="enum"||u=="combo"){var _=LGraphCanvas.getPropertyPrintableValue(h,f.values);b.innerText=_,b.addEventListener("click",function(A){var I=f.values||[],P=this.parentNode.dataset.property,N=this;new LiteGraph.ContextMenu(I,{event:A,className:"dark",callback:S},n);function S(k,D,M){return N.innerText=k,T(P,k),!1}})}a.content.appendChild(C);function T(R,A){f.callback&&f.callback(R,A,f),m&&m(R,A,f)}return C},a.onOpen&&typeof a.onOpen=="function"&&a.onOpen(),a},LGraphCanvas.getPropertyPrintableValue=function(e,t){if(!t||t.constructor===Array)return String(e);if(t.constructor===Object){var n="";for(var a in t)if(t[a]==e){n=a;break}return String(e)+" ("+n+")"}},LGraphCanvas.prototype.closePanels=function(){var e=document.querySelector("#node-panel");e&&e.close();var e=document.querySelector("#option-panel");e&&e.close()},LGraphCanvas.prototype.showShowGraphOptionsPanel=function(e,t,n,a){if(this.constructor&&this.constructor.name=="HTMLDivElement"){if(!t||!t.event||!t.event.target||!t.event.target.lgraphcanvas){console.warn("Canvas not found");return}var s=t.event.target.lgraphcanvas}else var s=this;s.closePanels();var u=s.getCanvasWindow();panel=s.createPanel("Options",{closable:!0,window:u,onOpen:function(){s.OPTIONPANEL_IS_OPEN=!0},onClose:function(){s.OPTIONPANEL_IS_OPEN=!1,s.options_panel=null}}),s.options_panel=panel,panel.id="option-panel",panel.classList.add("settings");function c(){panel.content.innerHTML="";var h=function(C,b,T){T&&T.key&&(C=T.key),T.values&&(b=Object.values(T.values).indexOf(b)),s[C]=b},f=LiteGraph.availableCanvasOptions;f.sort();for(var m in f){var _=f[m];panel.addWidget("boolean",_,s[_],{key:_,on:"True",off:"False"},h)}s.links_render_mode,panel.addWidget("combo","Render mode",LiteGraph.LINK_RENDER_MODES[s.links_render_mode],{key:"links_render_mode",values:LiteGraph.LINK_RENDER_MODES},h),panel.addSeparator(),panel.footer.innerHTML=""}c(),s.canvas.parentNode.appendChild(panel)},LGraphCanvas.prototype.showShowNodePanel=function(e){this.SELECTED_NODE=e,this.closePanels();var t=this.getCanvasWindow(),n=this,a=this.createPanel(e.title||"",{closable:!0,window:t,onOpen:function(){n.NODEPANEL_IS_OPEN=!0},onClose:function(){n.NODEPANEL_IS_OPEN=!1,n.node_panel=null}});n.node_panel=a,a.id="node-panel",a.node=e,a.classList.add("settings");function s(){a.content.innerHTML="",a.addHTML("<span class='node_type'>"+e.type+"</span><span class='node_desc'>"+(e.constructor.desc||"")+"</span><span class='separator'></span>"),a.addHTML("<h3>Properties</h3>");var u=function(_,C){switch(n.graph.beforeChange(e),_){case"Title":e.title=C;break;case"Mode":var b=Object.values(LiteGraph.NODE_MODES).indexOf(C);b>=0&&LiteGraph.NODE_MODES[b]?e.changeMode(b):console.warn("unexpected mode: "+C);break;case"Color":LGraphCanvas.node_colors[C]?(e.color=LGraphCanvas.node_colors[C].color,e.bgcolor=LGraphCanvas.node_colors[C].bgcolor):console.warn("unexpected color: "+C);break;default:e.setProperty(_,C);break}n.graph.afterChange(),n.dirty_canvas=!0};a.addWidget("string","Title",e.title,{},u),a.addWidget("combo","Mode",LiteGraph.NODE_MODES[e.mode],{values:LiteGraph.NODE_MODES},u);var c="";e.color!==void 0&&(c=Object.keys(LGraphCanvas.node_colors).filter(function(_){return LGraphCanvas.node_colors[_].color==e.color})),a.addWidget("combo","Color",c,{values:Object.keys(LGraphCanvas.node_colors)},u);for(var h in e.properties){var f=e.properties[h],m=e.getPropertyInfo(h);m.type,!(e.onAddPropertyToPanel&&e.onAddPropertyToPanel(h,a))&&a.addWidget(m.widget||m.type,h,f,m,u)}a.addSeparator(),e.onShowCustomPanelInfo&&e.onShowCustomPanelInfo(a),a.footer.innerHTML="",a.addButton("Delete",function(){e.block_delete||(e.graph.remove(e),a.close())}).classList.add("delete")}a.inner_showCodePad=function(u){a.classList.remove("settings"),a.classList.add("centered"),a.alt_content.innerHTML="<textarea class='code'></textarea>";var c=a.alt_content.querySelector("textarea"),h=function(){a.toggleAltContent(!1),a.toggleFooterVisibility(!0),c.parentNode.removeChild(c),a.classList.add("settings"),a.classList.remove("centered"),s()};c.value=e.properties[u],c.addEventListener("keydown",function(_){_.code=="Enter"&&_.ctrlKey&&(e.setProperty(u,c.value),h())}),a.toggleAltContent(!0),a.toggleFooterVisibility(!1),c.style.height="calc(100% - 40px)";var f=a.addButton("Assign",function(){e.setProperty(u,c.value),h()});a.alt_content.appendChild(f);var m=a.addButton("Close",h);m.style.float="right",a.alt_content.appendChild(m)},s(),this.canvas.parentNode.appendChild(a)},LGraphCanvas.prototype.showSubgraphPropertiesDialog=function(e){console.log("showing subgraph properties dialog");var t=this.canvas.parentNode.querySelector(".subgraph_dialog");t&&t.close();var n=this.createPanel("Subgraph Inputs",{closable:!0,width:500});n.node=e,n.classList.add("subgraph_dialog");function a(){if(n.clear(),e.inputs)for(var c=0;c<e.inputs.length;++c){var h=e.inputs[c];if(!h.not_subgraph_input){var f="<button>&#10005;</button> <span class='bullet_icon'></span><span class='name'></span><span class='type'></span>",m=n.addHTML(f,"subgraph_property");m.dataset.name=h.name,m.dataset.slot=c,m.querySelector(".name").innerText=h.name,m.querySelector(".type").innerText=h.type,m.querySelector("button").addEventListener("click",function(_){e.removeInput(Number(this.parentNode.dataset.slot)),a()})}}}var s=" + <span class='label'>Name</span><input class='name'/><span class='label'>Type</span><input class='type'></input><button>+</button>",u=n.addHTML(s,"subgraph_property extra",!0);return u.querySelector("button").addEventListener("click",function(c){var h=this.parentNode,f=h.querySelector(".name").value,m=h.querySelector(".type").value;!f||e.findInputSlot(f)!=-1||(e.addInput(f,m),h.querySelector(".name").value="",h.querySelector(".type").value="",a())}),a(),this.canvas.parentNode.appendChild(n),n},LGraphCanvas.prototype.showSubgraphPropertiesDialogRight=function(e){var t=this.canvas.parentNode.querySelector(".subgraph_dialog");t&&t.close();var n=this.createPanel("Subgraph Outputs",{closable:!0,width:500});n.node=e,n.classList.add("subgraph_dialog");function a(){if(n.clear(),e.outputs)for(var h=0;h<e.outputs.length;++h){var f=e.outputs[h];if(!f.not_subgraph_output){var m="<button>&#10005;</button> <span class='bullet_icon'></span><span class='name'></span><span class='type'></span>",_=n.addHTML(m,"subgraph_property");_.dataset.name=f.name,_.dataset.slot=h,_.querySelector(".name").innerText=f.name,_.querySelector(".type").innerText=f.type,_.querySelector("button").addEventListener("click",function(C){e.removeOutput(Number(this.parentNode.dataset.slot)),a()})}}}var s=" + <span class='label'>Name</span><input class='name'/><span class='label'>Type</span><input class='type'></input><button>+</button>",u=n.addHTML(s,"subgraph_property extra",!0);u.querySelector(".name").addEventListener("keydown",function(h){h.keyCode==13&&c.apply(this)}),u.querySelector("button").addEventListener("click",function(h){c.apply(this)});function c(){var h=this.parentNode,f=h.querySelector(".name").value,m=h.querySelector(".type").value;!f||e.findOutputSlot(f)!=-1||(e.addOutput(f,m),h.querySelector(".name").value="",h.querySelector(".type").value="",a())}return a(),this.canvas.parentNode.appendChild(n),n},LGraphCanvas.prototype.checkPanels=function(){if(this.canvas)for(var e=this.canvas.parentNode.querySelectorAll(".litegraph.dialog"),t=0;t<e.length;++t){var n=e[t];n.node&&(!n.node.graph||n.graph!=this.graph)&&n.close()}},LGraphCanvas.onMenuNodeCollapse=function(e,t,n,a,s){s.graph.beforeChange();var u=function(f){f.collapse()},c=LGraphCanvas.active_canvas;if(!c.selected_nodes||Object.keys(c.selected_nodes).length<=1)u(s);else for(var h in c.selected_nodes)u(c.selected_nodes[h]);s.graph.afterChange()},LGraphCanvas.onMenuNodePin=function(e,t,n,a,s){s.pin()},LGraphCanvas.onMenuNodeMode=function(e,t,n,a,s){new LiteGraph.ContextMenu(LiteGraph.NODE_MODES,{event:n,callback:u,parentMenu:a,node:s});function u(c){if(s){var h=Object.values(LiteGraph.NODE_MODES).indexOf(c),f=function(C){h>=0&&LiteGraph.NODE_MODES[h]?C.changeMode(h):(console.warn("unexpected mode: "+c),C.changeMode(LiteGraph.ALWAYS))},m=LGraphCanvas.active_canvas;if(!m.selected_nodes||Object.keys(m.selected_nodes).length<=1)f(s);else for(var _ in m.selected_nodes)f(m.selected_nodes[_])}}return!1},LGraphCanvas.onMenuNodeColors=function(e,t,n,a,s){if(!s)throw"no node for color";var u=[];u.push({value:null,content:"<span style='display: block; padding-left: 4px;'>No color</span>"});for(var c in LGraphCanvas.node_colors){var h=LGraphCanvas.node_colors[c],e={value:c,content:"<span style='display: block; color: #999; padding-left: 4px; border-left: 8px solid "+h.color+"; background-color:"+h.bgcolor+"'>"+c+"</span>"};u.push(e)}new LiteGraph.ContextMenu(u,{event:n,callback:f,parentMenu:a,node:s});function f(m){if(s){var _=m.value?LGraphCanvas.node_colors[m.value]:null,C=function(R){_?R.constructor===LiteGraph.LGraphGroup?R.color=_.groupcolor:(R.color=_.color,R.bgcolor=_.bgcolor):(delete R.color,delete R.bgcolor)},b=LGraphCanvas.active_canvas;if(!b.selected_nodes||Object.keys(b.selected_nodes).length<=1)C(s);else for(var T in b.selected_nodes)C(b.selected_nodes[T]);s.setDirtyCanvas(!0,!0)}}return!1},LGraphCanvas.onMenuNodeShapes=function(e,t,n,a,s){if(!s)throw"no node passed";new LiteGraph.ContextMenu(LiteGraph.VALID_SHAPES,{event:n,callback:u,parentMenu:a,node:s});function u(c){if(s){s.graph.beforeChange();var h=function(_){_.shape=c},f=LGraphCanvas.active_canvas;if(!f.selected_nodes||Object.keys(f.selected_nodes).length<=1)h(s);else for(var m in f.selected_nodes)h(f.selected_nodes[m]);s.graph.afterChange(),s.setDirtyCanvas(!0)}}return!1},LGraphCanvas.onMenuNodeRemove=function(e,t,n,a,s){if(!s)throw"no node passed";var u=s.graph;u.beforeChange();var c=function(m){m.removable!==!1&&u.remove(m)},h=LGraphCanvas.active_canvas;if(!h.selected_nodes||Object.keys(h.selected_nodes).length<=1)c(s);else for(var f in h.selected_nodes)c(h.selected_nodes[f]);u.afterChange(),s.setDirtyCanvas(!0,!0)},LGraphCanvas.onMenuNodeToSubgraph=function(e,t,n,a,s){var u=s.graph,c=LGraphCanvas.active_canvas;if(c){var h=Object.values(c.selected_nodes||{});h.length||(h=[s]);var f=LiteGraph.createNode("graph/subgraph");f.pos=s.pos.concat(),u.add(f),f.buildFromNodes(h),c.deselectAllNodes(),s.setDirtyCanvas(!0,!0)}},LGraphCanvas.onMenuNodeClone=function(e,t,n,a,s){s.graph.beforeChange();var u={},c=function(m){if(m.clonable!==!1){var _=m.clone();_&&(_.pos=[m.pos[0]+5,m.pos[1]+5],m.graph.add(_),u[_.id]=_)}},h=LGraphCanvas.active_canvas;if(!h.selected_nodes||Object.keys(h.selected_nodes).length<=1)c(s);else for(var f in h.selected_nodes)c(h.selected_nodes[f]);Object.keys(u).length&&h.selectNodes(u),s.graph.afterChange(),s.setDirtyCanvas(!0,!0)},LGraphCanvas.node_colors={red:{color:"#322",bgcolor:"#533",groupcolor:"#A88"},brown:{color:"#332922",bgcolor:"#593930",groupcolor:"#b06634"},green:{color:"#232",bgcolor:"#353",groupcolor:"#8A8"},blue:{color:"#223",bgcolor:"#335",groupcolor:"#88A"},pale_blue:{color:"#2a363b",bgcolor:"#3f5159",groupcolor:"#3f789e"},cyan:{color:"#233",bgcolor:"#355",groupcolor:"#8AA"},purple:{color:"#323",bgcolor:"#535",groupcolor:"#a1309b"},yellow:{color:"#432",bgcolor:"#653",groupcolor:"#b58b2a"},black:{color:"#222",bgcolor:"#000",groupcolor:"#444"}},LGraphCanvas.prototype.getCanvasMenuOptions=function(){var e=null;if(this.getMenuOptions?e=this.getMenuOptions():(e=[{content:"Add Node",has_submenu:!0,callback:LGraphCanvas.onMenuAdd},{content:"Add Group",callback:LGraphCanvas.onGroupAdd}],Object.keys(this.selected_nodes).length>1&&e.push({content:"Align",has_submenu:!0,callback:LGraphCanvas.onGroupAlign}),this._graph_stack&&this._graph_stack.length>0&&e.push(null,{content:"Close subgraph",callback:this.closeSubgraph.bind(this)})),this.getExtraMenuOptions){var t=this.getExtraMenuOptions(this,e);t&&(e=e.concat(t))}return e},LGraphCanvas.prototype.getNodeMenuOptions=function(e){var t=null;if(e.getMenuOptions?t=e.getMenuOptions(this):(t=[{content:"Inputs",has_submenu:!0,disabled:!0,callback:LGraphCanvas.showMenuNodeOptionalInputs},{content:"Outputs",has_submenu:!0,disabled:!0,callback:LGraphCanvas.showMenuNodeOptionalOutputs},null,{content:"Properties",has_submenu:!0,callback:LGraphCanvas.onShowMenuNodeProperties},null,{content:"Title",callback:LGraphCanvas.onShowPropertyEditor},{content:"Mode",has_submenu:!0,callback:LGraphCanvas.onMenuNodeMode}],e.resizable!==!1&&t.push({content:"Resize",callback:LGraphCanvas.onMenuResizeNode}),t.push({content:"Collapse",callback:LGraphCanvas.onMenuNodeCollapse},{content:"Pin",callback:LGraphCanvas.onMenuNodePin},{content:"Colors",has_submenu:!0,callback:LGraphCanvas.onMenuNodeColors},{content:"Shapes",has_submenu:!0,callback:LGraphCanvas.onMenuNodeShapes},null)),e.onGetInputs){var n=e.onGetInputs();n&&n.length&&(t[0].disabled=!1)}if(e.onGetOutputs){var a=e.onGetOutputs();a&&a.length&&(t[1].disabled=!1)}if(e.getExtraMenuOptions){var s=e.getExtraMenuOptions(this,t);s&&(s.push(null),t=s.concat(t))}return e.clonable!==!1&&t.push({content:"Clone",callback:LGraphCanvas.onMenuNodeClone}),Object.keys(this.selected_nodes).length>1&&t.push({content:"Align Selected To",has_submenu:!0,callback:LGraphCanvas.onNodeAlign}),t.push(null,{content:"Remove",disabled:!(e.removable!==!1&&!e.block_delete),callback:LGraphCanvas.onMenuNodeRemove}),e.graph&&e.graph.onGetNodeMenuOptions&&e.graph.onGetNodeMenuOptions(t,e),t},LGraphCanvas.prototype.getGroupMenuOptions=function(e){var t=[{content:"Title",callback:LGraphCanvas.onShowPropertyEditor},{content:"Color",has_submenu:!0,callback:LGraphCanvas.onMenuNodeColors},{content:"Font size",property:"font_size",type:"Number",callback:LGraphCanvas.onShowPropertyEditor},null,{content:"Remove",callback:LGraphCanvas.onMenuNodeRemove}];return t},LGraphCanvas.prototype.processContextMenu=function(e,t){var n=this,a=LGraphCanvas.active_canvas,s=a.getCanvasWindow(),u=null,c={event:t,callback:_,extra:e};e&&(c.title=e.type);var h=null;if(e&&(h=e.getSlotInPosition(t.canvasX,t.canvasY),LGraphCanvas.active_node=e),h){if(u=[],e.getSlotMenuOptions)u=e.getSlotMenuOptions(h);else{h&&h.output&&h.output.links&&h.output.links.length&&u.push({content:"Disconnect Links",slot:h});var f=h.input||h.output;f.removable&&u.push(f.locked?"Cannot remove":{content:"Remove Slot",slot:h}),f.nameLocked||u.push({content:"Rename Slot",slot:h})}c.title=(h.input?h.input.type:h.output.type)||"*",h.input&&h.input.type==LiteGraph.ACTION&&(c.title="Action"),h.output&&h.output.type==LiteGraph.EVENT&&(c.title="Event")}else if(e)u=this.getNodeMenuOptions(e);else{u=this.getCanvasMenuOptions();var m=this.graph.getGroupOnPos(t.canvasX,t.canvasY);m&&u.push(null,{content:"Edit Group",has_submenu:!0,submenu:{title:"Group",extra:m,options:this.getGroupMenuOptions(m)}})}if(!u)return;new LiteGraph.ContextMenu(u,c,s);function _(C,b,T){if(C){if(C.content=="Remove Slot"){var R=C.slot;e.graph.beforeChange(),R.input?e.removeInput(R.slot):R.output&&e.removeOutput(R.slot),e.graph.afterChange();return}else if(C.content=="Disconnect Links"){var R=C.slot;e.graph.beforeChange(),R.output?e.disconnectOutput(R.slot):R.input&&e.disconnectInput(R.slot),e.graph.afterChange();return}else if(C.content=="Rename Slot"){var R=C.slot,A=R.input?e.getInputInfo(R.slot):e.getOutputInfo(R.slot),I=n.createDialog("<span class='name'>Name</span><input autofocus type='text'/><button>OK</button>",b),P=I.querySelector("input");P&&A&&(P.value=A.label||"");var N=function(){e.graph.beforeChange(),P.value&&(A&&(A.label=P.value),n.setDirty(!0)),I.close(),e.graph.afterChange()};I.querySelector("button").addEventListener("click",N),P.addEventListener("keydown",function(k){if(I.is_modified=!0,k.keyCode==27)I.close();else if(k.keyCode==13)N();else if(k.keyCode!=13&&k.target.localName!="textarea")return;k.preventDefault(),k.stopPropagation()}),P.focus()}}}};function compareObjects(e,t){for(var n in e)if(e[n]!=t[n])return!1;return!0}LiteGraph.compareObjects=compareObjects;function distance(e,t){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}LiteGraph.distance=distance;function colorToString(e){return"rgba("+Math.round(e[0]*255).toFixed()+","+Math.round(e[1]*255).toFixed()+","+Math.round(e[2]*255).toFixed()+","+(e.length==4?e[3].toFixed(2):"1.0")+")"}LiteGraph.colorToString=colorToString;function isInsideRectangle(e,t,n,a,s,u){return n<e&&n+s>e&&a<t&&a+u>t}LiteGraph.isInsideRectangle=isInsideRectangle;function growBounding(e,t,n){t<e[0]?e[0]=t:t>e[2]&&(e[2]=t),n<e[1]?e[1]=n:n>e[3]&&(e[3]=n)}LiteGraph.growBounding=growBounding;function isInsideBounding(e,t){return!(e[0]<t[0][0]||e[1]<t[0][1]||e[0]>t[1][0]||e[1]>t[1][1])}LiteGraph.isInsideBounding=isInsideBounding;function overlapBounding(e,t){var n=e[0]+e[2],a=e[1]+e[3],s=t[0]+t[2],u=t[1]+t[3];return!(e[0]>s||e[1]>u||n<t[0]||a<t[1])}LiteGraph.overlapBounding=overlapBounding;function hex2num(e){e.charAt(0)=="#"&&(e=e.slice(1)),e=e.toUpperCase();for(var t="0123456789ABCDEF",n=new Array(3),a=0,s,u,c=0;c<6;c+=2)s=t.indexOf(e.charAt(c)),u=t.indexOf(e.charAt(c+1)),n[a]=s*16+u,a++;return n}LiteGraph.hex2num=hex2num;function num2hex(e){for(var t="0123456789ABCDEF",n="#",a,s,u=0;u<3;u++)a=e[u]/16,s=e[u]%16,n+=t.charAt(a)+t.charAt(s);return n}LiteGraph.num2hex=num2hex;function ContextMenu(e,t){t=t||{},this.options=t;var n=this;t.parentMenu&&(t.parentMenu.constructor!==this.constructor?(console.error("parentMenu must be of class ContextMenu, ignoring it"),t.parentMenu=null):(this.parentMenu=t.parentMenu,this.parentMenu.lock=!0,this.parentMenu.current_submenu=this));var a=null;t.event&&(a=t.event.constructor.name),a!=="MouseEvent"&&a!=="CustomEvent"&&a!=="PointerEvent"&&(console.error("Event passed to ContextMenu is not of type MouseEvent or CustomEvent. Ignoring it. ("+a+")"),t.event=null);var s=document.createElement("div");s.className="litegraph litecontextmenu litemenubar-panel",t.className&&(s.className+=" "+t.className),s.style.minWidth=100,s.style.minHeight=100,s.style.pointerEvents="none",setTimeout(function(){s.style.pointerEvents="auto"},100),LiteGraph.pointerListenerAdd(s,"up",function(I){return I.preventDefault(),!0},!0),s.addEventListener("contextmenu",function(I){return I.button!=2||I.preventDefault(),!1},!0),LiteGraph.pointerListenerAdd(s,"down",function(I){if(I.button==2)return n.close(),I.preventDefault(),!0},!0);function u(I){var P=parseInt(s.style.top);return s.style.top=(P+I.deltaY*t.scroll_speed).toFixed()+"px",I.preventDefault(),!0}if(t.scroll_speed||(t.scroll_speed=.1),s.addEventListener("wheel",u,!0),s.addEventListener("mousewheel",u,!0),this.root=s,t.title){var c=document.createElement("div");c.className="litemenu-title",c.innerHTML=t.title,s.appendChild(c)}for(var h=0;h<e.length;h++){var f=e.constructor==Array?e[h]:h;f!=null&&f.constructor!==String&&(f=f.content===void 0?String(f):f.content);var m=e[h];this.addItem(f,m,t)}LiteGraph.pointerListenerAdd(s,"enter",function(I){s.closing_timer&&clearTimeout(s.closing_timer)});var _=document;t.event&&(_=t.event.target.ownerDocument),_||(_=document),_.fullscreenElement?_.fullscreenElement.appendChild(s):_.body.appendChild(s);var C=t.left||0,b=t.top||0;if(t.event){if(C=t.event.clientX-10,b=t.event.clientY-10,t.title&&(b-=20),t.parentMenu){var T=t.parentMenu.root.getBoundingClientRect();C=T.left+T.width}var R=document.body.getBoundingClientRect(),A=s.getBoundingClientRect();R.height==0&&console.error("document.body height is 0. That is dangerous, set html,body { height: 100%; }"),R.width&&C>R.width-A.width-10&&(C=R.width-A.width-10),R.height&&b>R.height-A.height-10&&(b=R.height-A.height-10)}s.style.left=C+"px",s.style.top=b+"px",t.scale&&(s.style.transform="scale("+t.scale+")")}ContextMenu.prototype.addItem=function(e,t,n){var a=this;n=n||{};var s=document.createElement("div");s.className="litemenu-entry submenu";var u=!1;t===null?s.classList.add("separator"):(s.innerHTML=t&&t.title?t.title:e,s.value=t,t&&(t.disabled&&(u=!0,s.classList.add("disabled")),(t.submenu||t.has_submenu)&&s.classList.add("has_submenu")),typeof t=="function"?(s.dataset.value=e,s.onclick_callback=t):s.dataset.value=t,t.className&&(s.className+=" "+t.className)),this.root.appendChild(s),u||s.addEventListener("click",h),!u&&n.autoopen&&LiteGraph.pointerListenerAdd(s,"enter",c);function c(f){var m=this.value;!m||!m.has_submenu||h.call(this,f)}function h(f){var m=this.value,_=!0;if(a.current_submenu&&a.current_submenu.close(f),n.callback){var C=n.callback.call(this,m,n,f,a,n.node);C===!0&&(_=!1)}if(m){if(m.callback&&!n.ignore_item_callbacks&&m.disabled!==!0){var C=m.callback.call(this,m,n,f,a,n.extra);C===!0&&(_=!1)}if(m.submenu){if(!m.submenu.options)throw"ContextMenu submenu needs options";new a.constructor(m.submenu.options,{callback:m.submenu.callback,event:f,parentMenu:a,ignore_item_callbacks:m.submenu.ignore_item_callbacks,title:m.submenu.title,extra:m.submenu.extra,autoopen:n.autoopen}),_=!1}}_&&!a.lock&&a.close()}return s},ContextMenu.prototype.close=function(e,t){this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.parentMenu&&!t&&(this.parentMenu.lock=!1,this.parentMenu.current_submenu=null,e===void 0?this.parentMenu.close():e&&!ContextMenu.isCursorOverElement(e,this.parentMenu.root)&&ContextMenu.trigger(this.parentMenu.root,LiteGraph.pointerevents_method+"leave",e)),this.current_submenu&&this.current_submenu.close(e,!0),this.root.closing_timer&&clearTimeout(this.root.closing_timer)},ContextMenu.trigger=function(e,t,n,a){var s=document.createEvent("CustomEvent");return s.initCustomEvent(t,!0,!0,n),s.srcElement=a,e.dispatchEvent?e.dispatchEvent(s):e.__events&&e.__events.dispatchEvent(s),s},ContextMenu.prototype.getTopMenu=function(){return this.options.parentMenu?this.options.parentMenu.getTopMenu():this},ContextMenu.prototype.getFirstEvent=function(){return this.options.parentMenu?this.options.parentMenu.getFirstEvent():this.options.event},ContextMenu.isCursorOverElement=function(e,t){var n=e.clientX,a=e.clientY,s=t.getBoundingClientRect();return s?a>s.top&&a<s.top+s.height&&n>s.left&&n<s.left+s.width:!1},LiteGraph.ContextMenu=ContextMenu,LiteGraph.closeAllContextMenus=function(e){e=e||window;var t=e.document.querySelectorAll(".litecontextmenu");if(t.length){for(var n=[],a=0;a<t.length;a++)n.push(t[a]);for(var a=0;a<n.length;a++)n[a].close?n[a].close():n[a].parentNode&&n[a].parentNode.removeChild(n[a])}},LiteGraph.extendClass=function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);if(t.prototype)for(var n in t.prototype)t.prototype.hasOwnProperty(n)&&(e.prototype.hasOwnProperty(n)||(t.prototype.__lookupGetter__(n)?e.prototype.__defineGetter__(n,t.prototype.__lookupGetter__(n)):e.prototype[n]=t.prototype[n],t.prototype.__lookupSetter__(n)&&e.prototype.__defineSetter__(n,t.prototype.__lookupSetter__(n))))};function CurveEditor(e){this.points=e,this.selected=-1,this.nearest=-1,this.size=null,this.must_update=!0,this.margin=5}CurveEditor.sampleCurve=function(e,t){if(t){for(var n=0;n<t.length-1;++n){var a=t[n],s=t[n+1];if(!(s[0]<e)){var u=s[0]-a[0];if(Math.abs(u)<1e-5)return a[1];var c=(e-a[0])/u;return a[1]*(1-c)+s[1]*c}}return 0}},CurveEditor.prototype.draw=function(e,t,n,a,s,u){var c=this.points;if(c){this.size=t;var h=t[0]-this.margin*2,f=t[1]-this.margin*2;s=s||"#666",e.save(),e.translate(this.margin,this.margin),a&&(e.fillStyle="#111",e.fillRect(0,0,h,f),e.fillStyle="#222",e.fillRect(h*.5,0,1,f),e.strokeStyle="#333",e.strokeRect(0,0,h,f)),e.strokeStyle=s,u&&(e.globalAlpha=.5),e.beginPath();for(var m=0;m<c.length;++m){var _=c[m];e.lineTo(_[0]*h,(1-_[1])*f)}if(e.stroke(),e.globalAlpha=1,!u)for(var m=0;m<c.length;++m){var _=c[m];e.fillStyle=this.selected==m?"#FFF":this.nearest==m?"#DDD":"#AAA",e.beginPath(),e.arc(_[0]*h,(1-_[1])*f,2,0,Math.PI*2),e.fill()}e.restore()}},CurveEditor.prototype.onMouseDown=function(e,t){var n=this.points;if(n&&!(e[1]<0)){var a=this.size[0]-this.margin*2,s=this.size[1]-this.margin*2,u=e[0]-this.margin,c=e[1]-this.margin,h=[u,c],f=30/t.ds.scale;if(this.selected=this.getCloserPoint(h,f),this.selected==-1){var m=[u/a,1-c/s];n.push(m),n.sort(function(_,C){return _[0]-C[0]}),this.selected=n.indexOf(m),this.must_update=!0}if(this.selected!=-1)return!0}},CurveEditor.prototype.onMouseMove=function(e,t){var n=this.points;if(n){var a=this.selected;if(!(a<0)){var s=(e[0]-this.margin)/(this.size[0]-this.margin*2),u=(e[1]-this.margin)/(this.size[1]-this.margin*2),c=[e[0]-this.margin,e[1]-this.margin],h=30/t.ds.scale;this._nearest=this.getCloserPoint(c,h);var f=n[a];if(f){var m=a==0||a==n.length-1;if(!m&&(e[0]<-10||e[0]>this.size[0]+10||e[1]<-10||e[1]>this.size[1]+10)){n.splice(a,1),this.selected=-1;return}m?f[0]=a==0?0:1:f[0]=clamp(s,0,1),f[1]=1-clamp(u,0,1),n.sort(function(_,C){return _[0]-C[0]}),this.selected=n.indexOf(f),this.must_update=!0}}}},CurveEditor.prototype.onMouseUp=function(e,t){return this.selected=-1,!1},CurveEditor.prototype.getCloserPoint=function(e,t){var n=this.points;if(!n)return-1;t=t||30;for(var a=this.size[0]-this.margin*2,s=this.size[1]-this.margin*2,u=n.length,c=[0,0],h=1e6,f=-1,m=0;m<u;++m){var _=n[m];c[0]=_[0]*a,c[1]=(1-_[1])*s,c[0]<e[0];var C=vec2.distance(e,c);C>h||C>t||(f=m,h=C)}return f},LiteGraph.CurveEditor=CurveEditor,LiteGraph.getParameterNames=function(e){return(e+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},LiteGraph.pointerListenerAdd=function(e,t,n,a=!1){if(!(!e||!e.addEventListener||!t||typeof n!="function")){var s=LiteGraph.pointerevents_method,u=t;if(s=="pointer"&&!window.PointerEvent)switch(console.warn("sMethod=='pointer' && !window.PointerEvent"),console.log("Converting pointer["+u+"] : down move up cancel enter TO touchstart touchmove touchend, etc .."),u){case"down":{s="touch",u="start";break}case"move":{s="touch";break}case"up":{s="touch",u="end";break}case"cancel":{s="touch";break}case"enter":{console.log("debug: Should I send a move event?");break}default:console.warn("PointerEvent not available in this browser ? The event "+u+" would not be called")}switch(u){case"down":case"up":case"move":case"over":case"out":case"enter":e.addEventListener(s+u,n,a);case"leave":case"cancel":case"gotpointercapture":case"lostpointercapture":if(s!="mouse")return e.addEventListener(s+u,n,a);default:return e.addEventListener(u,n,a)}}},LiteGraph.pointerListenerRemove=function(e,t,n,a=!1){if(!(!e||!e.removeEventListener||!t||typeof n!="function"))switch(t){case"down":case"up":case"move":case"over":case"out":case"enter":(LiteGraph.pointerevents_method=="pointer"||LiteGraph.pointerevents_method=="mouse")&&e.removeEventListener(LiteGraph.pointerevents_method+t,n,a);case"leave":case"cancel":case"gotpointercapture":case"lostpointercapture":if(LiteGraph.pointerevents_method=="pointer")return e.removeEventListener(LiteGraph.pointerevents_method+t,n,a);default:return e.removeEventListener(t,n,a)}};function clamp(e,t,n){return t>e?t:n<e?n:e}global.clamp=clamp,typeof window<"u"&&!window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)})})(litegraph),exports.LiteGraph=litegraph.LiteGraph,exports.LGraph=litegraph.LGraph,exports.LLink=litegraph.LLink,exports.LGraphNode=litegraph.LGraphNode,exports.LGraphGroup=litegraph.LGraphGroup,exports.DragAndScale=litegraph.DragAndScale,exports.LGraphCanvas=litegraph.LGraphCanvas,exports.ContextMenu=litegraph.ContextMenu,(function(e){var t=e.LiteGraph;function n(){this.addOutput("in ms","number"),this.addOutput("in sec","number")}n.title="Time",n.desc="Time",n.prototype.onExecute=function(){this.setOutputData(0,this.graph.globaltime*1e3),this.setOutputData(1,this.graph.globaltime)},t.registerNodeType("basic/time",n);function a(){this.size=[140,80],this.properties={enabled:!0},this.enabled=!0,this.subgraph=new t.LGraph,this.subgraph._subgraph_node=this,this.subgraph._is_subgraph=!0,this.subgraph.onTrigger=this.onSubgraphTrigger.bind(this),this.subgraph.onInputAdded=this.onSubgraphNewInput.bind(this),this.subgraph.onInputRenamed=this.onSubgraphRenamedInput.bind(this),this.subgraph.onInputTypeChanged=this.onSubgraphTypeChangeInput.bind(this),this.subgraph.onInputRemoved=this.onSubgraphRemovedInput.bind(this),this.subgraph.onOutputAdded=this.onSubgraphNewOutput.bind(this),this.subgraph.onOutputRenamed=this.onSubgraphRenamedOutput.bind(this),this.subgraph.onOutputTypeChanged=this.onSubgraphTypeChangeOutput.bind(this),this.subgraph.onOutputRemoved=this.onSubgraphRemovedOutput.bind(this)}a.title="Subgraph",a.desc="Graph inside a node",a.title_color="#334",a.prototype.onGetInputs=function(){return[["enabled","boolean"]]},a.prototype.onDblClick=function(z,$,L){var W=this;setTimeout(function(){L.openSubgraph(W.subgraph)},10)},a.prototype.onAction=function(z,$){this.subgraph.onAction(z,$)},a.prototype.onExecute=function(){if(this.enabled=this.getInputOrProperty("enabled"),!!this.enabled){if(this.inputs)for(var z=0;z<this.inputs.length;z++){var $=this.inputs[z],L=this.getInputData(z);this.subgraph.setInputData($.name,L)}if(this.subgraph.runStep(),this.outputs)for(var z=0;z<this.outputs.length;z++){var W=this.outputs[z],L=this.subgraph.getOutputData(W.name);this.setOutputData(z,L)}}},a.prototype.sendEventToAllNodes=function(z,$,L){this.enabled&&this.subgraph.sendEventToAllNodes(z,$,L)},a.prototype.onDrawBackground=function(z,$,L,W){if(this.flags.collapsed)return;var U=this.size[1]-t.NODE_TITLE_HEIGHT+.5,V=t.isInsideRectangle(W[0],W[1],this.pos[0],this.pos[1]+U,this.size[0],t.NODE_TITLE_HEIGHT);let B=t.isInsideRectangle(W[0],W[1],this.pos[0],this.pos[1]+U,this.size[0]/2,t.NODE_TITLE_HEIGHT);z.fillStyle=V?"#555":"#222",z.beginPath(),this._shape==t.BOX_SHAPE?B?z.rect(0,U,this.size[0]/2+1,t.NODE_TITLE_HEIGHT):z.rect(this.size[0]/2,U,this.size[0]/2+1,t.NODE_TITLE_HEIGHT):B?z.roundRect(0,U,this.size[0]/2+1,t.NODE_TITLE_HEIGHT,[0,0,8,8]):z.roundRect(this.size[0]/2,U,this.size[0]/2+1,t.NODE_TITLE_HEIGHT,[0,0,8,8]),V?z.fill():z.fillRect(0,U,this.size[0]+1,t.NODE_TITLE_HEIGHT),z.textAlign="center",z.font="24px Arial",z.fillStyle=V?"#DDD":"#999",z.fillText("+",this.size[0]*.25,U+24),z.fillText("+",this.size[0]*.75,U+24)},a.prototype.onMouseDown=function(z,$,L){var W=this.size[1]-t.NODE_TITLE_HEIGHT+.5;console.log(0),$[1]>W&&($[0]<this.size[0]/2?(console.log(1),L.showSubgraphPropertiesDialog(this)):(console.log(2),L.showSubgraphPropertiesDialogRight(this)))},a.prototype.computeSize=function(){var z=this.inputs?this.inputs.length:0,$=this.outputs?this.outputs.length:0;return[200,Math.max(z,$)*t.NODE_SLOT_HEIGHT+t.NODE_TITLE_HEIGHT]},a.prototype.onSubgraphTrigger=function(z,$){var L=this.findOutputSlot(z);L!=-1&&this.triggerSlot(L)},a.prototype.onSubgraphNewInput=function(z,$){var L=this.findInputSlot(z);L==-1&&this.addInput(z,$)},a.prototype.onSubgraphRenamedInput=function(z,$){var L=this.findInputSlot(z);if(L!=-1){var W=this.getInputInfo(L);W.name=$}},a.prototype.onSubgraphTypeChangeInput=function(z,$){var L=this.findInputSlot(z);if(L!=-1){var W=this.getInputInfo(L);W.type=$}},a.prototype.onSubgraphRemovedInput=function(z){var $=this.findInputSlot(z);$!=-1&&this.removeInput($)},a.prototype.onSubgraphNewOutput=function(z,$){var L=this.findOutputSlot(z);L==-1&&this.addOutput(z,$)},a.prototype.onSubgraphRenamedOutput=function(z,$){var L=this.findOutputSlot(z);if(L!=-1){var W=this.getOutputInfo(L);W.name=$}},a.prototype.onSubgraphTypeChangeOutput=function(z,$){var L=this.findOutputSlot(z);if(L!=-1){var W=this.getOutputInfo(L);W.type=$}},a.prototype.onSubgraphRemovedOutput=function(z){var $=this.findOutputSlot(z);$!=-1&&this.removeOutput($)},a.prototype.getExtraMenuOptions=function(z){var $=this;return[{content:"Open",callback:function(){z.openSubgraph($.subgraph)}}]},a.prototype.onResize=function(z){z[1]+=20},a.prototype.serialize=function(){var z=t.LGraphNode.prototype.serialize.call(this);return z.subgraph=this.subgraph.serialize(),z},a.prototype.reassignSubgraphUUIDs=function(z){const $={nodeIDs:{},linkIDs:{}};for(const L of z.nodes){const W=L.id,U=t.uuidv4();if(L.id=U,$.nodeIDs[W]||$.nodeIDs[U])throw new Error(`New/old node UUID wasn't unique in changed map! ${W} ${U}`);$.nodeIDs[W]=U,$.nodeIDs[U]=W}for(const L of z.links){const W=L[0],U=t.uuidv4();if(L[0]=U,$.linkIDs[W]||$.linkIDs[U])throw new Error(`New/old link UUID wasn't unique in changed map! ${W} ${U}`);$.linkIDs[W]=U,$.linkIDs[U]=W;const V=L[1],B=L[3];if(!$.nodeIDs[V])throw new Error(`Old node UUID not found in mapping! ${V}`);if(L[1]=$.nodeIDs[V],!$.nodeIDs[B])throw new Error(`Old node UUID not found in mapping! ${B}`);L[3]=$.nodeIDs[B]}for(const L of z.nodes){if(L.inputs)for(const W of L.inputs)W.link&&(W.link=$.linkIDs[W.link]);if(L.outputs)for(const W of L.outputs)W.links&&(W.links=W.links.map(U=>$.linkIDs[U]))}for(const L of z.nodes)if(L.type==="graph/subgraph"){const W=reassignGraphUUIDs(L.subgraph);$.nodeIDs.assign(W.nodeIDs),$.linkIDs.assign(W.linkIDs)}},a.prototype.clone=function(){var z=t.createNode(this.type),$=this.serialize();if(t.use_uuids){const L=t.cloneObject($.subgraph);this.reassignSubgraphUUIDs(L),$.subgraph=L}return delete $.id,delete $.inputs,delete $.outputs,z.configure($),z},a.prototype.buildFromNodes=function(z){for(var $={},L=0,W=0;W<z.length;++W){var U=z[W];$[U.id]=U,L=Math.min(U.pos[0],L),Math.max(U.pos[0],L)}for(var W=0;W<z.length;++W){var U=z[W];if(U.inputs)for(var V=0;V<U.inputs.length;++V){var B=U.inputs[V];if(!(!B||!B.link)){var Z=U.graph.links[B.link];Z&&($[Z.origin_id]||this.subgraph.addInput(B.name,Z.type))}}if(U.outputs)for(var V=0;V<U.outputs.length;++V){var ne=U.outputs[V];if(!(!ne||!ne.links||!ne.links.length))for(var oe=!1,ce=0;ce<ne.links.length;++ce){var Z=U.graph.links[ne.links[ce]];if(Z&&!$[Z.target_id]){oe=!0;break}}}}},t.Subgraph=a,t.registerNodeType("graph/subgraph",a);function s(){this.addOutput("","number"),this.name_in_graph="",this.properties={name:"",type:"number",value:0};var z=this;this.name_widget=this.addWidget("text","Name",this.properties.name,function($){$&&z.setProperty("name",$)}),this.type_widget=this.addWidget("text","Type",this.properties.type,function($){z.setProperty("type",$)}),this.value_widget=this.addWidget("number","Value",this.properties.value,function($){z.setProperty("value",$)}),this.widgets_up=!0,this.size=[180,90]}s.title="Input",s.desc="Input of the graph",s.prototype.onConfigure=function(){this.updateType()},s.prototype.updateType=function(){var z=this.properties.type;this.type_widget.value=z,this.outputs[0].type!=z&&(t.isValidConnection(this.outputs[0].type,z)||this.disconnectOutput(0),this.outputs[0].type=z),z=="number"?(this.value_widget.type="number",this.value_widget.value=0):z=="boolean"?(this.value_widget.type="toggle",this.value_widget.value=!0):z=="string"?(this.value_widget.type="text",this.value_widget.value=""):(this.value_widget.type=null,this.value_widget.value=null),this.properties.value=this.value_widget.value,this.graph&&this.name_in_graph&&this.graph.changeInputType(this.name_in_graph,z)},s.prototype.onPropertyChanged=function(z,$){if(z=="name"){if($==""||$==this.name_in_graph||$=="enabled")return!1;this.graph&&(this.name_in_graph?this.graph.renameInput(this.name_in_graph,$):this.graph.addInput($,this.properties.type)),this.name_widget.value=$,this.name_in_graph=$}else z=="type"&&this.updateType()},s.prototype.getTitle=function(){return this.flags.collapsed?this.properties.name:this.title},s.prototype.onAction=function(z,$){this.properties.type==t.EVENT&&this.triggerSlot(0,$)},s.prototype.onExecute=function(){var z=this.properties.name,$=this.graph.inputs[z];if(!$){this.setOutputData(0,this.properties.value);return}this.setOutputData(0,$.value!==void 0?$.value:this.properties.value)},s.prototype.onRemoved=function(){this.name_in_graph&&this.graph.removeInput(this.name_in_graph)},t.GraphInput=s,t.registerNodeType("graph/input",s);function u(){this.addInput("",""),this.name_in_graph="",this.properties={name:"",type:""},this.name_widget=this.addWidget("text","Name",this.properties.name,"name"),this.type_widget=this.addWidget("text","Type",this.properties.type,"type"),this.widgets_up=!0,this.size=[180,60]}u.title="Output",u.desc="Output of the graph",u.prototype.onPropertyChanged=function(z,$){if(z=="name"){if($==""||$==this.name_in_graph||$=="enabled")return!1;this.graph&&(this.name_in_graph?this.graph.renameOutput(this.name_in_graph,$):this.graph.addOutput($,this.properties.type)),this.name_widget.value=$,this.name_in_graph=$}else z=="type"&&this.updateType()},u.prototype.updateType=function(){var z=this.properties.type;this.type_widget&&(this.type_widget.value=z),this.inputs[0].type!=z&&((z=="action"||z=="event")&&(z=t.EVENT),t.isValidConnection(this.inputs[0].type,z)||this.disconnectInput(0),this.inputs[0].type=z),this.graph&&this.name_in_graph&&this.graph.changeOutputType(this.name_in_graph,z)},u.prototype.onExecute=function(){this._value=this.getInputData(0),this.graph.setOutputData(this.properties.name,this._value)},u.prototype.onAction=function(z,$){this.properties.type==t.ACTION&&this.graph.trigger(this.properties.name,$)},u.prototype.onRemoved=function(){this.name_in_graph&&this.graph.removeOutput(this.name_in_graph)},u.prototype.getTitle=function(){return this.flags.collapsed?this.properties.name:this.title},t.GraphOutput=u,t.registerNodeType("graph/output",u);function c(){this.addOutput("value","number"),this.addProperty("value",1),this.widget=this.addWidget("number","value",1,"value"),this.widgets_up=!0,this.size=[180,30]}c.title="Const Number",c.desc="Constant number",c.prototype.onExecute=function(){this.setOutputData(0,parseFloat(this.properties.value))},c.prototype.getTitle=function(){return this.flags.collapsed?this.properties.value:this.title},c.prototype.setValue=function(z){this.setProperty("value",z)},c.prototype.onDrawBackground=function(z){this.outputs[0].label=this.properties.value.toFixed(3)},t.registerNodeType("basic/const",c);function h(){this.addOutput("bool","boolean"),this.addProperty("value",!0),this.widget=this.addWidget("toggle","value",!0,"value"),this.serialize_widgets=!0,this.widgets_up=!0,this.size=[140,30]}h.title="Const Boolean",h.desc="Constant boolean",h.prototype.getTitle=c.prototype.getTitle,h.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},h.prototype.setValue=c.prototype.setValue,h.prototype.onGetInputs=function(){return[["toggle",t.ACTION]]},h.prototype.onAction=function(z){this.setValue(!this.properties.value)},t.registerNodeType("basic/boolean",h);function f(){this.addOutput("string","string"),this.addProperty("value",""),this.widget=this.addWidget("text","value","","value"),this.widgets_up=!0,this.size=[180,30]}f.title="Const String",f.desc="Constant string",f.prototype.getTitle=c.prototype.getTitle,f.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},f.prototype.setValue=c.prototype.setValue,f.prototype.onDropFile=function(z){var $=this,L=new FileReader;L.onload=function(W){$.setProperty("value",W.target.result)},L.readAsText(z)},t.registerNodeType("basic/string",f);function m(){this.addOutput("obj","object"),this.size=[120,30],this._object={}}m.title="Const Object",m.desc="Constant Object",m.prototype.onExecute=function(){this.setOutputData(0,this._object)},t.registerNodeType("basic/object",m);function _(){this.addInput("url","string"),this.addOutput("file","string"),this.addProperty("url",""),this.addProperty("type","text"),this.widget=this.addWidget("text","url","","url"),this._data=null}_.title="Const File",_.desc="Fetches a file from an url",_["@type"]={type:"enum",values:["text","arraybuffer","blob","json"]},_.prototype.onPropertyChanged=function(z,$){z=="url"&&($==null||$==""?this._data=null:this.fetchFile($))},_.prototype.onExecute=function(){var z=this.getInputData(0)||this.properties.url;z&&(z!=this._url||this._type!=this.properties.type)&&this.fetchFile(z),this.setOutputData(0,this._data)},_.prototype.setValue=c.prototype.setValue,_.prototype.fetchFile=function(z){var $=this;if(!z||z.constructor!==String){$._data=null,$.boxcolor=null;return}this._url=z,this._type=this.properties.type,z.substr(0,4)=="http"&&t.proxy&&(z=t.proxy+z.substr(z.indexOf(":")+3)),fetch(z).then(function(L){if(!L.ok)throw new Error("File not found");if($.properties.type=="arraybuffer")return L.arrayBuffer();if($.properties.type=="text")return L.text();if($.properties.type=="json")return L.json();if($.properties.type=="blob")return L.blob()}).then(function(L){$._data=L,$.boxcolor="#AEA"}).catch(function(L){$._data=null,$.boxcolor="red",console.error("error fetching file:",z)})},_.prototype.onDropFile=function(z){var $=this;this._url=z.name,this._type=this.properties.type,this.properties.url=z.name;var L=new FileReader;if(L.onload=function(W){$.boxcolor="#AEA";var U=W.target.result;$.properties.type=="json"&&(U=JSON.parse(U)),$._data=U},$.properties.type=="arraybuffer")L.readAsArrayBuffer(z);else if($.properties.type=="text"||$.properties.type=="json")L.readAsText(z);else if($.properties.type=="blob")return L.readAsBinaryString(z)},t.registerNodeType("basic/file",_);function C(){this.addInput("parse",t.ACTION),this.addInput("json","string"),this.addOutput("done",t.EVENT),this.addOutput("object","object"),this.widget=this.addWidget("button","parse","",this.parse.bind(this)),this._str=null,this._obj=null}C.title="JSON Parse",C.desc="Parses JSON String into object",C.prototype.parse=function(){if(this._str)try{this._str=this.getInputData(1),this._obj=JSON.parse(this._str),this.boxcolor="#AEA",this.triggerSlot(0)}catch{this.boxcolor="red"}},C.prototype.onExecute=function(){this._str=this.getInputData(1),this.setOutputData(1,this._obj)},C.prototype.onAction=function(z){z=="parse"&&this.parse()},t.registerNodeType("basic/jsonparse",C);function b(){this.addOutput("data","object"),this.addProperty("value",""),this.widget=this.addWidget("text","json","","value"),this.widgets_up=!0,this.size=[140,30],this._value=null}b.title="Const Data",b.desc="Constant Data",b.prototype.onPropertyChanged=function(z,$){if(this.widget.value=$,!($==null||$==""))try{this._value=JSON.parse($),this.boxcolor="#AEA"}catch{this.boxcolor="red"}},b.prototype.onExecute=function(){this.setOutputData(0,this._value)},b.prototype.setValue=c.prototype.setValue,t.registerNodeType("basic/data",b);function T(){this._value=[],this.addInput("json",""),this.addOutput("arrayOut","array"),this.addOutput("length","number"),this.addProperty("value","[]"),this.widget=this.addWidget("text","array",this.properties.value,"value"),this.widgets_up=!0,this.size=[140,50]}T.title="Const Array",T.desc="Constant Array",T.prototype.onPropertyChanged=function(z,$){if(this.widget.value=$,!($==null||$==""))try{$[0]!="["?this._value=JSON.parse("["+$+"]"):this._value=JSON.parse($),this.boxcolor="#AEA"}catch{this.boxcolor="red"}},T.prototype.onExecute=function(){var z=this.getInputData(0);if(z&&z.length){this._value||(this._value=new Array),this._value.length=z.length;for(var $=0;$<z.length;++$)this._value[$]=z[$]}this.setOutputData(0,this._value),this.setOutputData(1,this._value&&this._value.length||0)},T.prototype.setValue=c.prototype.setValue,t.registerNodeType("basic/array",T);function R(){this.addInput("arr","array"),this.addInput("value",""),this.addOutput("arr","array"),this.properties={index:0},this.widget=this.addWidget("number","i",this.properties.index,"index",{precision:0,step:10,min:0})}R.title="Set Array",R.desc="Sets index of array",R.prototype.onExecute=function(){var z=this.getInputData(0);if(z){var $=this.getInputData(1);$!==void 0&&(this.properties.index&&(z[Math.floor(this.properties.index)]=$),this.setOutputData(0,z))}},t.registerNodeType("basic/set_array",R);function A(){this.addInput("array","array,table,string"),this.addInput("index","number"),this.addOutput("value",""),this.addProperty("index",0)}A.title="Array[i]",A.desc="Returns an element from an array",A.prototype.onExecute=function(){var z=this.getInputData(0),$=this.getInputData(1);$==null&&($=this.properties.index),!(z==null||$==null)&&this.setOutputData(0,z[Math.floor(Number($))])},t.registerNodeType("basic/array[]",A);function I(){this.addInput("table","table"),this.addInput("row","number"),this.addInput("col","number"),this.addOutput("value",""),this.addProperty("row",0),this.addProperty("column",0)}I.title="Table[row][col]",I.desc="Returns an element from a table",I.prototype.onExecute=function(){var z=this.getInputData(0),L=this.getInputData(1),$=this.getInputData(2);if(L==null&&(L=this.properties.row),$==null&&($=this.properties.column),!(z==null||L==null||$==null)){var L=z[Math.floor(Number(L))];L?this.setOutputData(0,L[Math.floor(Number($))]):this.setOutputData(0,null)}},t.registerNodeType("basic/table[][]",I);function P(){this.addInput("obj","object"),this.addOutput("property",0),this.addProperty("value",0),this.widget=this.addWidget("text","prop.","",this.setValue.bind(this)),this.widgets_up=!0,this.size=[140,30],this._value=null}P.title="Object property",P.desc="Outputs the property of an object",P.prototype.setValue=function(z){this.properties.value=z,this.widget.value=z},P.prototype.getTitle=function(){return this.flags.collapsed?"in."+this.properties.value:this.title},P.prototype.onPropertyChanged=function(z,$){this.widget.value=$},P.prototype.onExecute=function(){var z=this.getInputData(0);z!=null&&this.setOutputData(0,z[this.properties.value])},t.registerNodeType("basic/object_property",P);function N(){this.addInput("obj",""),this.addOutput("keys","array"),this.size=[140,30]}N.title="Object keys",N.desc="Outputs an array with the keys of an object",N.prototype.onExecute=function(){var z=this.getInputData(0);z!=null&&this.setOutputData(0,Object.keys(z))},t.registerNodeType("basic/object_keys",N);function S(){this.addInput("obj",""),this.addInput("value",""),this.addOutput("obj",""),this.properties={property:""},this.name_widget=this.addWidget("text","prop.",this.properties.property,"property")}S.title="Set Object",S.desc="Adds propertiesrty to object",S.prototype.onExecute=function(){var z=this.getInputData(0);if(z){var $=this.getInputData(1);$!==void 0&&(this.properties.property&&(z[this.properties.property]=$),this.setOutputData(0,z))}},t.registerNodeType("basic/set_object",S);function k(){this.addInput("A","object"),this.addInput("B","object"),this.addOutput("out","object"),this._result={};var z=this;this.addWidget("button","clear","",function(){z._result={}}),this.size=this.computeSize()}k.title="Merge Objects",k.desc="Creates an object copying properties from others",k.prototype.onExecute=function(){var z=this.getInputData(0),$=this.getInputData(1),L=this._result;if(z)for(var W in z)L[W]=z[W];if($)for(var W in $)L[W]=$[W];this.setOutputData(0,L)},t.registerNodeType("basic/merge_objects",k);function D(){this.size=[60,30],this.addInput("in"),this.addOutput("out"),this.properties={varname:"myname",container:D.LITEGRAPH},this.value=null}D.title="Variable",D.desc="store/read variable value",D.LITEGRAPH=0,D.GRAPH=1,D.GLOBALSCOPE=2,D["@container"]={type:"enum",values:{litegraph:D.LITEGRAPH,graph:D.GRAPH,global:D.GLOBALSCOPE}},D.prototype.onExecute=function(){var z=this.getContainer();if(this.isInputConnected(0)){this.value=this.getInputData(0),z[this.properties.varname]=this.value,this.setOutputData(0,this.value);return}this.setOutputData(0,z[this.properties.varname])},D.prototype.getContainer=function(){switch(this.properties.container){case D.GRAPH:return this.graph?this.graph.vars:{};case D.GLOBALSCOPE:return e;case D.LITEGRAPH:default:return t.Globals}},D.prototype.getTitle=function(){return this.properties.varname},t.registerNodeType("basic/variable",D),t.wrapFunctionAsNode("basic/length",M,[""],"number");function M(z){return z&&z.length!=null?Number(z.length):0}t.wrapFunctionAsNode("basic/not",function(z){return!z},[""],"boolean");function j(){this.size=[60,30],this.addInput("data",0),this.addInput("download",t.ACTION),this.properties={filename:"data.json"},this.value=null;var z=this;this.addWidget("button","Download","",function($){z.value&&z.downloadAsFile()})}j.title="Download",j.desc="Download some data",j.prototype.downloadAsFile=function(){if(this.value!=null){var z=null;this.value.constructor===String?z=this.value:z=JSON.stringify(this.value);var $=new Blob([z]),L=URL.createObjectURL($),W=document.createElement("a");W.setAttribute("href",L),W.setAttribute("download",this.properties.filename),W.style.display="none",document.body.appendChild(W),W.click(),document.body.removeChild(W),setTimeout(function(){URL.revokeObjectURL(L)},1e3*60)}},j.prototype.onAction=function(z,$){var L=this;setTimeout(function(){L.downloadAsFile()},100)},j.prototype.onExecute=function(){this.inputs[0]&&(this.value=this.getInputData(0))},j.prototype.getTitle=function(){return this.flags.collapsed?this.properties.filename:this.title},t.registerNodeType("basic/download",j);function H(){this.size=[60,30],this.addInput("value",0,{label:""}),this.value=0}H.title="Watch",H.desc="Show value of input",H.prototype.onExecute=function(){this.inputs[0]&&(this.value=this.getInputData(0))},H.prototype.getTitle=function(){return this.flags.collapsed?this.inputs[0].label:this.title},H.toString=function(z){if(z==null)return"null";if(z.constructor===Number)return z.toFixed(3);if(z.constructor===Array){for(var $="[",L=0;L<z.length;++L)$+=H.toString(z[L])+(L+1!=z.length?",":"");return $+="]",$}else return String(z)},H.prototype.onDrawBackground=function(z){this.inputs[0].label=H.toString(this.value)},t.registerNodeType("basic/watch",H);function X(){this.addInput("in",0),this.addOutput("out",0),this.size=[40,30]}X.title="Cast",X.desc="Allows to connect different types",X.prototype.onExecute=function(){this.setOutputData(0,this.getInputData(0))},t.registerNodeType("basic/cast",X);function K(){this.mode=t.ON_EVENT,this.size=[80,30],this.addProperty("msg",""),this.addInput("log",t.EVENT),this.addInput("msg",0)}K.title="Console",K.desc="Show value inside the console",K.prototype.onAction=function(z,$){var L=this.getInputData(1);L||(L=this.properties.msg),L||(L="Event: "+$),z=="log"?console.log(L):z=="warn"?console.warn(L):z=="error"&&console.error(L)},K.prototype.onExecute=function(){var z=this.getInputData(1);z||(z=this.properties.msg),z!=null&&typeof z<"u"&&(this.properties.msg=z,console.log(z))},K.prototype.onGetInputs=function(){return[["log",t.ACTION],["warn",t.ACTION],["error",t.ACTION]]},t.registerNodeType("basic/console",K);function re(){this.mode=t.ON_EVENT,this.addProperty("msg",""),this.addInput("",t.EVENT),this.widget=this.addWidget("text","Text","","msg"),this.widgets_up=!0,this.size=[200,30]}re.title="Alert",re.desc="Show an alert window",re.color="#510",re.prototype.onConfigure=function(z){this.widget.value=z.properties.msg},re.prototype.onAction=function(z,$){var L=this.properties.msg;setTimeout(function(){alert(L)},10)},t.registerNodeType("basic/alert",re);function F(){this.size=[60,30],this.addProperty("onExecute","return A;"),this.addInput("A",0),this.addInput("B",0),this.addOutput("out",0),this._func=null,this.data={}}F.prototype.onConfigure=function(z){z.properties.onExecute&&t.allow_scripts?this.compileCode(z.properties.onExecute):console.warn("Script not compiled, LiteGraph.allow_scripts is false")},F.title="Script",F.desc="executes a code (max 256 characters)",F.widgets_info={onExecute:{type:"code"}},F.prototype.onPropertyChanged=function(z,$){z=="onExecute"&&t.allow_scripts?this.compileCode($):console.warn("Script not compiled, LiteGraph.allow_scripts is false")},F.prototype.compileCode=function(z){if(this._func=null,z.length>256)console.warn("Script too long, max 256 chars");else{for(var $=z.toLowerCase(),L=["script","body","document","eval","nodescript","function"],W=0;W<L.length;++W)if($.indexOf(L[W])!=-1){console.warn("invalid script");return}try{this._func=new Function("A","B","C","DATA","node",z)}catch(U){console.error("Error parsing script"),console.error(U)}}},F.prototype.onExecute=function(){if(this._func)try{var z=this.getInputData(0),$=this.getInputData(1),L=this.getInputData(2);this.setOutputData(0,this._func(z,$,L,this.data,this))}catch(W){console.error("Error in script"),console.error(W)}},F.prototype.onGetOutputs=function(){return[["C",""]]},t.registerNodeType("basic/script",F);function J(){this.addInput("A",0),this.addInput("B",0),this.addOutput("true","boolean"),this.addOutput("false","boolean"),this.addProperty("A",1),this.addProperty("B",1),this.addProperty("OP","==","enum",{values:J.values}),this.addWidget("combo","Op.",this.properties.OP,{property:"OP",values:J.values}),this.size=[80,60]}J.values=["==","!="],J["@OP"]={type:"enum",title:"operation",values:J.values},J.title="Compare *",J.desc="evaluates condition between A and B",J.prototype.getTitle=function(){return"*A "+this.properties.OP+" *B"},J.prototype.onExecute=function(){var z=this.getInputData(0);z===void 0?z=this.properties.A:this.properties.A=z;var $=this.getInputData(1);$===void 0?$=this.properties.B:this.properties.B=$;var L=!1;if(typeof z==typeof $)switch(this.properties.OP){case"==":case"!=":switch(L=!0,typeof z){case"object":var W=Object.getOwnPropertyNames(z),U=Object.getOwnPropertyNames($);if(W.length!=U.length){L=!1;break}for(var V=0;V<W.length;V++){var B=W[V];if(z[B]!==$[B]){L=!1;break}}break;default:L=z==$}this.properties.OP=="!="&&(L=!L);break}this.setOutputData(0,L),this.setOutputData(1,!L)},t.registerNodeType("basic/CompareValues",J)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.size=[60,30],this.addInput("event",t.ACTION)}n.title="Log Event",n.desc="Log event in console",n.prototype.onAction=function(A,I,P){console.log(A,I)},t.registerNodeType("events/log",n);function a(){this.size=[60,30],this.addInput("if",""),this.addOutput("true",t.EVENT),this.addOutput("change",t.EVENT),this.addOutput("false",t.EVENT),this.properties={only_on_change:!0},this.prev=0}a.title="TriggerEvent",a.desc="Triggers event if input evaluates to true",a.prototype.onExecute=function(A,I){var P=this.getInputData(0),N=P!=this.prev;this.prev===0&&(N=!1);var S=N&&this.properties.only_on_change||!N&&!this.properties.only_on_change;P&&S&&this.triggerSlot(0,A,null,I),!P&&S&&this.triggerSlot(2,A,null,I),N&&this.triggerSlot(1,A,null,I),this.prev=P},t.registerNodeType("events/trigger",a);function s(){var A=this;this.addInput("",t.ACTION),this.addInput("",t.ACTION),this.addInput("",t.ACTION),this.addOutput("",t.EVENT),this.addOutput("",t.EVENT),this.addOutput("",t.EVENT),this.addWidget("button","+",null,function(){A.addInput("",t.ACTION),A.addOutput("",t.EVENT)}),this.size=[90,70],this.flags={horizontal:!0,render_box:!1}}s.title="Sequence",s.desc="Triggers a sequence of events when an event arrives",s.prototype.getTitle=function(){return""},s.prototype.onAction=function(A,I,P){if(this.outputs){P=P||{};for(var N=0;N<this.outputs.length;++N)this.outputs[N],P.action_call?P.action_call=P.action_call+"_seq_"+N:P.action_call=this.id+"_"+(A||"action")+"_seq_"+N+"_"+Math.floor(Math.random()*9999),this.triggerSlot(N,I,null,P)}},t.registerNodeType("events/sequence",s);function u(){var A=this;this.addInput("",t.ACTION),this.addInput("",t.ACTION),this.addOutput("",t.EVENT),this.addWidget("button","+",null,function(){A.addInput("",t.ACTION),A.size[0]=90}),this.size=[90,70],this.ready=[]}u.title="WaitAll",u.desc="Wait until all input events arrive then triggers output",u.prototype.getTitle=function(){return""},u.prototype.onDrawBackground=function(A){if(!this.flags.collapsed)for(var I=0;I<this.inputs.length;++I){var P=I*t.NODE_SLOT_HEIGHT+10;A.fillStyle=this.ready[I]?"#AFB":"#000",A.fillRect(20,P,10,10)}},u.prototype.onAction=function(A,I,P,N){if(N!=null){this.ready.length=this.outputs.length,this.ready[N]=!0;for(var S=0;S<this.ready.length;++S)if(!this.ready[S])return;this.reset(),this.triggerSlot(0)}},u.prototype.reset=function(){this.ready.length=0},t.registerNodeType("events/waitAll",u);function c(){var A=this;this.properties={index:0},this.addInput("index","number"),this.addInput("step",t.ACTION),this.addInput("reset",t.ACTION),this.addOutput("index","number"),this.addOutput("",t.EVENT),this.addOutput("",t.EVENT),this.addOutput("",t.EVENT,{removable:!0}),this.addWidget("button","+",null,function(){A.addOutput("",t.EVENT,{removable:!0})}),this.size=[120,120],this.flags={render_box:!1}}c.title="Stepper",c.desc="Trigger events sequentially when an tick arrives",c.prototype.onDrawBackground=function(A){if(!this.flags.collapsed){var I=this.properties.index||0;A.fillStyle="#AFB";var P=this.size[0],N=(I+1)*t.NODE_SLOT_HEIGHT+4;A.beginPath(),A.moveTo(P-30,N),A.lineTo(P-30,N+t.NODE_SLOT_HEIGHT),A.lineTo(P-15,N+t.NODE_SLOT_HEIGHT*.5),A.fill()}},c.prototype.onExecute=function(){var A=this.getInputData(0);A!=null&&(A=Math.floor(A),A=clamp(A,0,this.outputs?this.outputs.length-2:0),A!=this.properties.index&&(this.properties.index=A,this.triggerSlot(A+1))),this.setOutputData(0,this.properties.index)},c.prototype.onAction=function(A,I){if(A=="reset")this.properties.index=0;else if(A=="step"){this.triggerSlot(this.properties.index+1,I);var P=this.outputs?this.outputs.length-1:0;this.properties.index=(this.properties.index+1)%P}},t.registerNodeType("events/stepper",c);function h(){this.size=[60,30],this.addInput("event",t.ACTION),this.addOutput("event",t.EVENT),this.properties={equal_to:"",has_property:"",property_equal_to:""}}h.title="Filter Event",h.desc="Blocks events that do not match the filter",h.prototype.onAction=function(A,I,P){if(I!=null&&!(this.properties.equal_to&&this.properties.equal_to!=I)){if(this.properties.has_property){var N=I[this.properties.has_property];if(N==null||this.properties.property_equal_to&&this.properties.property_equal_to!=N)return}this.triggerSlot(0,I,null,P)}},t.registerNodeType("events/filter",h);function f(){this.addInput("in",t.ACTION),this.addInput("cond","boolean"),this.addOutput("true",t.EVENT),this.addOutput("false",t.EVENT),this.size=[120,60],this._value=!1}f.title="Branch",f.desc="If condition is true, outputs triggers true, otherwise false",f.prototype.onExecute=function(){this._value=this.getInputData(1)},f.prototype.onAction=function(A,I,P){this._value=this.getInputData(1),this.triggerSlot(this._value?0:1,I,null,P)},t.registerNodeType("events/branch",f);function m(){this.addInput("inc",t.ACTION),this.addInput("dec",t.ACTION),this.addInput("reset",t.ACTION),this.addOutput("change",t.EVENT),this.addOutput("num","number"),this.addProperty("doCountExecution",!1,"boolean",{name:"Count Executions"}),this.addWidget("toggle","Count Exec.",this.properties.doCountExecution,"doCountExecution"),this.num=0}m.title="Counter",m.desc="Counts events",m.prototype.getTitle=function(){return this.flags.collapsed?String(this.num):this.title},m.prototype.onAction=function(A,I,P){var N=this.num;A=="inc"?this.num+=1:A=="dec"?this.num-=1:A=="reset"&&(this.num=0),this.num!=N&&this.trigger("change",this.num)},m.prototype.onDrawBackground=function(A){this.flags.collapsed||(A.fillStyle="#AAA",A.font="20px Arial",A.textAlign="center",A.fillText(this.num,this.size[0]*.5,this.size[1]*.5))},m.prototype.onExecute=function(){this.properties.doCountExecution&&(this.num+=1),this.setOutputData(1,this.num)},t.registerNodeType("events/counter",m);function _(){this.size=[60,30],this.addProperty("time_in_ms",1e3),this.addInput("event",t.ACTION),this.addOutput("on_time",t.EVENT),this._pending=[]}_.title="Delay",_.desc="Delays one event",_.prototype.onAction=function(A,I,P){var N=this.properties.time_in_ms;N<=0?this.trigger(null,I,P):this._pending.push([N,I])},_.prototype.onExecute=function(A,I){var P=this.graph.elapsed_time*1e3;this.isInputConnected(1)&&(this.properties.time_in_ms=this.getInputData(1));for(var N=0;N<this._pending.length;++N){var S=this._pending[N];S[0]-=P,!(S[0]>0)&&(this._pending.splice(N,1),--N,this.trigger(null,S[1],I))}},_.prototype.onGetInputs=function(){return[["event",t.ACTION],["time_in_ms","number"]]},t.registerNodeType("events/delay",_);function C(){this.addProperty("interval",1e3),this.addProperty("event","tick"),this.addOutput("on_tick",t.EVENT),this.time=0,this.last_interval=1e3,this.triggered=!1}C.title="Timer",C.desc="Sends an event every N milliseconds",C.prototype.onStart=function(){this.time=0},C.prototype.getTitle=function(){return"Timer: "+this.last_interval.toString()+"ms"},C.on_color="#AAA",C.off_color="#222",C.prototype.onDrawBackground=function(){this.boxcolor=this.triggered?C.on_color:C.off_color,this.triggered=!1},C.prototype.onExecute=function(){var A=this.graph.elapsed_time*1e3,I=this.time==0;if(this.time+=A,this.last_interval=Math.max(1,this.getInputOrProperty("interval")|0),!I&&(this.time<this.last_interval||isNaN(this.last_interval))){this.inputs&&this.inputs.length>1&&this.inputs[1]&&this.setOutputData(1,!1);return}this.triggered=!0,this.time=this.time%this.last_interval,this.trigger("on_tick",this.properties.event),this.inputs&&this.inputs.length>1&&this.inputs[1]&&this.setOutputData(1,!0)},C.prototype.onGetInputs=function(){return[["interval","number"]]},C.prototype.onGetOutputs=function(){return[["tick","boolean"]]},t.registerNodeType("events/timer",C);function b(){this.addInput("go",t.ACTION),this.addInput("green",t.ACTION),this.addInput("red",t.ACTION),this.addOutput("continue",t.EVENT),this.addOutput("blocked",t.EVENT),this.addOutput("is_green","boolean"),this._ready=!1,this.properties={};var A=this;this.addWidget("button","reset","",function(){A._ready=!1})}b.title="Semaphore Event",b.desc="Until both events are not triggered, it doesnt continue.",b.prototype.onExecute=function(){this.setOutputData(1,this._ready),this.boxcolor=this._ready?"#9F9":"#FA5"},b.prototype.onAction=function(A,I){A=="go"?this.triggerSlot(this._ready?0:1):A=="green"?this._ready=!0:A=="red"&&(this._ready=!1)},t.registerNodeType("events/semaphore",b);function T(){this.addInput("in",t.ACTION),this.addInput("reset",t.ACTION),this.addOutput("out",t.EVENT),this._once=!1,this.properties={};var A=this;this.addWidget("button","reset","",function(){A._once=!1})}T.title="Once",T.desc="Only passes an event once, then gets locked",T.prototype.onAction=function(A,I){A=="in"&&!this._once?(this._once=!0,this.triggerSlot(0,I)):A=="reset"&&(this._once=!1)},t.registerNodeType("events/once",T);function R(){this.addInput("data",0),this.addInput("assign",t.ACTION),this.addOutput("data",0),this._last_value=null,this.properties={data:null,serialize:!0};var A=this;this.addWidget("button","store","",function(){A.properties.data=A._last_value})}R.title="Data Store",R.desc="Stores data and only changes when event is received",R.prototype.onExecute=function(){this._last_value=this.getInputData(0),this.setOutputData(0,this.properties.data)},R.prototype.onAction=function(A,I,P){this.properties.data=this._last_value},R.prototype.onSerialize=function(A){A.data!=null&&(this.properties.serialize==!1||A.data.constructor!==String&&A.data.constructor!==Number&&A.data.constructor!==Boolean&&A.data.constructor!==Array&&A.data.constructor!==Object)&&(A.data=null)},t.registerNodeType("basic/data_store",R)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.addOutput("",t.EVENT),this.addOutput("","boolean"),this.addProperty("text","click me"),this.addProperty("font_size",30),this.addProperty("message",""),this.size=[164,84],this.clicked=!1}n.title="Button",n.desc="Triggers an event",n.font="Arial",n.prototype.onDrawForeground=function(b){if(!this.flags.collapsed){var T=10;if(b.fillStyle="black",b.fillRect(T+1,T+1,this.size[0]-T*2,this.size[1]-T*2),b.fillStyle="#AAF",b.fillRect(T-1,T-1,this.size[0]-T*2,this.size[1]-T*2),b.fillStyle=this.clicked?"white":this.mouseOver?"#668":"#334",b.fillRect(T,T,this.size[0]-T*2,this.size[1]-T*2),this.properties.text||this.properties.text===0){var R=this.properties.font_size||30;b.textAlign="center",b.fillStyle=this.clicked?"black":"white",b.font=R+"px "+n.font,b.fillText(this.properties.text,this.size[0]*.5,this.size[1]*.5+R*.3),b.textAlign="left"}}},n.prototype.onMouseDown=function(b,T){if(T[0]>1&&T[1]>1&&T[0]<this.size[0]-2&&T[1]<this.size[1]-2)return this.clicked=!0,this.setOutputData(1,this.clicked),this.triggerSlot(0,this.properties.message),!0},n.prototype.onExecute=function(){this.setOutputData(1,this.clicked)},n.prototype.onMouseUp=function(b){this.clicked=!1},t.registerNodeType("widget/button",n);function a(){this.addInput("","boolean"),this.addInput("e",t.ACTION),this.addOutput("v","boolean"),this.addOutput("e",t.EVENT),this.properties={font:"",value:!1},this.size=[160,44]}a.title="Toggle",a.desc="Toggles between true or false",a.prototype.onDrawForeground=function(b){if(!this.flags.collapsed){var T=this.size[1]*.5,R=.25,A=this.size[1]*.8;b.font=this.properties.font||(T*.8).toFixed(0)+"px Arial";var I=b.measureText(this.title).width,P=(this.size[0]-(I+T))*.5;b.fillStyle="#AAA",b.fillRect(P,A-T,T,T),b.fillStyle=this.properties.value?"#AEF":"#000",b.fillRect(P+T*R,A-T+T*R,T*(1-R*2),T*(1-R*2)),b.textAlign="left",b.fillStyle="#AAA",b.fillText(this.title,T*1.2+P,A*.85),b.textAlign="left"}},a.prototype.onAction=function(b){this.properties.value=!this.properties.value,this.trigger("e",this.properties.value)},a.prototype.onExecute=function(){var b=this.getInputData(0);b!=null&&(this.properties.value=b),this.setOutputData(0,this.properties.value)},a.prototype.onMouseDown=function(b,T){if(T[0]>1&&T[1]>1&&T[0]<this.size[0]-2&&T[1]<this.size[1]-2)return this.properties.value=!this.properties.value,this.graph._version++,this.trigger("e",this.properties.value),!0},t.registerNodeType("widget/toggle",a);function s(){this.addOutput("","number"),this.size=[80,60],this.properties={min:-1e3,max:1e3,value:1,step:1},this.old_y=-1,this._remainder=0,this._precision=0,this.mouse_captured=!1}s.title="Number",s.desc="Widget to select number value",s.pixels_threshold=10,s.markers_color="#666",s.prototype.onDrawForeground=function(b){var T=this.size[0]*.5,R=this.size[1];R>30?(b.fillStyle=s.markers_color,b.beginPath(),b.moveTo(T,R*.1),b.lineTo(T+R*.1,R*.2),b.lineTo(T+R*-.1,R*.2),b.fill(),b.beginPath(),b.moveTo(T,R*.9),b.lineTo(T+R*.1,R*.8),b.lineTo(T+R*-.1,R*.8),b.fill(),b.font=(R*.7).toFixed(1)+"px Arial"):b.font=(R*.8).toFixed(1)+"px Arial",b.textAlign="center",b.font=(R*.7).toFixed(1)+"px Arial",b.fillStyle="#EEE",b.fillText(this.properties.value.toFixed(this._precision),T,R*.75)},s.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},s.prototype.onPropertyChanged=function(b,T){var R=(this.properties.step+"").split(".");this._precision=R.length>1?R[1].length:0},s.prototype.onMouseDown=function(b,T){if(!(T[1]<0))return this.old_y=b.canvasY,this.captureInput(!0),this.mouse_captured=!0,!0},s.prototype.onMouseMove=function(b){if(this.mouse_captured){var T=this.old_y-b.canvasY;b.shiftKey&&(T*=10),(b.metaKey||b.altKey)&&(T*=.1),this.old_y=b.canvasY;var R=this._remainder+T/s.pixels_threshold;this._remainder=R%1,R=R|0;var A=clamp(this.properties.value+R*this.properties.step,this.properties.min,this.properties.max);this.properties.value=A,this.graph._version++,this.setDirtyCanvas(!0)}},s.prototype.onMouseUp=function(b,T){if(b.click_time<200){var R=T[1]>this.size[1]*.5?-1:1;this.properties.value=clamp(this.properties.value+R*this.properties.step,this.properties.min,this.properties.max),this.graph._version++,this.setDirtyCanvas(!0)}this.mouse_captured&&(this.mouse_captured=!1,this.captureInput(!1))},t.registerNodeType("widget/number",s);function u(){this.addOutput("","string"),this.addOutput("change",t.EVENT),this.size=[80,60],this.properties={value:"A",values:"A;B;C"},this.old_y=-1,this.mouse_captured=!1,this._values=this.properties.values.split(";");var b=this;this.widgets_up=!0,this.widget=this.addWidget("combo","",this.properties.value,function(T){b.properties.value=T,b.triggerSlot(1,T)},{property:"value",values:this._values})}u.title="Combo",u.desc="Widget to select from a list",u.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},u.prototype.onPropertyChanged=function(b,T){b=="values"?(this._values=T.split(";"),this.widget.options.values=this._values):b=="value"&&(this.widget.value=T)},t.registerNodeType("widget/combo",u);function c(){this.addOutput("","number"),this.size=[64,84],this.properties={min:0,max:1,value:.5,color:"#7AF",precision:2},this.value=-1}c.title="Knob",c.desc="Circular controller",c.size=[80,100],c.prototype.onDrawForeground=function(b){if(!this.flags.collapsed){this.value==-1&&(this.value=(this.properties.value-this.properties.min)/(this.properties.max-this.properties.min));var T=this.size[0]*.5,R=this.size[1]*.5,A=Math.min(this.size[0],this.size[1])*.5-5;b.globalAlpha=1,b.save(),b.translate(T,R),b.rotate(Math.PI*.75),b.fillStyle="rgba(0,0,0,0.5)",b.beginPath(),b.moveTo(0,0),b.arc(0,0,A,0,Math.PI*1.5),b.fill(),b.strokeStyle="black",b.fillStyle=this.properties.color,b.lineWidth=2,b.beginPath(),b.moveTo(0,0),b.arc(0,0,A-4,0,Math.PI*1.5*Math.max(.01,this.value)),b.closePath(),b.fill(),b.lineWidth=1,b.globalAlpha=1,b.restore(),b.fillStyle="black",b.beginPath(),b.arc(T,R,A*.75,0,Math.PI*2,!0),b.fill(),b.fillStyle=this.mouseOver?"white":this.properties.color,b.beginPath();var I=this.value*Math.PI*1.5+Math.PI*.75;b.arc(T+Math.cos(I)*A*.65,R+Math.sin(I)*A*.65,A*.05,0,Math.PI*2,!0),b.fill(),b.fillStyle=this.mouseOver?"white":"#AAA",b.font=Math.floor(A*.5)+"px Arial",b.textAlign="center",b.fillText(this.properties.value.toFixed(this.properties.precision),T,R+A*.15)}},c.prototype.onExecute=function(){this.setOutputData(0,this.properties.value),this.boxcolor=t.colorToString([this.value,this.value,this.value])},c.prototype.onMouseDown=function(b){return this.center=[this.size[0]*.5,this.size[1]*.5+20],this.radius=this.size[0]*.5,b.canvasY-this.pos[1]<20||t.distance([b.canvasX,b.canvasY],[this.pos[0]+this.center[0],this.pos[1]+this.center[1]])>this.radius?!1:(this.oldmouse=[b.canvasX-this.pos[0],b.canvasY-this.pos[1]],this.captureInput(!0),!0)},c.prototype.onMouseMove=function(b){if(this.oldmouse){var T=[b.canvasX-this.pos[0],b.canvasY-this.pos[1]],R=this.value;R-=(T[1]-this.oldmouse[1])*.01,R>1?R=1:R<0&&(R=0),this.value=R,this.properties.value=this.properties.min+(this.properties.max-this.properties.min)*this.value,this.oldmouse=T,this.setDirtyCanvas(!0)}},c.prototype.onMouseUp=function(b){this.oldmouse&&(this.oldmouse=null,this.captureInput(!1))},c.prototype.onPropertyChanged=function(b,T){if(b=="min"||b=="max"||b=="value")return this.properties[b]=parseFloat(T),!0},t.registerNodeType("widget/knob",c);function h(){this.addOutput("","number"),this.properties={value:.5,min:0,max:1,text:"V"};var b=this;this.size=[140,40],this.slider=this.addWidget("slider","V",this.properties.value,function(T){b.properties.value=T},this.properties),this.widgets_up=!0}h.title="Inner Slider",h.prototype.onPropertyChanged=function(b,T){b=="value"&&(this.slider.value=T)},h.prototype.onExecute=function(){this.setOutputData(0,this.properties.value)},t.registerNodeType("widget/internal_slider",h);function f(){this.size=[160,26],this.addOutput("","number"),this.properties={color:"#7AF",min:0,max:1,value:.5},this.value=-1}f.title="H.Slider",f.desc="Linear slider controller",f.prototype.onDrawForeground=function(b){this.value==-1&&(this.value=(this.properties.value-this.properties.min)/(this.properties.max-this.properties.min)),b.globalAlpha=1,b.lineWidth=1,b.fillStyle="#000",b.fillRect(2,2,this.size[0]-4,this.size[1]-4),b.fillStyle=this.properties.color,b.beginPath(),b.rect(4,4,(this.size[0]-8)*this.value,this.size[1]-8),b.fill()},f.prototype.onExecute=function(){this.properties.value=this.properties.min+(this.properties.max-this.properties.min)*this.value,this.setOutputData(0,this.properties.value),this.boxcolor=t.colorToString([this.value,this.value,this.value])},f.prototype.onMouseDown=function(b){return b.canvasY-this.pos[1]<0?!1:(this.oldmouse=[b.canvasX-this.pos[0],b.canvasY-this.pos[1]],this.captureInput(!0),!0)},f.prototype.onMouseMove=function(b){if(this.oldmouse){var T=[b.canvasX-this.pos[0],b.canvasY-this.pos[1]],R=this.value,A=T[0]-this.oldmouse[0];R+=A/this.size[0],R>1?R=1:R<0&&(R=0),this.value=R,this.oldmouse=T,this.setDirtyCanvas(!0)}},f.prototype.onMouseUp=function(b){this.oldmouse=null,this.captureInput(!1)},f.prototype.onMouseLeave=function(b){},t.registerNodeType("widget/hslider",f);function m(){this.size=[160,26],this.addInput("","number"),this.properties={min:0,max:1,value:0,color:"#AAF"}}m.title="Progress",m.desc="Shows data in linear progress",m.prototype.onExecute=function(){var b=this.getInputData(0);b!=null&&(this.properties.value=b)},m.prototype.onDrawForeground=function(b){b.lineWidth=1,b.fillStyle=this.properties.color;var T=(this.properties.value-this.properties.min)/(this.properties.max-this.properties.min);T=Math.min(1,T),T=Math.max(0,T),b.fillRect(2,2,(this.size[0]-4)*T,this.size[1]-4)},t.registerNodeType("widget/progress",m);function _(){this.addInputs("",0),this.properties={value:"...",font:"Arial",fontsize:18,color:"#AAA",align:"left",glowSize:0,decimals:1}}_.title="Text",_.desc="Shows the input value",_.widgets=[{name:"resize",text:"Resize box",type:"button"},{name:"led_text",text:"LED",type:"minibutton"},{name:"normal_text",text:"Normal",type:"minibutton"}],_.prototype.onDrawForeground=function(b){b.fillStyle=this.properties.color;var T=this.properties.value;this.properties.glowSize?(b.shadowColor=this.properties.color,b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=this.properties.glowSize):b.shadowColor="transparent";var R=this.properties.fontsize;if(b.textAlign=this.properties.align,b.font=R.toString()+"px "+this.properties.font,this.str=typeof T=="number"?T.toFixed(this.properties.decimals):T,typeof this.str=="string")for(var A=this.str.replace(/[\r\n]/g,"\\n").split("\\n"),I=0;I<A.length;I++)b.fillText(A[I],this.properties.align=="left"?15:this.size[0]-15,R*-.15+R*(parseInt(I)+1));b.shadowColor="transparent",this.last_ctx=b,b.textAlign="left"},_.prototype.onExecute=function(){var b=this.getInputData(0);b!=null&&(this.properties.value=b)},_.prototype.resize=function(){if(this.last_ctx){var b=this.str.split("\\n");this.last_ctx.font=this.properties.fontsize+"px "+this.properties.font;for(var T=0,R=0;R<b.length;R++){var A=this.last_ctx.measureText(b[R]).width;T<A&&(T=A)}this.size[0]=T+20,this.size[1]=4+b.length*this.properties.fontsize,this.setDirtyCanvas(!0)}},_.prototype.onPropertyChanged=function(b,T){return this.properties[b]=T,this.str=typeof T=="number"?T.toFixed(3):T,!0},t.registerNodeType("widget/text",_);function C(){this.size=[200,100],this.properties={borderColor:"#ffffff",bgcolorTop:"#f0f0f0",bgcolorBottom:"#e0e0e0",shadowSize:2,borderRadius:3}}C.title="Panel",C.desc="Non interactive panel",C.widgets=[{name:"update",text:"Update",type:"button"}],C.prototype.createGradient=function(b){if(this.properties.bgcolorTop==""||this.properties.bgcolorBottom==""){this.lineargradient=0;return}this.lineargradient=b.createLinearGradient(0,0,0,this.size[1]),this.lineargradient.addColorStop(0,this.properties.bgcolorTop),this.lineargradient.addColorStop(1,this.properties.bgcolorBottom)},C.prototype.onDrawForeground=function(b){this.flags.collapsed||(this.lineargradient==null&&this.createGradient(b),this.lineargradient&&(b.lineWidth=1,b.strokeStyle=this.properties.borderColor,b.fillStyle=this.lineargradient,this.properties.shadowSize?(b.shadowColor="#000",b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=this.properties.shadowSize):b.shadowColor="transparent",b.roundRect(0,0,this.size[0]-1,this.size[1]-1,this.properties.shadowSize),b.fill(),b.shadowColor="transparent",b.stroke()))},t.registerNodeType("widget/panel",C)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.addOutput("left_x_axis","number"),this.addOutput("left_y_axis","number"),this.addOutput("button_pressed",t.EVENT),this.properties={gamepad_index:0,threshold:.1},this._left_axis=new Float32Array(2),this._right_axis=new Float32Array(2),this._triggers=new Float32Array(2),this._previous_buttons=new Uint8Array(17),this._current_buttons=new Uint8Array(17)}n.title="Gamepad",n.desc="gets the input of the gamepad",n.CENTER=0,n.LEFT=1,n.RIGHT=2,n.UP=4,n.DOWN=8,n.zero=new Float32Array(2),n.buttons=["a","b","x","y","lb","rb","lt","rt","back","start","ls","rs","home"],n.prototype.onExecute=function(){var a=this.getGamepad(),s=this.properties.threshold||0;if(a&&(this._left_axis[0]=Math.abs(a.xbox.axes.lx)>s?a.xbox.axes.lx:0,this._left_axis[1]=Math.abs(a.xbox.axes.ly)>s?a.xbox.axes.ly:0,this._right_axis[0]=Math.abs(a.xbox.axes.rx)>s?a.xbox.axes.rx:0,this._right_axis[1]=Math.abs(a.xbox.axes.ry)>s?a.xbox.axes.ry:0,this._triggers[0]=Math.abs(a.xbox.axes.ltrigger)>s?a.xbox.axes.ltrigger:0,this._triggers[1]=Math.abs(a.xbox.axes.rtrigger)>s?a.xbox.axes.rtrigger:0),this.outputs)for(var u=0;u<this.outputs.length;u++){var c=this.outputs[u];if(!(!c.links||!c.links.length)){var h=null;if(a)switch(c.name){case"left_axis":h=this._left_axis;break;case"right_axis":h=this._right_axis;break;case"left_x_axis":h=this._left_axis[0];break;case"left_y_axis":h=this._left_axis[1];break;case"right_x_axis":h=this._right_axis[0];break;case"right_y_axis":h=this._right_axis[1];break;case"trigger_left":h=this._triggers[0];break;case"trigger_right":h=this._triggers[1];break;case"a_button":h=a.xbox.buttons.a?1:0;break;case"b_button":h=a.xbox.buttons.b?1:0;break;case"x_button":h=a.xbox.buttons.x?1:0;break;case"y_button":h=a.xbox.buttons.y?1:0;break;case"lb_button":h=a.xbox.buttons.lb?1:0;break;case"rb_button":h=a.xbox.buttons.rb?1:0;break;case"ls_button":h=a.xbox.buttons.ls?1:0;break;case"rs_button":h=a.xbox.buttons.rs?1:0;break;case"hat_left":h=a.xbox.hatmap&n.LEFT;break;case"hat_right":h=a.xbox.hatmap&n.RIGHT;break;case"hat_up":h=a.xbox.hatmap&n.UP;break;case"hat_down":h=a.xbox.hatmap&n.DOWN;break;case"hat":h=a.xbox.hatmap;break;case"start_button":h=a.xbox.buttons.start?1:0;break;case"back_button":h=a.xbox.buttons.back?1:0;break;case"button_pressed":for(var f=0;f<this._current_buttons.length;++f)this._current_buttons[f]&&!this._previous_buttons[f]&&this.triggerSlot(u,n.buttons[f]);break}else switch(c.name){case"button_pressed":break;case"left_axis":case"right_axis":h=n.zero;break;default:h=0}this.setOutputData(u,h)}}},n.mapping={a:0,b:1,x:2,y:3,lb:4,rb:5,lt:6,rt:7,back:8,start:9,ls:10,rs:11},n.mapping_array=["a","b","x","y","lb","rb","lt","rt","back","start","ls","rs"],n.prototype.getGamepad=function(){var a=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads;if(!a)return null;var s=a.call(navigator),u=null;this._previous_buttons.set(this._current_buttons);for(var c=this.properties.gamepad_index;c<4;c++)if(s[c]){u=s[c];var h=this.xbox_mapping;h||(h=this.xbox_mapping={axes:[],buttons:{},hat:"",hatmap:n.CENTER}),h.axes.lx=u.axes[0],h.axes.ly=u.axes[1],h.axes.rx=u.axes[2],h.axes.ry=u.axes[3],h.axes.ltrigger=u.buttons[6].value,h.axes.rtrigger=u.buttons[7].value,h.hat="",h.hatmap=n.CENTER;for(var f=0;f<u.buttons.length;f++)if(this._current_buttons[f]=u.buttons[f].pressed,f<12)h.buttons[n.mapping_array[f]]=u.buttons[f].pressed,u.buttons[f].was_pressed&&this.trigger(n.mapping_array[f]+"_button_event");else switch(f){case 12:u.buttons[f].pressed&&(h.hat+="up",h.hatmap|=n.UP);break;case 13:u.buttons[f].pressed&&(h.hat+="down",h.hatmap|=n.DOWN);break;case 14:u.buttons[f].pressed&&(h.hat+="left",h.hatmap|=n.LEFT);break;case 15:u.buttons[f].pressed&&(h.hat+="right",h.hatmap|=n.RIGHT);break;case 16:h.buttons.home=u.buttons[f].pressed;break}return u.xbox=h,u}},n.prototype.onDrawBackground=function(a){if(!this.flags.collapsed){var s=this._left_axis,u=this._right_axis;a.strokeStyle="#88A",a.strokeRect((s[0]+1)*.5*this.size[0]-4,(s[1]+1)*.5*this.size[1]-4,8,8),a.strokeStyle="#8A8",a.strokeRect((u[0]+1)*.5*this.size[0]-4,(u[1]+1)*.5*this.size[1]-4,8,8);var c=this.size[1]/this._current_buttons.length;a.fillStyle="#AEB";for(var h=0;h<this._current_buttons.length;++h)this._current_buttons[h]&&a.fillRect(0,c*h,6,c)}},n.prototype.onGetOutputs=function(){return[["left_axis","vec2"],["right_axis","vec2"],["left_x_axis","number"],["left_y_axis","number"],["right_x_axis","number"],["right_y_axis","number"],["trigger_left","number"],["trigger_right","number"],["a_button","number"],["b_button","number"],["x_button","number"],["y_button","number"],["lb_button","number"],["rb_button","number"],["ls_button","number"],["rs_button","number"],["start_button","number"],["back_button","number"],["a_button_event",t.EVENT],["b_button_event",t.EVENT],["x_button_event",t.EVENT],["y_button_event",t.EVENT],["lb_button_event",t.EVENT],["rb_button_event",t.EVENT],["ls_button_event",t.EVENT],["rs_button_event",t.EVENT],["start_button_event",t.EVENT],["back_button_event",t.EVENT],["hat_left","number"],["hat_right","number"],["hat_up","number"],["hat_down","number"],["hat","number"],["button_pressed",t.EVENT]]},t.registerNodeType("input/gamepad",n)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.addInput("in",0),this.addOutput("out",0),this.size=[80,30]}n.title="Converter",n.desc="type A to type B",n.prototype.onExecute=function(){var L=this.getInputData(0);if(L!=null&&this.outputs)for(var W=0;W<this.outputs.length;W++){var U=this.outputs[W];if(!(!U.links||!U.links.length)){var V=null;switch(U.name){case"number":V=L.length?L[0]:parseFloat(L);break;case"vec2":case"vec3":case"vec4":var V=null,B=1;switch(U.name){case"vec2":B=2;break;case"vec3":B=3;break;case"vec4":B=4;break}var V=new Float32Array(B);if(L.length)for(var Z=0;Z<L.length&&Z<V.length;Z++)V[Z]=L[Z];else V[0]=parseFloat(L);break}this.setOutputData(W,V)}}},n.prototype.onGetOutputs=function(){return[["number","number"],["vec2","vec2"],["vec3","vec3"],["vec4","vec4"]]},t.registerNodeType("math/converter",n);function a(){this.addInput("in"),this.addOutput("out"),this.size=[80,30]}a.title="Bypass",a.desc="removes the type",a.prototype.onExecute=function(){var L=this.getInputData(0);this.setOutputData(0,L)},t.registerNodeType("math/bypass",a);function s(){this.addInput("in"),this.addOutput("out")}s.title="to Number",s.desc="Cast to number",s.prototype.onExecute=function(){var L=this.getInputData(0);this.setOutputData(0,Number(L))},t.registerNodeType("math/to_number",s);function u(){this.addInput("in","number",{locked:!0}),this.addOutput("out","number",{locked:!0}),this.addOutput("clamped","number",{locked:!0}),this.addProperty("in",0),this.addProperty("in_min",0),this.addProperty("in_max",1),this.addProperty("out_min",0),this.addProperty("out_max",1),this.size=[120,50]}u.title="Range",u.desc="Convert a number from one range to another",u.prototype.getTitle=function(){return this.flags.collapsed?(this._last_v||0).toFixed(2):this.title},u.prototype.onExecute=function(){if(this.inputs)for(var L=0;L<this.inputs.length;L++){var W=this.inputs[L],U=this.getInputData(L);U!==void 0&&(this.properties[W.name]=U)}var U=this.properties.in;(U==null||U.constructor!==Number)&&(U=0);var V=this.properties.in_min,B=this.properties.in_max,Z=this.properties.out_min,ne=this.properties.out_max;this._last_v=(U-V)/(B-V)*(ne-Z)+Z,this.setOutputData(0,this._last_v),this.setOutputData(1,clamp(this._last_v,Z,ne))},u.prototype.onDrawBackground=function(L){this._last_v?this.outputs[0].label=this._last_v.toFixed(3):this.outputs[0].label="?"},u.prototype.onGetInputs=function(){return[["in_min","number"],["in_max","number"],["out_min","number"],["out_max","number"]]},t.registerNodeType("math/range",u);function c(){this.addOutput("value","number"),this.addProperty("min",0),this.addProperty("max",1),this.size=[80,30]}c.title="Rand",c.desc="Random number",c.prototype.onExecute=function(){if(this.inputs)for(var L=0;L<this.inputs.length;L++){var W=this.inputs[L],U=this.getInputData(L);U!==void 0&&(this.properties[W.name]=U)}var V=this.properties.min,B=this.properties.max;this._last_v=Math.random()*(B-V)+V,this.setOutputData(0,this._last_v)},c.prototype.onDrawBackground=function(L){this.outputs[0].label=(this._last_v||0).toFixed(3)},c.prototype.onGetInputs=function(){return[["min","number"],["max","number"]]},t.registerNodeType("math/rand",c);function h(){this.addInput("in","number"),this.addOutput("out","number"),this.addProperty("min",0),this.addProperty("max",1),this.addProperty("smooth",!0),this.addProperty("seed",0),this.addProperty("octaves",1),this.addProperty("persistence",.8),this.addProperty("speed",1),this.size=[90,30]}h.title="Noise",h.desc="Random number with temporal continuity",h.data=null,h.getValue=function(B,W){if(!h.data){h.data=new Float32Array(1024);for(var U=0;U<h.data.length;++U)h.data[U]=Math.random()}B=B%1024,B<0&&(B+=1024);var V=Math.floor(B),B=B-V,Z=h.data[V],ne=h.data[V==1023?0:V+1];return W&&(B=B*B*B*(B*(B*6-15)+10)),Z*(1-B)+ne*B},h.prototype.onExecute=function(){var L=this.getInputData(0)||0,W=this.properties.octaves||1,U=0,V=1,B=this.properties.seed||0;L+=B;for(var Z=this.properties.speed||1,ne=0,oe=0;oe<W&&(U+=h.getValue(L*(1+oe)*Z,this.properties.smooth)*V,ne+=V,V*=this.properties.persistence,!(V<.001));++oe);U/=ne;var ce=this.properties.min,xe=this.properties.max;this._last_v=U*(xe-ce)+ce,this.setOutputData(0,this._last_v)},h.prototype.onDrawBackground=function(L){this.outputs[0].label=(this._last_v||0).toFixed(3)},t.registerNodeType("math/noise",h);function f(){this.addOutput("out","number"),this.addProperty("min_time",1),this.addProperty("max_time",2),this.addProperty("duration",.2),this.size=[90,30],this._remaining_time=0,this._blink_time=0}f.title="Spikes",f.desc="spike every random time",f.prototype.onExecute=function(){var L=this.graph.elapsed_time;this._remaining_time-=L,this._blink_time-=L;var W=0;if(this._blink_time>0){var U=this._blink_time/this.properties.duration;W=1/(Math.pow(U*8-4,4)+1)}this._remaining_time<0?(this._remaining_time=Math.random()*(this.properties.max_time-this.properties.min_time)+this.properties.min_time,this._blink_time=this.properties.duration,this.boxcolor="#FFF"):this.boxcolor="#000",this.setOutputData(0,W)},t.registerNodeType("math/spikes",f);function m(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30],this.addProperty("min",0),this.addProperty("max",1)}m.title="Clamp",m.desc="Clamp number between min and max",m.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&(L=Math.max(this.properties.min,L),L=Math.min(this.properties.max,L),this.setOutputData(0,L))},m.prototype.getCode=function(L){var W="";return this.isInputConnected(0)&&(W+="clamp({{0}},"+this.properties.min+","+this.properties.max+")"),W},t.registerNodeType("math/clamp",m);function _(){this.properties={f:.5},this.addInput("A","number"),this.addInput("B","number"),this.addOutput("out","number")}_.title="Lerp",_.desc="Linear Interpolation",_.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=0);var W=this.getInputData(1);W==null&&(W=0);var U=this.properties.f,V=this.getInputData(2);V!==void 0&&(U=V),this.setOutputData(0,L*(1-U)+W*U)},_.prototype.onGetInputs=function(){return[["f","number"]]},t.registerNodeType("math/lerp",_);function C(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30]}C.title="Abs",C.desc="Absolute",C.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&this.setOutputData(0,Math.abs(L))},t.registerNodeType("math/abs",C);function b(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30]}b.title="Floor",b.desc="Floor number to remove fractional part",b.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&this.setOutputData(0,Math.floor(L))},t.registerNodeType("math/floor",b);function T(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30]}T.title="Frac",T.desc="Returns fractional part",T.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&this.setOutputData(0,L%1)},t.registerNodeType("math/frac",T);function R(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30],this.properties={A:0,B:1}}R.title="Smoothstep",R.desc="Smoothstep",R.prototype.onExecute=function(){var L=this.getInputData(0);if(L!==void 0){var W=this.properties.A,U=this.properties.B;L=clamp((L-W)/(U-W),0,1),L=L*L*(3-2*L),this.setOutputData(0,L)}},t.registerNodeType("math/smoothstep",R);function A(){this.addInput("in","number",{label:""}),this.addOutput("out","number",{label:""}),this.size=[80,30],this.addProperty("factor",1)}A.title="Scale",A.desc="v * factor",A.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&this.setOutputData(0,L*this.properties.factor)},t.registerNodeType("math/scale",A);function I(){this.addInput("v","boolean"),this.addInput("A"),this.addInput("B"),this.addOutput("out")}I.title="Gate",I.desc="if v is true, then outputs A, otherwise B",I.prototype.onExecute=function(){var L=this.getInputData(0);this.setOutputData(0,this.getInputData(L?1:2))},t.registerNodeType("math/gate",I);function P(){this.addInput("in","number"),this.addOutput("out","number"),this.size=[80,30],this.addProperty("samples",10),this._values=new Float32Array(10),this._current=0}P.title="Average",P.desc="Average Filter",P.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=0);var W=this._values.length;this._values[this._current%W]=L,this._current+=1,this._current>W&&(this._current=0);for(var U=0,V=0;V<W;++V)U+=this._values[V];this.setOutputData(0,U/W)},P.prototype.onPropertyChanged=function(L,W){W<1&&(W=1),this.properties.samples=Math.round(W);var U=this._values;this._values=new Float32Array(this.properties.samples),U.length<=this._values.length?this._values.set(U):this._values.set(U.subarray(0,this._values.length))},t.registerNodeType("math/average",P);function N(){this.addInput("in","number"),this.addOutput("out","number"),this.addProperty("factor",.1),this.size=[80,30],this._value=null}N.title="TendTo",N.desc="moves the output value always closer to the input",N.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=0);var W=this.properties.factor;this._value==null?this._value=L:this._value=this._value*(1-W)+L*W,this.setOutputData(0,this._value)},t.registerNodeType("math/tendTo",N);function S(){this.addInput("A","number,array,object"),this.addInput("B","number"),this.addOutput("=","number"),this.addProperty("A",1),this.addProperty("B",1),this.addProperty("OP","+","enum",{values:S.values}),this._func=S.funcs[this.properties.OP],this._result=[]}S.values=["+","-","*","/","%","^","max","min"],S.funcs={"+":function(L,W){return L+W},"-":function(L,W){return L-W},x:function(L,W){return L*W},X:function(L,W){return L*W},"*":function(L,W){return L*W},"/":function(L,W){return L/W},"%":function(L,W){return L%W},"^":function(L,W){return Math.pow(L,W)},max:function(L,W){return Math.max(L,W)},min:function(L,W){return Math.min(L,W)}},S.title="Operation",S.desc="Easy math operators",S["@OP"]={type:"enum",title:"operation",values:S.values},S.size=[100,60],S.prototype.getTitle=function(){return this.properties.OP=="max"||this.properties.OP=="min"?this.properties.OP+"(A,B)":"A "+this.properties.OP+" B"},S.prototype.setValue=function(L){typeof L=="string"&&(L=parseFloat(L)),this.properties.value=L},S.prototype.onPropertyChanged=function(L,W){L=="OP"&&(this._func=S.funcs[this.properties.OP],this._func||(console.warn("Unknown operation: "+this.properties.OP),this._func=function(U){return U}))},S.prototype.onExecute=function(){var L=this.getInputData(0),W=this.getInputData(1);L!=null?L.constructor===Number&&(this.properties.A=L):L=this.properties.A,W!=null?this.properties.B=W:W=this.properties.B;var U=S.funcs[this.properties.OP],V;if(L.constructor===Number)V=0,V=U(L,W);else if(L.constructor===Array){V=this._result,V.length=L.length;for(var B=0;B<L.length;++B)V[B]=U(L[B],W)}else{V={};for(var B in L)V[B]=U(L[B],W)}this.setOutputData(0,V)},S.prototype.onDrawBackground=function(L){this.flags.collapsed||(L.font="40px Arial",L.fillStyle="#666",L.textAlign="center",L.fillText(this.properties.OP,this.size[0]*.5,(this.size[1]+t.NODE_TITLE_HEIGHT)*.5),L.textAlign="left")},t.registerNodeType("math/operation",S),t.registerSearchboxExtra("math/operation","MAX",{properties:{OP:"max"},title:"MAX()"}),t.registerSearchboxExtra("math/operation","MIN",{properties:{OP:"min"},title:"MIN()"});function k(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("A==B","boolean"),this.addOutput("A!=B","boolean"),this.addProperty("A",0),this.addProperty("B",0)}k.title="Compare",k.desc="compares between two values",k.prototype.onExecute=function(){var L=this.getInputData(0),W=this.getInputData(1);L!==void 0?this.properties.A=L:L=this.properties.A,W!==void 0?this.properties.B=W:W=this.properties.B;for(var U=0,V=this.outputs.length;U<V;++U){var B=this.outputs[U];if(!(!B.links||!B.links.length)){var Z;switch(B.name){case"A==B":Z=L==W;break;case"A!=B":Z=L!=W;break;case"A>B":Z=L>W;break;case"A<B":Z=L<W;break;case"A<=B":Z=L<=W;break;case"A>=B":Z=L>=W;break}this.setOutputData(U,Z)}}},k.prototype.onGetOutputs=function(){return[["A==B","boolean"],["A!=B","boolean"],["A>B","boolean"],["A<B","boolean"],["A>=B","boolean"],["A<=B","boolean"]]},t.registerNodeType("math/compare",k),t.registerSearchboxExtra("math/compare","==",{outputs:[["A==B","boolean"]],title:"A==B"}),t.registerSearchboxExtra("math/compare","!=",{outputs:[["A!=B","boolean"]],title:"A!=B"}),t.registerSearchboxExtra("math/compare",">",{outputs:[["A>B","boolean"]],title:"A>B"}),t.registerSearchboxExtra("math/compare","<",{outputs:[["A<B","boolean"]],title:"A<B"}),t.registerSearchboxExtra("math/compare",">=",{outputs:[["A>=B","boolean"]],title:"A>=B"}),t.registerSearchboxExtra("math/compare","<=",{outputs:[["A<=B","boolean"]],title:"A<=B"});function D(){this.addInput("A","number"),this.addInput("B","number"),this.addOutput("true","boolean"),this.addOutput("false","boolean"),this.addProperty("A",1),this.addProperty("B",1),this.addProperty("OP",">","enum",{values:D.values}),this.addWidget("combo","Cond.",this.properties.OP,{property:"OP",values:D.values}),this.size=[80,60]}D.values=[">","<","==","!=","<=",">=","||","&&"],D["@OP"]={type:"enum",title:"operation",values:D.values},D.title="Condition",D.desc="evaluates condition between A and B",D.prototype.getTitle=function(){return"A "+this.properties.OP+" B"},D.prototype.onExecute=function(){var L=this.getInputData(0);L===void 0?L=this.properties.A:this.properties.A=L;var W=this.getInputData(1);W===void 0?W=this.properties.B:this.properties.B=W;var U=!0;switch(this.properties.OP){case">":U=L>W;break;case"<":U=L<W;break;case"==":U=L==W;break;case"!=":U=L!=W;break;case"<=":U=L<=W;break;case">=":U=L>=W;break;case"||":U=L||W;break;case"&&":U=L&&W;break}this.setOutputData(0,U),this.setOutputData(1,!U)},t.registerNodeType("math/condition",D);function M(){this.addInput("in",0),this.addInput("cond","boolean"),this.addOutput("true",0),this.addOutput("false",0),this.size=[80,60]}M.title="Branch",M.desc="If condition is true, outputs IN in true, otherwise in false",M.prototype.onExecute=function(){var L=this.getInputData(0),W=this.getInputData(1);W?(this.setOutputData(0,L),this.setOutputData(1,null)):(this.setOutputData(0,null),this.setOutputData(1,L))},t.registerNodeType("math/branch",M);function j(){this.addInput("inc","number"),this.addOutput("total","number"),this.addProperty("increment",1),this.addProperty("value",0)}j.title="Accumulate",j.desc="Increments a value every time",j.prototype.onExecute=function(){this.properties.value===null&&(this.properties.value=0);var L=this.getInputData(0);L!==null?this.properties.value+=L:this.properties.value+=this.properties.increment,this.setOutputData(0,this.properties.value)},t.registerNodeType("math/accumulate",j);function H(){this.addInput("v","number"),this.addOutput("sin","number"),this.addProperty("amplitude",1),this.addProperty("offset",0),this.bgImageUrl="nodes/imgs/icon-sin.png"}H.title="Trigonometry",H.desc="Sin Cos Tan",H.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=0);var W=this.properties.amplitude,U=this.findInputSlot("amplitude");U!=-1&&(W=this.getInputData(U));var V=this.properties.offset;U=this.findInputSlot("offset"),U!=-1&&(V=this.getInputData(U));for(var B=0,Z=this.outputs.length;B<Z;++B){var ne=this.outputs[B],oe;switch(ne.name){case"sin":oe=Math.sin(L);break;case"cos":oe=Math.cos(L);break;case"tan":oe=Math.tan(L);break;case"asin":oe=Math.asin(L);break;case"acos":oe=Math.acos(L);break;case"atan":oe=Math.atan(L);break}this.setOutputData(B,W*oe+V)}},H.prototype.onGetInputs=function(){return[["v","number"],["amplitude","number"],["offset","number"]]},H.prototype.onGetOutputs=function(){return[["sin","number"],["cos","number"],["tan","number"],["asin","number"],["acos","number"],["atan","number"]]},t.registerNodeType("math/trigonometry",H),t.registerSearchboxExtra("math/trigonometry","SIN()",{outputs:[["sin","number"]],title:"SIN()"}),t.registerSearchboxExtra("math/trigonometry","COS()",{outputs:[["cos","number"]],title:"COS()"}),t.registerSearchboxExtra("math/trigonometry","TAN()",{outputs:[["tan","number"]],title:"TAN()"});function X(){this.addInput("x","number"),this.addInput("y","number"),this.addOutput("","number"),this.properties={x:1,y:1,formula:"x+y"},this.code_widget=this.addWidget("text","F(x,y)",this.properties.formula,function(L,W,U){U.properties.formula=L}),this.addWidget("toggle","allow",t.allow_scripts,function(L){t.allow_scripts=L}),this._func=null}X.title="Formula",X.desc="Compute formula",X.size=[160,100],P.prototype.onPropertyChanged=function(L,W){L=="formula"&&(this.code_widget.value=W)},X.prototype.onExecute=function(){if(t.allow_scripts){var L=this.getInputData(0),W=this.getInputData(1);L!=null?this.properties.x=L:L=this.properties.x,W!=null?this.properties.y=W:W=this.properties.y,this.properties.formula;var U;try{(!this._func||this._func_code!=this.properties.formula)&&(this._func=new Function("x","y","TIME","return "+this.properties.formula),this._func_code=this.properties.formula),U=this._func(L,W,this.graph.globaltime),this.boxcolor=null}catch{this.boxcolor="red"}this.setOutputData(0,U)}},X.prototype.getTitle=function(){return this._func_code||"Formula"},X.prototype.onDrawBackground=function(){var L=this.properties.formula;this.outputs&&this.outputs.length&&(this.outputs[0].label=L)},t.registerNodeType("math/formula",X);function K(){this.addInput("vec2","vec2"),this.addOutput("x","number"),this.addOutput("y","number")}K.title="Vec2->XY",K.desc="vector 2 to components",K.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&(this.setOutputData(0,L[0]),this.setOutputData(1,L[1]))},t.registerNodeType("math3d/vec2-to-xy",K);function re(){this.addInputs([["x","number"],["y","number"]]),this.addOutput("vec2","vec2"),this.properties={x:0,y:0},this._data=new Float32Array(2)}re.title="XY->Vec2",re.desc="components to vector2",re.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=this.properties.x);var W=this.getInputData(1);W==null&&(W=this.properties.y);var U=this._data;U[0]=L,U[1]=W,this.setOutputData(0,U)},t.registerNodeType("math3d/xy-to-vec2",re);function F(){this.addInput("vec3","vec3"),this.addOutput("x","number"),this.addOutput("y","number"),this.addOutput("z","number")}F.title="Vec3->XYZ",F.desc="vector 3 to components",F.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&(this.setOutputData(0,L[0]),this.setOutputData(1,L[1]),this.setOutputData(2,L[2]))},t.registerNodeType("math3d/vec3-to-xyz",F);function J(){this.addInputs([["x","number"],["y","number"],["z","number"]]),this.addOutput("vec3","vec3"),this.properties={x:0,y:0,z:0},this._data=new Float32Array(3)}J.title="XYZ->Vec3",J.desc="components to vector3",J.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=this.properties.x);var W=this.getInputData(1);W==null&&(W=this.properties.y);var U=this.getInputData(2);U==null&&(U=this.properties.z);var V=this._data;V[0]=L,V[1]=W,V[2]=U,this.setOutputData(0,V)},t.registerNodeType("math3d/xyz-to-vec3",J);function z(){this.addInput("vec4","vec4"),this.addOutput("x","number"),this.addOutput("y","number"),this.addOutput("z","number"),this.addOutput("w","number")}z.title="Vec4->XYZW",z.desc="vector 4 to components",z.prototype.onExecute=function(){var L=this.getInputData(0);L!=null&&(this.setOutputData(0,L[0]),this.setOutputData(1,L[1]),this.setOutputData(2,L[2]),this.setOutputData(3,L[3]))},t.registerNodeType("math3d/vec4-to-xyzw",z);function $(){this.addInputs([["x","number"],["y","number"],["z","number"],["w","number"]]),this.addOutput("vec4","vec4"),this.properties={x:0,y:0,z:0,w:0},this._data=new Float32Array(4)}$.title="XYZW->Vec4",$.desc="components to vector4",$.prototype.onExecute=function(){var L=this.getInputData(0);L==null&&(L=this.properties.x);var W=this.getInputData(1);W==null&&(W=this.properties.y);var U=this.getInputData(2);U==null&&(U=this.properties.z);var V=this.getInputData(3);V==null&&(V=this.properties.w);var B=this._data;B[0]=L,B[1]=W,B[2]=U,B[3]=V,this.setOutputData(0,B)},t.registerNodeType("math3d/xyzw-to-vec4",$)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.addInput("T","vec3"),this.addInput("R","vec3"),this.addInput("S","vec3"),this.addOutput("mat4","mat4"),this.properties={T:[0,0,0],R:[0,0,0],S:[1,1,1],R_in_degrees:!0},this._result=mat4.create(),this._must_update=!0}n.title="mat4",n.temp_quat=new Float32Array([0,0,0,1]),n.temp_mat4=new Float32Array(16),n.temp_vec3=new Float32Array(3),n.prototype.onPropertyChanged=function(P,N){this._must_update=!0},n.prototype.onExecute=function(){var P=this._result,N=n.temp_quat,S=n.temp_mat4,k=n.temp_vec3,D=this.getInputData(0),M=this.getInputData(1),j=this.getInputData(2);(this._must_update||D||M||j)&&(D=D||this.properties.T,M=M||this.properties.R,j=j||this.properties.S,mat4.identity(P),mat4.translate(P,P,D),this.properties.R_in_degrees?(k.set(M),vec3.scale(k,k,DEG2RAD),quat.fromEuler(N,k)):quat.fromEuler(N,M),mat4.fromQuat(S,N),mat4.multiply(P,P,S),mat4.scale(P,P,j)),this.setOutputData(0,P)},t.registerNodeType("math3d/mat4",n);function a(){this.addInput("A","number,vec3"),this.addInput("B","number,vec3"),this.addOutput("=","number,vec3"),this.addProperty("OP","+","enum",{values:a.values}),this._result=vec3.create()}a.values=["+","-","*","/","%","^","max","min","dot","cross"],t.registerSearchboxExtra("math3d/operation","CROSS()",{properties:{OP:"cross"},title:"CROSS()"}),t.registerSearchboxExtra("math3d/operation","DOT()",{properties:{OP:"dot"},title:"DOT()"}),a.title="Operation",a.desc="Easy math 3D operators",a["@OP"]={type:"enum",title:"operation",values:a.values},a.size=[100,60],a.prototype.getTitle=function(){return this.properties.OP=="max"||this.properties.OP=="min"?this.properties.OP+"(A,B)":"A "+this.properties.OP+" B"},a.prototype.onExecute=function(){var P=this.getInputData(0),N=this.getInputData(1);if(!(P==null||N==null)){P.constructor===Number&&(P=[P,P,P]),N.constructor===Number&&(N=[N,N,N]);var S=this._result;switch(this.properties.OP){case"+":S=vec3.add(S,P,N);break;case"-":S=vec3.sub(S,P,N);break;case"x":case"X":case"*":S=vec3.mul(S,P,N);break;case"/":S=vec3.div(S,P,N);break;case"%":S[0]=P[0]%N[0],S[1]=P[1]%N[1],S[2]=P[2]%N[2];break;case"^":S[0]=Math.pow(P[0],N[0]),S[1]=Math.pow(P[1],N[1]),S[2]=Math.pow(P[2],N[2]);break;case"max":S[0]=Math.max(P[0],N[0]),S[1]=Math.max(P[1],N[1]),S[2]=Math.max(P[2],N[2]);break;case"min":S[0]=Math.min(P[0],N[0]),S[1]=Math.min(P[1],N[1]),S[2]=Math.min(P[2],N[2]);case"dot":S=vec3.dot(P,N);break;case"cross":vec3.cross(S,P,N);break;default:console.warn("Unknown operation: "+this.properties.OP)}this.setOutputData(0,S)}},a.prototype.onDrawBackground=function(P){this.flags.collapsed||(P.font="40px Arial",P.fillStyle="#666",P.textAlign="center",P.fillText(this.properties.OP,this.size[0]*.5,(this.size[1]+t.NODE_TITLE_HEIGHT)*.5),P.textAlign="left")},t.registerNodeType("math3d/operation",a);function s(){this.addInput("in","vec3"),this.addInput("f","number"),this.addOutput("out","vec3"),this.properties={f:1},this._data=new Float32Array(3)}s.title="vec3_scale",s.desc="scales the components of a vec3",s.prototype.onExecute=function(){var P=this.getInputData(0);if(P!=null){var N=this.getInputData(1);N==null&&(N=this.properties.f);var S=this._data;S[0]=P[0]*N,S[1]=P[1]*N,S[2]=P[2]*N,this.setOutputData(0,S)}},t.registerNodeType("math3d/vec3-scale",s);function u(){this.addInput("in","vec3"),this.addOutput("out","number")}u.title="vec3_length",u.desc="returns the module of a vector",u.prototype.onExecute=function(){var P=this.getInputData(0);if(P!=null){var N=Math.sqrt(P[0]*P[0]+P[1]*P[1]+P[2]*P[2]);this.setOutputData(0,N)}},t.registerNodeType("math3d/vec3-length",u);function c(){this.addInput("in","vec3"),this.addOutput("out","vec3"),this._data=new Float32Array(3)}c.title="vec3_normalize",c.desc="returns the vector normalized",c.prototype.onExecute=function(){var P=this.getInputData(0);if(P!=null){var N=Math.sqrt(P[0]*P[0]+P[1]*P[1]+P[2]*P[2]),S=this._data;S[0]=P[0]/N,S[1]=P[1]/N,S[2]=P[2]/N,this.setOutputData(0,S)}},t.registerNodeType("math3d/vec3-normalize",c);function h(){this.addInput("A","vec3"),this.addInput("B","vec3"),this.addInput("f","vec3"),this.addOutput("out","vec3"),this.properties={f:.5},this._data=new Float32Array(3)}h.title="vec3_lerp",h.desc="returns the interpolated vector",h.prototype.onExecute=function(){var P=this.getInputData(0);if(P!=null){var N=this.getInputData(1);if(N!=null){var S=this.getInputOrProperty("f"),k=this._data;k[0]=P[0]*(1-S)+N[0]*S,k[1]=P[1]*(1-S)+N[1]*S,k[2]=P[2]*(1-S)+N[2]*S,this.setOutputData(0,k)}}},t.registerNodeType("math3d/vec3-lerp",h);function f(){this.addInput("A","vec3"),this.addInput("B","vec3"),this.addOutput("out","number")}if(f.title="vec3_dot",f.desc="returns the dot product",f.prototype.onExecute=function(){var P=this.getInputData(0);if(P!=null){var N=this.getInputData(1);if(N!=null){var S=P[0]*N[0]+P[1]*N[1]+P[2]*N[2];this.setOutputData(0,S)}}},t.registerNodeType("math3d/vec3-dot",f),e.glMatrix){let P=function(){this.addOutput("quat","quat"),this.properties={x:0,y:0,z:0,w:1,normalize:!1},this._value=quat.create()},N=function(){this.addInputs([["degrees","number"],["axis","vec3"]]),this.addOutput("quat","quat"),this.properties={angle:90,axis:vec3.fromValues(0,1,0)},this._value=quat.create()},S=function(){this.addInput("euler","vec3"),this.addOutput("quat","quat"),this.properties={euler:[0,0,0],use_yaw_pitch_roll:!1},this._degs=vec3.create(),this._value=quat.create()},k=function(){this.addInput(["quat","quat"]),this.addOutput("euler","vec3"),this._value=vec3.create()},D=function(){this.addInputs([["vec3","vec3"],["quat","quat"]]),this.addOutput("result","vec3"),this.properties={vec:[0,0,1]}},M=function(){this.addInputs([["A","quat"],["B","quat"]]),this.addOutput("A*B","quat"),this._value=quat.create()},j=function(){this.addInputs([["A","quat"],["B","quat"],["factor","number"]]),this.addOutput("slerp","quat"),this.addProperty("factor",.5),this._value=quat.create()},H=function(){this.addInput("vec3","vec3"),this.addOutput("remap","vec3"),this.addOutput("clamped","vec3"),this.properties={clamp:!0,range_min:[-1,-1,0],range_max:[1,1,0],target_min:[-1,-1,0],target_max:[1,1,0]},this._value=vec3.create(),this._clamped=vec3.create()};var m=P,_=N,C=S,b=k,T=D,R=M,A=j,I=H;P.title="Quaternion",P.desc="quaternion",P.prototype.onExecute=function(){this._value[0]=this.getInputOrProperty("x"),this._value[1]=this.getInputOrProperty("y"),this._value[2]=this.getInputOrProperty("z"),this._value[3]=this.getInputOrProperty("w"),this.properties.normalize&&quat.normalize(this._value,this._value),this.setOutputData(0,this._value)},P.prototype.onGetInputs=function(){return[["x","number"],["y","number"],["z","number"],["w","number"]]},t.registerNodeType("math3d/quaternion",P),N.title="Rotation",N.desc="quaternion rotation",N.prototype.onExecute=function(){var X=this.getInputData(0);X==null&&(X=this.properties.angle);var K=this.getInputData(1);K==null&&(K=this.properties.axis);var re=quat.setAxisAngle(this._value,K,X*.0174532925);this.setOutputData(0,re)},t.registerNodeType("math3d/rotation",N),S.title="Euler->Quat",S.desc="Converts euler angles (in degrees) to quaternion",S.prototype.onExecute=function(){var X=this.getInputData(0);X==null&&(X=this.properties.euler),vec3.scale(this._degs,X,DEG2RAD),this.properties.use_yaw_pitch_roll&&(this._degs=[this._degs[2],this._degs[0],this._degs[1]]);var K=quat.fromEuler(this._value,this._degs);this.setOutputData(0,K)},t.registerNodeType("math3d/euler_to_quat",S),k.title="Euler->Quat",k.desc="Converts rotX,rotY,rotZ in degrees to quat",k.prototype.onExecute=function(){var X=this.getInputData(0);X&&(quat.toEuler(this._value,X),vec3.scale(this._value,this._value,DEG2RAD),this.setOutputData(0,this._value))},t.registerNodeType("math3d/quat_to_euler",k),D.title="Rot. Vec3",D.desc="rotate a point",D.prototype.onExecute=function(){var X=this.getInputData(0);X==null&&(X=this.properties.vec);var K=this.getInputData(1);K==null?this.setOutputData(X):this.setOutputData(0,vec3.transformQuat(vec3.create(),X,K))},t.registerNodeType("math3d/rotate_vec3",D),M.title="Mult. Quat",M.desc="rotate quaternion",M.prototype.onExecute=function(){var X=this.getInputData(0);if(X!=null){var K=this.getInputData(1);if(K!=null){var re=quat.multiply(this._value,X,K);this.setOutputData(0,re)}}},t.registerNodeType("math3d/mult-quat",M),j.title="Quat Slerp",j.desc="quaternion spherical interpolation",j.prototype.onExecute=function(){var X=this.getInputData(0);if(X!=null){var K=this.getInputData(1);if(K!=null){var re=this.properties.factor;this.getInputData(2)!=null&&(re=this.getInputData(2));var F=quat.slerp(this._value,X,K,re);this.setOutputData(0,F)}}},t.registerNodeType("math3d/quat-slerp",j),H.title="Remap Range",H.desc="remap a 3D range",H.prototype.onExecute=function(){var X=this.getInputData(0);X&&this._value.set(X);for(var K=this.properties.range_min,re=this.properties.range_max,F=this.properties.target_min,J=this.properties.target_max,z=0;z<3;++z){var $=re[z]-K[z];if(this._clamped[z]=clamp(this._value[z],K[z],re[z]),$==0){this._value[z]=(F[z]+J[z])*.5;continue}var L=(this._value[z]-K[z])/$;this.properties.clamp&&(L=clamp(L,0,1));var W=J[z]-F[z];this._value[z]=F[z]+L*W}this.setOutputData(0,this._value),this.setOutputData(1,this._clamped)},t.registerNodeType("math3d/remap_range",H)}else t.debug&&console.warn("No glmatrix found, some Math3D nodes may not work")})(litegraph),(function(e){var t=e.LiteGraph;function n(_){if(_&&_.constructor===Object)try{return JSON.stringify(_)}catch{return String(_)}return String(_)}t.wrapFunctionAsNode("string/toString",n,[""],"string");function a(_,C){return _==C}t.wrapFunctionAsNode("string/compare",a,["string","string"],"boolean");function s(_,C){return _===void 0?C:C===void 0?_:_+C}t.wrapFunctionAsNode("string/concatenate",s,["string","string"],"string");function u(_,C){return _===void 0||C===void 0?!1:_.indexOf(C)!=-1}t.wrapFunctionAsNode("string/contains",u,["string","string"],"boolean");function c(_){return _!=null&&_.constructor===String?_.toUpperCase():_}t.wrapFunctionAsNode("string/toUpperCase",c,["string"],"string");function h(_,C){if(C==null&&(C=this.properties.separator),_==null)return[];if(_.constructor===String)return _.split(C||" ");if(_.constructor===Array){for(var b=[],T=0;T<_.length;++T)typeof _[T]=="string"&&(b[T]=_[T].split(C||" "));return b}return null}t.wrapFunctionAsNode("string/split",h,["string,array","string"],"array",{separator:","});function f(_){return _!=null&&_.constructor===Number?_.toFixed(this.properties.precision):_}t.wrapFunctionAsNode("string/toFixed",f,["number"],"string",{precision:0});function m(){this.addInput("","string"),this.addOutput("table","table"),this.addOutput("rows","number"),this.addProperty("value",""),this.addProperty("separator",","),this._table=null}m.title="toTable",m.desc="Splits a string to table",m.prototype.onExecute=function(){var _=this.getInputData(0);if(_){var C=this.properties.separator||",";(_!=this._str||C!=this._last_separator)&&(this._last_separator=C,this._str=_,this._table=_.split(`
`).map(function(b){return b.trim().split(C)})),this.setOutputData(0,this._table),this.setOutputData(1,this._table?this._table.length:0)}},t.registerNodeType("string/toTable",m)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.addInput("sel","number"),this.addInput("A"),this.addInput("B"),this.addInput("C"),this.addInput("D"),this.addOutput("out"),this.selected=0}n.title="Selector",n.desc="selects an output",n.prototype.onDrawBackground=function(m){if(!this.flags.collapsed){m.fillStyle="#AFB";var _=(this.selected+1)*t.NODE_SLOT_HEIGHT+6;m.beginPath(),m.moveTo(50,_),m.lineTo(50,_+t.NODE_SLOT_HEIGHT),m.lineTo(34,_+t.NODE_SLOT_HEIGHT*.5),m.fill()}},n.prototype.onExecute=function(){var m=this.getInputData(0);(m==null||m.constructor!==Number)&&(m=0),this.selected=m=Math.round(m)%(this.inputs.length-1);var _=this.getInputData(m+1);_!==void 0&&this.setOutputData(0,_)},n.prototype.onGetInputs=function(){return[["E",0],["F",0],["G",0],["H",0]]},t.registerNodeType("logic/selector",n);function a(){this.properties={sequence:"A,B,C"},this.addInput("index","number"),this.addInput("seq"),this.addOutput("out"),this.index=0,this.values=this.properties.sequence.split(",")}a.title="Sequence",a.desc="select one element from a sequence from a string",a.prototype.onPropertyChanged=function(m,_){m=="sequence"&&(this.values=_.split(","))},a.prototype.onExecute=function(){var m=this.getInputData(1);m&&m!=this.current_sequence&&(this.values=m.split(","),this.current_sequence=m);var _=this.getInputData(0);_==null&&(_=0),this.index=_=Math.round(_)%this.values.length,this.setOutputData(0,this.values[_])},t.registerNodeType("logic/sequence",a);function s(){this.properties={},this.addInput("a","boolean"),this.addInput("b","boolean"),this.addOutput("out","boolean")}s.title="AND",s.desc="Return true if all inputs are true",s.prototype.onExecute=function(){var m=!0;for(var _ in this.inputs)if(!this.getInputData(_)){var m=!1;break}this.setOutputData(0,m)},s.prototype.onGetInputs=function(){return[["and","boolean"]]},t.registerNodeType("logic/AND",s);function u(){this.properties={},this.addInput("a","boolean"),this.addInput("b","boolean"),this.addOutput("out","boolean")}u.title="OR",u.desc="Return true if at least one input is true",u.prototype.onExecute=function(){var m=!1;for(var _ in this.inputs)if(this.getInputData(_)){m=!0;break}this.setOutputData(0,m)},u.prototype.onGetInputs=function(){return[["or","boolean"]]},t.registerNodeType("logic/OR",u);function c(){this.properties={},this.addInput("in","boolean"),this.addOutput("out","boolean")}c.title="NOT",c.desc="Return the logical negation",c.prototype.onExecute=function(){var m=!this.getInputData(0);this.setOutputData(0,m)},t.registerNodeType("logic/NOT",c);function h(){this.properties={},this.addInput("a","boolean"),this.addInput("b","boolean"),this.addOutput("out","boolean")}h.title="bool == bool",h.desc="Compare for logical equality",h.prototype.onExecute=function(){var m=null,_=!0;for(var C in this.inputs)if(m===null)m=this.getInputData(C);else if(m!=this.getInputData(C)){_=!1;break}this.setOutputData(0,_)},h.prototype.onGetInputs=function(){return[["bool","boolean"]]},t.registerNodeType("logic/CompareBool",h);function f(){this.properties={},this.addInput("onTrigger",t.ACTION),this.addInput("condition","boolean"),this.addOutput("true",t.EVENT),this.addOutput("false",t.EVENT),this.mode=t.ON_TRIGGER}f.title="Branch",f.desc="Branch execution on condition",f.prototype.onExecute=function(m,_){var C=this.getInputData(1);C?this.triggerSlot(0):this.triggerSlot(1)},t.registerNodeType("logic/IF",f)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.addInput("A","Number"),this.addInput("B","Number"),this.addInput("C","Number"),this.addInput("D","Number"),this.values=[[],[],[],[]],this.properties={scale:2}}n.title="Plot",n.desc="Plots data over time",n.colors=["#FFF","#F99","#9F9","#99F"],n.prototype.onExecute=function(T){if(!this.flags.collapsed)for(var R=this.size,A=0;A<4;++A){var I=this.getInputData(A);if(I!=null){var P=this.values[A];P.push(I),P.length>R[0]&&P.shift()}}},n.prototype.onDrawBackground=function(T){if(!this.flags.collapsed){var R=this.size,A=.5*R[1]/this.properties.scale,I=n.colors,P=R[1]*.5;if(T.fillStyle="#000",T.fillRect(0,0,R[0],R[1]),T.strokeStyle="#555",T.beginPath(),T.moveTo(0,P),T.lineTo(R[0],P),T.stroke(),this.inputs)for(var N=0;N<4;++N){var S=this.values[N];if(!(!this.inputs[N]||!this.inputs[N].link)){T.strokeStyle=I[N],T.beginPath();var k=S[0]*A*-1+P;T.moveTo(0,clamp(k,0,R[1]));for(var D=1;D<S.length&&D<R[0];++D){var k=S[D]*A*-1+P;T.lineTo(D,clamp(k,0,R[1]))}T.stroke()}}}},t.registerNodeType("graphics/plot",n);function a(){this.addOutput("frame","image"),this.properties={url:""}}a.title="Image",a.desc="Image loader",a.widgets=[{name:"load",text:"Load",type:"button"}],a.supported_extensions=["jpg","jpeg","png","gif"],a.prototype.onAdded=function(){this.properties.url!=""&&this.img==null&&this.loadImage(this.properties.url)},a.prototype.onDrawBackground=function(T){this.flags.collapsed||this.img&&this.size[0]>5&&this.size[1]>5&&this.img.width&&T.drawImage(this.img,0,0,this.size[0],this.size[1])},a.prototype.onExecute=function(){this.img||(this.boxcolor="#000"),this.img&&this.img.width?this.setOutputData(0,this.img):this.setOutputData(0,null),this.img&&this.img.dirty&&(this.img.dirty=!1)},a.prototype.onPropertyChanged=function(T,R){return this.properties[T]=R,T=="url"&&R!=""&&this.loadImage(R),!0},a.prototype.loadImage=function(T,R){if(T==""){this.img=null;return}this.img=document.createElement("img"),T.substr(0,4)=="http"&&t.proxy&&(T=t.proxy+T.substr(T.indexOf(":")+3)),this.img.src=T,this.boxcolor="#F95";var A=this;this.img.onload=function(){R&&R(this),console.log("Image loaded, size: "+A.img.width+"x"+A.img.height),this.dirty=!0,A.boxcolor="#9F9",A.setDirtyCanvas(!0)},this.img.onerror=function(){console.log("error loading the image:"+T)}},a.prototype.onWidget=function(T,R){R.name=="load"&&this.loadImage(this.properties.url)},a.prototype.onDropFile=function(T){var R=this;this._url&&URL.revokeObjectURL(this._url),this._url=URL.createObjectURL(T),this.properties.url=this._url,this.loadImage(this._url,function(A){R.size[1]=A.height/A.width*R.size[0]})},t.registerNodeType("graphics/image",a);function s(){this.addInput("f","number"),this.addOutput("Color","color"),this.properties={colorA:"#444444",colorB:"#44AAFF",colorC:"#44FFAA",colorD:"#FFFFFF"}}s.title="Palette",s.desc="Generates a color",s.prototype.onExecute=function(){var T=[];this.properties.colorA!=null&&T.push(hex2num(this.properties.colorA)),this.properties.colorB!=null&&T.push(hex2num(this.properties.colorB)),this.properties.colorC!=null&&T.push(hex2num(this.properties.colorC)),this.properties.colorD!=null&&T.push(hex2num(this.properties.colorD));var R=this.getInputData(0);if(R==null&&(R=.5),R>1?R=1:R<0&&(R=0),T.length!=0){var A=[0,0,0];if(R==0)A=T[0];else if(R==1)A=T[T.length-1];else{var I=(T.length-1)*R,P=T[Math.floor(I)],N=T[Math.floor(I)+1],S=I-Math.floor(I);A[0]=P[0]*(1-S)+N[0]*S,A[1]=P[1]*(1-S)+N[1]*S,A[2]=P[2]*(1-S)+N[2]*S}for(var k=0;k<A.length;k++)A[k]/=255;this.boxcolor=colorToString(A),this.setOutputData(0,A)}},t.registerNodeType("color/palette",s);function u(){this.addInput("","image,canvas"),this.size=[200,200]}u.title="Frame",u.desc="Frame viewerew",u.widgets=[{name:"resize",text:"Resize box",type:"button"},{name:"view",text:"View Image",type:"button"}],u.prototype.onDrawBackground=function(T){this.frame&&!this.flags.collapsed&&T.drawImage(this.frame,0,0,this.size[0],this.size[1])},u.prototype.onExecute=function(){this.frame=this.getInputData(0),this.setDirtyCanvas(!0)},u.prototype.onWidget=function(T,R){if(R.name=="resize"&&this.frame){var A=this.frame.width,I=this.frame.height;!A&&this.frame.videoWidth!=null&&(A=this.frame.videoWidth,I=this.frame.videoHeight),A&&I&&(this.size=[A,I]),this.setDirtyCanvas(!0,!0)}else R.name=="view"&&this.show()},u.prototype.show=function(){showElement&&this.frame&&showElement(this.frame)},t.registerNodeType("graphics/frame",u);function c(){this.addInputs([["img1","image"],["img2","image"],["fade","number"]]),this.addOutput("","image"),this.properties={fade:.5,width:512,height:512}}c.title="Image fade",c.desc="Fades between images",c.widgets=[{name:"resizeA",text:"Resize to A",type:"button"},{name:"resizeB",text:"Resize to B",type:"button"}],c.prototype.onAdded=function(){this.createCanvas();var T=this.canvas.getContext("2d");T.fillStyle="#000",T.fillRect(0,0,this.properties.width,this.properties.height)},c.prototype.createCanvas=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.properties.width,this.canvas.height=this.properties.height},c.prototype.onExecute=function(){var T=this.canvas.getContext("2d");this.canvas.width=this.canvas.width;var R=this.getInputData(0);R!=null&&T.drawImage(R,0,0,this.canvas.width,this.canvas.height);var A=this.getInputData(2);A==null?A=this.properties.fade:this.properties.fade=A,T.globalAlpha=A;var I=this.getInputData(1);I!=null&&T.drawImage(I,0,0,this.canvas.width,this.canvas.height),T.globalAlpha=1,this.setOutputData(0,this.canvas),this.setDirtyCanvas(!0)},t.registerNodeType("graphics/imagefade",c);function h(){this.addInput("","image"),this.addOutput("","image"),this.properties={width:256,height:256,x:0,y:0,scale:1},this.size=[50,20]}h.title="Crop",h.desc="Crop Image",h.prototype.onAdded=function(){this.createCanvas()},h.prototype.createCanvas=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.properties.width,this.canvas.height=this.properties.height},h.prototype.onExecute=function(){var T=this.getInputData(0);if(T)if(T.width){var R=this.canvas.getContext("2d");R.drawImage(T,-this.properties.x,-this.properties.y,T.width*this.properties.scale,T.height*this.properties.scale),this.setOutputData(0,this.canvas)}else this.setOutputData(0,null)},h.prototype.onDrawBackground=function(T){this.flags.collapsed||this.canvas&&T.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,this.size[0],this.size[1])},h.prototype.onPropertyChanged=function(T,R){return this.properties[T]=R,T=="scale"?(this.properties[T]=parseFloat(R),this.properties[T]==0&&(console.error("Error in scale"),this.properties[T]=1)):this.properties[T]=parseInt(R),this.createCanvas(),!0},t.registerNodeType("graphics/cropImage",h);function f(){this.addInput("clear",t.ACTION),this.addOutput("","canvas"),this.properties={width:512,height:512,autoclear:!0},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}f.title="Canvas",f.desc="Canvas to render stuff",f.prototype.onExecute=function(){var T=this.canvas,R=this.properties.width|0,A=this.properties.height|0;T.width!=R&&(T.width=R),T.height!=A&&(T.height=A),this.properties.autoclear&&this.ctx.clearRect(0,0,T.width,T.height),this.setOutputData(0,T)},f.prototype.onAction=function(T,R){T=="clear"&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},t.registerNodeType("graphics/canvas",f);function m(){this.addInput("canvas","canvas"),this.addInput("img","image,canvas"),this.addInput("x","number"),this.addInput("y","number"),this.properties={x:0,y:0,opacity:1}}m.title="DrawImage",m.desc="Draws image into a canvas",m.prototype.onExecute=function(){var T=this.getInputData(0);if(T){var R=this.getInputOrProperty("img");if(R){var A=this.getInputOrProperty("x"),I=this.getInputOrProperty("y"),P=T.getContext("2d");P.drawImage(R,A,I)}}},t.registerNodeType("graphics/drawImage",m);function _(){this.addInput("canvas","canvas"),this.addInput("x","number"),this.addInput("y","number"),this.addInput("w","number"),this.addInput("h","number"),this.properties={x:0,y:0,w:10,h:10,color:"white",opacity:1}}_.title="DrawRectangle",_.desc="Draws rectangle in canvas",_.prototype.onExecute=function(){var T=this.getInputData(0);if(T){var R=this.getInputOrProperty("x"),A=this.getInputOrProperty("y"),I=this.getInputOrProperty("w"),P=this.getInputOrProperty("h"),N=T.getContext("2d");N.fillRect(R,A,I,P)}},t.registerNodeType("graphics/drawRectangle",_);function C(){this.addInput("t","number"),this.addOutputs([["frame","image"],["t","number"],["d","number"]]),this.properties={url:"",use_proxy:!0}}C.title="Video",C.desc="Video playback",C.widgets=[{name:"play",text:"PLAY",type:"minibutton"},{name:"stop",text:"STOP",type:"minibutton"},{name:"demo",text:"Demo video",type:"button"},{name:"mute",text:"Mute video",type:"button"}],C.prototype.onExecute=function(){if(this.properties.url&&(this.properties.url!=this._video_url&&this.loadVideo(this.properties.url),!(!this._video||this._video.width==0))){var T=this.getInputData(0);T&&T>=0&&T<=1&&(this._video.currentTime=T*this._video.duration,this._video.pause()),this._video.dirty=!0,this.setOutputData(0,this._video),this.setOutputData(1,this._video.currentTime),this.setOutputData(2,this._video.duration),this.setDirtyCanvas(!0)}},C.prototype.onStart=function(){this.play()},C.prototype.onStop=function(){this.stop()},C.prototype.loadVideo=function(T){this._video_url=T;var R=T.substr(0,10).indexOf(":"),A="";R!=-1&&(A=T.substr(0,R));var I="";A&&(I=T.substr(0,T.indexOf("/",A.length+3)),I=I.substr(A.length+3)),this.properties.use_proxy&&A&&t.proxy&&I!=location.host&&(T=t.proxy+T.substr(T.indexOf(":")+3)),this._video=document.createElement("video"),this._video.src=T,this._video.type="type=video/mp4",this._video.muted=!0,this._video.autoplay=!0;var P=this;this._video.addEventListener("loadedmetadata",function(N){console.log("Duration: "+this.duration+" seconds"),console.log("Size: "+this.videoWidth+","+this.videoHeight),P.setDirtyCanvas(!0),this.width=this.videoWidth,this.height=this.videoHeight}),this._video.addEventListener("progress",function(N){console.log("video loading...")}),this._video.addEventListener("error",function(N){if(console.error("Error loading video: "+this.src),this.error)switch(this.error.code){case this.error.MEDIA_ERR_ABORTED:console.error("You stopped the video.");break;case this.error.MEDIA_ERR_NETWORK:console.error("Network error - please try again later.");break;case this.error.MEDIA_ERR_DECODE:console.error("Video is broken..");break;case this.error.MEDIA_ERR_SRC_NOT_SUPPORTED:console.error("Sorry, your browser can't play this video.");break}}),this._video.addEventListener("ended",function(N){console.log("Video Ended."),this.play()})},C.prototype.onPropertyChanged=function(T,R){return this.properties[T]=R,T=="url"&&R!=""&&this.loadVideo(R),!0},C.prototype.play=function(){this._video&&this._video.videoWidth&&this._video.play()},C.prototype.playPause=function(){this._video&&(this._video.paused?this.play():this.pause())},C.prototype.stop=function(){this._video&&(this._video.pause(),this._video.currentTime=0)},C.prototype.pause=function(){this._video&&(console.log("Video paused"),this._video.pause())},C.prototype.onWidget=function(T,R){},t.registerNodeType("graphics/video",C);function b(){this.addOutput("Webcam","image"),this.properties={filterFacingMode:!1,facingMode:"user"},this.boxcolor="black",this.frame=0}b.title="Webcam",b.desc="Webcam image",b.is_webcam_open=!1,b.prototype.openStream=function(){if(!navigator.mediaDevices.getUserMedia){console.log("getUserMedia() is not supported in your browser, use chrome and enable WebRTC from about://flags");return}this._waiting_confirmation=!0;var T={audio:!1,video:this.properties.filterFacingMode?{facingMode:this.properties.facingMode}:!0};navigator.mediaDevices.getUserMedia(T).then(this.streamReady.bind(this)).catch(A);var R=this;function A(I){console.log("Webcam rejected",I),R._webcam_stream=!1,b.is_webcam_open=!1,R.boxcolor="red",R.trigger("stream_error")}},b.prototype.closeStream=function(){if(this._webcam_stream){var T=this._webcam_stream.getTracks();if(T.length)for(var R=0;R<T.length;++R)T[R].stop();b.is_webcam_open=!1,this._webcam_stream=null,this._video=null,this.boxcolor="black",this.trigger("stream_closed")}},b.prototype.onPropertyChanged=function(T,R){T=="facingMode"&&(this.properties.facingMode=R,this.closeStream(),this.openStream())},b.prototype.onRemoved=function(){this.closeStream()},b.prototype.streamReady=function(T){this._webcam_stream=T,this.boxcolor="green";var R=this._video;R||(R=document.createElement("video"),R.autoplay=!0,R.srcObject=T,this._video=R,R.onloadedmetadata=function(A){console.log(A),b.is_webcam_open=!0}),this.trigger("stream_ready",R)},b.prototype.onExecute=function(){if(this._webcam_stream==null&&!this._waiting_confirmation&&this.openStream(),!(!this._video||!this._video.videoWidth)){this._video.frame=++this.frame,this._video.width=this._video.videoWidth,this._video.height=this._video.videoHeight,this.setOutputData(0,this._video);for(var T=1;T<this.outputs.length;++T)if(this.outputs[T])switch(this.outputs[T].name){case"width":this.setOutputData(T,this._video.videoWidth);break;case"height":this.setOutputData(T,this._video.videoHeight);break}}},b.prototype.getExtraMenuOptions=function(T){var R=this,A=R.properties.show?"Hide Frame":"Show Frame";return[{content:A,callback:function(){R.properties.show=!R.properties.show}}]},b.prototype.onDrawBackground=function(T){this.flags.collapsed||this.size[1]<=20||!this.properties.show||this._video&&(T.save(),T.drawImage(this._video,0,0,this.size[0],this.size[1]),T.restore())},b.prototype.onGetOutputs=function(){return[["width","number"],["height","number"],["stream_ready",t.EVENT],["stream_closed",t.EVENT],["stream_error",t.EVENT]]},t.registerNodeType("graphics/webcam",b)})(litegraph),(function(e){var t=e.LiteGraph,n=e.LGraphCanvas;if(e.LGraphTexture=null,typeof GL>"u")return;n.link_type_colors.Texture="#987";function a(){this.addOutput("tex","Texture"),this.addOutput("name","string"),this.properties={name:"",filter:!0},this.size=[a.image_preview_size,a.image_preview_size]}e.LGraphTexture=a,a.title="Texture",a.desc="Texture",a.widgets_info={name:{widget:"texture"},filter:{widget:"checkbox"}},a.loadTextureCallback=null,a.image_preview_size=256,a.UNDEFINED=0,a.PASS_THROUGH=1,a.COPY=2,a.LOW=3,a.HIGH=4,a.REUSE=5,a.DEFAULT=2,a.MODE_VALUES={undefined:a.UNDEFINED,"pass through":a.PASS_THROUGH,copy:a.COPY,low:a.LOW,high:a.HIGH,reuse:a.REUSE,default:a.DEFAULT},a.getTexturesContainer=function(){return gl.textures},a.loadTexture=function(G,Y){Y=Y||{};var te=G;te.substr(0,7)=="http://"&&t.proxy&&(te=t.proxy+te.substr(7));var ee=a.getTexturesContainer(),se=ee[G]=GL.Texture.fromURL(te,Y);return se},a.getTexture=function(G){var Y=this.getTexturesContainer();if(!Y)throw"Cannot load texture, container of textures not found";var te=Y[G];return!te&&G&&G[0]!=":"?this.loadTexture(G):te},a.getTargetTexture=function(G,Y,te){if(!G)throw"LGraphTexture.getTargetTexture expects a reference texture";var ee=null;switch(te){case a.LOW:ee=gl.UNSIGNED_BYTE;break;case a.HIGH:ee=gl.HIGH_PRECISION_FORMAT;break;case a.REUSE:return G;case a.COPY:default:ee=G?G.type:gl.UNSIGNED_BYTE;break}return(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=ee||Y.format!=G.format)&&(Y=new GL.Texture(G.width,G.height,{type:ee,format:G.format,filter:gl.LINEAR})),Y},a.getTextureType=function(G,Y){var te=Y?Y.type:gl.UNSIGNED_BYTE;switch(G){case a.HIGH:te=gl.HIGH_PRECISION_FORMAT;break;case a.LOW:te=gl.UNSIGNED_BYTE;break}return te},a.getWhiteTexture=function(){if(this._white_texture)return this._white_texture;var G=this._white_texture=GL.Texture.fromMemory(1,1,[255,255,255,255],{format:gl.RGBA,wrap:gl.REPEAT,filter:gl.NEAREST});return G},a.getNoiseTexture=function(){if(this._noise_texture)return this._noise_texture;for(var G=new Uint8Array(512*512*4),Y=0;Y<512*512*4;++Y)G[Y]=Math.random()*255;var te=GL.Texture.fromMemory(512,512,G,{format:gl.RGBA,wrap:gl.REPEAT,filter:gl.NEAREST});return this._noise_texture=te,te},a.prototype.onDropFile=function(G,Y,te){if(!G)this._drop_texture=null,this.properties.name="";else{var ee=null;if(typeof G=="string")ee=GL.Texture.fromURL(G);else if(Y.toLowerCase().indexOf(".dds")!=-1)ee=GL.Texture.fromDDSInMemory(G);else{var se=new Blob([te]),ue=URL.createObjectURL(se);ee=GL.Texture.fromURL(ue)}this._drop_texture=ee,this.properties.name=Y}},a.prototype.getExtraMenuOptions=function(G){var Y=this;if(this._drop_texture)return[{content:"Clear",callback:function(){Y._drop_texture=null,Y.properties.name=""}}]},a.prototype.onExecute=function(){var G=null;if(this.isOutputConnected(1)&&(G=this.getInputData(0)),!G&&this._drop_texture&&(G=this._drop_texture),!G&&this.properties.name&&(G=a.getTexture(this.properties.name)),!G){this.setOutputData(0,null),this.setOutputData(1,"");return}this._last_tex=G,this.properties.filter===!1?G.setParameter(gl.TEXTURE_MAG_FILTER,gl.NEAREST):G.setParameter(gl.TEXTURE_MAG_FILTER,gl.LINEAR),this.setOutputData(0,G),this.setOutputData(1,G.fullpath||G.filename);for(var Y=2;Y<this.outputs.length;Y++){var te=this.outputs[Y];if(te){var ee=null;te.name=="width"?ee=G.width:te.name=="height"?ee=G.height:te.name=="aspect"&&(ee=G.width/G.height),this.setOutputData(Y,ee)}}},a.prototype.onResourceRenamed=function(G,Y){this.properties.name==G&&(this.properties.name=Y)},a.prototype.onDrawBackground=function(G){if(!(this.flags.collapsed||this.size[1]<=20)){if(this._drop_texture&&G.webgl){G.drawImage(this._drop_texture,0,0,this.size[0],this.size[1]);return}if(this._last_preview_tex!=this._last_tex)if(G.webgl)this._canvas=this._last_tex;else{var Y=a.generateLowResTexturePreview(this._last_tex);if(!Y)return;this._last_preview_tex=this._last_tex,this._canvas=cloneCanvas(Y)}this._canvas&&(G.save(),G.webgl||(G.translate(0,this.size[1]),G.scale(1,-1)),G.drawImage(this._canvas,0,0,this.size[0],this.size[1]),G.restore())}},a.generateLowResTexturePreview=function(G){if(!G)return null;var Y=a.image_preview_size,te=G;if(G.format==gl.DEPTH_COMPONENT)return null;(G.width>Y||G.height>Y)&&(te=this._preview_temp_tex,this._preview_temp_tex||(te=new GL.Texture(Y,Y,{minFilter:gl.NEAREST}),this._preview_temp_tex=te),G.copyTo(te),G=te);var ee=this._preview_canvas;return ee||(ee=createCanvas(Y,Y),this._preview_canvas=ee),te&&te.toCanvas(ee),ee},a.prototype.getResources=function(G){return this.properties.name&&(G[this.properties.name]=GL.Texture),G},a.prototype.onGetInputs=function(){return[["in","Texture"]]},a.prototype.onGetOutputs=function(){return[["width","number"],["height","number"],["aspect","number"]]},a.replaceCode=function(G,Y){return G.replace(/\{\{[a-zA-Z0-9_]*\}\}/g,function(te){return te=te.replace(/[\{\}]/g,""),Y[te]||""})},t.registerNodeType("texture/texture",a);function s(){this.addInput("Texture","Texture"),this.properties={flipY:!1},this.size=[a.image_preview_size,a.image_preview_size]}s.title="Preview",s.desc="Show a texture in the graph canvas",s.allow_preview=!1,s.prototype.onDrawBackground=function(G){if(!this.flags.collapsed&&!(!G.webgl&&!s.allow_preview)){var Y=this.getInputData(0);if(Y){var te=null;!Y.handle&&G.webgl?te=Y:te=a.generateLowResTexturePreview(Y),G.save(),this.properties.flipY&&(G.translate(0,this.size[1]),G.scale(1,-1)),G.drawImage(te,0,0,this.size[0],this.size[1]),G.restore()}}},t.registerNodeType("texture/preview",s);function u(){this.addInput("Texture","Texture"),this.addOutput("tex","Texture"),this.addOutput("name","string"),this.properties={name:"",generate_mipmaps:!1}}u.title="Save",u.desc="Save a texture in the repository",u.prototype.getPreviewTexture=function(){return this._texture},u.prototype.onExecute=function(){var G=this.getInputData(0);if(G){if(this.properties.generate_mipmaps&&(G.bind(0),G.setParameter(gl.TEXTURE_MIN_FILTER,gl.LINEAR_MIPMAP_LINEAR),gl.generateMipmap(G.texture_type),G.unbind(0)),this.properties.name)if(a.storeTexture)a.storeTexture(this.properties.name,G);else{var Y=a.getTexturesContainer();Y[this.properties.name]=G}this._texture=G,this.setOutputData(0,G),this.setOutputData(1,this.properties.name)}},t.registerNodeType("texture/save",u);function c(){this.addInput("Texture","Texture"),this.addInput("TextureB","Texture"),this.addInput("value","number"),this.addOutput("Texture","Texture"),this.help="<p>pixelcode must be vec3, uvcode must be vec2, is optional</p>				<p><strong>uv:</strong> tex. coords</p><p><strong>color:</strong> texture <strong>colorB:</strong> textureB</p><p><strong>time:</strong> scene time <strong>value:</strong> input value</p><p>For multiline you must type: result = ...</p>",this.properties={value:1,pixelcode:"color + colorB * value",uvcode:"",precision:a.DEFAULT},this.has_error=!1}c.widgets_info={uvcode:{widget:"code"},pixelcode:{widget:"code"},precision:{widget:"combo",values:a.MODE_VALUES}},c.title="Operation",c.desc="Texture shader operation",c.presets={},c.prototype.getExtraMenuOptions=function(G){var Y=this,te=Y.properties.show?"Hide Texture":"Show Texture";return[{content:te,callback:function(){Y.properties.show=!Y.properties.show}}]},c.prototype.onPropertyChanged=function(){this.has_error=!1},c.prototype.onDrawBackground=function(G){this.flags.collapsed||this.size[1]<=20||!this.properties.show||this._tex&&this._tex.gl==G&&(G.save(),G.drawImage(this._tex,0,0,this.size[0],this.size[1]),G.restore())},c.prototype.onExecute=function(){var G=this.getInputData(0);if(this.isOutputConnected(0)){if(this.properties.precision===a.PASS_THROUGH){this.setOutputData(0,G);return}var Y=this.getInputData(1);if(!(!this.properties.uvcode&&!this.properties.pixelcode)){var te=512,ee=512;G?(te=G.width,ee=G.height):Y&&(te=Y.width,ee=Y.height),Y||(Y=GL.Texture.getWhiteTexture());var se=a.getTextureType(this.properties.precision,G);!G&&!this._tex?this._tex=new GL.Texture(te,ee,{type:se,format:gl.RGBA,filter:gl.LINEAR}):this._tex=a.getTargetTexture(G||this._tex,this._tex,this.properties.precision);var ue="";this.properties.uvcode&&(ue="uv = "+this.properties.uvcode,this.properties.uvcode.indexOf(";")!=-1&&(ue=this.properties.uvcode));var be="";this.properties.pixelcode&&(be="result = "+this.properties.pixelcode,this.properties.pixelcode.indexOf(";")!=-1&&(be=this.properties.pixelcode));var ye=this._shader;if(!this.has_error&&(!ye||this._shader_code!=ue+"|"+be)){var Re=a.replaceCode(c.pixel_shader,{UV_CODE:ue,PIXEL_CODE:be});try{ye=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,Re),this.boxcolor="#00FF00"}catch(Ue){GL.Shader.dumpErrorToConsole(Ue,Shader.SCREEN_VERTEX_SHADER,Re),this.boxcolor="#FF0000",this.has_error=!0;return}this._shader=ye,this._shader_code=ue+"|"+be}if(this._shader){var Le=this.getInputData(2);Le!=null?this.properties.value=Le:Le=parseFloat(this.properties.value);var Oe=this.graph.getTime();this._tex.drawTo(function(){gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.disable(gl.BLEND),G&&G.bind(0),Y&&Y.bind(1);var Ue=Mesh.getScreenQuad();ye.uniforms({u_texture:0,u_textureB:1,value:Le,texSize:[te,ee,1/te,1/ee],time:Oe}).draw(Ue)}),this.setOutputData(0,this._tex)}}}},c.pixel_shader=`precision highp float;
				
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				varying vec2 v_coord;
				uniform vec4 texSize;
				uniform float time;
				uniform float value;
				
				void main() {
					vec2 uv = v_coord;
					{{UV_CODE}};
					vec4 color4 = texture2D(u_texture, uv);
					vec3 color = color4.rgb;
					vec4 color4B = texture2D(u_textureB, uv);
					vec3 colorB = color4B.rgb;
					vec3 result = color;
					float alpha = 1.0;
					{{PIXEL_CODE}};
					gl_FragColor = vec4(result, alpha);
				}
				`,c.registerPreset=function(G,Y){c.presets[G]=Y},c.registerPreset("",""),c.registerPreset("bypass","color"),c.registerPreset("add","color + colorB * value"),c.registerPreset("substract","(color - colorB) * value"),c.registerPreset("mate","mix( color, colorB, color4B.a * value)"),c.registerPreset("invert","vec3(1.0) - color"),c.registerPreset("multiply","color * colorB * value"),c.registerPreset("divide","(color / colorB) / value"),c.registerPreset("difference","abs(color - colorB) * value"),c.registerPreset("max","max(color, colorB) * value"),c.registerPreset("min","min(color, colorB) * value"),c.registerPreset("displace","texture2D(u_texture, uv + (colorB.xy - vec2(0.5)) * value).xyz"),c.registerPreset("grayscale","vec3(color.x + color.y + color.z) * value / 3.0"),c.registerPreset("saturation","mix( vec3(color.x + color.y + color.z) / 3.0, color, value )"),c.registerPreset("normalmap",`
				float z0 = texture2D(u_texture, uv + vec2(-texSize.z, -texSize.w) ).x;
				float z1 = texture2D(u_texture, uv + vec2(0.0, -texSize.w) ).x;
				float z2 = texture2D(u_texture, uv + vec2(texSize.z, -texSize.w) ).x;
				float z3 = texture2D(u_texture, uv + vec2(-texSize.z, 0.0) ).x;
				float z4 = color.x;
				float z5 = texture2D(u_texture, uv + vec2(texSize.z, 0.0) ).x;
				float z6 = texture2D(u_texture, uv + vec2(-texSize.z, texSize.w) ).x;
				float z7 = texture2D(u_texture, uv + vec2(0.0, texSize.w) ).x;
				float z8 = texture2D(u_texture, uv + vec2(texSize.z, texSize.w) ).x;
				vec3 normal = vec3( z2 + 2.0*z4 + z7 - z0 - 2.0*z3 - z5, z5 + 2.0*z6 + z7 -z0 - 2.0*z1 - z2, 1.0 );
				normal.xy *= value;
				result.xyz = normalize(normal) * 0.5 + vec3(0.5);
			`),c.registerPreset("threshold","vec3(color.x > colorB.x * value ? 1.0 : 0.0,color.y > colorB.y * value ? 1.0 : 0.0,color.z > colorB.z * value ? 1.0 : 0.0)"),c.prototype.onInspect=function(G){var Y=this;G.addCombo("Presets","",{values:Object.keys(c.presets),callback:function(te){var ee=c.presets[te];ee&&(Y.setProperty("pixelcode",ee),Y.title=te,G.refresh())}})},t.registerNodeType("texture/operation",c);function h(){this.addOutput("out","Texture"),this.properties={code:"",u_value:1,u_color:[1,1,1,1],width:512,height:512,precision:a.DEFAULT},this.properties.code=h.pixel_shader,this._uniforms={u_value:1,u_color:vec4.create(),in_texture:0,texSize:vec4.create(),time:0}}h.title="Shader",h.desc="Texture shader",h.widgets_info={code:{type:"code",lang:"glsl"},precision:{widget:"combo",values:a.MODE_VALUES}},h.prototype.onPropertyChanged=function(G,Y){if(G=="code"){var te=this.getShader();if(te){var ee=te.uniformInfo;if(this.inputs)for(var se={},ue=0;ue<this.inputs.length;++ue){var be=this.getInputInfo(ue);if(be){if(ee[be.name]&&!se[be.name]){se[be.name]=!0;continue}this.removeInput(ue),ue--}}for(var ue in ee){var be=te.uniformInfo[ue];if(be.loc!==null&&ue!="time"){var ye="number";if(this._shader.samplers[ue])ye="texture";else switch(be.size){case 1:ye="number";break;case 2:ye="vec2";break;case 3:ye="vec3";break;case 4:ye="vec4";break;case 9:ye="mat3";break;case 16:ye="mat4";break;default:continue}var Re=this.findInputSlot(ue);if(Re==-1){this.addInput(ue,ye);continue}var Le=this.getInputInfo(Re);if(!Le)this.addInput(ue,ye);else{if(Le.type==ye)continue;this.removeInput(Re,ye),this.addInput(ue,ye)}}}}}},h.prototype.getShader=function(){if(this._shader&&this._shader_code==this.properties.code)return this._shader;if(this._shader_code=this.properties.code,this._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,this.properties.code),this._shader)this.boxcolor="green";else return this.boxcolor="red",null;return this._shader},h.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getShader();if(G){var Y=0,te=null;if(this.inputs)for(var ee=0;ee<this.inputs.length;++ee){var se=this.getInputInfo(ee),ue=this.getInputData(ee);ue!=null&&(ue.constructor===GL.Texture&&(ue.bind(Y),te||(te=ue),ue=Y,Y++),G.setUniform(se.name,ue))}var be=this._uniforms,ye=a.getTextureType(this.properties.precision,te),Re=this.properties.width|0,Le=this.properties.height|0;Re==0&&(Re=te?te.width:gl.canvas.width),Le==0&&(Le=te?te.height:gl.canvas.height),be.texSize[0]=Re,be.texSize[1]=Le,be.texSize[2]=1/Re,be.texSize[3]=1/Le,be.time=this.graph.getTime(),be.u_value=this.properties.u_value,be.u_color.set(this.properties.u_color),(!this._tex||this._tex.type!=ye||this._tex.width!=Re||this._tex.height!=Le)&&(this._tex=new GL.Texture(Re,Le,{type:ye,format:gl.RGBA,filter:gl.LINEAR}));var Oe=this._tex;Oe.drawTo(function(){G.uniforms(be).draw(GL.Mesh.getScreenQuad())}),this.setOutputData(0,this._tex)}}},h.pixel_shader=`precision highp float;
		
		varying vec2 v_coord;
		uniform float time; //time in seconds
		uniform vec4 texSize; //tex resolution
		uniform float u_value;
		uniform vec4 u_color;

		void main() {
			vec2 uv = v_coord;
			vec3 color = vec3(0.0);
			//your code here
			color.xy=uv;

			gl_FragColor = vec4(color, 1.0);
		}
		`,t.registerNodeType("texture/shader",h);function f(){this.addInput("in","Texture"),this.addInput("scale","vec2"),this.addInput("offset","vec2"),this.addOutput("out","Texture"),this.properties={offset:vec2.fromValues(0,0),scale:vec2.fromValues(1,1),precision:a.DEFAULT}}f.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},f.title="Scale/Offset",f.desc="Applies an scaling and offseting",f.prototype.onExecute=function(){var G=this.getInputData(0);if(!(!this.isOutputConnected(0)||!G)){if(this.properties.precision===a.PASS_THROUGH){this.setOutputData(0,G);return}var Y=G.width,te=G.height,ee=this.precision===a.LOW?gl.UNSIGNED_BYTE:gl.HIGH_PRECISION_FORMAT;this.precision===a.DEFAULT&&(ee=G.type),(!this._tex||this._tex.width!=Y||this._tex.height!=te||this._tex.type!=ee)&&(this._tex=new GL.Texture(Y,te,{type:ee,format:gl.RGBA,filter:gl.LINEAR}));var se=this._shader;se||(se=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,f.pixel_shader));var ue=this.getInputData(1);ue?(this.properties.scale[0]=ue[0],this.properties.scale[1]=ue[1]):ue=this.properties.scale;var be=this.getInputData(2);be?(this.properties.offset[0]=be[0],this.properties.offset[1]=be[1]):be=this.properties.offset,this._tex.drawTo(function(){gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.disable(gl.BLEND),G.bind(0);var ye=Mesh.getScreenQuad();se.uniforms({u_texture:0,u_scale:ue,u_offset:be}).draw(ye)}),this.setOutputData(0,this._tex)}},f.pixel_shader=`precision highp float;
				
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				varying vec2 v_coord;
				uniform vec2 u_scale;
				uniform vec2 u_offset;
				
				void main() {
					vec2 uv = v_coord;
					uv = uv / u_scale - u_offset;
					gl_FragColor = texture2D(u_texture, uv);
				}
				`,t.registerNodeType("texture/scaleOffset",f);function m(){this.addInput("in","Texture"),this.addInput("warp","Texture"),this.addInput("factor","number"),this.addOutput("out","Texture"),this.properties={factor:.01,scale:[1,1],offset:[0,0],precision:a.DEFAULT},this._uniforms={u_texture:0,u_textureB:1,u_factor:1,u_scale:vec2.create(),u_offset:vec2.create()}}m.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},m.title="Warp",m.desc="Texture warp operation",m.prototype.onExecute=function(){var G=this.getInputData(0);if(this.isOutputConnected(0)){if(this.properties.precision===a.PASS_THROUGH){this.setOutputData(0,G);return}var Y=this.getInputData(1),te=512,ee=512;gl.UNSIGNED_BYTE,G?(te=G.width,ee=G.height,G.type):Y&&(te=Y.width,ee=Y.height,Y.type),!G&&!this._tex?this._tex=new GL.Texture(te,ee,{type:this.precision===a.LOW?gl.UNSIGNED_BYTE:gl.HIGH_PRECISION_FORMAT,format:gl.RGBA,filter:gl.LINEAR}):this._tex=a.getTargetTexture(G||this._tex,this._tex,this.properties.precision);var se=this._shader;se||(se=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,m.pixel_shader));var ue=this.getInputData(2);ue!=null?this.properties.factor=ue:ue=parseFloat(this.properties.factor);var be=this._uniforms;be.u_factor=ue,be.u_scale.set(this.properties.scale),be.u_offset.set(this.properties.offset),this._tex.drawTo(function(){gl.disable(gl.DEPTH_TEST),gl.disable(gl.CULL_FACE),gl.disable(gl.BLEND),G&&G.bind(0),Y&&Y.bind(1);var ye=Mesh.getScreenQuad();se.uniforms(be).draw(ye)}),this.setOutputData(0,this._tex)}},m.pixel_shader=`precision highp float;
				
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				varying vec2 v_coord;
				uniform float u_factor;
				uniform vec2 u_scale;
				uniform vec2 u_offset;
				
				void main() {
					vec2 uv = v_coord;
					uv += ( texture2D(u_textureB, uv).rg - vec2(0.5)) * u_factor * u_scale + u_offset;
					gl_FragColor = texture2D(u_texture, uv);
				}
				`,t.registerNodeType("texture/warp",m);function _(){this.addInput("Texture","Texture"),this.properties={additive:!1,antialiasing:!1,filter:!0,disable_alpha:!1,gamma:1,viewport:[0,0,1,1]},this.size[0]=130}_.title="to Viewport",_.desc="Texture to viewport",_._prev_viewport=new Float32Array(4),_.prototype.onDrawBackground=function(G){if(!(this.flags.collapsed||this.size[1]<=40)){var Y=this.getInputData(0);Y&&G.drawImage(G==gl?Y:gl.canvas,10,30,this.size[0]-20,this.size[1]-40)}},_.prototype.onExecute=function(){var G=this.getInputData(0);if(G){this.properties.disable_alpha?gl.disable(gl.BLEND):(gl.enable(gl.BLEND),this.properties.additive?gl.blendFunc(gl.SRC_ALPHA,gl.ONE):gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA)),gl.disable(gl.DEPTH_TEST);var Y=this.properties.gamma||1;this.isInputConnected(1)&&(Y=this.getInputData(1)),G.setParameter(gl.TEXTURE_MAG_FILTER,this.properties.filter?gl.LINEAR:gl.NEAREST);var te=_._prev_viewport;te.set(gl.viewport_data);var ee=this.properties.viewport;if(gl.viewport(te[0]+te[2]*ee[0],te[1]+te[3]*ee[1],te[2]*ee[2],te[3]*ee[3]),gl.getViewport(),this.properties.antialiasing){_._shader||(_._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,_.aa_pixel_shader));var se=Mesh.getScreenQuad();G.bind(0),_._shader.uniforms({u_texture:0,uViewportSize:[G.width,G.height],u_igamma:1/Y,inverseVP:[1/G.width,1/G.height]}).draw(se)}else Y!=1?(_._gamma_shader||(_._gamma_shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,_.gamma_pixel_shader)),G.toViewport(_._gamma_shader,{u_texture:0,u_igamma:1/Y})):G.toViewport();gl.viewport(te[0],te[1],te[2],te[3])}},_.prototype.onGetInputs=function(){return[["gamma","number"]]},_.aa_pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform vec2 uViewportSize;
				uniform vec2 inverseVP;
				uniform float u_igamma;
				#define FXAA_REDUCE_MIN   (1.0/ 128.0)
				#define FXAA_REDUCE_MUL   (1.0 / 8.0)
				#define FXAA_SPAN_MAX     8.0
				
				/* from mitsuhiko/webgl-meincraft based on the code on geeks3d.com */
				vec4 applyFXAA(sampler2D tex, vec2 fragCoord)
				{
					vec4 color = vec4(0.0);
					/*vec2 inverseVP = vec2(1.0 / uViewportSize.x, 1.0 / uViewportSize.y);*/
					vec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * inverseVP).xyz;
					vec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * inverseVP).xyz;
					vec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * inverseVP).xyz;
					vec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * inverseVP).xyz;
					vec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;
					vec3 luma = vec3(0.299, 0.587, 0.114);
					float lumaNW = dot(rgbNW, luma);
					float lumaNE = dot(rgbNE, luma);
					float lumaSW = dot(rgbSW, luma);
					float lumaSE = dot(rgbSE, luma);
					float lumaM  = dot(rgbM,  luma);
					float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
					float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));
					
					vec2 dir;
					dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
					dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));
					
					float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);
					
					float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
					dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * inverseVP;
					
					vec3 rgbA = 0.5 * (texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz + 
						texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
					vec3 rgbB = rgbA * 0.5 + 0.25 * (texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz + 
						texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);
					
					//return vec4(rgbA,1.0);
					float lumaB = dot(rgbB, luma);
					if ((lumaB < lumaMin) || (lumaB > lumaMax))
						color = vec4(rgbA, 1.0);
					else
						color = vec4(rgbB, 1.0);
					if(u_igamma != 1.0)
						color.xyz = pow( color.xyz, vec3(u_igamma) );
					return color;
				}
				
				void main() {
				   gl_FragColor = applyFXAA( u_texture, v_coord * uViewportSize) ;
				}
				`,_.gamma_pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform float u_igamma;
				void main() {
					vec4 color = texture2D( u_texture, v_coord);
					color.xyz = pow(color.xyz, vec3(u_igamma) );
				   gl_FragColor = color;
				}
				`,t.registerNodeType("texture/toviewport",_);function C(){this.addInput("Texture","Texture"),this.addOutput("","Texture"),this.properties={size:0,generate_mipmaps:!1,precision:a.DEFAULT}}C.title="Copy",C.desc="Copy Texture",C.widgets_info={size:{widget:"combo",values:[0,32,64,128,256,512,1024,2048]},precision:{widget:"combo",values:a.MODE_VALUES}},C.prototype.onExecute=function(){var G=this.getInputData(0);if(!(!G&&!this._temp_texture)&&this.isOutputConnected(0)){if(G){var Y=G.width,te=G.height;this.properties.size!=0&&(Y=this.properties.size,te=this.properties.size);var ee=this._temp_texture,se=G.type;if(this.properties.precision===a.LOW?se=gl.UNSIGNED_BYTE:this.properties.precision===a.HIGH&&(se=gl.HIGH_PRECISION_FORMAT),!ee||ee.width!=Y||ee.height!=te||ee.type!=se){var ue=gl.LINEAR;this.properties.generate_mipmaps&&isPowerOfTwo(Y)&&isPowerOfTwo(te)&&(ue=gl.LINEAR_MIPMAP_LINEAR),this._temp_texture=new GL.Texture(Y,te,{type:se,format:gl.RGBA,minFilter:ue,magFilter:gl.LINEAR})}G.copyTo(this._temp_texture),this.properties.generate_mipmaps&&(this._temp_texture.bind(0),gl.generateMipmap(this._temp_texture.texture_type),this._temp_texture.unbind(0))}this.setOutputData(0,this._temp_texture)}},t.registerNodeType("texture/copy",C);function b(){this.addInput("Texture","Texture"),this.addOutput("","Texture"),this.properties={iterations:1,generate_mipmaps:!1,precision:a.DEFAULT}}b.title="Downsample",b.desc="Downsample Texture",b.widgets_info={iterations:{type:"number",step:1,precision:0,min:0},precision:{widget:"combo",values:a.MODE_VALUES}},b.prototype.onExecute=function(){var G=this.getInputData(0);if(!(!G&&!this._temp_texture)&&this.isOutputConnected(0)&&!(!G||G.texture_type!==GL.TEXTURE_2D)){if(this.properties.iterations<1){this.setOutputData(0,G);return}var Y=b._shader;Y||(b._shader=Y=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,b.pixel_shader));var te=G.width|0,ee=G.height|0,se=G.type;this.properties.precision===a.LOW?se=gl.UNSIGNED_BYTE:this.properties.precision===a.HIGH&&(se=gl.HIGH_PRECISION_FORMAT);var ue=this.properties.iterations||1,be=G,ye=null,Re=[],Le={type:se,format:G.format},Oe=vec2.create(),Ue={u_offset:Oe};this._texture&&GL.Texture.releaseTemporary(this._texture);for(var qe=0;qe<ue&&(Oe[0]=1/te,Oe[1]=1/ee,te=te>>1||0,ee=ee>>1||0,ye=GL.Texture.getTemporary(te,ee,Le),Re.push(ye),be.setParameter(GL.TEXTURE_MAG_FILTER,GL.NEAREST),be.copyTo(ye,Y,Ue),!(te==1&&ee==1));++qe)be=ye;this._texture=Re.pop();for(var qe=0;qe<Re.length;++qe)GL.Texture.releaseTemporary(Re[qe]);this.properties.generate_mipmaps&&(this._texture.bind(0),gl.generateMipmap(this._texture.texture_type),this._texture.unbind(0)),this.setOutputData(0,this._texture)}},b.pixel_shader=`precision highp float;
				precision highp float;
				uniform sampler2D u_texture;
				uniform vec2 u_offset;
				varying vec2 v_coord;
				
				void main() {
					vec4 color = texture2D(u_texture, v_coord );
					color += texture2D(u_texture, v_coord + vec2( u_offset.x, 0.0 ) );
					color += texture2D(u_texture, v_coord + vec2( 0.0, u_offset.y ) );
					color += texture2D(u_texture, v_coord + vec2( u_offset.x, u_offset.y ) );
				   gl_FragColor = color * 0.25;
				}
				`,t.registerNodeType("texture/downsample",b);function T(){this.addInput("Texture","Texture"),this.addOutput("","Texture"),this.properties={size:[512,512],generate_mipmaps:!1,precision:a.DEFAULT}}T.title="Resize",T.desc="Resize Texture",T.widgets_info={iterations:{type:"number",step:1,precision:0,min:0},precision:{widget:"combo",values:a.MODE_VALUES}},T.prototype.onExecute=function(){var G=this.getInputData(0);if(!(!G&&!this._temp_texture)&&this.isOutputConnected(0)&&!(!G||G.texture_type!==GL.TEXTURE_2D)){var Y=this.properties.size[0]|0,te=this.properties.size[1]|0;Y==0&&(Y=G.width),te==0&&(te=G.height);var ee=G.type;this.properties.precision===a.LOW?ee=gl.UNSIGNED_BYTE:this.properties.precision===a.HIGH&&(ee=gl.HIGH_PRECISION_FORMAT),(!this._texture||this._texture.width!=Y||this._texture.height!=te||this._texture.type!=ee)&&(this._texture=new GL.Texture(Y,te,{type:ee})),G.copyTo(this._texture),this.properties.generate_mipmaps&&(this._texture.bind(0),gl.generateMipmap(this._texture.texture_type),this._texture.unbind(0)),this.setOutputData(0,this._texture)}},t.registerNodeType("texture/resize",T);function R(){this.addInput("Texture","Texture"),this.addOutput("tex","Texture"),this.addOutput("avg","vec4"),this.addOutput("lum","number"),this.properties={use_previous_frame:!0,high_quality:!1},this._uniforms={u_texture:0,u_mipmap_offset:0},this._luminance=new Float32Array(4)}R.title="Average",R.desc=`Compute a partial average (32 random samples) of a texture and stores it as a 1x1 pixel texture.
 If high_quality is true, then it generates the mipmaps first and reads from the lower one.`,R.prototype.onExecute=function(){this.properties.use_previous_frame||this.updateAverage();var G=this._luminance;this.setOutputData(0,this._temp_texture),this.setOutputData(1,G),this.setOutputData(2,(G[0]+G[1]+G[2])/3)},R.prototype.onPreRenderExecute=function(){this.updateAverage()},R.prototype.updateAverage=function(){var G=this.getInputData(0);if(G&&!(!this.isOutputConnected(0)&&!this.isOutputConnected(1)&&!this.isOutputConnected(2))){if(!R._shader){R._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,R.pixel_shader);for(var Y=new Float32Array(16),te=0;te<Y.length;++te)Y[te]=Math.random();R._shader.uniforms({u_samples_a:Y.subarray(0,16),u_samples_b:Y.subarray(16,32)})}var ee=this._temp_texture,se=gl.UNSIGNED_BYTE;G.type!=se&&(se=gl.FLOAT),(!ee||ee.type!=se)&&(this._temp_texture=new GL.Texture(1,1,{type:se,format:gl.RGBA,filter:gl.NEAREST})),this._uniforms.u_mipmap_offset=0,this.properties.high_quality&&((!this._temp_pot2_texture||this._temp_pot2_texture.type!=se)&&(this._temp_pot2_texture=new GL.Texture(512,512,{type:se,format:gl.RGBA,minFilter:gl.LINEAR_MIPMAP_LINEAR,magFilter:gl.LINEAR})),G.copyTo(this._temp_pot2_texture),G=this._temp_pot2_texture,G.bind(0),gl.generateMipmap(GL.TEXTURE_2D),this._uniforms.u_mipmap_offset=9);var ue=R._shader,be=this._uniforms;if(be.u_mipmap_offset=this.properties.mipmap_offset,gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),this._temp_texture.drawTo(function(){G.toViewport(ue,be)}),this.isOutputConnected(1)||this.isOutputConnected(2)){var ye=this._temp_texture.getPixels();if(ye){var Re=this._luminance,se=this._temp_texture.type;Re.set(ye),se==gl.UNSIGNED_BYTE?vec4.scale(Re,Re,1/255):se==GL.HALF_FLOAT||se==GL.HALF_FLOAT_OES}}}},R.pixel_shader=`precision highp float;
				precision highp float;
				uniform mat4 u_samples_a;
				uniform mat4 u_samples_b;
				uniform sampler2D u_texture;
				uniform float u_mipmap_offset;
				varying vec2 v_coord;
				
				void main() {
					vec4 color = vec4(0.0);
					//random average
					for(int i = 0; i < 4; ++i)
						for(int j = 0; j < 4; ++j)
						{
							color += texture2D(u_texture, vec2( u_samples_a[i][j], u_samples_b[i][j] ), u_mipmap_offset );
							color += texture2D(u_texture, vec2( 1.0 - u_samples_a[i][j], 1.0 - u_samples_b[i][j] ), u_mipmap_offset );
						}
				   gl_FragColor = color * 0.03125;
				}
				`,t.registerNodeType("texture/average",R);function A(){this.addInput("in","Texture"),this.addInput("factor","Number"),this.addOutput("out","Texture"),this.properties={factor:.5},this._uniforms={u_texture:0,u_textureB:1,u_factor:this.properties.factor}}A.title="Smooth",A.desc="Smooth texture over time",A.prototype.onExecute=function(){var G=this.getInputData(0);if(!(!G||!this.isOutputConnected(0))){A._shader||(A._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,A.pixel_shader));var Y=this._temp_texture;if(!Y||Y.type!=G.type||Y.width!=G.width||Y.height!=G.height){var te={type:G.type,format:gl.RGBA,filter:gl.NEAREST};this._temp_texture=new GL.Texture(G.width,G.height,te),this._temp_texture2=new GL.Texture(G.width,G.height,te),G.copyTo(this._temp_texture2)}var ee=this._temp_texture,se=this._temp_texture2,ue=A._shader,be=this._uniforms;be.u_factor=1-this.getInputOrProperty("factor"),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),ee.drawTo(function(){se.bind(1),G.toViewport(ue,be)}),this.setOutputData(0,ee),this._temp_texture=se,this._temp_texture2=ee}},A.pixel_shader=`precision highp float;
				precision highp float;
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				uniform float u_factor;
				varying vec2 v_coord;
				
				void main() {
					gl_FragColor = mix( texture2D( u_texture, v_coord ), texture2D( u_textureB, v_coord ), u_factor );
				}
				`,t.registerNodeType("texture/temporal_smooth",A);function I(){this.addInput("in","Texture"),this.addOutput("avg","Texture"),this.addOutput("array","Texture"),this.properties={samples:64,frames_interval:1},this._uniforms={u_texture:0,u_textureB:1,u_samples:this.properties.samples,u_isamples:1/this.properties.samples},this.frame=0}I.title="Lineal Avg Smooth",I.desc="Smooth texture linearly over time",I["@samples"]={type:"number",min:1,max:64,step:1,precision:1},I.prototype.getPreviewTexture=function(){return this._temp_texture2},I.prototype.onExecute=function(){var G=this.getInputData(0);if(!(!G||!this.isOutputConnected(0))){I._shader||(I._shader_copy=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,I.pixel_shader_copy),I._shader_avg=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,I.pixel_shader_avg));var Y=clamp(this.properties.samples,0,64),te=this.frame,ee=this.properties.frames_interval;if(ee==0||te%ee==0){var se=this._temp_texture;if(!se||se.type!=G.type||se.width!=Y){var ue={type:G.type,format:gl.RGBA,filter:gl.NEAREST};this._temp_texture=new GL.Texture(Y,1,ue),this._temp_texture2=new GL.Texture(Y,1,ue),this._temp_texture_out=new GL.Texture(1,1,ue)}var be=this._temp_texture,ye=this._temp_texture2,Re=I._shader_copy,Le=I._shader_avg,Oe=this._uniforms;Oe.u_samples=Y,Oe.u_isamples=1/Y,gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),be.drawTo(function(){ye.bind(1),G.toViewport(Re,Oe)}),this._temp_texture_out.drawTo(function(){be.toViewport(Le,Oe)}),this.setOutputData(0,this._temp_texture_out),this._temp_texture=ye,this._temp_texture2=be}else this.setOutputData(0,this._temp_texture_out);this.setOutputData(1,this._temp_texture2),this.frame++}},I.pixel_shader_copy=`precision highp float;
				precision highp float;
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				uniform float u_isamples;
				varying vec2 v_coord;
				
				void main() {
					if( v_coord.x <= u_isamples )
						gl_FragColor = texture2D( u_texture, vec2(0.5) );
					else
						gl_FragColor = texture2D( u_textureB, v_coord - vec2(u_isamples,0.0) );
				}
				`,I.pixel_shader_avg=`precision highp float;
				precision highp float;
				uniform sampler2D u_texture;
				uniform int u_samples;
				uniform float u_isamples;
				varying vec2 v_coord;
				
				void main() {
					vec4 color = vec4(0.0);
					for(int i = 0; i < 64; ++i)
					{
						color += texture2D( u_texture, vec2( float(i)*u_isamples,0.0) );
						if(i == (u_samples - 1))
							break;
					}
					gl_FragColor = color * u_isamples;
				}
				`,t.registerNodeType("texture/linear_avg_smooth",I);function P(){this.addInput("Image","image"),this.addOutput("","Texture"),this.properties={}}P.title="Image to Texture",P.desc="Uploads an image to the GPU",P.prototype.onExecute=function(){var G=this.getInputData(0);if(G){var Y=G.videoWidth||G.width,te=G.videoHeight||G.height;if(G.gltexture){this.setOutputData(0,G.gltexture);return}var ee=this._temp_texture;(!ee||ee.width!=Y||ee.height!=te)&&(this._temp_texture=new GL.Texture(Y,te,{format:gl.RGBA,filter:gl.LINEAR}));try{this._temp_texture.uploadImage(G)}catch(se){console.error("image comes from an unsafe location, cannot be uploaded to webgl: "+se);return}this.setOutputData(0,this._temp_texture)}},t.registerNodeType("texture/imageToTexture",P);function N(){this.addInput("Texture","Texture"),this.addInput("LUT","Texture"),this.addInput("Intensity","number"),this.addOutput("","Texture"),this.properties={enabled:!0,intensity:1,precision:a.DEFAULT,texture:null},N._shader||(N._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,N.pixel_shader))}N.widgets_info={texture:{widget:"texture"},precision:{widget:"combo",values:a.MODE_VALUES}},N.title="LUT",N.desc="Apply LUT to Texture",N.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(this.properties.precision===a.PASS_THROUGH||this.properties.enabled===!1){this.setOutputData(0,G);return}if(G){var Y=this.getInputData(1);if(Y||(Y=a.getTexture(this.properties.texture)),!Y){this.setOutputData(0,G);return}Y.bind(0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.bindTexture(gl.TEXTURE_2D,null);var te=this.properties.intensity;this.isInputConnected(2)&&(this.properties.intensity=te=this.getInputData(2)),this._tex=a.getTargetTexture(G,this._tex,this.properties.precision),this._tex.drawTo(function(){Y.bind(1),G.toViewport(N._shader,{u_texture:0,u_textureB:1,u_amount:te})}),this.setOutputData(0,this._tex)}}},N.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				uniform float u_amount;
				
				void main() {
					 lowp vec4 textureColor = clamp( texture2D(u_texture, v_coord), vec4(0.0), vec4(1.0) );
					 mediump float blueColor = textureColor.b * 63.0;
					 mediump vec2 quad1;
					 quad1.y = floor(floor(blueColor) / 8.0);
					 quad1.x = floor(blueColor) - (quad1.y * 8.0);
					 mediump vec2 quad2;
					 quad2.y = floor(ceil(blueColor) / 8.0);
					 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
					 highp vec2 texPos1;
					 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);
					 texPos1.y = 1.0 - ((quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g));
					 highp vec2 texPos2;
					 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.r);
					 texPos2.y = 1.0 - ((quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * textureColor.g));
					 lowp vec4 newColor1 = texture2D(u_textureB, texPos1);
					 lowp vec4 newColor2 = texture2D(u_textureB, texPos2);
					 lowp vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
					 gl_FragColor = vec4( mix( textureColor.rgb, newColor.rgb, u_amount), textureColor.w);
				}
				`,t.registerNodeType("texture/LUT",N);function S(){this.addInput("Texture","Texture"),this.addInput("Atlas","Texture"),this.addOutput("","Texture"),this.properties={enabled:!0,num_row_symbols:4,symbol_size:16,brightness:1,colorize:!1,filter:!1,invert:!1,precision:a.DEFAULT,generate_mipmaps:!1,texture:null},S._shader||(S._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,S.pixel_shader)),this._uniforms={u_texture:0,u_textureB:1,u_row_simbols:4,u_simbol_size:16,u_res:vec2.create()}}S.widgets_info={texture:{widget:"texture"},precision:{widget:"combo",values:a.MODE_VALUES}},S.title="Encode",S.desc="Apply a texture atlas to encode a texture",S.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(this.properties.precision===a.PASS_THROUGH||this.properties.enabled===!1){this.setOutputData(0,G);return}if(G){var Y=this.getInputData(1);if(Y||(Y=a.getTexture(this.properties.texture)),!Y){this.setOutputData(0,G);return}Y.bind(0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,this.properties.filter?gl.LINEAR:gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,this.properties.filter?gl.LINEAR:gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE),gl.bindTexture(gl.TEXTURE_2D,null);var te=this._uniforms;te.u_row_simbols=Math.floor(this.properties.num_row_symbols),te.u_symbol_size=this.properties.symbol_size,te.u_brightness=this.properties.brightness,te.u_invert=this.properties.invert?1:0,te.u_colorize=this.properties.colorize?1:0,this._tex=a.getTargetTexture(G,this._tex,this.properties.precision),te.u_res[0]=this._tex.width,te.u_res[1]=this._tex.height,this._tex.bind(0),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST),this._tex.drawTo(function(){Y.bind(1),G.toViewport(S._shader,te)}),this.properties.generate_mipmaps&&(this._tex.bind(0),gl.generateMipmap(this._tex.texture_type),this._tex.unbind(0)),this.setOutputData(0,this._tex)}}},S.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform sampler2D u_textureB;
				uniform float u_row_simbols;
				uniform float u_symbol_size;
				uniform float u_brightness;
				uniform float u_invert;
				uniform float u_colorize;
				uniform vec2 u_res;
				
				void main() {
					vec2 total_symbols = u_res / u_symbol_size;
					vec2 uv = floor(v_coord * total_symbols) / total_symbols; //pixelate 
					vec2 local_uv = mod(v_coord * u_res, u_symbol_size) / u_symbol_size;
					lowp vec4 textureColor = texture2D(u_texture, uv );
					float lum = clamp(u_brightness * (textureColor.x + textureColor.y + textureColor.z)/3.0,0.0,1.0);
					if( u_invert == 1.0 ) lum = 1.0 - lum;
					float index = floor( lum * (u_row_simbols * u_row_simbols - 1.0));
					float col = mod( index, u_row_simbols );
					float row = u_row_simbols - floor( index / u_row_simbols ) - 1.0;
					vec2 simbol_uv = ( vec2( col, row ) + local_uv ) / u_row_simbols;
					vec4 color = texture2D( u_textureB, simbol_uv );
					if(u_colorize == 1.0)
						color *= textureColor;
					gl_FragColor = color;
				}
				`,t.registerNodeType("texture/encode",S);function k(){this.addInput("Texture","Texture"),this.addOutput("R","Texture"),this.addOutput("G","Texture"),this.addOutput("B","Texture"),this.addOutput("A","Texture"),k._shader||(k._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,k.pixel_shader))}k.title="Texture to Channels",k.desc="Split texture channels",k.prototype.onExecute=function(){var G=this.getInputData(0);if(G){this._channels||(this._channels=Array(4));for(var Y=gl.RGB,te=0,ee=0;ee<4;ee++)this.isOutputConnected(ee)?((!this._channels[ee]||this._channels[ee].width!=G.width||this._channels[ee].height!=G.height||this._channels[ee].type!=G.type||this._channels[ee].format!=Y)&&(this._channels[ee]=new GL.Texture(G.width,G.height,{type:G.type,format:Y,filter:gl.LINEAR})),te++):this._channels[ee]=null;if(te){gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);for(var se=Mesh.getScreenQuad(),ue=k._shader,be=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],ee=0;ee<4;ee++)this._channels[ee]&&(this._channels[ee].drawTo(function(){G.bind(0),ue.uniforms({u_texture:0,u_mask:be[ee]}).draw(se)}),this.setOutputData(ee,this._channels[ee]))}}},k.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform vec4 u_mask;
				
				void main() {
				   gl_FragColor = vec4( vec3( length( texture2D(u_texture, v_coord) * u_mask )), 1.0 );
				}
				`,t.registerNodeType("texture/textureChannels",k);function D(){this.addInput("R","Texture"),this.addInput("G","Texture"),this.addInput("B","Texture"),this.addInput("A","Texture"),this.addOutput("Texture","Texture"),this.properties={precision:a.DEFAULT,R:1,G:1,B:1,A:1},this._color=vec4.create(),this._uniforms={u_textureR:0,u_textureG:1,u_textureB:2,u_textureA:3,u_color:this._color}}D.title="Channels to Texture",D.desc="Split texture channels",D.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},D.prototype.onExecute=function(){var G=a.getWhiteTexture(),Y=this.getInputData(0)||G,te=this.getInputData(1)||G,ee=this.getInputData(2)||G,se=this.getInputData(3)||G;gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var ue=Mesh.getScreenQuad();D._shader||(D._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,D.pixel_shader));var be=D._shader,ye=Math.max(Y.width,te.width,ee.width,se.width),Re=Math.max(Y.height,te.height,ee.height,se.height),Le=this.properties.precision==a.HIGH?a.HIGH_PRECISION_FORMAT:gl.UNSIGNED_BYTE;(!this._texture||this._texture.width!=ye||this._texture.height!=Re||this._texture.type!=Le)&&(this._texture=new GL.Texture(ye,Re,{type:Le,format:gl.RGBA,filter:gl.LINEAR}));var Oe=this._color;Oe[0]=this.properties.R,Oe[1]=this.properties.G,Oe[2]=this.properties.B,Oe[3]=this.properties.A;var Ue=this._uniforms;this._texture.drawTo(function(){Y.bind(0),te.bind(1),ee.bind(2),se.bind(3),be.uniforms(Ue).draw(ue)}),this.setOutputData(0,this._texture)},D.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_textureR;
				uniform sampler2D u_textureG;
				uniform sampler2D u_textureB;
				uniform sampler2D u_textureA;
				uniform vec4 u_color;
				
				void main() {
				   gl_FragColor = u_color * vec4( 							texture2D(u_textureR, v_coord).r,							texture2D(u_textureG, v_coord).r,							texture2D(u_textureB, v_coord).r,							texture2D(u_textureA, v_coord).r);
				}
				`,t.registerNodeType("texture/channelsTexture",D);function M(){this.addOutput("Texture","Texture"),this._tex_color=vec4.create(),this.properties={color:vec4.create(),precision:a.DEFAULT}}M.title="Color",M.desc="Generates a 1x1 texture with a constant color",M.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},M.prototype.onDrawBackground=function(G){var Y=this.properties.color;G.fillStyle="rgb("+Math.floor(clamp(Y[0],0,1)*255)+","+Math.floor(clamp(Y[1],0,1)*255)+","+Math.floor(clamp(Y[2],0,1)*255)+")",this.flags.collapsed?this.boxcolor=G.fillStyle:G.fillRect(0,0,this.size[0],this.size[1])},M.prototype.onExecute=function(){var G=this.properties.precision==a.HIGH?a.HIGH_PRECISION_FORMAT:gl.UNSIGNED_BYTE;(!this._tex||this._tex.type!=G)&&(this._tex=new GL.Texture(1,1,{format:gl.RGBA,type:G,minFilter:gl.NEAREST}));var Y=this.properties.color;if(this.inputs)for(var te=0;te<this.inputs.length;te++){var ee=this.inputs[te],se=this.getInputData(te);if(se!==void 0)switch(ee.name){case"RGB":case"RGBA":Y.set(se);break;case"R":Y[0]=se;break;case"G":Y[1]=se;break;case"B":Y[2]=se;break;case"A":Y[3]=se;break}}vec4.sqrDist(this._tex_color,Y)>.001&&(this._tex_color.set(Y),this._tex.fill(Y)),this.setOutputData(0,this._tex)},M.prototype.onGetInputs=function(){return[["RGB","vec3"],["RGBA","vec4"],["R","number"],["G","number"],["B","number"],["A","number"]]},t.registerNodeType("texture/color",M);function j(){this.addInput("A","color"),this.addInput("B","color"),this.addOutput("Texture","Texture"),this.properties={angle:0,scale:1,A:[0,0,0],B:[1,1,1],texture_size:32},j._shader||(j._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,j.pixel_shader)),this._uniforms={u_angle:0,u_colorA:vec3.create(),u_colorB:vec3.create()}}j.title="Gradient",j.desc="Generates a gradient",j["@A"]={type:"color"},j["@B"]={type:"color"},j["@texture_size"]={type:"enum",values:[32,64,128,256,512]},j.prototype.onExecute=function(){gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var G=GL.Mesh.getScreenQuad(),Y=j._shader,te=this.getInputData(0);te||(te=this.properties.A);var ee=this.getInputData(1);ee||(ee=this.properties.B);for(var se=2;se<this.inputs.length;se++){var ue=this.inputs[se],be=this.getInputData(se);be!==void 0&&(this.properties[ue.name]=be)}var ye=this._uniforms;this._uniforms.u_angle=this.properties.angle*DEG2RAD,this._uniforms.u_scale=this.properties.scale,vec3.copy(ye.u_colorA,te),vec3.copy(ye.u_colorB,ee);var Re=parseInt(this.properties.texture_size);(!this._tex||this._tex.width!=Re)&&(this._tex=new GL.Texture(Re,Re,{format:gl.RGB,filter:gl.LINEAR})),this._tex.drawTo(function(){Y.uniforms(ye).draw(G)}),this.setOutputData(0,this._tex)},j.prototype.onGetInputs=function(){return[["angle","number"],["scale","number"]]},j.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform float u_angle;
				uniform float u_scale;
				uniform vec3 u_colorA;
				uniform vec3 u_colorB;
				
				vec2 rotate(vec2 v, float angle)
				{
					vec2 result;
					float _cos = cos(angle);
					float _sin = sin(angle);
					result.x = v.x * _cos - v.y * _sin;
					result.y = v.x * _sin + v.y * _cos;
					return result;
				}
				void main() {
					float f = (rotate(u_scale * (v_coord - vec2(0.5)), u_angle) + vec2(0.5)).x;
					vec3 color = mix(u_colorA,u_colorB,clamp(f,0.0,1.0));
				   gl_FragColor = vec4(color,1.0);
				}
				`,t.registerNodeType("texture/gradient",j);function H(){this.addInput("A","Texture"),this.addInput("B","Texture"),this.addInput("Mixer","Texture"),this.addOutput("Texture","Texture"),this.properties={factor:.5,size_from_biggest:!0,invert:!1,precision:a.DEFAULT},this._uniforms={u_textureA:0,u_textureB:1,u_textureMix:2,u_mix:vec4.create()}}H.title="Mix",H.desc="Generates a texture mixing two textures",H.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},H.prototype.onExecute=function(){var G=this.getInputData(0);if(this.isOutputConnected(0)){if(this.properties.precision===a.PASS_THROUGH){this.setOutputData(0,G);return}var Y=this.getInputData(1);if(!(!G||!Y)){var te=this.getInputData(2),ee=this.getInputData(3);this._tex=a.getTargetTexture(this.properties.size_from_biggest&&Y.width>G.width?Y:G,this._tex,this.properties.precision),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var se=Mesh.getScreenQuad(),ue=null,be=this._uniforms;if(te)ue=H._shader_tex,ue||(ue=H._shader_tex=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,H.pixel_shader,{MIX_TEX:""}));else{ue=H._shader_factor,ue||(ue=H._shader_factor=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,H.pixel_shader));var ye=ee??this.properties.factor;be.u_mix.set([ye,ye,ye,ye])}var Re=this.properties.invert;this._tex.drawTo(function(){G.bind(Re?1:0),Y.bind(Re?0:1),te&&te.bind(2),ue.uniforms(be).draw(se)}),this.setOutputData(0,this._tex)}}},H.prototype.onGetInputs=function(){return[["factor","number"]]},H.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_textureA;
				uniform sampler2D u_textureB;
				#ifdef MIX_TEX
					uniform sampler2D u_textureMix;
				#else
					uniform vec4 u_mix;
				#endif
				
				void main() {
					#ifdef MIX_TEX
					   vec4 f = texture2D(u_textureMix, v_coord);
					#else
					   vec4 f = u_mix;
					#endif
				   gl_FragColor = mix( texture2D(u_textureA, v_coord), texture2D(u_textureB, v_coord), f );
				}
				`,t.registerNodeType("texture/mix",H);function X(){this.addInput("Tex.","Texture"),this.addOutput("Edges","Texture"),this.properties={invert:!0,threshold:!1,factor:1,precision:a.DEFAULT},X._shader||(X._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,X.pixel_shader))}X.title="Edges",X.desc="Detects edges",X.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},X.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(this.properties.precision===a.PASS_THROUGH){this.setOutputData(0,G);return}if(G){this._tex=a.getTargetTexture(G,this._tex,this.properties.precision),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var Y=Mesh.getScreenQuad(),te=X._shader,ee=this.properties.invert,se=this.properties.factor,ue=this.properties.threshold?1:0;this._tex.drawTo(function(){G.bind(0),te.uniforms({u_texture:0,u_isize:[1/G.width,1/G.height],u_factor:se,u_threshold:ue,u_invert:ee?1:0}).draw(Y)}),this.setOutputData(0,this._tex)}}},X.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform vec2 u_isize;
				uniform int u_invert;
				uniform float u_factor;
				uniform float u_threshold;
				
				void main() {
					vec4 center = texture2D(u_texture, v_coord);
					vec4 up = texture2D(u_texture, v_coord + u_isize * vec2(0.0,1.0) );
					vec4 down = texture2D(u_texture, v_coord + u_isize * vec2(0.0,-1.0) );
					vec4 left = texture2D(u_texture, v_coord + u_isize * vec2(1.0,0.0) );
					vec4 right = texture2D(u_texture, v_coord + u_isize * vec2(-1.0,0.0) );
					vec4 diff = abs(center - up) + abs(center - down) + abs(center - left) + abs(center - right);
					diff *= u_factor;
					if(u_invert == 1)
						diff.xyz = vec3(1.0) - diff.xyz;
					if( u_threshold == 0.0 )
						gl_FragColor = vec4( diff.xyz, center.a );
					else
						gl_FragColor = vec4( diff.x > 0.5 ? 1.0 : 0.0, diff.y > 0.5 ? 1.0 : 0.0, diff.z > 0.5 ? 1.0 : 0.0, center.a );
				}
				`,t.registerNodeType("texture/edges",X);function K(){this.addInput("Texture","Texture"),this.addInput("Distance","number"),this.addInput("Range","number"),this.addOutput("Texture","Texture"),this.properties={distance:100,range:50,only_depth:!1,high_precision:!1},this._uniforms={u_texture:0,u_distance:100,u_range:50,u_camera_planes:null}}K.title="Depth Range",K.desc="Generates a texture with a depth range",K.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(G){var Y=gl.UNSIGNED_BYTE;this.properties.high_precision&&(Y=gl.half_float_ext?gl.HALF_FLOAT_OES:gl.FLOAT),(!this._temp_texture||this._temp_texture.type!=Y||this._temp_texture.width!=G.width||this._temp_texture.height!=G.height)&&(this._temp_texture=new GL.Texture(G.width,G.height,{type:Y,format:gl.RGBA,filter:gl.LINEAR}));var te=this._uniforms,ee=this.properties.distance;this.isInputConnected(1)&&(ee=this.getInputData(1),this.properties.distance=ee);var se=this.properties.range;this.isInputConnected(2)&&(se=this.getInputData(2),this.properties.range=se),te.u_distance=ee,te.u_range=se,gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var ue=Mesh.getScreenQuad();K._shader||(K._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,K.pixel_shader),K._shader_onlydepth=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,K.pixel_shader,{ONLY_DEPTH:""}));var be=this.properties.only_depth?K._shader_onlydepth:K._shader,ye=null;G.near_far_planes?ye=G.near_far_planes:window.LS&&LS.Renderer._main_camera?ye=LS.Renderer._main_camera._uniforms.u_camera_planes:ye=[.1,1e3],te.u_camera_planes=ye,this._temp_texture.drawTo(function(){G.bind(0),be.uniforms(te).draw(ue)}),this._temp_texture.near_far_planes=ye,this.setOutputData(0,this._temp_texture)}}},K.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform vec2 u_camera_planes;
				uniform float u_distance;
				uniform float u_range;
				
				float LinearDepth()
				{
					float zNear = u_camera_planes.x;
					float zFar = u_camera_planes.y;
					float depth = texture2D(u_texture, v_coord).x;
					depth = depth * 2.0 - 1.0;
					return zNear * (depth + 1.0) / (zFar + zNear - depth * (zFar - zNear));
				}
				
				void main() {
					float depth = LinearDepth();
					#ifdef ONLY_DEPTH
					   gl_FragColor = vec4(depth);
					#else
						float diff = abs(depth * u_camera_planes.y - u_distance);
						float dof = 1.0;
						if(diff <= u_range)
							dof = diff / u_range;
					   gl_FragColor = vec4(dof);
					#endif
				}
				`,t.registerNodeType("texture/depth_range",K);function re(){this.addInput("Texture","Texture"),this.addOutput("Texture","Texture"),this.properties={precision:a.DEFAULT,invert:!1},this._uniforms={u_texture:0,u_camera_planes:null,u_ires:vec2.create()}}re.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},re.title="Linear Depth",re.desc="Creates a color texture with linear depth",re.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(!(!G||G.format!=gl.DEPTH_COMPONENT&&G.format!=gl.DEPTH_STENCIL)){var Y=this.properties.precision==a.HIGH?gl.HIGH_PRECISION_FORMAT:gl.UNSIGNED_BYTE;(!this._temp_texture||this._temp_texture.type!=Y||this._temp_texture.width!=G.width||this._temp_texture.height!=G.height)&&(this._temp_texture=new GL.Texture(G.width,G.height,{type:Y,format:gl.RGB,filter:gl.LINEAR}));var te=this._uniforms;te.u_invert=this.properties.invert?1:0,gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var ee=Mesh.getScreenQuad();re._shader||(re._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,re.pixel_shader));var se=re._shader,ue=null;G.near_far_planes?ue=G.near_far_planes:window.LS&&LS.Renderer._main_camera?ue=LS.Renderer._main_camera._uniforms.u_camera_planes:ue=[.1,1e3],te.u_camera_planes=ue,te.u_ires.set([0,0]),this._temp_texture.drawTo(function(){G.bind(0),se.uniforms(te).draw(ee)}),this._temp_texture.near_far_planes=ue,this.setOutputData(0,this._temp_texture)}}},re.pixel_shader=`precision highp float;
				precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform vec2 u_camera_planes;
				uniform int u_invert;
				uniform vec2 u_ires;
				
				void main() {
					float zNear = u_camera_planes.x;
					float zFar = u_camera_planes.y;
					float depth = texture2D(u_texture, v_coord + u_ires*0.5).x * 2.0 - 1.0;
					float f = zNear * (depth + 1.0) / (zFar + zNear - depth * (zFar - zNear));
					if( u_invert == 1 )
						f = 1.0 - f;
					gl_FragColor = vec4(vec3(f),1.0);
				}
				`,t.registerNodeType("texture/linear_depth",re);function F(){this.addInput("Texture","Texture"),this.addInput("Iterations","number"),this.addInput("Intensity","number"),this.addOutput("Blurred","Texture"),this.properties={intensity:1,iterations:1,preserve_aspect:!1,scale:[1,1],precision:a.DEFAULT}}F.title="Blur",F.desc="Blur a texture",F.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},F.max_iterations=20,F.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isOutputConnected(0)){var Y=this._final_texture;(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=G.type)&&(Y=this._final_texture=new GL.Texture(G.width,G.height,{type:G.type,format:gl.RGBA,filter:gl.LINEAR}));var te=this.properties.iterations;if(this.isInputConnected(1)&&(te=this.getInputData(1),this.properties.iterations=te),te=Math.min(Math.floor(te),F.max_iterations),te==0){this.setOutputData(0,G);return}var ee=this.properties.intensity;this.isInputConnected(2)&&(ee=this.getInputData(2),this.properties.intensity=ee);var se=t.camera_aspect;!se&&window.gl!==void 0&&(se=gl.canvas.height/gl.canvas.width),se||(se=1),se=this.properties.preserve_aspect?se:1;var ue=this.properties.scale||[1,1];G.applyBlur(se*ue[0],ue[1],ee,Y);for(var be=1;be<te;++be)Y.applyBlur(se*ue[0]*(be+1),ue[1]*(be+1),ee);this.setOutputData(0,Y)}},t.registerNodeType("texture/blur",F);function J(){this.intensity=.5,this.persistence=.6,this.iterations=8,this.threshold=.8,this.scale=1,this.dirt_texture=null,this.dirt_factor=.5,this._textures=[],this._uniforms={u_intensity:1,u_texture:0,u_glow_texture:1,u_threshold:0,u_texel_size:vec2.create()}}J.prototype.applyFX=function(G,Y,te,ee){var se=G.width,ue=G.height,be={format:G.format,type:G.type,minFilter:GL.LINEAR,magFilter:GL.LINEAR,wrap:gl.CLAMP_TO_EDGE},ye=this._uniforms,Re=this._textures,He=J._cut_shader;He||(He=J._cut_shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,J.cut_pixel_shader)),gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),ye.u_threshold=this.threshold;var Le=Re[0]=GL.Texture.getTemporary(se,ue,be);G.blit(Le,He.uniforms(ye));var Oe=Le,Ue=this.iterations;Ue=clamp(Ue,1,16)|0;var qe=ye.u_texel_size,rt=this.intensity;ye.u_intensity=1,ye.u_delta=this.scale;var He=J._shader;He||(He=J._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,J.scale_pixel_shader));for(var Ae=1;Ae<Ue&&(se=se>>1,(ue|0)>1&&(ue=ue>>1),!(se<2));Ae++)Le=Re[Ae]=GL.Texture.getTemporary(se,ue,be),qe[0]=1/Oe.width,qe[1]=1/Oe.height,Oe.blit(Le,He.uniforms(ye)),Oe=Le;for(ee&&(qe[0]=1/Oe.width,qe[1]=1/Oe.height,ye.u_intensity=rt,ye.u_delta=1,Oe.blit(ee,He.uniforms(ye))),gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE),ye.u_intensity=this.persistence,ye.u_delta=.5,Ae-=2;Ae>=0;Ae--)Le=Re[Ae],Re[Ae]=null,qe[0]=1/Oe.width,qe[1]=1/Oe.height,Oe.blit(Le,He.uniforms(ye)),GL.Texture.releaseTemporary(Oe),Oe=Le;if(gl.disable(gl.BLEND),te&&Oe.blit(te),Y){var xt=Y,lt=this.dirt_texture,Gt=this.dirt_factor;ye.u_intensity=rt,He=lt?J._dirt_final_shader:J._final_shader,He||(lt?He=J._dirt_final_shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,J.final_pixel_shader,{USE_DIRT:""}):He=J._final_shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,J.final_pixel_shader)),xt.drawTo(function(){G.bind(0),Oe.bind(1),lt&&(He.setUniform("u_dirt_factor",Gt),He.setUniform("u_dirt_texture",lt.bind(2))),He.toViewport(ye)})}GL.Texture.releaseTemporary(Oe)},J.cut_pixel_shader=`precision highp float;
			varying vec2 v_coord;
			uniform sampler2D u_texture;
			uniform float u_threshold;
			void main() {
				gl_FragColor = max( texture2D( u_texture, v_coord ) - vec4( u_threshold ), vec4(0.0) );
			}`,J.scale_pixel_shader=`precision highp float;
			varying vec2 v_coord;
			uniform sampler2D u_texture;
			uniform vec2 u_texel_size;
			uniform float u_delta;
			uniform float u_intensity;
			
			vec4 sampleBox(vec2 uv) {
				vec4 o = u_texel_size.xyxy * vec2(-u_delta, u_delta).xxyy;
				vec4 s = texture2D( u_texture, uv + o.xy ) + texture2D( u_texture, uv + o.zy) + texture2D( u_texture, uv + o.xw) + texture2D( u_texture, uv + o.zw);
				return s * 0.25;
			}
			void main() {
				gl_FragColor = u_intensity * sampleBox( v_coord );
			}`,J.final_pixel_shader=`precision highp float;
			varying vec2 v_coord;
			uniform sampler2D u_texture;
			uniform sampler2D u_glow_texture;
			#ifdef USE_DIRT
				uniform sampler2D u_dirt_texture;
			#endif
			uniform vec2 u_texel_size;
			uniform float u_delta;
			uniform float u_intensity;
			uniform float u_dirt_factor;
			
			vec4 sampleBox(vec2 uv) {
				vec4 o = u_texel_size.xyxy * vec2(-u_delta, u_delta).xxyy;
				vec4 s = texture2D( u_glow_texture, uv + o.xy ) + texture2D( u_glow_texture, uv + o.zy) + texture2D( u_glow_texture, uv + o.xw) + texture2D( u_glow_texture, uv + o.zw);
				return s * 0.25;
			}
			void main() {
				vec4 glow = sampleBox( v_coord );
				#ifdef USE_DIRT
					glow = mix( glow, glow * texture2D( u_dirt_texture, v_coord ), u_dirt_factor );
				#endif
				gl_FragColor = texture2D( u_texture, v_coord ) + u_intensity * glow;
			}`;function z(){this.addInput("in","Texture"),this.addInput("dirt","Texture"),this.addOutput("out","Texture"),this.addOutput("glow","Texture"),this.properties={enabled:!0,intensity:1,persistence:.99,iterations:16,threshold:0,scale:1,dirt_factor:.5,precision:a.DEFAULT},this.fx=new J}z.title="Glow",z.desc="Filters a texture giving it a glow effect",z.widgets_info={iterations:{type:"number",min:0,max:16,step:1,precision:0},threshold:{type:"number",min:0,max:10,step:.01,precision:2},precision:{widget:"combo",values:a.MODE_VALUES}},z.prototype.onGetInputs=function(){return[["enabled","boolean"],["threshold","number"],["intensity","number"],["persistence","number"],["iterations","number"],["dirt_factor","number"]]},z.prototype.onGetOutputs=function(){return[["average","Texture"]]},z.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isAnyOutputConnected()){if(this.properties.precision===a.PASS_THROUGH||this.getInputOrProperty("enabled")===!1){this.setOutputData(0,G);return}G.width,G.height;var Y=this.fx;Y.threshold=this.getInputOrProperty("threshold"),Y.iterations=this.getInputOrProperty("iterations"),Y.intensity=this.getInputOrProperty("intensity"),Y.persistence=this.getInputOrProperty("persistence"),Y.dirt_texture=this.getInputData(1),Y.dirt_factor=this.getInputOrProperty("dirt_factor"),Y.scale=this.properties.scale;var te=a.getTextureType(this.properties.precision,G),ee=null;this.isOutputConnected(2)&&(ee=this._average_texture,(!ee||ee.type!=G.type||ee.format!=G.format)&&(ee=this._average_texture=new GL.Texture(1,1,{type:G.type,format:G.format,filter:gl.LINEAR})));var se=null;this.isOutputConnected(1)&&(se=this._glow_texture,(!se||se.width!=G.width||se.height!=G.height||se.type!=te||se.format!=G.format)&&(se=this._glow_texture=new GL.Texture(G.width,G.height,{type:te,format:G.format,filter:gl.LINEAR})));var ue=null;this.isOutputConnected(0)&&(ue=this._final_texture,(!ue||ue.width!=G.width||ue.height!=G.height||ue.type!=te||ue.format!=G.format)&&(ue=this._final_texture=new GL.Texture(G.width,G.height,{type:te,format:G.format,filter:gl.LINEAR}))),Y.applyFX(G,ue,se,ee),this.isOutputConnected(0)&&this.setOutputData(0,ue),this.isOutputConnected(1)&&this.setOutputData(1,ee),this.isOutputConnected(2)&&this.setOutputData(2,se)}},t.registerNodeType("texture/glow",z);function $(){this.addInput("Texture","Texture"),this.addOutput("Filtered","Texture"),this.properties={intensity:1,radius:5}}$.title="Kuwahara Filter",$.desc="Filters a texture giving an artistic oil canvas painting",$.max_radius=10,$._shaders=[],$.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isOutputConnected(0)){var Y=this._temp_texture;(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=G.type)&&(this._temp_texture=new GL.Texture(G.width,G.height,{type:G.type,format:gl.RGBA,filter:gl.LINEAR}));var te=this.properties.radius;if(te=Math.min(Math.floor(te),$.max_radius),te==0){this.setOutputData(0,G);return}var ee=this.properties.intensity,se=t.camera_aspect;!se&&window.gl!==void 0&&(se=gl.canvas.height/gl.canvas.width),se||(se=1),se=this.properties.preserve_aspect?se:1,$._shaders[te]||($._shaders[te]=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,$.pixel_shader,{RADIUS:te.toFixed(0)}));var ue=$._shaders[te],be=GL.Mesh.getScreenQuad();G.bind(0),this._temp_texture.drawTo(function(){ue.uniforms({u_texture:0,u_intensity:ee,u_resolution:[G.width,G.height],u_iResolution:[1/G.width,1/G.height]}).draw(be)}),this.setOutputData(0,this._temp_texture)}},$.pixel_shader=`
		precision highp float;
		varying vec2 v_coord;
		uniform sampler2D u_texture;
		uniform float u_intensity;
		uniform vec2 u_resolution;
		uniform vec2 u_iResolution;
		#ifndef RADIUS
			#define RADIUS 7
		#endif
		void main() {
		
			const int radius = RADIUS;
			vec2 fragCoord = v_coord;
			vec2 src_size = u_iResolution;
			vec2 uv = v_coord;
			float n = float((radius + 1) * (radius + 1));
			int i;
			int j;
			vec3 m0 = vec3(0.0); vec3 m1 = vec3(0.0); vec3 m2 = vec3(0.0); vec3 m3 = vec3(0.0);
			vec3 s0 = vec3(0.0); vec3 s1 = vec3(0.0); vec3 s2 = vec3(0.0); vec3 s3 = vec3(0.0);
			vec3 c;
			
			for (int j = -radius; j <= 0; ++j)  {
				for (int i = -radius; i <= 0; ++i)  {
					c = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;
					m0 += c;
					s0 += c * c;
				}
			}
			
			for (int j = -radius; j <= 0; ++j)  {
				for (int i = 0; i <= radius; ++i)  {
					c = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;
					m1 += c;
					s1 += c * c;
				}
			}
			
			for (int j = 0; j <= radius; ++j)  {
				for (int i = 0; i <= radius; ++i)  {
					c = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;
					m2 += c;
					s2 += c * c;
				}
			}
			
			for (int j = 0; j <= radius; ++j)  {
				for (int i = -radius; i <= 0; ++i)  {
					c = texture2D(u_texture, uv + vec2(i,j) * src_size).rgb;
					m3 += c;
					s3 += c * c;
				}
			}
			
			float min_sigma2 = 1e+2;
			m0 /= n;
			s0 = abs(s0 / n - m0 * m0);
			
			float sigma2 = s0.r + s0.g + s0.b;
			if (sigma2 < min_sigma2) {
				min_sigma2 = sigma2;
				gl_FragColor = vec4(m0, 1.0);
			}
			
			m1 /= n;
			s1 = abs(s1 / n - m1 * m1);
			
			sigma2 = s1.r + s1.g + s1.b;
			if (sigma2 < min_sigma2) {
				min_sigma2 = sigma2;
				gl_FragColor = vec4(m1, 1.0);
			}
			
			m2 /= n;
			s2 = abs(s2 / n - m2 * m2);
			
			sigma2 = s2.r + s2.g + s2.b;
			if (sigma2 < min_sigma2) {
				min_sigma2 = sigma2;
				gl_FragColor = vec4(m2, 1.0);
			}
			
			m3 /= n;
			s3 = abs(s3 / n - m3 * m3);
			
			sigma2 = s3.r + s3.g + s3.b;
			if (sigma2 < min_sigma2) {
				min_sigma2 = sigma2;
				gl_FragColor = vec4(m3, 1.0);
			}
		}
		`,t.registerNodeType("texture/kuwahara",$);function L(){this.addInput("Texture","Texture"),this.addOutput("Filtered","Texture"),this.properties={sigma:1.4,k:1.6,p:21.7,epsilon:79,phi:.017}}L.title="XDoG Filter",L.desc="Filters a texture giving an artistic ink style",L.max_radius=10,L._shaders=[],L.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isOutputConnected(0)){var Y=this._temp_texture;(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=G.type)&&(this._temp_texture=new GL.Texture(G.width,G.height,{type:G.type,format:gl.RGBA,filter:gl.LINEAR})),L._xdog_shader||(L._xdog_shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,L.xdog_pixel_shader));var te=L._xdog_shader,ee=GL.Mesh.getScreenQuad(),se=this.properties.sigma,ue=this.properties.k,be=this.properties.p,ye=this.properties.epsilon,Re=this.properties.phi;G.bind(0),this._temp_texture.drawTo(function(){te.uniforms({src:0,sigma:se,k:ue,p:be,epsilon:ye,phi:Re,cvsWidth:G.width,cvsHeight:G.height}).draw(ee)}),this.setOutputData(0,this._temp_texture)}},L.xdog_pixel_shader=`
		precision highp float;
		uniform sampler2D src;

		uniform float cvsHeight;
		uniform float cvsWidth;

		uniform float sigma;
		uniform float k;
		uniform float p;
		uniform float epsilon;
		uniform float phi;
		varying vec2 v_coord;

		float cosh(float val)
		{
			float tmp = exp(val);
			float cosH = (tmp + 1.0 / tmp) / 2.0;
			return cosH;
		}

		float tanh(float val)
		{
			float tmp = exp(val);
			float tanH = (tmp - 1.0 / tmp) / (tmp + 1.0 / tmp);
			return tanH;
		}

		float sinh(float val)
		{
			float tmp = exp(val);
			float sinH = (tmp - 1.0 / tmp) / 2.0;
			return sinH;
		}

		void main(void){
			vec3 destColor = vec3(0.0);
			float tFrag = 1.0 / cvsHeight;
			float sFrag = 1.0 / cvsWidth;
			vec2 Frag = vec2(sFrag,tFrag);
			vec2 uv = gl_FragCoord.st;
			float twoSigmaESquared = 2.0 * sigma * sigma;
			float twoSigmaRSquared = twoSigmaESquared * k * k;
			int halfWidth = int(ceil( 1.0 * sigma * k ));

			const int MAX_NUM_ITERATION = 99999;
			vec2 sum = vec2(0.0);
			vec2 norm = vec2(0.0);

			for(int cnt=0;cnt<MAX_NUM_ITERATION;cnt++){
				if(cnt > (2*halfWidth+1)*(2*halfWidth+1)){break;}
				int i = int(cnt / (2*halfWidth+1)) - halfWidth;
				int j = cnt - halfWidth - int(cnt / (2*halfWidth+1)) * (2*halfWidth+1);

				float d = length(vec2(i,j));
				vec2 kernel = vec2( exp( -d * d / twoSigmaESquared ), 
									exp( -d * d / twoSigmaRSquared ));

				vec2 L = texture2D(src, (uv + vec2(i,j)) * Frag).xx;

				norm += kernel;
				sum += kernel * L;
			}

			sum /= norm;

			float H = 100.0 * ((1.0 + p) * sum.x - p * sum.y);
			float edge = ( H > epsilon )? 1.0 : 1.0 + tanh( phi * (H - epsilon));
			destColor = vec3(edge);
			gl_FragColor = vec4(destColor, 1.0);
		}`,t.registerNodeType("texture/xDoG",L);function W(){this.addOutput("Webcam","Texture"),this.properties={texture_name:"",facingMode:"user"},this.boxcolor="black",this.version=0}W.title="Webcam",W.desc="Webcam texture",W.is_webcam_open=!1,W.prototype.openStream=function(){if(!navigator.getUserMedia)return;this._waiting_confirmation=!0;var G={audio:!1,video:{facingMode:this.properties.facingMode}};navigator.mediaDevices.getUserMedia(G).then(this.streamReady.bind(this)).catch(te);var Y=this;function te(ee){W.is_webcam_open=!1,console.log("Webcam rejected",ee),Y._webcam_stream=!1,Y.boxcolor="red",Y.trigger("stream_error")}},W.prototype.closeStream=function(){if(this._webcam_stream){var G=this._webcam_stream.getTracks();if(G.length)for(var Y=0;Y<G.length;++Y)G[Y].stop();W.is_webcam_open=!1,this._webcam_stream=null,this._video=null,this.boxcolor="black",this.trigger("stream_closed")}},W.prototype.streamReady=function(G){this._webcam_stream=G,this.boxcolor="green";var Y=this._video;Y||(Y=document.createElement("video"),Y.autoplay=!0,Y.srcObject=G,this._video=Y,Y.onloadedmetadata=function(te){W.is_webcam_open=!0,console.log(te)}),this.trigger("stream_ready",Y)},W.prototype.onPropertyChanged=function(G,Y){G=="facingMode"&&(this.properties.facingMode=Y,this.closeStream(),this.openStream())},W.prototype.onRemoved=function(){if(this._webcam_stream){var G=this._webcam_stream.getTracks();if(G.length)for(var Y=0;Y<G.length;++Y)G[Y].stop();this._webcam_stream=null,this._video=null}},W.prototype.onDrawBackground=function(G){this.flags.collapsed||this.size[1]<=20||this._video&&(G.save(),G.webgl?this._video_texture&&G.drawImage(this._video_texture,0,0,this.size[0],this.size[1]):G.drawImage(this._video,0,0,this.size[0],this.size[1]),G.restore())},W.prototype.onExecute=function(){if(this._webcam_stream==null&&!this._waiting_confirmation&&this.openStream(),!(!this._video||!this._video.videoWidth)){var G=this._video.videoWidth,Y=this._video.videoHeight,te=this._video_texture;if((!te||te.width!=G||te.height!=Y)&&(this._video_texture=new GL.Texture(G,Y,{format:gl.RGB,filter:gl.LINEAR})),this._video_texture.uploadImage(this._video),this._video_texture.version=++this.version,this.properties.texture_name){var ee=a.getTexturesContainer();ee[this.properties.texture_name]=this._video_texture}this.setOutputData(0,this._video_texture);for(var se=1;se<this.outputs.length;++se)if(this.outputs[se])switch(this.outputs[se].name){case"width":this.setOutputData(se,this._video.videoWidth);break;case"height":this.setOutputData(se,this._video.videoHeight);break}}},W.prototype.onGetOutputs=function(){return[["width","number"],["height","number"],["stream_ready",t.EVENT],["stream_closed",t.EVENT],["stream_error",t.EVENT]]},t.registerNodeType("texture/webcam",W);function U(){this.addInput("in","Texture"),this.addInput("f","number"),this.addOutput("out","Texture"),this.properties={enabled:!0,factor:1,precision:a.LOW},this._uniforms={u_texture:0,u_factor:1}}U.title="Lens FX",U.desc="distortion and chromatic aberration",U.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},U.prototype.onGetInputs=function(){return[["enabled","boolean"]]},U.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isOutputConnected(0)){if(this.properties.precision===a.PASS_THROUGH||this.getInputOrProperty("enabled")===!1){this.setOutputData(0,G);return}var Y=this._temp_texture;(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=G.type)&&(Y=this._temp_texture=new GL.Texture(G.width,G.height,{type:G.type,format:gl.RGBA,filter:gl.LINEAR}));var te=U._shader;te||(te=U._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,U.pixel_shader));var ee=this.getInputData(1);ee==null&&(ee=this.properties.factor);var se=this._uniforms;se.u_factor=ee,gl.disable(gl.DEPTH_TEST),Y.drawTo(function(){G.bind(0),te.uniforms(se).draw(GL.Mesh.getScreenQuad())}),this.setOutputData(0,Y)}},U.pixel_shader=`precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform float u_factor;
				vec2 barrelDistortion(vec2 coord, float amt) {
					vec2 cc = coord - 0.5;
					float dist = dot(cc, cc);
					return coord + cc * dist * amt;
				}
				
				float sat( float t )
				{
					return clamp( t, 0.0, 1.0 );
				}
				
				float linterp( float t ) {
					return sat( 1.0 - abs( 2.0*t - 1.0 ) );
				}
				
				float remap( float t, float a, float b ) {
					return sat( (t - a) / (b - a) );
				}
				
				vec4 spectrum_offset( float t ) {
					vec4 ret;
					float lo = step(t,0.5);
					float hi = 1.0-lo;
					float w = linterp( remap( t, 1.0/6.0, 5.0/6.0 ) );
					ret = vec4(lo,1.0,hi, 1.) * vec4(1.0-w, w, 1.0-w, 1.);
				
					return pow( ret, vec4(1.0/2.2) );
				}
				
				const float max_distort = 2.2;
				const int num_iter = 12;
				const float reci_num_iter_f = 1.0 / float(num_iter);
				
				void main()
				{	
					vec2 uv=v_coord;
					vec4 sumcol = vec4(0.0);
					vec4 sumw = vec4(0.0);	
					for ( int i=0; i<num_iter;++i )
					{
						float t = float(i) * reci_num_iter_f;
						vec4 w = spectrum_offset( t );
						sumw += w;
						sumcol += w * texture2D( u_texture, barrelDistortion(uv, .6 * max_distort*t * u_factor ) );
					}
					gl_FragColor = sumcol / sumw;
				}`,t.registerNodeType("texture/lensfx",U);function V(){this.addInput("in",""),this.properties={precision:a.LOW,width:0,height:0,channels:1},this.addOutput("out","Texture")}V.title="Data->Tex",V.desc="Generates or applies a curve to a texture",V.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},V.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(G){var Y=this.properties.channels,te=this.properties.width,ee=this.properties.height;(!te||!ee)&&(te=Math.floor(G.length/Y),ee=1);var se=gl.RGBA;Y==3?se=gl.RGB:Y==1&&(se=gl.LUMINANCE);var ue=this._temp_texture,be=a.getTextureType(this.properties.precision);(!ue||ue.width!=te||ue.height!=ee||ue.type!=be)&&(ue=this._temp_texture=new GL.Texture(te,ee,{type:be,format:se,filter:gl.LINEAR})),ue.uploadData(G),this.setOutputData(0,ue)}}},t.registerNodeType("texture/fromdata",V);function B(){this.addInput("in","Texture"),this.addOutput("out","Texture"),this.properties={precision:a.LOW,split_channels:!1},this._values=new Uint8Array(256*4),this._values.fill(255),this._curve_texture=null,this._uniforms={u_texture:0,u_curve:1,u_range:1},this._must_update=!0,this._points={RGB:[[0,0],[1,1]],R:[[0,0],[1,1]],G:[[0,0],[1,1]],B:[[0,0],[1,1]]},this.curve_editor=null,this.addWidget("toggle","Split Channels",!1,"split_channels"),this.addWidget("combo","Channel","RGB",{values:["RGB","R","G","B"]}),this.curve_offset=68,this.size=[240,160]}B.title="Curve",B.desc="Generates or applies a curve to a texture",B.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},B.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0),Y=this._temp_texture;if(!G){(this._must_update||!this._curve_texture)&&this.updateCurve(),this.setOutputData(0,this._curve_texture);return}var te=a.getTextureType(this.properties.precision,G);(!Y||Y.type!=te||Y.width!=G.width||Y.height!=G.height||Y.format!=G.format)&&(Y=this._temp_texture=new GL.Texture(G.width,G.height,{type:te,format:G.format,filter:gl.LINEAR}));var ee=B._shader;ee||(ee=B._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,B.pixel_shader)),(this._must_update||!this._curve_texture)&&this.updateCurve();var se=this._uniforms,ue=this._curve_texture;Y.drawTo(function(){gl.disable(gl.DEPTH_TEST),G.bind(0),ue.bind(1),ee.uniforms(se).draw(GL.Mesh.getScreenQuad())}),this.setOutputData(0,Y)}},B.prototype.sampleCurve=function(G,te){var te=te||this._points.RGB;if(te){for(var ee=0;ee<te.length-1;++ee){var se=te[ee],ue=te[ee+1];if(!(ue[0]<G)){var be=ue[0]-se[0];if(Math.abs(be)<1e-5)return se[1];var ye=(G-se[0])/be;return se[1]*(1-ye)+ue[1]*ye}}return 0}},B.prototype.updateCurve=function(){for(var G=this._values,Y=G.length/4,te=this.properties.split_channels,ee=0;ee<Y;++ee){if(te)G[ee*4]=clamp(this.sampleCurve(ee/Y,this._points.R)*255,0,255),G[ee*4+1]=clamp(this.sampleCurve(ee/Y,this._points.G)*255,0,255),G[ee*4+2]=clamp(this.sampleCurve(ee/Y,this._points.B)*255,0,255);else{var se=this.sampleCurve(ee/Y);G[ee*4]=G[ee*4+1]=G[ee*4+2]=clamp(se*255,0,255)}G[ee*4+3]=255}this._curve_texture||(this._curve_texture=new GL.Texture(256,1,{format:gl.RGBA,magFilter:gl.LINEAR,wrap:gl.CLAMP_TO_EDGE})),this._curve_texture.uploadData(G,null,!0)},B.prototype.onSerialize=function(G){var Y={};for(var te in this._points)Y[te]=this._points[te].concat();G.curves=Y},B.prototype.onConfigure=function(G){this._points=G.curves,this.curve_editor&&(curve_editor.points=this._points),this._must_update=!0},B.prototype.onMouseDown=function(G,Y,te){if(this.curve_editor){var ee=this.curve_editor.onMouseDown([Y[0],Y[1]-this.curve_offset],te);return ee&&this.captureInput(!0),ee}},B.prototype.onMouseMove=function(G,Y,te){if(this.curve_editor)return this.curve_editor.onMouseMove([Y[0],Y[1]-this.curve_offset],te)},B.prototype.onMouseUp=function(G,Y,te){if(this.curve_editor)return this.curve_editor.onMouseUp([Y[0],Y[1]-this.curve_offset],te);this.captureInput(!1)},B.channel_line_colors={RGB:"#666",R:"#F33",G:"#3F3",B:"#33F"},B.prototype.onDrawBackground=function(G,Y){if(!this.flags.collapsed){this.curve_editor||(this.curve_editor=new t.CurveEditor(this._points.R)),G.save(),G.translate(0,this.curve_offset);var te=this.widgets[1].value;this.properties.split_channels?(te=="RGB"&&(this.widgets[1].value=te="R",this.widgets[1].disabled=!1),this.curve_editor.points=this._points.R,this.curve_editor.draw(G,[this.size[0],this.size[1]-this.curve_offset],Y,"#111",B.channel_line_colors.R,!0),G.globalCompositeOperation="lighten",this.curve_editor.points=this._points.G,this.curve_editor.draw(G,[this.size[0],this.size[1]-this.curve_offset],Y,null,B.channel_line_colors.G,!0),this.curve_editor.points=this._points.B,this.curve_editor.draw(G,[this.size[0],this.size[1]-this.curve_offset],Y,null,B.channel_line_colors.B,!0),G.globalCompositeOperation="source-over"):(this.widgets[1].value=te="RGB",this.widgets[1].disabled=!0),this.curve_editor.points=this._points[te],this.curve_editor.draw(G,[this.size[0],this.size[1]-this.curve_offset],Y,this.properties.split_channels?null:"#111",B.channel_line_colors[te]),G.restore()}},B.pixel_shader=`precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform sampler2D u_curve;
				uniform float u_range;
				
				void main() {
					vec4 color = texture2D( u_texture, v_coord ) * u_range;
					color.x = texture2D( u_curve, vec2( color.x, 0.5 ) ).x;
					color.y = texture2D( u_curve, vec2( color.y, 0.5 ) ).y;
					color.z = texture2D( u_curve, vec2( color.z, 0.5 ) ).z;
					//color.w = texture2D( u_curve, vec2( color.w, 0.5 ) ).w;
					gl_FragColor = color;
				}`,t.registerNodeType("texture/curve",B);function Z(){this.addInput("in","Texture"),this.addInput("exp","number"),this.addOutput("out","Texture"),this.properties={exposition:1,precision:a.LOW},this._uniforms={u_texture:0,u_exposition:1}}Z.title="Exposition",Z.desc="Controls texture exposition",Z.widgets_info={exposition:{widget:"slider",min:0,max:3},precision:{widget:"combo",values:a.MODE_VALUES}},Z.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isOutputConnected(0)){var Y=this._temp_texture;(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=G.type)&&(Y=this._temp_texture=new GL.Texture(G.width,G.height,{type:G.type,format:gl.RGBA,filter:gl.LINEAR}));var te=Z._shader;te||(te=Z._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,Z.pixel_shader)),this.properties.exposition;var ee=this.getInputData(1);ee!=null&&(this.properties.exposition=ee);var se=this._uniforms;Y.drawTo(function(){gl.disable(gl.DEPTH_TEST),G.bind(0),te.uniforms(se).draw(GL.Mesh.getScreenQuad())}),this.setOutputData(0,Y)}},Z.pixel_shader=`precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform float u_exposition;
				
				void main() {
					vec4 color = texture2D( u_texture, v_coord );
					gl_FragColor = vec4( color.xyz * u_exposition, color.a );
				}`,t.registerNodeType("texture/exposition",Z);function ne(){this.addInput("in","Texture"),this.addInput("avg","number,Texture"),this.addOutput("out","Texture"),this.properties={enabled:!0,scale:1,gamma:1,average_lum:1,lum_white:1,precision:a.LOW},this._uniforms={u_texture:0,u_lumwhite2:1,u_igamma:1,u_scale:1,u_average_lum:1}}ne.title="Tone Mapping",ne.desc="Applies Tone Mapping to convert from high to low",ne.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES}},ne.prototype.onGetInputs=function(){return[["enabled","boolean"]]},ne.prototype.onExecute=function(){var G=this.getInputData(0);if(G&&this.isOutputConnected(0)){if(this.properties.precision===a.PASS_THROUGH||this.getInputOrProperty("enabled")===!1){this.setOutputData(0,G);return}var Y=this._temp_texture;(!Y||Y.width!=G.width||Y.height!=G.height||Y.type!=G.type)&&(Y=this._temp_texture=new GL.Texture(G.width,G.height,{type:G.type,format:gl.RGBA,filter:gl.LINEAR}));var te=this.getInputData(1);te==null&&(te=this.properties.average_lum);var ee=this._uniforms,se=null;te.constructor===Number?(this.properties.average_lum=te,ee.u_average_lum=this.properties.average_lum,se=ne._shader,se||(se=ne._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,ne.pixel_shader))):te.constructor===GL.Texture&&(ee.u_average_texture=te.bind(1),se=ne._shader_texture,se||(se=ne._shader_texture=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,ne.pixel_shader,{AVG_TEXTURE:""}))),ee.u_lumwhite2=this.properties.lum_white*this.properties.lum_white,ee.u_scale=this.properties.scale,ee.u_igamma=1/this.properties.gamma,gl.disable(gl.DEPTH_TEST),Y.drawTo(function(){G.bind(0),se.uniforms(ee).draw(GL.Mesh.getScreenQuad())}),this.setOutputData(0,this._temp_texture)}},ne.pixel_shader=`precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform float u_scale;
				#ifdef AVG_TEXTURE
					uniform sampler2D u_average_texture;
				#else
					uniform float u_average_lum;
				#endif
				uniform float u_lumwhite2;
				uniform float u_igamma;
				vec3 RGB2xyY (vec3 rgb)
				{
					 const mat3 RGB2XYZ = mat3(0.4124, 0.3576, 0.1805,
											   0.2126, 0.7152, 0.0722,
											   0.0193, 0.1192, 0.9505);
					vec3 XYZ = RGB2XYZ * rgb;
					
					float f = (XYZ.x + XYZ.y + XYZ.z);
					return vec3(XYZ.x / f,
								XYZ.y / f,
								XYZ.y);
				}
				
				void main() {
					vec4 color = texture2D( u_texture, v_coord );
					vec3 rgb = color.xyz;
					float average_lum = 0.0;
					#ifdef AVG_TEXTURE
						vec3 pixel = texture2D(u_average_texture,vec2(0.5)).xyz;
						average_lum = (pixel.x + pixel.y + pixel.z) / 3.0;
					#else
						average_lum = u_average_lum;
					#endif
					//Ld - this part of the code is the same for both versions
					float lum = dot(rgb, vec3(0.2126, 0.7152, 0.0722));
					float L = (u_scale / average_lum) * lum;
					float Ld = (L * (1.0 + L / u_lumwhite2)) / (1.0 + L);
					//first
					//vec3 xyY = RGB2xyY(rgb);
					//xyY.z *= Ld;
					//rgb = xyYtoRGB(xyY);
					//second
					rgb = (rgb / lum) * Ld;
					rgb = max(rgb,vec3(0.001));
					rgb = pow( rgb, vec3( u_igamma ) );
					gl_FragColor = vec4( rgb, color.a );
				}`,t.registerNodeType("texture/tonemapping",ne);function oe(){this.addOutput("out","Texture"),this.properties={width:512,height:512,seed:0,persistence:.1,octaves:8,scale:1,offset:[0,0],amplitude:1,precision:a.DEFAULT},this._key=0,this._texture=null,this._uniforms={u_persistence:.1,u_seed:0,u_offset:vec2.create(),u_scale:1,u_viewport:vec2.create()}}oe.title="Perlin",oe.desc="Generates a perlin noise texture",oe.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES},width:{type:"number",precision:0,step:1},height:{type:"number",precision:0,step:1},octaves:{type:"number",precision:0,step:1,min:1,max:50}},oe.prototype.onGetInputs=function(){return[["seed","number"],["persistence","number"],["octaves","number"],["scale","number"],["amplitude","number"],["offset","vec2"]]},oe.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.properties.width|0,Y=this.properties.height|0;G==0&&(G=gl.viewport_data[2]),Y==0&&(Y=gl.viewport_data[3]);var te=a.getTextureType(this.properties.precision),ee=this._texture;(!ee||ee.width!=G||ee.height!=Y||ee.type!=te)&&(ee=this._texture=new GL.Texture(G,Y,{type:te,format:gl.RGB,filter:gl.LINEAR}));var se=this.getInputOrProperty("persistence"),ue=this.getInputOrProperty("octaves"),be=this.getInputOrProperty("offset"),ye=this.getInputOrProperty("scale"),Re=this.getInputOrProperty("amplitude"),Le=this.getInputOrProperty("seed"),Oe=""+G+Y+te+se+ue+ye+Le+be[0]+be[1]+Re;if(Oe==this._key){this.setOutputData(0,ee);return}this._key=Oe;var Ue=this._uniforms;Ue.u_persistence=se,Ue.u_octaves=ue,Ue.u_offset.set(be),Ue.u_scale=ye,Ue.u_amplitude=Re,Ue.u_seed=Le*128,Ue.u_viewport[0]=G,Ue.u_viewport[1]=Y;var qe=oe._shader;qe||(qe=oe._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,oe.pixel_shader)),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),ee.drawTo(function(){qe.uniforms(Ue).draw(GL.Mesh.getScreenQuad())}),this.setOutputData(0,ee)}},oe.pixel_shader=`precision highp float;
				varying vec2 v_coord;
				uniform vec2 u_offset;
				uniform float u_scale;
				uniform float u_persistence;
				uniform int u_octaves;
				uniform float u_amplitude;
				uniform vec2 u_viewport;
				uniform float u_seed;
				#define M_PI 3.14159265358979323846
				
				float rand(vec2 c){	return fract(sin(dot(c.xy ,vec2( 12.9898 + u_seed,78.233 + u_seed))) * 43758.5453); }
				
				float noise(vec2 p, float freq ){
					float unit = u_viewport.x/freq;
					vec2 ij = floor(p/unit);
					vec2 xy = mod(p,unit)/unit;
					//xy = 3.*xy*xy-2.*xy*xy*xy;
					xy = .5*(1.-cos(M_PI*xy));
					float a = rand((ij+vec2(0.,0.)));
					float b = rand((ij+vec2(1.,0.)));
					float c = rand((ij+vec2(0.,1.)));
					float d = rand((ij+vec2(1.,1.)));
					float x1 = mix(a, b, xy.x);
					float x2 = mix(c, d, xy.x);
					return mix(x1, x2, xy.y);
				}
				
				float pNoise(vec2 p, int res){
					float persistance = u_persistence;
					float n = 0.;
					float normK = 0.;
					float f = 4.;
					float amp = 1.0;
					int iCount = 0;
					for (int i = 0; i<50; i++){
						n+=amp*noise(p, f);
						f*=2.;
						normK+=amp;
						amp*=persistance;
						if (iCount >= res)
							break;
						iCount++;
					}
					float nf = n/normK;
					return nf*nf*nf*nf;
				}
				void main() {
					vec2 uv = v_coord * u_scale * u_viewport + u_offset * u_scale;
					vec4 color = vec4( pNoise( uv, u_octaves ) * u_amplitude );
					gl_FragColor = color;
				}`,t.registerNodeType("texture/perlin",oe);function ce(){this.addInput("v"),this.addOutput("out","Texture"),this.properties={code:ce.default_code,width:512,height:512,clear:!0,precision:a.DEFAULT,use_html_canvas:!1},this._func=null,this._temp_texture=null,this.compileCode()}ce.title="Canvas2D",ce.desc="Executes Canvas2D code inside a texture or the viewport.",ce.help="Set width and height to 0 to match viewport size.",ce.default_code=`//vars: canvas,ctx,time
ctx.fillStyle='red';
ctx.fillRect(0,0,50,50);
`,ce.widgets_info={precision:{widget:"combo",values:a.MODE_VALUES},code:{type:"code"},width:{type:"number",precision:0,step:1},height:{type:"number",precision:0,step:1}},ce.prototype.onPropertyChanged=function(G,Y){G=="code"&&this.compileCode(Y)},ce.prototype.compileCode=function(G){if(this._func=null,!!t.allow_scripts)try{this._func=new Function("canvas","ctx","time","script","v",G),this.boxcolor="#00FF00"}catch(Y){this.boxcolor="#FF0000",console.error("Error parsing script"),console.error(Y)}},ce.prototype.onExecute=function(){var G=this._func;!G||!this.isOutputConnected(0)||this.executeDraw(G)},ce.prototype.executeDraw=function(G){var Y=this.properties.width||gl.canvas.width,te=this.properties.height||gl.canvas.height,ee=this._temp_texture,se=a.getTextureType(this.properties.precision);(!ee||ee.width!=Y||ee.height!=te||ee.type!=se)&&(ee=this._temp_texture=new GL.Texture(Y,te,{format:gl.RGBA,filter:gl.LINEAR,type:se}));var ue=this.getInputData(0),be=this.properties,ye=this,Re=this.graph.getTime(),Le=gl,Oe=gl.canvas;if((this.properties.use_html_canvas||!e.enableWebGLCanvas)&&(this._canvas?(Oe=this._canvas,Le=this._ctx):(Oe=this._canvas=createCanvas(Y.height),Le=this._ctx=Oe.getContext("2d")),Oe.width=Y,Oe.height=te),Le==gl)ee.drawTo(function(){gl.start2D(),be.clear&&(gl.clearColor(0,0,0,0),gl.clear(gl.COLOR_BUFFER_BIT));try{G.draw?G.draw.call(ye,Oe,Le,Re,G,ue):G.call(ye,Oe,Le,Re,G,ue),ye.boxcolor="#00FF00"}catch(Ue){ye.boxcolor="#FF0000",console.error("Error executing script"),console.error(Ue)}gl.finish2D()});else{be.clear&&Le.clearRect(0,0,Oe.width,Oe.height);try{G.draw?G.draw.call(this,Oe,Le,Re,G,ue):G.call(this,Oe,Le,Re,G,ue),this.boxcolor="#00FF00"}catch(Ue){this.boxcolor="#FF0000",console.error("Error executing script"),console.error(Ue)}ee.uploadImage(Oe)}this.setOutputData(0,ee)},t.registerNodeType("texture/canvas2D",ce);function xe(){this.addInput("in","Texture"),this.addOutput("out","Texture"),this.properties={key_color:vec3.fromValues(0,1,0),threshold:.8,slope:.2,precision:a.DEFAULT}}xe.title="Matte",xe.desc="Extracts background",xe.widgets_info={key_color:{widget:"color"},precision:{widget:"combo",values:a.MODE_VALUES}},xe.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(this.properties.precision===a.PASS_THROUGH){this.setOutputData(0,G);return}if(G){this._tex=a.getTargetTexture(G,this._tex,this.properties.precision),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST),this._uniforms||(this._uniforms={u_texture:0,u_key_color:this.properties.key_color,u_threshold:1,u_slope:1});var Y=this._uniforms,te=Mesh.getScreenQuad(),ee=xe._shader;ee||(ee=xe._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,xe.pixel_shader)),Y.u_key_color=this.properties.key_color,Y.u_threshold=this.properties.threshold,Y.u_slope=this.properties.slope,this._tex.drawTo(function(){G.bind(0),ee.uniforms(Y).draw(te)}),this.setOutputData(0,this._tex)}}},xe.pixel_shader=`precision highp float;
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				uniform vec3 u_key_color;
				uniform float u_threshold;
				uniform float u_slope;
				
				void main() {
					vec3 color = texture2D( u_texture, v_coord ).xyz;
					float diff = length( normalize(color) - normalize(u_key_color) );
					float edge = u_threshold * (1.0 - u_slope);
					float alpha = smoothstep( edge, u_threshold, diff);
					gl_FragColor = vec4( color, alpha );
				}`,t.registerNodeType("texture/matte",xe);function de(){this.addInput("in","texture"),this.addInput("yaw","number"),this.addOutput("out","texture"),this.properties={yaw:0}}de.title="CubemapToTexture2D",de.desc="Transforms a CUBEMAP texture into a TEXTURE2D in Polar Representation",de.prototype.onExecute=function(){if(this.isOutputConnected(0)){var G=this.getInputData(0);if(!(!G||G.texture_type!=GL.TEXTURE_CUBE_MAP)){this._last_tex&&(this._last_tex.height!=G.height||this._last_tex.type!=G.type)&&(this._last_tex=null);var Y=this.getInputOrProperty("yaw");this._last_tex=GL.Texture.cubemapToTexture2D(G,G.height,this._last_tex,!0,Y),this.setOutputData(0,this._last_tex)}}},t.registerNodeType("texture/cubemapToTexture2D",de)})(litegraph),(function(e){if(typeof GL>"u")return;var t=e.LiteGraph;e.LGraphCanvas;var n="#345",a=t.Shaders={};a.GLSL_types=["float","vec2","vec3","vec4","mat3","mat4","sampler2D","samplerCube"];var s=a.GLSL_types_const=["float","vec2","vec3","vec4"],u={radians:"T radians(T degrees)",degrees:"T degrees(T radians)",sin:"T sin(T angle)",cos:"T cos(T angle)",tan:"T tan(T angle)",asin:"T asin(T x)",acos:"T acos(T x)",atan:"T atan(T x)",atan2:"T atan(T x,T y)",pow:"T pow(T x,T y)",exp:"T exp(T x)",log:"T log(T x)",exp2:"T exp2(T x)",log2:"T log2(T x)",sqrt:"T sqrt(T x)",inversesqrt:"T inversesqrt(T x)",abs:"T abs(T x)",sign:"T sign(T x)",floor:"T floor(T x)",round:"T round(T x)",ceil:"T ceil(T x)",fract:"T fract(T x)",mod:"T mod(T x,T y)",min:"T min(T x,T y)",max:"T max(T x,T y)",clamp:"T clamp(T x,T minVal = 0.0,T maxVal = 1.0)",mix:"T mix(T x,T y,T a)",step:"T step(T edge, T edge2, T x)",smoothstep:"T smoothstep(T edge, T edge2, T x)",length:"float length(T x)",distance:"float distance(T p0, T p1)",normalize:"T normalize(T x)",dot:"float dot(T x,T y)",cross:"vec3 cross(vec3 x,vec3 y)",reflect:"vec3 reflect(vec3 V,vec3 N)",refract:"vec3 refract(vec3 V,vec3 N, float IOR)"},c={},h=[];f(),a.ALL_TYPES="float,vec2,vec3,vec4";function f(){h.length=0;for(var U in u){var V=u[U],B=V.indexOf(" "),Z=V.substr(0,B),ne=V.indexOf("(",B),oe=V.substr(B,ne-B).trim(),ce=V.substr(ne+1,V.length-ne-2).split(",");for(var xe in ce){var de=ce[xe].split(" ").filter(function(G){return G});ce[xe]={type:de[0].trim(),name:de[1].trim()},de[2]=="="&&(ce[xe].value=de[3].trim())}c[U]={return_type:Z,func:oe,params:ce},h.push(oe)}}function m(U,V){V.color=n,V.filter="shader",V.prototype.clearDestination=function(){this.shader_destination={}},V.prototype.propagateDestination=function(Z){if(this.shader_destination[Z]=!0,this.inputs)for(var ne=0;ne<this.inputs.length;++ne){var oe=this.getInputNode(ne);oe&&oe.propagateDestination(Z)}},V.prototype.onPropertyChanged||(V.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++}),t.registerNodeType("shader::"+U,V)}function _(U,V){return"VAR_"+(V||"TEMP")+"_"+U.id}function C(U,V){if(!U.inputs)return null;var B=U.getInputLink(V);if(!B)return null;var Z=U.graph.getNodeById(B.origin_id);return Z?Z.getOutputVarName?Z.getOutputVarName(B.origin_slot):"link_"+Z.id+"_"+B.origin_slot:null}function b(U,V){return U.isOutputConnected(V)?"link_"+U.id+"_"+V:null}a.registerShaderNode=m,a.getInputLinkID=C,a.getOutputLinkID=b,a.getShaderNodeVarName=_,a.parseGLSLDescriptions=f;var T=t.valueToGLSL=function(V,B,Z){var ne=5;if(Z!=null&&(ne=Z),!B)if(V.constructor===Number)B="float";else if(V.length)switch(V.length){case 2:B="vec2";break;case 3:B="vec3";break;case 4:B="vec4";break;case 9:B="mat3";break;case 16:B="mat4";break;default:throw"unknown type for glsl value size"}else throw"unknown type for glsl value: "+V.constructor;switch(B){case"float":return V.toFixed(ne);case"vec2":return"vec2("+V[0].toFixed(ne)+","+V[1].toFixed(ne)+")";case"color3":case"vec3":return"vec3("+V[0].toFixed(ne)+","+V[1].toFixed(ne)+","+V[2].toFixed(ne)+")";case"color4":case"vec4":return"vec4("+V[0].toFixed(ne)+","+V[1].toFixed(ne)+","+V[2].toFixed(ne)+","+V[3].toFixed(ne)+")";case"mat3":return"mat3(1.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,1.0)";case"mat4":return"mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0)";default:throw B}return""},R=t.varToTypeGLSL=function(V,B,Z){if(B==Z)return V;if(V==null)switch(Z){case"float":return"0.0";case"vec2":return"vec2(0.0)";case"vec3":return"vec3(0.0)";case"vec4":return"vec4(0.0,0.0,0.0,1.0)";default:return null}if(!Z)throw"error: no output type specified";if(Z=="float")switch(B){case"vec2":case"vec3":case"vec4":return V+".x";default:return"0.0"}else if(Z=="vec2")switch(B){case"float":return"vec2("+V+")";case"vec3":case"vec4":return V+".xy";default:return"vec2(0.0)"}else if(Z=="vec3")switch(B){case"float":return"vec3("+V+")";case"vec2":return"vec3("+V+",0.0)";case"vec4":return V+".xyz";default:return"vec3(0.0)"}else if(Z=="vec4")switch(B){case"float":return"vec4("+V+")";case"vec2":return"vec4("+V+",0.0,1.0)";case"vec3":return"vec4("+V+",1.0)";default:return"vec4(0.0,0.0,0.0,1.0)"}throw"type cannot be converted"},A=t.convertVarToGLSLType=function(V,B,Z){if(B==Z)return V;if(B=="float")return Z+"("+V+")";if(Z=="vec2")return"vec2("+V+".xy)";if(Z=="vec3"){if(B=="vec2")return"vec3("+V+",0.0)";if(B=="vec4")return"vec4("+V+".xyz)"}if(Z=="vec4"){if(B=="vec2")return"vec4("+V+",0.0,0.0)";if(Z=="vec3")return"vec4("+V+",1.0)"}return null};function I(){this.vs_template="",this.fs_template="",this.buffer_names={uvs:"v_coord"},this.extra={},this._functions={},this._uniforms={},this._codeparts={},this._uniform_value=null}I.prototype.clear=function(){this._uniforms={},this._functions={},this._codeparts={},this._uniform_value=null,this.extra={}},I.prototype.addUniform=function(U,V,B){this._uniforms[U]=V,B!=null&&(this._uniform_value||(this._uniform_value={}),this._uniform_value[U]=B)},I.prototype.addFunction=function(U,V){this._functions[U]=V},I.prototype.addCode=function(U,V,B){B=B||{"":""};for(var Z in B){var ne=Z?Z+"_"+U:U;this._codeparts[ne]?this._codeparts[ne]+=V+`
`:this._codeparts[ne]=V+`
`}},I.prototype.computeCodeBlocks=function(U,V){this.clear();var B=U.findNodesByType("shader::output/vertex");B=B&&B.length?B[0]:null;var Z=U.findNodesByType("shader::output/fragcolor");if(Z=Z&&Z.length?Z[0]:null,!Z)return null;U.sendEventToAllNodes("clearDestination"),B&&B.propagateDestination("vs"),Z&&Z.propagateDestination("fs"),U.sendEventToAllNodes("onGetCode",this);var ne="";for(var oe in this._uniforms)ne+="uniform "+this._uniforms[oe]+" "+oe+`;
`;if(V)for(var oe in V)ne+="uniform "+V[oe]+" "+oe+`;
`;var ce="";for(var oe in this._functions)ce+="//"+oe+`
`+this._functions[oe]+`
`;var xe=this._codeparts;return xe.uniforms=ne,xe.functions=ce,xe},I.prototype.computeShaderCode=function(U){var V=this.computeCodeBlocks(U),B=GL.Shader.replaceCodeUsingContext(this.vs_template,V),Z=GL.Shader.replaceCodeUsingContext(this.fs_template,V);return{vs_code:B,fs_code:Z}},I.prototype.computeShader=function(U,V){var B=this.computeShaderCode(U);if(console.log(B.vs_code,B.fs_code),!t.catch_exceptions)return this._shader_error=!0,V?V.updateShader(B.vs_code,B.fs_code):V=new GL.Shader(B.vs_code,B.fs_code),this._shader_error=!1,V;try{return V?V.updateShader(B.vs_code,B.fs_code):V=new GL.Shader(B.vs_code,B.fs_code),this._shader_error=!1,V}catch(Z){return this._shader_error||(console.error(Z),Z.indexOf("Fragment shader")!=-1?console.log(B.fs_code.split(`
`).map(function(ne,oe){return oe+".- "+ne}).join(`
`)):console.log(B.vs_code)),this._shader_error=!0,null}return null},I.prototype.getShader=function(U){if(this._shader&&this._shader._version==U._version)return this._shader;var V=this.computeShader(U,this._shader);return V?(this._shader=V,V._version=U._version,V):null},I.prototype.fillUniforms=function(U,V){if(this._uniform_value)for(var B in this._uniform_value){var Z=this._uniform_value[B];Z!=null&&(Z.constructor===Function?U[B]=Z.call(this,V):Z.constructor===GL.Texture||(U[B]=Z))}},t.ShaderContext=t.Shaders.Context=I;function P(){this.subgraph=new t.LGraph,this.subgraph._subgraph_node=this,this.subgraph._is_subgraph=!0,this.subgraph.filter="shader",this.addInput("in","texture"),this.addOutput("out","texture"),this.properties={width:0,height:0,alpha:!1,precision:typeof LGraphTexture<"u"?LGraphTexture.DEFAULT:2};var U=this.subgraph.findNodesByType("shader::input/uniform")[0];U.pos=[200,300];var V=t.createNode("shader::texture/sampler2D");V.pos=[400,300],this.subgraph.add(V);var B=t.createNode("shader::output/fragcolor");B.pos=[600,300],this.subgraph.add(B),U.connect(0,V),V.connect(0,B),this.size=[180,60],this.redraw_on_mouse=!0,this._uniforms={},this._shader=null,this._context=new I,this._context.vs_template=`#define VERTEX
`+GL.Shader.SCREEN_VERTEX_SHADER,this._context.fs_template=P.template}P.template=`
		#define FRAGMENT
		precision highp float;
		varying vec2 v_coord;
		{{varying}}
		{{uniforms}}
		{{functions}}
		{{fs_functions}}
		void main() {

		vec2 uv = v_coord;
		vec4 fragcolor = vec4(0.0);
		vec4 fragcolor1 = vec4(0.0);
		{{fs_code}}
		gl_FragColor = fragcolor;
		}
			`,P.widgets_info={precision:{widget:"combo",values:LGraphTexture.MODE_VALUES}},P.title="ShaderGraph",P.desc="Builds a shader using a graph",P.input_node_type="input/uniform",P.output_node_type="output/fragcolor",P.title_color=n,P.prototype.onSerialize=function(U){U.subgraph=this.subgraph.serialize()},P.prototype.onConfigure=function(U){this.subgraph.configure(U.subgraph)},P.prototype.onExecute=function(){if(this.isOutputConnected(0)){var U=this.getInputData(0);U&&U.constructor!=GL.Texture&&(U=null);var V=this.properties.width|0,B=this.properties.height|0;V==0&&(V=U?U.width:gl.viewport_data[2]),B==0&&(B=U?U.height:gl.viewport_data[3]);var Z=LGraphTexture.getTextureType(this.properties.precision,U),ne=this._texture;(!ne||ne.width!=V||ne.height!=B||ne.type!=Z)&&(ne=this._texture=new GL.Texture(V,B,{type:Z,format:this.alpha?gl.RGBA:gl.RGB,filter:gl.LINEAR}));var oe=this.getShader(this.subgraph);if(oe){var ce=this._uniforms;this._context.fillUniforms(ce);var xe=0;if(this.inputs)for(var de=0;de<this.inputs.length;++de){var G=this.inputs[de],Y=this.getInputData(de);G.type=="texture"&&(Y||(Y=GL.Texture.getWhiteTexture()),Y=Y.bind(xe++)),Y!=null&&(ce["u_"+G.name]=Y)}var te=GL.Mesh.getScreenQuad();gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),ne.drawTo(function(){oe.uniforms(ce),oe.draw(te)}),this.setOutputData(0,ne)}}},P.prototype.onInputAdded=function(U){var V=t.createNode("shader::input/uniform");V.setProperty("name",U.name),V.setProperty("type",U.type),this.subgraph.add(V)},P.prototype.onInputRemoved=function(U,V){for(var B=this.subgraph.findNodesByType("shader::input/uniform"),Z=0;Z<B.length;++Z){var ne=B[Z];ne.properties.name==V.name&&this.subgraph.remove(ne)}},P.prototype.computeSize=function(){var U=this.inputs?this.inputs.length:0,V=this.outputs?this.outputs.length:0;return[200,Math.max(U,V)*t.NODE_SLOT_HEIGHT+t.NODE_TITLE_HEIGHT+10]},P.prototype.getShader=function(){var U=this._context.getShader(this.subgraph);return U?this.boxcolor=null:this.boxcolor="red",U},P.prototype.onDrawBackground=function(U,V,B,Z){if(!this.flags.collapsed){var ne=this.getOutputData(0),oe=this.inputs?this.inputs.length*t.NODE_SLOT_HEIGHT:0;ne&&U==ne.gl&&this.size[1]>oe+t.NODE_TITLE_HEIGHT&&U.drawImage(ne,10,ce,this.size[0]-20,this.size[1]-oe-t.NODE_TITLE_HEIGHT);var ce=this.size[1]-t.NODE_TITLE_HEIGHT+.5,xe=t.isInsideRectangle(Z[0],Z[1],this.pos[0],this.pos[1]+ce,this.size[0],t.NODE_TITLE_HEIGHT);U.fillStyle=xe?"#555":"#222",U.beginPath(),this._shape==t.BOX_SHAPE?U.rect(0,ce,this.size[0]+1,t.NODE_TITLE_HEIGHT):U.roundRect(0,ce,this.size[0]+1,t.NODE_TITLE_HEIGHT,0,8),U.fill(),U.textAlign="center",U.font="24px Arial",U.fillStyle=xe?"#DDD":"#999",U.fillText("+",this.size[0]*.5,ce+24)}},P.prototype.onMouseDown=function(U,V,B){var Z=this.size[1]-t.NODE_TITLE_HEIGHT+.5;V[1]>Z&&B.showSubgraphPropertiesDialog(this)},P.prototype.onDrawSubgraphBackground=function(U){},P.prototype.getExtraMenuOptions=function(U){var V=this,B=[{content:"Print Code",callback:function(){var Z=V._context.computeShaderCode();console.log(Z.vs_code,Z.fs_code)}}];return B},t.registerNodeType("texture/shaderGraph",P);function N(){this.addOutput("out",""),this.properties={name:"",type:""}}N.title="Uniform",N.desc="Input data for the shader",N.prototype.getTitle=function(){return this.properties.name&&this.flags.collapsed?this.properties.type+" "+this.properties.name:"Uniform"},N.prototype.onPropertyChanged=function(U,V){this.outputs[0].name=this.properties.type+" "+this.properties.name},N.prototype.onGetCode=function(U){if(this.shader_destination){var V=this.properties.type;if(!V){if(!U.onGetPropertyInfo)return;var B=U.onGetPropertyInfo(this.property.name);if(!B)return;V=B.type}V=="number"?V="float":V=="texture"&&(V="sampler2D"),a.GLSL_types.indexOf(V)!=-1&&(U.addUniform("u_"+this.properties.name,V),this.setOutputData(0,V))}},N.prototype.getOutputVarName=function(U){return"u_"+this.properties.name},m("input/uniform",N);function S(){this.addOutput("out","vec2"),this.properties={name:"coord",type:"vec2"}}S.title="Attribute",S.desc="Input data from mesh attribute",S.prototype.getTitle=function(){return"att. "+this.properties.name},S.prototype.onGetCode=function(U){if(this.shader_destination){var V=this.properties.type;!V||a.GLSL_types.indexOf(V)==-1||(V=="number"&&(V="float"),this.properties.name!="coord"&&U.addCode("varying"," varying "+V+" v_"+this.properties.name+";"),this.setOutputData(0,V))}},S.prototype.getOutputVarName=function(U){return"v_"+this.properties.name},m("input/attribute",S);function k(){this.addInput("tex","sampler2D"),this.addInput("uv","vec2"),this.addOutput("rgba","vec4"),this.addOutput("rgb","vec3")}k.title="Sampler2D",k.desc="Reads a pixel from a texture",k.prototype.onGetCode=function(U){if(this.shader_destination){var V=C(this,0),B=_(this),Z="vec4 "+B+` = vec4(0.0);
`;if(V){var ne=C(this,1)||U.buffer_names.uvs;Z+=B+" = texture2D("+V+","+ne+`);
`}var oe=b(this,0);oe&&(Z+="vec4 "+b(this,0)+" = "+B+`;
`);var ce=b(this,1);ce&&(Z+="vec3 "+b(this,1)+" = "+B+`.xyz;
`),U.addCode("code",Z,this.shader_destination),this.setOutputData(0,"vec4"),this.setOutputData(1,"vec3")}},m("texture/sampler2D",k);function D(){this.addOutput("","float"),this.properties={type:"float",value:0},this.addWidget("combo","type","float",null,{values:s,property:"type"}),this.updateWidgets()}D.title="const",D.prototype.getTitle=function(){return this.flags.collapsed?T(this.properties.value,this.properties.type,2):"Const"},D.prototype.onPropertyChanged=function(U,V){U=="type"&&(this.outputs[0].type!=V&&(this.disconnectOutput(0),this.outputs[0].type=V),this.widgets.length=1,this.updateWidgets()),U=="value"&&(V.length?(this.widgets[1].value=V[1],V.length>2&&(this.widgets[2].value=V[2]),V.length>3&&(this.widgets[3].value=V[3])):this.widgets[1].value=V)},D.prototype.updateWidgets=function(B){var V=this,B=this.properties.value,Z={step:.01};switch(this.properties.type){case"float":this.properties.value=0,this.addWidget("number","v",0,{step:.01,property:"value"});break;case"vec2":this.properties.value=B&&B.length==2?[B[0],B[1]]:[0,0,0],this.addWidget("number","x",this.properties.value[0],function(ne){V.properties.value[0]=ne},Z),this.addWidget("number","y",this.properties.value[1],function(ne){V.properties.value[1]=ne},Z);break;case"vec3":this.properties.value=B&&B.length==3?[B[0],B[1],B[2]]:[0,0,0],this.addWidget("number","x",this.properties.value[0],function(ne){V.properties.value[0]=ne},Z),this.addWidget("number","y",this.properties.value[1],function(ne){V.properties.value[1]=ne},Z),this.addWidget("number","z",this.properties.value[2],function(ne){V.properties.value[2]=ne},Z);break;case"vec4":this.properties.value=B&&B.length==4?[B[0],B[1],B[2],B[3]]:[0,0,0,0],this.addWidget("number","x",this.properties.value[0],function(ne){V.properties.value[0]=ne},Z),this.addWidget("number","y",this.properties.value[1],function(ne){V.properties.value[1]=ne},Z),this.addWidget("number","z",this.properties.value[2],function(ne){V.properties.value[2]=ne},Z),this.addWidget("number","w",this.properties.value[3],function(ne){V.properties.value[3]=ne},Z);break;default:console.error("unknown type for constant")}},D.prototype.onGetCode=function(U){if(this.shader_destination){var V=T(this.properties.value,this.properties.type),B=b(this,0);if(B){var Z="	"+this.properties.type+" "+B+" = "+V+";";U.addCode("code",Z,this.shader_destination),this.setOutputData(0,this.properties.type)}}},m("const/const",D);function M(){this.addInput("xy","vec2"),this.addInput("x","float"),this.addInput("y","float"),this.addOutput("xy","vec2"),this.addOutput("x","float"),this.addOutput("y","float"),this.properties={x:0,y:0}}M.title="vec2",M.varmodes=["xy","x","y"],M.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},M.prototype.onGetCode=function(U){if(this.shader_destination){for(var V=this.properties,B=_(this),Z="	vec2 "+B+" = "+T([V.x,V.y])+`;
`,ne=0;ne<M.varmodes.length;++ne){var oe=M.varmodes[ne],ce=C(this,ne);ce&&(Z+="	"+B+"."+oe+" = "+ce+`;
`)}for(var ne=0;ne<M.varmodes.length;++ne){var oe=M.varmodes[ne],xe=b(this,ne);if(xe){var de=s[oe.length-1];Z+="	"+de+" "+xe+" = "+B+"."+oe+`;
`,this.setOutputData(ne,de)}}U.addCode("code",Z,this.shader_destination)}},m("const/vec2",M);function j(){this.addInput("xyz","vec3"),this.addInput("x","float"),this.addInput("y","float"),this.addInput("z","float"),this.addInput("xy","vec2"),this.addInput("xz","vec2"),this.addInput("yz","vec2"),this.addOutput("xyz","vec3"),this.addOutput("x","float"),this.addOutput("y","float"),this.addOutput("z","float"),this.addOutput("xy","vec2"),this.addOutput("xz","vec2"),this.addOutput("yz","vec2"),this.properties={x:0,y:0,z:0}}j.title="vec3",j.varmodes=["xyz","x","y","z","xy","xz","yz"],j.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},j.prototype.onGetCode=function(U){if(this.shader_destination){for(var V=this.properties,B=_(this),Z="vec3 "+B+" = "+T([V.x,V.y,V.z])+`;
`,ne=0;ne<j.varmodes.length;++ne){var oe=j.varmodes[ne],ce=C(this,ne);ce&&(Z+="	"+B+"."+oe+" = "+ce+`;
`)}for(var ne=0;ne<j.varmodes.length;++ne){var oe=j.varmodes[ne],xe=b(this,ne);if(xe){var de=s[oe.length-1];Z+="	"+de+" "+xe+" = "+B+"."+oe+`;
`,this.setOutputData(ne,de)}}U.addCode("code",Z,this.shader_destination)}},m("const/vec3",j);function H(){this.addInput("xyzw","vec4"),this.addInput("xyz","vec3"),this.addInput("x","float"),this.addInput("y","float"),this.addInput("z","float"),this.addInput("w","float"),this.addInput("xy","vec2"),this.addInput("yz","vec2"),this.addInput("zw","vec2"),this.addOutput("xyzw","vec4"),this.addOutput("xyz","vec3"),this.addOutput("x","float"),this.addOutput("y","float"),this.addOutput("z","float"),this.addOutput("xy","vec2"),this.addOutput("yz","vec2"),this.addOutput("zw","vec2"),this.properties={x:0,y:0,z:0,w:0}}H.title="vec4",H.varmodes=["xyzw","xyz","x","y","z","w","xy","yz","zw"],H.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},H.prototype.onGetCode=function(U){if(this.shader_destination){for(var V=this.properties,B=_(this),Z="vec4 "+B+" = "+T([V.x,V.y,V.z,V.w])+`;
`,ne=0;ne<H.varmodes.length;++ne){var oe=H.varmodes[ne],ce=C(this,ne);ce&&(Z+="	"+B+"."+oe+" = "+ce+`;
`)}for(var ne=0;ne<H.varmodes.length;++ne){var oe=H.varmodes[ne],xe=b(this,ne);if(xe){var de=s[oe.length-1];Z+="	"+de+" "+xe+" = "+B+"."+oe+`;
`,this.setOutputData(ne,de)}}U.addCode("code",Z,this.shader_destination)}},m("const/vec4",H);function X(){this.addInput("color",a.ALL_TYPES),this.block_delete=!0}X.title="FragColor",X.desc="Pixel final color",X.prototype.onGetCode=function(U){var V=C(this,0);if(V){var B=this.getInputData(0),Z=R(V,B,"vec4");U.addCode("fs_code","fragcolor = "+Z+";")}},m("output/fragcolor",X);function K(){this.addInput("A",a.ALL_TYPES),this.addInput("B",a.ALL_TYPES),this.addOutput("out",""),this.properties={operation:"*"},this.addWidget("combo","op.",this.properties.operation,{property:"operation",values:K.operations})}K.title="Operation",K.operations=["+","-","*","/"],K.prototype.getTitle=function(){return this.flags.collapsed?"A"+this.properties.operation+"B":"Operation"},K.prototype.onGetCode=function(U){if(this.shader_destination&&this.isOutputConnected(0)){for(var V=[],B=0;B<3;++B)V.push({name:C(this,B),type:this.getInputData(B)||"float"});var Z=b(this,0);if(Z){for(var ne=V[0].type,oe=ne,ce=this.properties.operation,xe=[],B=0;B<2;++B){var de=V[B].name;de==null&&(de=p.value!=null?p.value:"(1.0)",V[B].type="float"),V[B].type!=ne&&(V[B].type=="float"&&(ce=="*"||ce=="/")||(de=A(de,V[B].type,ne))),xe.push(de)}U.addCode("code",oe+" "+Z+" = "+xe[0]+ce+xe[1]+";",this.shader_destination),this.setOutputData(0,oe)}}},m("math/operation",K);function re(){this.addInput("A",a.ALL_TYPES),this.addInput("B",a.ALL_TYPES),this.addOutput("out",""),this.properties={func:"floor"},this._current="floor",this.addWidget("combo","func",this.properties.func,{property:"func",values:h})}re.title="Func",re.prototype.onPropertyChanged=function(U,V){if(this.graph&&this.graph._version++,U=="func"){var B=c[V];if(!B)return;for(var Z=B.params.length;Z<this.inputs.length;++Z)this.removeInput(Z);for(var Z=0;Z<B.params.length;++Z){var ne=B.params[Z];this.inputs[Z]?this.inputs[Z].name=ne.name+(ne.value?" ("+ne.value+")":""):this.addInput(ne.name,a.ALL_TYPES)}}},re.prototype.getTitle=function(){return this.flags.collapsed?this.properties.func:"Func"},re.prototype.onGetCode=function(U){if(this.shader_destination&&this.isOutputConnected(0)){for(var V=[],B=0;B<3;++B)V.push({name:C(this,B),type:this.getInputData(B)||"float"});var Z=b(this,0);if(Z){var ne=c[this.properties.func];if(ne){var oe=V[0].type,ce=ne.return_type;ce=="T"&&(ce=oe);for(var xe=[],B=0;B<ne.params.length;++B){var de=ne.params[B],G=V[B].name;G==null&&(G=de.value!=null?de.value:"(1.0)",V[B].type="float"),(de.type=="T"&&V[B].type!=oe||de.type!="T"&&V[B].type!=oe)&&(G=A(G,V[B].type,oe)),xe.push(G)}U.addFunction("round",`float round(float v){ return floor(v+0.5); }
vec2 round(vec2 v){ return floor(v+vec2(0.5));}
vec3 round(vec3 v){ return floor(v+vec3(0.5));}
vec4 round(vec4 v){ return floor(v+vec4(0.5)); }
`),U.addCode("code",ce+" "+Z+" = "+ne.func+"("+xe.join(",")+");",this.shader_destination),this.setOutputData(0,ce)}}}},m("math/func",re);function F(){this.addInput("A",a.ALL_TYPES),this.addInput("B",a.ALL_TYPES),this.addOutput("C","vec4"),this.properties={code:"C = A+B",type:"vec4"},this.addWidget("text","code",this.properties.code,{property:"code"}),this.addWidget("combo","type",this.properties.type,{values:["float","vec2","vec3","vec4"],property:"type"})}F.title="Snippet",F.prototype.onPropertyChanged=function(U,V){this.graph&&this.graph._version++,U=="type"&&this.outputs[0].type!=V&&(this.disconnectOutput(0),this.outputs[0].type=V)},F.prototype.getTitle=function(){return this.flags.collapsed?this.properties.code:"Snippet"},F.prototype.onGetCode=function(U){if(!(!this.shader_destination||!this.isOutputConnected(0))){var V=C(this,0);V||(V="1.0");var B=C(this,1);B||(B="1.0");var Z=b(this,0);if(Z){var ne=this.getInputData(0)||"float",oe=this.getInputData(1)||"float",ce=this.properties.type;if(ne=="T"||oe=="T")return null;var xe="funcSnippet"+this.id,de=`
`+ce+" "+xe+"( "+ne+" A, "+oe+` B) {
`;de+="	"+ce+" C = "+ce+`(0.0);
`,de+="	"+this.properties.code+`;
`,de+=`	return C;
}
`,U.addCode("functions",de,this.shader_destination),U.addCode("code",ce+" "+Z+" = "+xe+"("+V+","+B+");",this.shader_destination),this.setOutputData(0,ce)}}},m("utils/snippet",F);function J(){this.addOutput("out","float")}J.title="Rand",J.prototype.onGetCode=function(U){if(!(!this.shader_destination||!this.isOutputConnected(0))){var V=b(this,0);U.addUniform("u_rand"+this.id,"float",function(){return Math.random()}),U.addCode("code","float "+V+" = u_rand"+this.id+";",this.shader_destination),this.setOutputData(0,"float")}},m("input/rand",J);function z(){this.addInput("out",a.ALL_TYPES),this.addInput("scale","float"),this.addOutput("out","float"),this.properties={type:"noise",scale:1},this.addWidget("combo","type",this.properties.type,{property:"type",values:z.NOISE_TYPES}),this.addWidget("number","scale",this.properties.scale,{property:"scale"})}z.NOISE_TYPES=["noise","rand"],z.title="noise",z.prototype.onGetCode=function(U){if(!(!this.shader_destination||!this.isOutputConnected(0))){var V=C(this,0),B=b(this,0),Z=this.getInputData(0);V||(Z="vec2",V=U.buffer_names.uvs),U.addFunction("noise",z.shader_functions),U.addUniform("u_noise_scale"+this.id,"float",this.properties.scale),Z=="float"?U.addCode("code","float "+B+" = snoise( vec2("+V+") * u_noise_scale"+this.id+");",this.shader_destination):Z=="vec2"||Z=="vec3"?U.addCode("code","float "+B+" = snoise("+V+" * u_noise_scale"+this.id+");",this.shader_destination):Z=="vec4"&&U.addCode("code","float "+B+" = snoise("+V+".xyz * u_noise_scale"+this.id+");",this.shader_destination),this.setOutputData(0,"float")}},m("math/noise",z),z.shader_functions=`
		vec3 permute(vec3 x) { return mod(((x*34.0)+1.0)*x, 289.0); }
		
		float snoise(vec2 v){
		  const vec4 C = vec4(0.211324865405187, 0.366025403784439,-0.577350269189626, 0.024390243902439);
		  vec2 i  = floor(v + dot(v, C.yy) );
		  vec2 x0 = v -   i + dot(i, C.xx);
		  vec2 i1;
		  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);
		  vec4 x12 = x0.xyxy + C.xxzz;
		  x12.xy -= i1;
		  i = mod(i, 289.0);
		  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))
		  + i.x + vec3(0.0, i1.x, 1.0 ));
		  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)), 0.0);
		  m = m*m ;
		  m = m*m ;
		  vec3 x = 2.0 * fract(p * C.www) - 1.0;
		  vec3 h = abs(x) - 0.5;
		  vec3 ox = floor(x + 0.5);
		  vec3 a0 = x - ox;
		  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );
		  vec3 g;
		  g.x  = a0.x  * x0.x  + h.x  * x0.y;
		  g.yz = a0.yz * x12.xz + h.yz * x12.yw;
		  return 130.0 * dot(m, g);
		}
		vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}
		vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}
		
		float snoise(vec3 v){ 
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		
		// First corner
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		
		// Other corners
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		
		  //  x0 = x0 - 0. + 0.0 * C 
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		
		// Permutations
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
		             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
		           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
		           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		
		// Gradients
		// ( N*N points uniformly over a square, mapped onto an octahedron.)
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		
		//Normalise gradients
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		
		// Mix final noise value
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),dot(p2,x2), dot(p3,x3) ) );
		}
		
		vec3 hash3( vec2 p ){
		    vec3 q = vec3( dot(p,vec2(127.1,311.7)), 
						   dot(p,vec2(269.5,183.3)), 
						   dot(p,vec2(419.2,371.9)) );
			return fract(sin(q)*43758.5453);
		}
		vec4 hash4( vec3 p ){
		    vec4 q = vec4( dot(p,vec3(127.1,311.7,257.3)), 
						   dot(p,vec3(269.5,183.3,335.1)), 
						   dot(p,vec3(314.5,235.1,467.3)), 
						   dot(p,vec3(419.2,371.9,114.9)) );
			return fract(sin(q)*43758.5453);
		}
		
		float iqnoise( in vec2 x, float u, float v ){
		    vec2 p = floor(x);
		    vec2 f = fract(x);
			
			float k = 1.0+63.0*pow(1.0-v,4.0);
			
			float va = 0.0;
			float wt = 0.0;
		    for( int j=-2; j<=2; j++ )
		    for( int i=-2; i<=2; i++ )
		    {
		        vec2 g = vec2( float(i),float(j) );
				vec3 o = hash3( p + g )*vec3(u,u,1.0);
				vec2 r = g - f + o.xy;
				float d = dot(r,r);
				float ww = pow( 1.0-smoothstep(0.0,1.414,sqrt(d)), k );
				va += o.z*ww;
				wt += ww;
		    }
			
		    return va/wt;
		}
		`;function $(){this.addOutput("out","float")}$.title="Time",$.prototype.onGetCode=function(U){if(!(!this.shader_destination||!this.isOutputConnected(0))){var V=b(this,0);U.addUniform("u_time"+this.id,"float",function(){return getTime()*.001}),U.addCode("code","float "+V+" = u_time"+this.id+";",this.shader_destination),this.setOutputData(0,"float")}},m("input/time",$);function L(){this.addInput("in","T"),this.addOutput("out","float")}L.title="Dither",L.prototype.onGetCode=function(U){if(!(!this.shader_destination||!this.isOutputConnected(0))){var V=C(this,0),B="float",Z=b(this,0),ne=this.getInputData(0);V=R(V,ne,"float"),U.addFunction("dither8x8",L.dither_func),U.addCode("code",B+" "+Z+" = dither8x8("+V+");",this.shader_destination),this.setOutputData(0,B)}},L.dither_values=[.515625,.140625,.640625,.046875,.546875,.171875,.671875,.765625,.265625,.890625,.390625,.796875,.296875,.921875,.421875,.203125,.703125,.078125,.578125,.234375,.734375,.109375,.609375,.953125,.453125,.828125,.328125,.984375,.484375,.859375,.359375,.0625,.5625,.1875,.6875,.03125,.53125,.15625,.65625,.8125,.3125,.9375,.4375,.78125,.28125,.90625,.40625,.25,.75,.125,.625,.21875,.71875,.09375,.59375,1.0001,.5,.875,.375,.96875,.46875,.84375,.34375],L.dither_func=`
				float dither8x8(float brightness) {
				  vec2 position = vec2(0.0);
				  #ifdef FRAGMENT
					position = gl_FragCoord.xy;
				  #endif
				  int x = int(mod(position.x, 8.0));
				  int y = int(mod(position.y, 8.0));
				  int index = x + y * 8;
				  float limit = 0.0;
				  if (x < 8) {
					if(index==0) limit = 0.015625;
					`+L.dither_values.map(function(U,V){return"else if(index== "+(V+1)+") limit = "+U+";"}).join(`
`)+`
				  }
				  return brightness < limit ? 0.0 : 1.0;
				}
`,m("math/dither",L);function W(){this.addInput("",a.ALL_TYPES),this.addOutput("",""),this.properties={min_value:0,max_value:1,min_value2:0,max_value2:1},this.addWidget("number","min",0,{step:.1,property:"min_value"}),this.addWidget("number","max",1,{step:.1,property:"max_value"}),this.addWidget("number","min2",0,{step:.1,property:"min_value2"}),this.addWidget("number","max2",1,{step:.1,property:"max_value2"})}W.title="Remap",W.prototype.onPropertyChanged=function(){this.graph&&this.graph._version++},W.prototype.onConnectionsChange=function(){var U=this.getInputDataType(0);this.outputs[0].type=U||"T"},W.prototype.onGetCode=function(U){if(!(!this.shader_destination||!this.isOutputConnected(0))){var V=C(this,0),B=b(this,0);if(!(!V&&!B)){var Z=this.getInputDataType(0);if(this.outputs[0].type=Z,Z=="T"){console.warn("node type is T and cannot be resolved");return}if(!V){U.addCode("code","	"+Z+" "+B+" = "+Z+`(0.0);
`);return}var ne=T(this.properties.min_value),oe=T(this.properties.max_value),ce=T(this.properties.min_value2),xe=T(this.properties.max_value2);U.addCode("code",Z+" "+B+" = ( ("+V+" - "+ne+") / ("+oe+" - "+ne+") ) * ("+xe+" - "+ce+") + "+ce+";",this.shader_destination),this.setOutputData(0,Z)}}},m("math/remap",W)})(litegraph),(function(e){var t=e.LiteGraph,n=new Float32Array(16),a=new Float32Array(16),s=new Float32Array(16),u=new Float32Array(16),c={u_view:n,u_projection:a,u_viewprojection:s,u_model:u};t.LGraphRender={onRequestCameraMatrices:null};function h(){return Math.random()*1e5|0}function f(){this.addInput("obj",""),this.addInput("radius","number"),this.addOutput("out","geometry"),this.addOutput("points","[vec3]"),this.properties={radius:1,num_points:4096,generate_normals:!0,regular:!1,mode:f.SPHERE,force_update:!1},this.points=new Float32Array(this.properties.num_points*3),this.normals=new Float32Array(this.properties.num_points*3),this.must_update=!0,this.version=0;var D=this;this.addWidget("button","update",null,function(){D.must_update=!0}),this.geometry={vertices:null,_id:h()},this._old_obj=null,this._last_radius=null}e.LGraphPoints3D=f,f.RECTANGLE=1,f.CIRCLE=2,f.CUBE=10,f.SPHERE=11,f.HEMISPHERE=12,f.INSIDE_SPHERE=13,f.OBJECT=20,f.OBJECT_UNIFORMLY=21,f.OBJECT_INSIDE=22,f.MODE_VALUES={rectangle:f.RECTANGLE,circle:f.CIRCLE,cube:f.CUBE,sphere:f.SPHERE,hemisphere:f.HEMISPHERE,inside_sphere:f.INSIDE_SPHERE,object:f.OBJECT,object_uniformly:f.OBJECT_UNIFORMLY,object_inside:f.OBJECT_INSIDE},f.widgets_info={mode:{widget:"combo",values:f.MODE_VALUES}},f.title="list of points",f.desc="returns an array of points",f.prototype.onPropertyChanged=function(D,M){this.must_update=!0},f.prototype.onExecute=function(){var D=this.getInputData(0);(D!=this._old_obj||D&&D._version!=this._old_obj_version)&&(this._old_obj=D,this.must_update=!0);var M=this.getInputData(1);M==null&&(M=this.properties.radius),this._last_radius!=M&&(this._last_radius=M,this.must_update=!0),(this.must_update||this.properties.force_update)&&(this.must_update=!1,this.updatePoints()),this.geometry.vertices=this.points,this.geometry.normals=this.normals,this.geometry._version=this.version,this.setOutputData(0,this.geometry)},f.prototype.updatePoints=function(){var D=this.properties.num_points|0;D<1&&(D=1),(!this.points||this.points.length!=D*3)&&(this.points=new Float32Array(D*3)),this.properties.generate_normals?(!this.normals||this.normals.length!=this.points.length)&&(this.normals=new Float32Array(this.points.length)):this.normals=null;var M=this._last_radius||this.properties.radius,j=this.properties.mode,H=this.getInputData(0);this._old_obj_version=H?H._version:null,this.points=f.generatePoints(M,D,j,this.points,this.normals,this.properties.regular,H),this.version++},f.generatePoints=function(D,M,j,H,X,K,re){var F=M*3;(!H||H.length!=F)&&(H=new Float32Array(F));var J=new Float32Array(3),z=new Float32Array([0,1,0]);if(K){if(j==f.RECTANGLE){for(var $=Math.floor(Math.sqrt(M)),L=0;L<$;++L)for(var W=0;W<$;++W){var U=L*3+W*3*$;H[U]=(L/$-.5)*D*2,H[U+1]=0,H[U+2]=(W/$-.5)*D*2}if(H=new Float32Array(H.subarray(0,$*$*3)),X)for(var L=0;L<X.length;L+=3)X.set(z,L)}else if(j==f.SPHERE){for(var $=Math.floor(Math.sqrt(M)),L=0;L<$;++L)for(var W=0;W<$;++W){var U=L*3+W*3*$;polarToCartesian(J,L/$*2*Math.PI,(W/$-.5)*2*Math.PI,D),H[U]=J[0],H[U+1]=J[1],H[U+2]=J[2]}H=new Float32Array(H.subarray(0,$*$*3)),X&&f.generateSphericalNormals(H,X)}else if(j==f.CIRCLE){for(var L=0;L<F;L+=3){var V=2*Math.PI*(L/F);H[L]=Math.cos(V)*D,H[L+1]=0,H[L+2]=Math.sin(V)*D}if(X)for(var L=0;L<X.length;L+=3)X.set(z,L)}}else if(j==f.RECTANGLE){for(var L=0;L<F;L+=3)H[L]=(Math.random()-.5)*D*2,H[L+1]=0,H[L+2]=(Math.random()-.5)*D*2;if(X)for(var L=0;L<X.length;L+=3)X.set(z,L)}else if(j==f.CUBE){for(var L=0;L<F;L+=3)H[L]=(Math.random()-.5)*D*2,H[L+1]=(Math.random()-.5)*D*2,H[L+2]=(Math.random()-.5)*D*2;if(X)for(var L=0;L<X.length;L+=3)X.set(z,L)}else j==f.SPHERE?(f.generateSphere(H,F,D),X&&f.generateSphericalNormals(H,X)):j==f.HEMISPHERE?(f.generateHemisphere(H,F,D),X&&f.generateSphericalNormals(H,X)):j==f.CIRCLE?(f.generateInsideCircle(H,F,D),X&&f.generateSphericalNormals(H,X)):j==f.INSIDE_SPHERE?(f.generateInsideSphere(H,F,D),X&&f.generateSphericalNormals(H,X)):j==f.OBJECT?f.generateFromObject(H,X,F,re,!1):j==f.OBJECT_UNIFORMLY?f.generateFromObject(H,X,F,re,!0):j==f.OBJECT_INSIDE?f.generateFromInsideObject(H,F,re):console.warn("wrong mode in LGraphPoints3D");return H},f.generateSphericalNormals=function(D,M){for(var j=new Float32Array(3),H=0;H<M.length;H+=3)j[0]=D[H],j[1]=D[H+1],j[2]=D[H+2],vec3.normalize(j,j),M.set(j,H)},f.generateSphere=function(D,M,j){for(var H=0;H<M;H+=3){var X=Math.random(),K=Math.random(),re=2*Math.cos(2*Math.PI*X)*Math.sqrt(K*(1-K)),F=1-2*K,J=2*Math.sin(2*Math.PI*X)*Math.sqrt(K*(1-K));D[H]=re*j,D[H+1]=F*j,D[H+2]=J*j}},f.generateHemisphere=function(D,M,j){for(var H=0;H<M;H+=3){var X=Math.random(),K=Math.random(),re=Math.cos(2*Math.PI*X)*Math.sqrt(1-K*K),F=K,J=Math.sin(2*Math.PI*X)*Math.sqrt(1-K*K);D[H]=re*j,D[H+1]=F*j,D[H+2]=J*j}},f.generateInsideCircle=function(D,M,j){for(var H=0;H<M;H+=3){var X=Math.random(),K=Math.random(),re=Math.cos(2*Math.PI*X)*Math.sqrt(1-K*K),F=Math.sin(2*Math.PI*X)*Math.sqrt(1-K*K);D[H]=re*j,D[H+1]=0,D[H+2]=F*j}},f.generateInsideSphere=function(D,M,j){for(var H=0;H<M;H+=3){var X=Math.random(),K=Math.random(),re=X*2*Math.PI,F=Math.acos(2*K-1),J=Math.cbrt(Math.random())*j,z=Math.sin(re),$=Math.cos(re),L=Math.sin(F),W=Math.cos(F);D[H]=J*L*$,D[H+1]=J*L*z,D[H+2]=J*W}};function m(D,M){var j=D.length,H=0,X=0,K=j;if(j==0)return-1;if(j==1)return 0;for(;K>=H;){X=(K+H)*.5|0;var re=D[X];if(re==M)return X;if(H==K-1)return H;re<M?H=X:K=X}return X}f.generateFromObject=function(D,M,j,H,X){if(H){var K=null,re=null,F=null,J=null;if(H.constructor===GL.Mesh&&(K=H.vertexBuffers.vertices.data,re=H.vertexBuffers.normals?H.vertexBuffers.normals.data:null,F=H.indexBuffers.indices?H.indexBuffers.indices.data:null,F||(F=H.indexBuffers.triangles?H.indexBuffers.triangles.data:null)),!K)return null;var z=F?F.length/3:K.length/9,$=0;if(X){J=new Float32Array(z);for(var L=0;L<z;++L){F?(de=F[L*3]*3,G=F[L*3+1]*3,Y=F[L*3+2]*3):(de=L*9,G=L*9+3,Y=L*9+6);var W=K.subarray(de,de+3),U=K.subarray(G,G+3),V=K.subarray(Y,Y+3),B=vec3.distance(W,U),Z=vec3.distance(U,V),ne=vec3.distance(V,W),oe=(B+Z+ne)/2;$+=Math.sqrt(oe*(oe-B)*(oe-Z)*(oe-ne)),J[L]=$}for(var L=0;L<z;++L)J[L]/=$}for(var L=0;L<j;L+=3){var ce=Math.random(),xe=X?m(J,ce):Math.floor(ce*z),de=0,G=0,Y=0;F?(de=F[xe*3]*3,G=F[xe*3+1]*3,Y=F[xe*3+2]*3):(de=xe*9,G=xe*9+3,Y=xe*9+6);var oe=Math.random(),te=Math.random(),ee=Math.sqrt(oe),se=1-ee,ue=ee*(1-te),be=te*ee;if(D[L]=se*K[de]+ue*K[G]+be*K[Y],D[L+1]=se*K[de+1]+ue*K[G+1]+be*K[Y+1],D[L+2]=se*K[de+2]+ue*K[G+2]+be*K[Y+2],M&&re){M[L]=se*re[de]+ue*re[G]+be*re[Y],M[L+1]=se*re[de+1]+ue*re[G+1]+be*re[Y+1],M[L+2]=se*re[de+2]+ue*re[G+2]+be*re[Y+2];var ye=M.subarray(L,L+3);vec3.normalize(ye,ye)}}}},f.generateFromInsideObject=function(D,M,j){if(!(!j||j.constructor!==GL.Mesh)){var H=j.getBoundingBox();j.octree||(j.octree=new GL.Octree(j));for(var X=j.octree,K=vec3.create(),re=vec3.fromValues(1,0,0),F=vec3.create(),J=0,z=0;J<M&&z<D.length*10;){z+=1;var $=vec3.random(F);$[0]=($[0]*2-1)*H[3]+H[0],$[1]=($[1]*2-1)*H[4]+H[1],$[2]=($[2]*2-1)*H[5]+H[2],K.set($);var L=X.testRay(K,re,0,1e4,!0,GL.Octree.ALL);!L||L.length%2==0||(D.set($,J),J+=3)}}},t.registerNodeType("geometry/points3D",f);function _(){this.addInput("points","geometry"),this.addOutput("instances","[mat4]"),this.properties={mode:1,autoupdate:!0},this.must_update=!0,this.matrices=[],this.first_time=!0}_.NORMAL=0,_.VERTICAL=1,_.SPHERICAL=2,_.RANDOM=3,_.RANDOM_VERTICAL=4,_.modes={normal:0,vertical:1,spherical:2,random:3,random_vertical:4},_.widgets_info={mode:{widget:"combo",values:_.modes}},_.title="points to inst",_.prototype.onExecute=function(){var D=this.getInputData(0);if(!D){this.setOutputData(0,null);return}if(this.isOutputConnected(0)){var M=D._version!=this._version||D._id!=this._geometry_id;(M&&this.properties.autoupdate||this.first_time)&&(this.first_time=!1,this.updateInstances(D)),this.setOutputData(0,this.matrices)}},_.prototype.updateInstances=function(D){var M=D.vertices;if(!M)return null;var j=D.normals,H=this.matrices,X=M.length/3;H.length!=X&&(H.length=X);var K=mat4.create(),re=vec3.create();vec3.create();var F=vec3.fromValues(0,1,0),J=vec3.fromValues(0,0,-1);vec3.fromValues(1,0,0);for(var z=quat.create(),$=vec3.create(),L=vec3.create(),W=vec3.create(),U=0;U<M.length;U+=3){var V=U/3,B=H[V];B||(B=H[V]=mat4.create()),B.set(K);var Z=M.subarray(U,U+3);switch(this.properties.mode){case _.NORMAL:if(mat4.setTranslation(B,Z),j){var ne=j.subarray(U,U+3);W.set(ne),vec3.normalize(W,W),vec3.cross(L,J,W),vec3.normalize(L,L),vec3.cross($,L,W),vec3.normalize($,$),B.set(L,0),B.set(W,4),B.set($,8),mat4.setTranslation(B,Z)}break;case _.VERTICAL:mat4.setTranslation(B,Z);break;case _.SPHERICAL:$.set(Z),vec3.normalize($,$),vec3.cross(L,F,$),vec3.normalize(L,L),vec3.cross(W,$,L),vec3.normalize(W,W),B.set(L,0),B.set(W,4),B.set($,8),mat4.setTranslation(B,Z);break;case _.RANDOM:re[0]=Math.random()*2-1,re[1]=Math.random()*2-1,re[2]=Math.random()*2-1,vec3.normalize(re,re),quat.setAxisAngle(z,re,Math.random()*2*Math.PI),mat4.fromQuat(B,z),mat4.setTranslation(B,Z);break;case _.RANDOM_VERTICAL:quat.setAxisAngle(z,F,Math.random()*2*Math.PI),mat4.fromQuat(B,z),mat4.setTranslation(B,Z);break}}this._version=D._version,this._geometry_id=D._id},t.registerNodeType("geometry/points_to_instances",_);function C(){this.addInput("in","geometry,[mat4]"),this.addInput("mat4","mat4"),this.addOutput("out","geometry"),this.properties={},this.geometry={type:"triangles",vertices:null,_id:h(),_version:0},this._last_geometry_id=-1,this._last_version=-1,this._last_key="",this.must_update=!0}C.title="Transform",C.prototype.onExecute=function(){var D=this.getInputData(0),M=this.getInputData(1);if(D){if(D.constructor===Array){if(D.length==0||(this.outputs[0].type="[mat4]",!this.isOutputConnected(0)))return;if(!M){this.setOutputData(0,D);return}this._output||(this._output=new Array),this._output.length!=D.length&&(this._output.length=D.length);for(var j=0;j<D.length;++j){var H=this._output[j];H||(H=this._output[j]=mat4.create()),mat4.multiply(H,D[j],M)}this.setOutputData(0,this._output);return}if(!(!D.vertices||!D.vertices.length)){var X=D;if(this.outputs[0].type="geometry",!!this.isOutputConnected(0)){if(!M){this.setOutputData(0,X);return}var K=typedArrayToArray(M).join(",");(this.must_update||X._id!=this._last_geometry_id||X._version!=this._last_version||K!=this._last_key)&&(this.updateGeometry(X,M),this._last_key=K,this._last_version=X._version,this._last_geometry_id=X._id,this.must_update=!1),this.setOutputData(0,this.geometry)}}}},C.prototype.updateGeometry=function(D,M){var j=D.vertices,H=this.geometry.vertices;(!H||H.length!=j.length)&&(H=this.geometry.vertices=new Float32Array(j.length));for(var X=vec3.create(),K=0,re=H.length;K<re;K+=3)X[0]=j[K],X[1]=j[K+1],X[2]=j[K+2],mat4.multiplyVec3(X,M,X),H[K]=X[0],H[K+1]=X[1],H[K+2]=X[2];if(D.normals){(!this.geometry.normals||this.geometry.normals.length!=D.normals.length)&&(this.geometry.normals=new Float32Array(D.normals.length));var F=this.geometry.normals,J=mat4.invert(mat4.create(),M);J&&mat4.transpose(J,J);for(var z=D.normals,K=0,re=F.length;K<re;K+=3)X[0]=z[K],X[1]=z[K+1],X[2]=z[K+2],mat4.multiplyVec3(X,J,X),F[K]=X[0],F[K+1]=X[1],F[K+2]=X[2]}this.geometry.type=D.type,this.geometry._version++},t.registerNodeType("geometry/transform",C);function b(){this.addInput("sides","number"),this.addInput("radius","number"),this.addOutput("out","geometry"),this.properties={sides:6,radius:1,uvs:!1},this.geometry={type:"line_loop",vertices:null,_id:h()},this.geometry_id=-1,this.version=-1,this.must_update=!0,this.last_info={sides:-1,radius:-1}}b.title="Polygon",b.prototype.onExecute=function(){if(this.isOutputConnected(0)){var D=this.getInputOrProperty("sides"),M=this.getInputOrProperty("radius");D=Math.max(3,D)|0,(this.last_info.sides!=D||this.last_info.radius!=M)&&this.updateGeometry(D,M),this.setOutputData(0,this.geometry)}},b.prototype.updateGeometry=function(D,M){var j=3*D,H=this.geometry.vertices;(!H||H.length!=j)&&(H=this.geometry.vertices=new Float32Array(3*D));var X=Math.PI*2/D,K=this.properties.uvs;K&&(uvs=this.geometry.coords=new Float32Array(3*D));for(var re=0;re<D;++re){var F=X*-re,J=Math.cos(F)*M,z=0,$=Math.sin(F)*M;H[re*3]=J,H[re*3+1]=z,H[re*3+2]=$}this.geometry._id=++this.geometry_id,this.geometry._version=++this.version,this.last_info.sides=D,this.last_info.radius=M},t.registerNodeType("geometry/polygon",b);function T(){this.addInput("","geometry"),this.addOutput("","geometry"),this.properties={top_cap:!0,bottom_cap:!0,offset:[0,100,0]},this.version=-1,this._last_geo_version=-1,this._must_update=!0}T.title="extrude",T.prototype.onPropertyChanged=function(D,M){this._must_update=!0},T.prototype.onExecute=function(){var D=this.getInputData(0);!D||!this.isOutputConnected(0)||((D.version!=this._last_geo_version||this._must_update)&&(this._geo=this.extrudeGeometry(D,this._geo),this._geo&&(this._geo.version=this.version++),this._must_update=!1),this.setOutputData(0,this._geo))},T.prototype.extrudeGeometry=function(D){var M=D.vertices,j=M.length/3,H=vec3.create(),X=vec3.create(),K=vec3.create(),re=vec3.create(),F=new Float32Array(this.properties.offset);if(D.type=="line_loop")for(var J=new Float32Array(j*6*3),z=0,$=0,L=M.length;$<L;$+=3)H[0]=M[$],H[1]=M[$+1],H[2]=M[$+2],$+3<L?(X[0]=M[$+3],X[1]=M[$+4],X[2]=M[$+5]):(X[0]=M[0],X[1]=M[1],X[2]=M[2]),vec3.add(K,H,F),vec3.add(re,X,F),J.set(H,z),z+=3,J.set(X,z),z+=3,J.set(K,z),z+=3,J.set(X,z),z+=3,J.set(re,z),z+=3,J.set(K,z),z+=3;var W={_id:h(),type:"triangles",vertices:J};return W},t.registerNodeType("geometry/extrude",T);function R(){this.addInput("in","geometry"),this.addOutput("out","geometry"),this.properties={code:"V[1] += 0.01 * Math.sin(I + T*0.001);",execute_every_frame:!1},this.geometry=null,this.geometry_id=-1,this.version=-1,this.must_update=!0,this.vertices=null,this.func=null}R.title="geoeval",R.desc="eval code",R.widgets_info={code:{widget:"code"}},R.prototype.onConfigure=function(D){this.compileCode()},R.prototype.compileCode=function(){if(this.properties.code)try{this.func=new Function("V","I","T",this.properties.code),this.boxcolor="#AFA",this.must_update=!0}catch{this.boxcolor="red"}},R.prototype.onPropertyChanged=function(D,M){D=="code"&&(this.properties.code=M,this.compileCode())},R.prototype.onExecute=function(){var D=this.getInputData(0);if(D){if(!this.func){this.setOutputData(0,D);return}if(this.geometry_id!=D._id||this.version!=D._version||this.must_update||this.properties.execute_every_frame){this.must_update=!1,this.geometry_id=D._id,this.properties.execute_every_frame?this.version++:this.version=D._version;var M=this.func,j=getTime();this.geometry||(this.geometry={});for(var H in D)D[H]!=null&&(D[H].constructor==Float32Array?this.geometry[H]=new Float32Array(D[H]):this.geometry[H]=D[H]);this.geometry._id=D._id,this.properties.execute_every_frame?this.geometry._version=this.version:this.geometry._version=D._version+1;var X=vec3.create(),K=this.vertices;!K||this.vertices.length!=D.vertices.length?K=this.vertices=new Float32Array(D.vertices):K.set(D.vertices);for(var H=0;H<K.length;H+=3)X[0]=K[H],X[1]=K[H+1],X[2]=K[H+2],M(X,H/3,j),K[H]=X[0],K[H+1]=X[1],K[H+2]=X[2];this.geometry.vertices=K}this.setOutputData(0,this.geometry)}},t.registerNodeType("geometry/eval",R);function A(){this.addInput("in","geometry"),this.addOutput("out","geometry"),this.properties={min_dist:.4,max_dist:.5,max_connections:0,probability:1},this.geometry_id=-1,this.version=-1,this.my_version=1,this.must_update=!0}if(A.title="connect points",A.desc="adds indices between near points",A.prototype.onPropertyChanged=function(D,M){this.must_update=!0},A.prototype.onExecute=function(){var D=this.getInputData(0);if(D){if(this.geometry_id!=D._id||this.version!=D._version||this.must_update){this.must_update=!1,this.geometry_id=D._id,this.version=D._version,this.geometry={};for(var M in D)this.geometry[M]=D[M];this.geometry._id=h(),this.geometry._version=this.my_version++;for(var j=D.vertices,H=j.length,X=this.properties.min_dist,K=this.properties.max_dist,re=this.properties.probability,F=this.properties.max_connections,J=[],M=0;M<H;M+=3)for(var z=j[M],$=j[M+1],L=j[M+2],W=0,U=M+3;U<H;U+=3){var V=j[U],B=j[U+1],Z=j[U+2],ne=Math.sqrt((z-V)*(z-V)+($-B)*($-B)+(L-Z)*(L-Z));if(!(ne>K||ne<X||re<1&&re<Math.random())&&(J.push(M/3,U/3),W+=1,F&&W>F))break}this.geometry.indices=this.indices=new Uint32Array(J)}this.indices&&this.indices.length?(this.geometry.indices=this.indices,this.setOutputData(0,this.geometry)):this.setOutputData(0,null)}},t.registerNodeType("geometry/connectPoints",A),typeof GL>"u")return;function I(){this.addInput("mesh","mesh"),this.addOutput("out","geometry"),this.geometry={},this.last_mesh=null}I.title="to geometry",I.desc="converts a mesh to geometry",I.prototype.onExecute=function(){var D=this.getInputData(0);if(D){if(D!=this.last_mesh){this.last_mesh=D;for(i in D.vertexBuffers){var M=D.vertexBuffers[i];this.geometry[i]=M.data}D.indexBuffers.triangles&&(this.geometry.indices=D.indexBuffers.triangles.data),this.geometry._id=h(),this.geometry._version=0}this.setOutputData(0,this.geometry),this.geometry&&this.setOutputData(1,this.geometry.vertices)}},t.registerNodeType("geometry/toGeometry",I);function P(){this.addInput("in","geometry"),this.addOutput("mesh","mesh"),this.properties={},this.version=-1,this.mesh=null}P.title="Geo to Mesh",P.prototype.updateMesh=function(D){this.mesh||(this.mesh=new GL.Mesh);for(var M in D)if(M[0]!="_"){var j=D[M],H=GL.Mesh.common_buffers[M];if(!(!H&&M!="indices")){var X=H?H.spacing:3,K=this.mesh.vertexBuffers[M];!K||K.data.length!=j.length?K=new GL.Buffer(M=="indices"?GL.ELEMENT_ARRAY_BUFFER:GL.ARRAY_BUFFER,j,X,GL.DYNAMIC_DRAW):(K.data.set(j),K.upload(GL.DYNAMIC_DRAW)),this.mesh.addBuffer(M,K)}}if(this.mesh.vertexBuffers.normals&&this.mesh.vertexBuffers.normals.data.length!=this.mesh.vertexBuffers.vertices.data.length){for(var re=new Float32Array([0,1,0]),F=new Float32Array(this.mesh.vertexBuffers.vertices.data.length),M=0;M<F.length;M+=3)F.set(re,M);K=new GL.Buffer(GL.ARRAY_BUFFER,F,3),this.mesh.addBuffer("normals",K)}return this.mesh.updateBoundingBox(),this.geometry_id=this.mesh.id=D._id,this.version=this.mesh.version=D._version,this.mesh},P.prototype.onExecute=function(){var D=this.getInputData(0);D&&((this.version!=D._version||this.geometry_id!=D._id)&&this.updateMesh(D),this.setOutputData(0,this.mesh))},t.registerNodeType("geometry/toMesh",P);function N(){this.addInput("mesh","mesh"),this.addInput("mat4","mat4"),this.addInput("tex","texture"),this.properties={enabled:!0,primitive:GL.TRIANGLES,additive:!1,color:[1,1,1],opacity:1},this.color=vec4.create([1,1,1,1]),this.model_matrix=mat4.create(),this.uniforms={u_color:this.color,u_model:this.model_matrix}}N.title="Render Mesh",N.desc="renders a mesh flat",N.PRIMITIVE_VALUES={points:GL.POINTS,lines:GL.LINES,line_loop:GL.LINE_LOOP,line_strip:GL.LINE_STRIP,triangles:GL.TRIANGLES,triangle_fan:GL.TRIANGLE_FAN,triangle_strip:GL.TRIANGLE_STRIP},N.widgets_info={primitive:{widget:"combo",values:N.PRIMITIVE_VALUES},color:{widget:"color"}},N.prototype.onExecute=function(){if(this.properties.enabled){var D=this.getInputData(0);if(D){if(!t.LGraphRender.onRequestCameraMatrices){console.warn("cannot render geometry, LiteGraph.onRequestCameraMatrices is null, remember to fill this with a callback(view_matrix, projection_matrix,viewprojection_matrix) to use 3D rendering from the graph");return}t.LGraphRender.onRequestCameraMatrices(n,a,s);var M=null,j=this.getInputData(2);j?(M=gl.shaders.textured,M||(M=gl.shaders.textured=new GL.Shader(k.vertex_shader_code,k.fragment_shader_code,{USE_TEXTURE:""}))):(M=gl.shaders.flat,M||(M=gl.shaders.flat=new GL.Shader(k.vertex_shader_code,k.fragment_shader_code))),this.color.set(this.properties.color),this.color[3]=this.properties.opacity;var H=this.model_matrix,X=this.getInputData(1);X?H.set(X):mat4.identity(H),this.uniforms.u_point_size=1;var K=this.properties.primitive;M.uniforms(c),M.uniforms(this.uniforms),this.properties.opacity>=1?gl.disable(gl.BLEND):gl.enable(gl.BLEND),gl.enable(gl.DEPTH_TEST),this.properties.additive?(gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.depthMask(!1)):gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var re="indices";D.indexBuffers.triangles&&(re="triangles"),M.draw(D,K,re),gl.disable(gl.BLEND),gl.depthMask(!0)}}},t.registerNodeType("geometry/render_mesh",N);function S(){this.addInput("size","number"),this.addOutput("out","mesh"),this.properties={type:1,size:1,subdivisions:32},this.version=Math.random()*1e5|0,this.last_info={type:-1,size:-1,subdivisions:-1}}S.title="Primitive",S.VALID={CUBE:1,PLANE:2,CYLINDER:3,SPHERE:4,CIRCLE:5,HEMISPHERE:6,ICOSAHEDRON:7,CONE:8,QUAD:9},S.widgets_info={type:{widget:"combo",values:S.VALID}},S.prototype.onExecute=function(){if(this.isOutputConnected(0)){var D=this.getInputOrProperty("size");(this.last_info.type!=this.properties.type||this.last_info.size!=D||this.last_info.subdivisions!=this.properties.subdivisions)&&this.updateMesh(this.properties.type,D,this.properties.subdivisions),this.setOutputData(0,this._mesh)}},S.prototype.updateMesh=function(D,M,j){switch(j=Math.max(0,j)|0,D){case 1:this._mesh=GL.Mesh.cube({size:M,normals:!0,coords:!0});break;case 2:this._mesh=GL.Mesh.plane({size:M,xz:!0,detail:j,normals:!0,coords:!0});break;case 3:this._mesh=GL.Mesh.cylinder({size:M,subdivisions:j,normals:!0,coords:!0});break;case 4:this._mesh=GL.Mesh.sphere({size:M,long:j,lat:j,normals:!0,coords:!0});break;case 5:this._mesh=GL.Mesh.circle({size:M,slices:j,normals:!0,coords:!0});break;case 6:this._mesh=GL.Mesh.sphere({size:M,long:j,lat:j,normals:!0,coords:!0,hemi:!0});break;case 7:this._mesh=GL.Mesh.icosahedron({size:M,subdivisions:j});break;case 8:this._mesh=GL.Mesh.cone({radius:M,height:M,subdivisions:j});break;case 9:this._mesh=GL.Mesh.plane({size:M,xz:!1,detail:j,normals:!0,coords:!0});break}this.last_info.type=D,this.last_info.size=M,this.last_info.subdivisions=j,this._mesh.version=this.version++},t.registerNodeType("geometry/mesh_primitive",S);function k(){this.addInput("in","geometry"),this.addInput("mat4","mat4"),this.addInput("tex","texture"),this.properties={enabled:!0,point_size:.1,fixed_size:!1,additive:!0,color:[1,1,1],opacity:1},this.color=vec4.create([1,1,1,1]),this.uniforms={u_point_size:1,u_perspective:1,u_point_perspective:1,u_color:this.color},this.geometry_id=-1,this.version=-1,this.mesh=null}k.title="renderPoints",k.desc="render points with a texture",k.widgets_info={color:{widget:"color"}},k.prototype.updateMesh=function(D){this.buffer,!this.buffer||!this.buffer.data||this.buffer.data.length!=D.vertices.length?this.buffer=new GL.Buffer(GL.ARRAY_BUFFER,D.vertices,3,GL.DYNAMIC_DRAW):(this.buffer.data.set(D.vertices),this.buffer.upload(GL.DYNAMIC_DRAW)),this.mesh||(this.mesh=new GL.Mesh),this.mesh.addBuffer("vertices",this.buffer),this.geometry_id=this.mesh.id=D._id,this.version=this.mesh.version=D._version},k.prototype.onExecute=function(){if(this.properties.enabled){var D=this.getInputData(0);if(D){if((this.version!=D._version||this.geometry_id!=D._id)&&this.updateMesh(D),!t.LGraphRender.onRequestCameraMatrices){console.warn("cannot render geometry, LiteGraph.onRequestCameraMatrices is null, remember to fill this with a callback(view_matrix, projection_matrix,viewprojection_matrix) to use 3D rendering from the graph");return}t.LGraphRender.onRequestCameraMatrices(n,a,s);var M=null,j=this.getInputData(2);j?(M=gl.shaders.textured_points,M||(M=gl.shaders.textured_points=new GL.Shader(k.vertex_shader_code,k.fragment_shader_code,{USE_TEXTURED_POINTS:""}))):(M=gl.shaders.points,M||(M=gl.shaders.points=new GL.Shader(k.vertex_shader_code,k.fragment_shader_code,{USE_POINTS:""}))),this.color.set(this.properties.color),this.color[3]=this.properties.opacity;var H=this.getInputData(1);H?u.set(H):mat4.identity(u),this.uniforms.u_point_size=this.properties.point_size,this.uniforms.u_point_perspective=this.properties.fixed_size?0:1,this.uniforms.u_perspective=gl.viewport_data[3]*a[5],M.uniforms(c),M.uniforms(this.uniforms),this.properties.opacity>=1?gl.disable(gl.BLEND):gl.enable(gl.BLEND),gl.enable(gl.DEPTH_TEST),this.properties.additive?(gl.blendFunc(gl.SRC_ALPHA,gl.ONE),gl.depthMask(!1)):gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),M.draw(this.mesh,GL.POINTS),gl.disable(gl.BLEND),gl.depthMask(!0)}}},t.registerNodeType("geometry/render_points",k),k.vertex_shader_code=`				precision mediump float;
				attribute vec3 a_vertex;
				varying vec3 v_vertex;
				attribute vec3 a_normal;
				varying vec3 v_normal;
				#ifdef USE_COLOR
					attribute vec4 a_color;
					varying vec4 v_color;
				#endif
				attribute vec2 a_coord;
				varying vec2 v_coord;
				#ifdef USE_SIZE
					attribute float a_extra;
				#endif
				#ifdef USE_INSTANCING
					attribute mat4 u_model;
				#else
					uniform mat4 u_model;
				#endif
				uniform mat4 u_viewprojection;
				uniform float u_point_size;
				uniform float u_perspective;
				uniform float u_point_perspective;
				float computePointSize(float radius, float w)
				{
					if(radius < 0.0)
						return -radius;
					return u_perspective * radius / w;
				}
				void main() {
					v_coord = a_coord;
					#ifdef USE_COLOR
						v_color = a_color;
					#endif
					v_vertex = ( u_model * vec4( a_vertex, 1.0 )).xyz;
					v_normal = ( u_model * vec4( a_normal, 0.0 )).xyz;
					gl_Position = u_viewprojection * vec4(v_vertex,1.0);
					gl_PointSize = u_point_size;
					#ifdef USE_SIZE
						gl_PointSize = a_extra;
					#endif
					if(u_point_perspective != 0.0)
						gl_PointSize = computePointSize( gl_PointSize, gl_Position.w );
				}			`,k.fragment_shader_code=`				precision mediump float;
				uniform vec4 u_color;
				#ifdef USE_COLOR
					varying vec4 v_color;
				#endif
				varying vec2 v_coord;
				uniform sampler2D u_texture;
				void main() {
					vec4 color = u_color;
					#ifdef USE_TEXTURED_POINTS
						color *= texture2D(u_texture, gl_PointCoord.xy);
					#else
						#ifdef USE_TEXTURE
						  color *= texture2D(u_texture, v_coord);
						  if(color.a < 0.1)
							discard;
						#endif
						#ifdef USE_POINTS
							float dist = length( gl_PointCoord.xy - vec2(0.5) );
							if( dist > 0.45 )
								discard;
						#endif
					#endif
					#ifdef USE_COLOR
						color *= v_color;
					#endif
					gl_FragColor = color;
				}			`})(litegraph),(function(e){var t=e.LiteGraph,n=e.LGraphTexture;if(typeof GL<"u"){let h=function(){this.addInput("Texture","Texture"),this.addInput("Aberration","number"),this.addInput("Distortion","number"),this.addInput("Blur","number"),this.addOutput("Texture","Texture"),this.properties={aberration:1,distortion:1,blur:1,precision:n.DEFAULT},h._shader||(h._shader=new GL.Shader(GL.Shader.SCREEN_VERTEX_SHADER,h.pixel_shader),h._texture=new GL.Texture(3,1,{format:gl.RGB,wrap:gl.CLAMP_TO_EDGE,magFilter:gl.LINEAR,minFilter:gl.LINEAR,pixel_data:[255,0,0,0,255,0,0,0,255]}))},f=function(){this.addInput("Texture","Texture"),this.addInput("Blurred","Texture"),this.addInput("Mask","Texture"),this.addInput("Threshold","number"),this.addOutput("Texture","Texture"),this.properties={shape:"",size:10,alpha:1,threshold:1,high_precision:!1}},m=function(){this.addInput("Texture","Texture"),this.addInput("value1","number"),this.addInput("value2","number"),this.addOutput("Texture","Texture"),this.properties={fx:"halftone",value1:1,value2:1,precision:n.DEFAULT}},_=function(){this.addInput("Tex.","Texture"),this.addInput("intensity","number"),this.addOutput("Texture","Texture"),this.properties={intensity:1,invert:!1,precision:n.DEFAULT},_._shader||(_._shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,_.pixel_shader))};var a=h,s=f,u=m,c=_;h.title="Lens",h.desc="Camera Lens distortion",h.widgets_info={precision:{widget:"combo",values:n.MODE_VALUES}},h.prototype.onExecute=function(){var C=this.getInputData(0);if(this.properties.precision===n.PASS_THROUGH){this.setOutputData(0,C);return}if(C){this._tex=n.getTargetTexture(C,this._tex,this.properties.precision);var b=this.properties.aberration;this.isInputConnected(1)&&(b=this.getInputData(1),this.properties.aberration=b);var T=this.properties.distortion;this.isInputConnected(2)&&(T=this.getInputData(2),this.properties.distortion=T);var R=this.properties.blur;this.isInputConnected(3)&&(R=this.getInputData(3),this.properties.blur=R),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var A=Mesh.getScreenQuad(),I=h._shader;this._tex.drawTo(function(){C.bind(0),I.uniforms({u_texture:0,u_aberration:b,u_distortion:T,u_blur:R}).draw(A)}),this.setOutputData(0,this._tex)}},h.pixel_shader=`precision highp float;
					precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform vec2 u_camera_planes;
					uniform float u_aberration;
					uniform float u_distortion;
					uniform float u_blur;
					
					void main() {
						vec2 coord = v_coord;
						float dist = distance(vec2(0.5), coord);
						vec2 dist_coord = coord - vec2(0.5);
						float percent = 1.0 + ((0.5 - dist) / 0.5) * u_distortion;
						dist_coord *= percent;
						coord = dist_coord + vec2(0.5);
						vec4 color = texture2D(u_texture,coord, u_blur * dist);
						color.r = texture2D(u_texture,vec2(0.5) + dist_coord * (1.0+0.01*u_aberration), u_blur * dist ).r;
						color.b = texture2D(u_texture,vec2(0.5) + dist_coord * (1.0-0.01*u_aberration), u_blur * dist ).b;
						gl_FragColor = color;
					}
					`,t.registerNodeType("fx/lens",h),e.LGraphFXLens=h,f.title="Bokeh",f.desc="applies an Bokeh effect",f.widgets_info={shape:{widget:"texture"}},f.prototype.onExecute=function(){var C=this.getInputData(0),b=this.getInputData(1),T=this.getInputData(2);if(!C||!T||!this.properties.shape){this.setOutputData(0,C);return}b||(b=C);var R=n.getTexture(this.properties.shape);if(R){var A=this.properties.threshold;this.isInputConnected(3)&&(A=this.getInputData(3),this.properties.threshold=A);var I=gl.UNSIGNED_BYTE;this.properties.high_precision&&(I=gl.half_float_ext?gl.HALF_FLOAT_OES:gl.FLOAT),(!this._temp_texture||this._temp_texture.type!=I||this._temp_texture.width!=C.width||this._temp_texture.height!=C.height)&&(this._temp_texture=new GL.Texture(C.width,C.height,{type:I,format:gl.RGBA,filter:gl.LINEAR})),this.properties.size;var P=f._first_shader;P||(P=f._first_shader=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,f._first_pixel_shader));var N=f._second_shader;N||(N=f._second_shader=new GL.Shader(f._second_vertex_shader,f._second_pixel_shader));var S=this._points_mesh;(!S||S._width!=C.width||S._height!=C.height||S._spacing!=2)&&(S=this.createPointsMesh(C.width,C.height,2));var k=Mesh.getScreenQuad(),D=this.properties.size;this.properties.min_light;var M=this.properties.alpha;gl.disable(gl.DEPTH_TEST),gl.disable(gl.BLEND),this._temp_texture.drawTo(function(){C.bind(0),b.bind(1),T.bind(2),P.uniforms({u_texture:0,u_texture_blur:1,u_mask:2,u_texsize:[C.width,C.height]}).draw(k)}),this._temp_texture.drawTo(function(){gl.enable(gl.BLEND),gl.blendFunc(gl.ONE,gl.ONE),C.bind(0),R.bind(3),N.uniforms({u_texture:0,u_mask:2,u_shape:3,u_alpha:M,u_threshold:A,u_pointSize:D,u_itexsize:[1/C.width,1/C.height]}).draw(S,gl.POINTS)}),this.setOutputData(0,this._temp_texture)}},f.prototype.createPointsMesh=function(C,b,T){for(var R=Math.round(C/T),A=Math.round(b/T),I=new Float32Array(R*A*2),P=-1,N=2/C*T,S=2/b*T,k=0;k<A;++k){for(var D=-1,M=0;M<R;++M){var j=k*R*2+M*2;I[j]=D,I[j+1]=P,D+=N}P+=S}return this._points_mesh=GL.Mesh.load({vertices2D:I}),this._points_mesh._width=C,this._points_mesh._height=b,this._points_mesh._spacing=T,this._points_mesh},f._first_pixel_shader=`precision highp float;
					precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform sampler2D u_texture_blur;
					uniform sampler2D u_mask;
					
					void main() {
						vec4 color = texture2D(u_texture, v_coord);
						vec4 blurred_color = texture2D(u_texture_blur, v_coord);
						float mask = texture2D(u_mask, v_coord).x;
					   gl_FragColor = mix(color, blurred_color, mask);
					}
					`,f._second_vertex_shader=`precision highp float;
					attribute vec2 a_vertex2D;
					varying vec4 v_color;
					uniform sampler2D u_texture;
					uniform sampler2D u_mask;
					uniform vec2 u_itexsize;
					uniform float u_pointSize;
					uniform float u_threshold;
					void main() {
						vec2 coord = a_vertex2D * 0.5 + 0.5;
						v_color = texture2D( u_texture, coord );
						v_color += texture2D( u_texture, coord + vec2(u_itexsize.x, 0.0) );
						v_color += texture2D( u_texture, coord + vec2(0.0, u_itexsize.y));
						v_color += texture2D( u_texture, coord + u_itexsize);
						v_color *= 0.25;
						float mask = texture2D(u_mask, coord).x;
						float luminance = length(v_color) * mask;
						/*luminance /= (u_pointSize*u_pointSize)*0.01 */;
						luminance -= u_threshold;
						if(luminance < 0.0)
						{
							gl_Position.x = -100.0;
							return;
						}
						gl_PointSize = u_pointSize;
						gl_Position = vec4(a_vertex2D,0.0,1.0);
					}
					`,f._second_pixel_shader=`precision highp float;
					varying vec4 v_color;
					uniform sampler2D u_shape;
					uniform float u_alpha;
					
					void main() {
						vec4 color = texture2D( u_shape, gl_PointCoord );
						color *= v_color * u_alpha;
						gl_FragColor = color;
					}
`,t.registerNodeType("fx/bokeh",f),e.LGraphFXBokeh=f,m.title="FX",m.desc="applies an FX from a list",m.widgets_info={fx:{widget:"combo",values:["halftone","pixelate","lowpalette","noise","gamma"]},precision:{widget:"combo",values:n.MODE_VALUES}},m.shaders={},m.prototype.onExecute=function(){if(this.isOutputConnected(0)){var C=this.getInputData(0);if(this.properties.precision===n.PASS_THROUGH){this.setOutputData(0,C);return}if(C){this._tex=n.getTargetTexture(C,this._tex,this.properties.precision);var b=this.properties.value1;this.isInputConnected(1)&&(b=this.getInputData(1),this.properties.value1=b);var T=this.properties.value2;this.isInputConnected(2)&&(T=this.getInputData(2),this.properties.value2=T);var R=this.properties.fx,A=m.shaders[R];if(!A){var I=m["pixel_shader_"+R];if(!I)return;A=m.shaders[R]=new GL.Shader(Shader.SCREEN_VERTEX_SHADER,I)}gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var P=Mesh.getScreenQuad(),N=e.LS?LS.Renderer._current_camera:null,S;N?S=[LS.Renderer._current_camera.near,LS.Renderer._current_camera.far]:S=[1,100];var k=null;R=="noise"&&(k=n.getNoiseTexture()),this._tex.drawTo(function(){C.bind(0),R=="noise"&&k.bind(1),A.uniforms({u_texture:0,u_noise:1,u_size:[C.width,C.height],u_rand:[Math.random(),Math.random()],u_value1:b,u_value2:T,u_camera_planes:S}).draw(P)}),this.setOutputData(0,this._tex)}}},m.pixel_shader_halftone=`precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform vec2 u_camera_planes;
					uniform vec2 u_size;
					uniform float u_value1;
					uniform float u_value2;
					
					float pattern() {
						float s = sin(u_value1 * 3.1415), c = cos(u_value1 * 3.1415);
						vec2 tex = v_coord * u_size.xy;
						vec2 point = vec2(
						   c * tex.x - s * tex.y ,
						   s * tex.x + c * tex.y 
						) * u_value2;
						return (sin(point.x) * sin(point.y)) * 4.0;
					}
					void main() {
						vec4 color = texture2D(u_texture, v_coord);
						float average = (color.r + color.g + color.b) / 3.0;
						gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
					}
`,m.pixel_shader_pixelate=`precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform vec2 u_camera_planes;
					uniform vec2 u_size;
					uniform float u_value1;
					uniform float u_value2;
					
					void main() {
						vec2 coord = vec2( floor(v_coord.x * u_value1) / u_value1, floor(v_coord.y * u_value2) / u_value2 );
						vec4 color = texture2D(u_texture, coord);
						gl_FragColor = color;
					}
`,m.pixel_shader_lowpalette=`precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform vec2 u_camera_planes;
					uniform vec2 u_size;
					uniform float u_value1;
					uniform float u_value2;
					
					void main() {
						vec4 color = texture2D(u_texture, v_coord);
						gl_FragColor = floor(color * u_value1) / u_value1;
					}
`,m.pixel_shader_noise=`precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform sampler2D u_noise;
					uniform vec2 u_size;
					uniform float u_value1;
					uniform float u_value2;
					uniform vec2 u_rand;
					
					void main() {
						vec4 color = texture2D(u_texture, v_coord);
						vec3 noise = texture2D(u_noise, v_coord * vec2(u_size.x / 512.0, u_size.y / 512.0) + u_rand).xyz - vec3(0.5);
						gl_FragColor = vec4( color.xyz + noise * u_value1, color.a );
					}
`,m.pixel_shader_gamma=`precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform float u_value1;
					
					void main() {
						vec4 color = texture2D(u_texture, v_coord);
						float gamma = 1.0 / u_value1;
						gl_FragColor = vec4( pow( color.xyz, vec3(gamma) ), color.a );
					}
`,t.registerNodeType("fx/generic",m),e.LGraphFXGeneric=m,_.title="Vigneting",_.desc="Vigneting",_.widgets_info={precision:{widget:"combo",values:n.MODE_VALUES}},_.prototype.onExecute=function(){var C=this.getInputData(0);if(this.properties.precision===n.PASS_THROUGH){this.setOutputData(0,C);return}if(C){this._tex=n.getTargetTexture(C,this._tex,this.properties.precision);var b=this.properties.intensity;this.isInputConnected(1)&&(b=this.getInputData(1),this.properties.intensity=b),gl.disable(gl.BLEND),gl.disable(gl.DEPTH_TEST);var T=Mesh.getScreenQuad(),R=_._shader,A=this.properties.invert;this._tex.drawTo(function(){C.bind(0),R.uniforms({u_texture:0,u_intensity:b,u_isize:[1/C.width,1/C.height],u_invert:A?1:0}).draw(T)}),this.setOutputData(0,this._tex)}},_.pixel_shader=`precision highp float;
					precision highp float;
					varying vec2 v_coord;
					uniform sampler2D u_texture;
					uniform float u_intensity;
					uniform int u_invert;
					
					void main() {
						float luminance = 1.0 - length( v_coord - vec2(0.5) ) * 1.414;
						vec4 color = texture2D(u_texture, v_coord);
						if(u_invert == 1)
							luminance = 1.0 - luminance;
						luminance = mix(1.0, luminance, u_intensity);
					   gl_FragColor = vec4( luminance * color.xyz, color.a);
					}
					`,t.registerNodeType("fx/vigneting",_),e.LGraphFXVigneting=_}})(litegraph),(function(e){var t=e.LiteGraph,n="#243";function a(N){this.channel=0,this.cmd=0,this.data=new Uint32Array(3),N&&this.setup(N)}t.MIDIEvent=a,a.prototype.fromJSON=function(N){this.setup(N.data)},a.prototype.setup=function(N){var S=N;N.constructor===Object&&(S=N.data),this.data.set(S);var k=S[0];this.status=k;var D=k&240;k>=240?this.cmd=k:this.cmd=D,this.cmd==a.NOTEON&&this.velocity==0&&(this.cmd=a.NOTEOFF),this.cmd_str=a.commands[this.cmd]||"",(D>=a.NOTEON||D<=a.NOTEOFF)&&(this.channel=k&15)},Object.defineProperty(a.prototype,"velocity",{get:function(){return this.cmd==a.NOTEON?this.data[2]:-1},set:function(N){this.data[2]=N},enumerable:!0}),a.notes=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],a.note_to_index={A:0,"A#":1,B:2,C:3,"C#":4,D:5,"D#":6,E:7,F:8,"F#":9,G:10,"G#":11},Object.defineProperty(a.prototype,"note",{get:function(){return this.cmd!=a.NOTEON?-1:a.toNoteString(this.data[1],!0)},set:function(N){throw"notes cannot be assigned this way, must modify the data[1]"},enumerable:!0}),Object.defineProperty(a.prototype,"octave",{get:function(){if(this.cmd!=a.NOTEON)return-1;var N=this.data[1]-24;return Math.floor(N/12+1)},set:function(N){throw"octave cannot be assigned this way, must modify the data[1]"},enumerable:!0}),a.prototype.getPitch=function(){return Math.pow(2,(this.data[1]-69)/12)*440},a.computePitch=function(N){return Math.pow(2,(N-69)/12)*440},a.prototype.getCC=function(){return this.data[1]},a.prototype.getCCValue=function(){return this.data[2]},a.prototype.getPitchBend=function(){return this.data[1]+(this.data[2]<<7)-8192},a.computePitchBend=function(N,S){return N+(S<<7)-8192},a.prototype.setCommandFromString=function(N){this.cmd=a.computeCommandFromString(N)},a.computeCommandFromString=function(N){if(!N)return 0;if(N&&N.constructor===Number)return N;switch(N=N.toUpperCase(),N){case"NOTE ON":case"NOTEON":return a.NOTEON;case"NOTE OFF":case"NOTEOFF":return a.NOTEON;case"KEY PRESSURE":case"KEYPRESSURE":return a.KEYPRESSURE;case"CONTROLLER CHANGE":case"CONTROLLERCHANGE":case"CC":return a.CONTROLLERCHANGE;case"PROGRAM CHANGE":case"PROGRAMCHANGE":case"PC":return a.PROGRAMCHANGE;case"CHANNEL PRESSURE":case"CHANNELPRESSURE":return a.CHANNELPRESSURE;case"PITCH BEND":case"PITCHBEND":return a.PITCHBEND;case"TIME TICK":case"TIMETICK":return a.TIMETICK;default:return Number(N)}},a.toNoteString=function(N,S){N=Math.round(N);var k=N-21,D=Math.floor((N-24)/12+1);return k=k%12,k<0&&(k=12+k),a.notes[k]+(S?"":D)},a.NoteStringToPitch=function(N){N=N.toUpperCase();var S=N[0],k=4;N[1]=="#"?(S+="#",N.length>2&&(k=Number(N[2]))):N.length>1&&(k=Number(N[1]));var D=a.note_to_index[S];return D==null?null:(k-1)*12+D+21},a.prototype.toString=function(){var N=""+this.channel+". ";switch(this.cmd){case a.NOTEON:N+="NOTEON "+a.toNoteString(this.data[1]);break;case a.NOTEOFF:N+="NOTEOFF "+a.toNoteString(this.data[1]);break;case a.CONTROLLERCHANGE:N+="CC "+this.data[1]+" "+this.data[2];break;case a.PROGRAMCHANGE:N+="PC "+this.data[1];break;case a.PITCHBEND:N+="PITCHBEND "+this.getPitchBend();break;case a.KEYPRESSURE:N+="KEYPRESS "+this.data[1];break}return N},a.prototype.toHexString=function(){for(var N="",S=0;S<this.data.length;S++)N+=this.data[S].toString(16)+" "},a.prototype.toJSON=function(){return{data:[this.data[0],this.data[1],this.data[2]],object_class:"MIDIEvent"}},a.NOTEOFF=128,a.NOTEON=144,a.KEYPRESSURE=160,a.CONTROLLERCHANGE=176,a.PROGRAMCHANGE=192,a.CHANNELPRESSURE=208,a.PITCHBEND=224,a.TIMETICK=248,a.commands={128:"note off",144:"note on",160:"key pressure",176:"controller change",192:"program change",208:"channel pressure",224:"pitch bend",240:"system",242:"Song pos",243:"Song select",246:"Tune request",248:"time tick",250:"Start Song",251:"Continue Song",252:"Stop Song",254:"Sensing",255:"Reset"},a.commands_short={128:"NOTEOFF",144:"NOTEOFF",160:"KEYP",176:"CC",192:"PC",208:"CP",224:"PB",240:"SYS",242:"POS",243:"SELECT",246:"TUNEREQ",248:"TT",250:"START",251:"CONTINUE",252:"STOP",254:"SENS",255:"RESET"},a.commands_reversed={};for(var s in a.commands)a.commands_reversed[a.commands[s]]=s;function u(N,S){if(!navigator.requestMIDIAccess){this.error="not suppoorted",S?S("Not supported"):console.error("MIDI NOT SUPPORTED, enable by chrome://flags");return}this.on_ready=N,this.state={note:[],cc:[]},this.input_ports=null,this.input_ports_info=[],this.output_ports=null,this.output_ports_info=[],navigator.requestMIDIAccess().then(this.onMIDISuccess.bind(this),this.onMIDIFailure.bind(this))}u.input=null,u.MIDIEvent=a,u.prototype.onMIDISuccess=function(N){console.log("MIDI ready!"),console.log(N),this.midi=N,this.updatePorts(),this.on_ready&&this.on_ready(this)},u.prototype.updatePorts=function(){var N=this.midi;this.input_ports=N.inputs,this.input_ports_info=[],this.output_ports=N.outputs,this.output_ports_info=[];for(var S=0,D=this.input_ports.values(),M=D.next();M&&M.done===!1;){var k=M.value;this.input_ports_info.push(k),console.log("Input port [type:'"+k.type+"'] id:'"+k.id+"' manufacturer:'"+k.manufacturer+"' name:'"+k.name+"' version:'"+k.version+"'"),S++,M=D.next()}this.num_input_ports=S,S=0;for(var D=this.output_ports.values(),M=D.next();M&&M.done===!1;){var k=M.value;this.output_ports_info.push(k),console.log("Output port [type:'"+k.type+"'] id:'"+k.id+"' manufacturer:'"+k.manufacturer+"' name:'"+k.name+"' version:'"+k.version+"'"),S++,M=D.next()}this.num_output_ports=S},u.prototype.onMIDIFailure=function(N){console.error("Failed to get MIDI access - "+N)},u.prototype.openInputPort=function(N,S){var k=this.input_ports.get("input-"+N);if(!k)return!1;u.input=this;var D=this;return k.onmidimessage=function(M){var j=new a(M.data);D.updateState(j),S&&S(M.data,j),u.on_message&&u.on_message(M.data,j)},console.log("port open: ",k),!0},u.parseMsg=function(N){},u.prototype.updateState=function(N){switch(N.cmd){case a.NOTEON:this.state.note[N.value1|0]=N.value2;break;case a.NOTEOFF:this.state.note[N.value1|0]=0;break;case a.CONTROLLERCHANGE:this.state.cc[N.getCC()]=N.getCCValue();break}},u.prototype.sendMIDI=function(N,S){if(S){var k=this.output_ports_info[N];k&&(u.output=this,S.constructor===a?k.send(S.data):k.send(S))}};function c(){this.addOutput("on_midi",t.EVENT),this.addOutput("out","midi"),this.properties={port:0},this._last_midi_event=null,this._current_midi_event=null,this.boxcolor="#AAA",this._last_time=0;var N=this;new u(function(S){N._midi=S,N._waiting&&N.onStart(),N._waiting=!1})}c.MIDIInterface=u,c.title="MIDI Input",c.desc="Reads MIDI from a input port",c.color=n,c.prototype.getPropertyInfo=function(N){if(this._midi&&N=="port"){for(var S={},k=0;k<this._midi.input_ports_info.length;++k){var D=this._midi.input_ports_info[k];S[k]=k+".- "+D.name+" version:"+D.version}return{type:"enum",values:S}}},c.prototype.onStart=function(){this._midi?this._midi.openInputPort(this.properties.port,this.onMIDIEvent.bind(this)):this._waiting=!0},c.prototype.onMIDIEvent=function(N,S){this._last_midi_event=S,this.boxcolor="#AFA",this._last_time=t.getTime(),this.trigger("on_midi",S),S.cmd==a.NOTEON?this.trigger("on_noteon",S):S.cmd==a.NOTEOFF?this.trigger("on_noteoff",S):S.cmd==a.CONTROLLERCHANGE?this.trigger("on_cc",S):S.cmd==a.PROGRAMCHANGE?this.trigger("on_pc",S):S.cmd==a.PITCHBEND&&this.trigger("on_pitchbend",S)},c.prototype.onDrawBackground=function(N){if(this.boxcolor="#AAA",!this.flags.collapsed&&this._last_midi_event){N.fillStyle="white";var S=t.getTime(),k=1-Math.max(0,(S-this._last_time)*.001);if(k>0){var D=N.globalAlpha;N.globalAlpha*=k,N.font="12px Tahoma",N.fillText(this._last_midi_event.toString(),2,this.size[1]*.5+3),N.globalAlpha=D}}},c.prototype.onExecute=function(){if(this.outputs)for(var N=this._last_midi_event,S=0;S<this.outputs.length;++S){var k=this.outputs[S],D=null;switch(k.name){case"midi":D=this._midi;break;case"last_midi":D=N;break;default:continue}this.setOutputData(S,D)}},c.prototype.onGetOutputs=function(){return[["last_midi","midi"],["on_midi",t.EVENT],["on_noteon",t.EVENT],["on_noteoff",t.EVENT],["on_cc",t.EVENT],["on_pc",t.EVENT],["on_pitchbend",t.EVENT]]},t.registerNodeType("midi/input",c);function h(){this.addInput("send",t.EVENT),this.properties={port:0};var N=this;new u(function(S){N._midi=S,N.widget.options.values=N.getMIDIOutputs()}),this.widget=this.addWidget("combo","Device",this.properties.port,{property:"port",values:this.getMIDIOutputs.bind(this)}),this.size=[340,60]}h.MIDIInterface=u,h.title="MIDI Output",h.desc="Sends MIDI to output channel",h.color=n,h.prototype.onGetPropertyInfo=function(N){if(this._midi&&N=="port"){var S=this.getMIDIOutputs();return{type:"enum",values:S}}},h.default_ports={0:"unknown"},h.prototype.getMIDIOutputs=function(){var N={};if(!this._midi)return h.default_ports;if(this._midi.output_ports_info)for(var S=0;S<this._midi.output_ports_info.length;++S){var k=this._midi.output_ports_info[S];if(k){var D=S+".- "+k.name+" version:"+k.version;N[S]=D}}return N},h.prototype.onAction=function(N,S){this._midi&&(N=="send"&&this._midi.sendMIDI(this.properties.port,S),this.trigger("midi",S))},h.prototype.onGetInputs=function(){return[["send",t.ACTION]]},h.prototype.onGetOutputs=function(){return[["on_midi",t.EVENT]]},t.registerNodeType("midi/output",h);function f(){this.addInput("on_midi",t.EVENT),this._str="",this.size=[200,40]}f.title="MIDI Show",f.desc="Shows MIDI in the graph",f.color=n,f.prototype.getTitle=function(){return this.flags.collapsed?this._str:this.title},f.prototype.onAction=function(N,S){S&&(S.constructor===a?this._str=S.toString():this._str="???")},f.prototype.onDrawForeground=function(N){!this._str||this.flags.collapsed||(N.font="30px Arial",N.fillText(this._str,10,this.size[1]*.8))},f.prototype.onGetInputs=function(){return[["in",t.ACTION]]},f.prototype.onGetOutputs=function(){return[["on_midi",t.EVENT]]},t.registerNodeType("midi/show",f);function m(){this.properties={channel:-1,cmd:-1,min_value:-1,max_value:-1};var N=this;this._learning=!1,this.addWidget("button","Learn","",function(){N._learning=!0,N.boxcolor="#FA3"}),this.addInput("in",t.EVENT),this.addOutput("on_midi",t.EVENT),this.boxcolor="#AAA"}m.title="MIDI Filter",m.desc="Filters MIDI messages",m.color=n,m["@cmd"]={type:"enum",title:"Command",values:a.commands_reversed},m.prototype.getTitle=function(){var N=null;return this.properties.cmd==-1?N="Nothing":N=a.commands_short[this.properties.cmd]||"Unknown",this.properties.min_value!=-1&&this.properties.max_value!=-1&&(N+=" "+(this.properties.min_value==this.properties.max_value?this.properties.max_value:this.properties.min_value+".."+this.properties.max_value)),"Filter: "+N},m.prototype.onPropertyChanged=function(N,S){if(N=="cmd"){var k=Number(S);isNaN(k)&&(k=a.commands[S]||0),this.properties.cmd=k}},m.prototype.onAction=function(N,S){if(!(!S||S.constructor!==a)){if(this._learning)this._learning=!1,this.boxcolor="#AAA",this.properties.channel=S.channel,this.properties.cmd=S.cmd,this.properties.min_value=this.properties.max_value=S.data[1];else if(this.properties.channel!=-1&&S.channel!=this.properties.channel||this.properties.cmd!=-1&&S.cmd!=this.properties.cmd||this.properties.min_value!=-1&&S.data[1]<this.properties.min_value||this.properties.max_value!=-1&&S.data[1]>this.properties.max_value)return;this.trigger("on_midi",S)}},t.registerNodeType("midi/filter",m);function _(){this.properties={channel:0,cmd:144,value1:1,value2:1},this.addInput("send",t.EVENT),this.addInput("assign",t.EVENT),this.addOutput("on_midi",t.EVENT),this.midi_event=new a,this.gate=!1}_.title="MIDIEvent",_.desc="Create a MIDI Event",_.color=n,_.prototype.onAction=function(N,k){if(N=="assign"){this.properties.channel=k.channel,this.properties.cmd=k.cmd,this.properties.value1=k.data[1],this.properties.value2=k.data[2],k.cmd==a.NOTEON?this.gate=!0:k.cmd==a.NOTEOFF&&(this.gate=!1);return}var k=this.midi_event;k.channel=this.properties.channel,this.properties.cmd&&this.properties.cmd.constructor===String?k.setCommandFromString(this.properties.cmd):k.cmd=this.properties.cmd,k.data[0]=k.cmd|k.channel,k.data[1]=Number(this.properties.value1),k.data[2]=Number(this.properties.value2),this.trigger("on_midi",k)},_.prototype.onExecute=function(){var N=this.properties;if(this.inputs)for(var S=0;S<this.inputs.length;++S){var k=this.inputs[S];if(k.link!=-1)switch(k.name){case"note":var D=this.getInputData(S);D!=null&&(D.constructor===String&&(D=a.NoteStringToPitch(D)),this.properties.value1=(D|0)%255);break;case"cmd":var D=this.getInputData(S);D!=null&&(this.properties.cmd=D);break;case"value1":var D=this.getInputData(S);D!=null&&(this.properties.value1=clamp(D|0,0,127));break;case"value2":var D=this.getInputData(S);D!=null&&(this.properties.value2=clamp(D|0,0,127));break}}if(this.outputs)for(var S=0;S<this.outputs.length;++S){var M=this.outputs[S],D=null;switch(M.name){case"midi":D=new a,D.setup([N.cmd,N.value1,N.value2]),D.channel=N.channel;break;case"command":D=N.cmd;break;case"cc":D=N.value1;break;case"cc_value":D=N.value2;break;case"note":D=N.cmd==a.NOTEON||N.cmd==a.NOTEOFF?N.value1:null;break;case"velocity":D=N.cmd==a.NOTEON?N.value2:null;break;case"pitch":D=N.cmd==a.NOTEON?a.computePitch(N.value1):null;break;case"pitchbend":D=N.cmd==a.PITCHBEND?a.computePitchBend(N.value1,N.value2):null;break;case"gate":D=this.gate;break;default:continue}D!==null&&this.setOutputData(S,D)}},_.prototype.onPropertyChanged=function(N,S){N=="cmd"&&(this.properties.cmd=a.computeCommandFromString(S))},_.prototype.onGetInputs=function(){return[["cmd","number"],["note","number"],["value1","number"],["value2","number"]]},_.prototype.onGetOutputs=function(){return[["midi","midi"],["on_midi",t.EVENT],["command","number"],["note","number"],["velocity","number"],["cc","number"],["cc_value","number"],["pitch","number"],["gate","bool"],["pitchbend","number"]]},t.registerNodeType("midi/event",_);function C(){this.properties={cc:1,value:0},this.addOutput("value","number")}C.title="MIDICC",C.desc="gets a Controller Change",C.color=n,C.prototype.onExecute=function(){this.properties,u.input&&(this.properties.value=u.input.state.cc[this.properties.cc]),this.setOutputData(0,this.properties.value)},t.registerNodeType("midi/cc",C);function b(){this.addInput("generate",t.ACTION),this.addInput("scale","string"),this.addInput("octave","number"),this.addOutput("note",t.EVENT),this.properties={notes:"A,A#,B,C,C#,D,D#,E,F,F#,G,G#",octave:2,duration:.5,mode:"sequence"},this.notes_pitches=b.processScale(this.properties.notes),this.sequence_index=0}b.title="MIDI Generator",b.desc="Generates a random MIDI note",b.color=n,b.processScale=function(N){for(var S=N.split(","),k=0;k<S.length;++k){var D=S[k];D.length==2&&D[1]!="#"||D.length>2?S[k]=-t.MIDIEvent.NoteStringToPitch(D):S[k]=a.note_to_index[D]||0}return S},b.prototype.onPropertyChanged=function(N,S){N=="notes"&&(this.notes_pitches=b.processScale(S))},b.prototype.onExecute=function(){var N=this.getInputData(2);N!=null&&(this.properties.octave=N);var S=this.getInputData(1);S&&(this.notes_pitches=b.processScale(S))},b.prototype.onAction=function(N,H){var k=0,D=this.notes_pitches.length,M=0;this.properties.mode=="sequence"?M=this.sequence_index=(this.sequence_index+1)%D:this.properties.mode=="random"&&(M=Math.floor(Math.random()*D));var j=this.notes_pitches[M];j>=0?k=j+(this.properties.octave-1)*12+33:k=-j;var H=new a;H.setup([a.NOTEON,k,10]);var X=this.properties.duration||1;this.trigger("note",H),setTimeout((function(){var K=new a;K.setup([a.NOTEOFF,k,0]),this.trigger("note",K)}).bind(this),X*1e3)},t.registerNodeType("midi/generator",b);function T(){this.properties={amount:0},this.addInput("in",t.ACTION),this.addInput("amount","number"),this.addOutput("out",t.EVENT),this.midi_event=new a}T.title="MIDI Transpose",T.desc="Transpose a MIDI note",T.color=n,T.prototype.onAction=function(N,S){!S||S.constructor!==a||(S.data[0]==a.NOTEON||S.data[0]==a.NOTEOFF?(this.midi_event=new a,this.midi_event.setup(S.data),this.midi_event.data[1]=Math.round(this.midi_event.data[1]+this.properties.amount),this.trigger("out",this.midi_event)):this.trigger("out",S))},T.prototype.onExecute=function(){var N=this.getInputData(1);N!=null&&(this.properties.amount=N)},t.registerNodeType("midi/transpose",T);function R(){this.properties={scale:"A,A#,B,C,C#,D,D#,E,F,F#,G,G#"},this.addInput("note",t.ACTION),this.addInput("scale","string"),this.addOutput("out",t.EVENT),this.valid_notes=new Array(12),this.offset_notes=new Array(12),this.processScale(this.properties.scale)}R.title="MIDI Quantize Pitch",R.desc="Transpose a MIDI note tp fit an scale",R.color=n,R.prototype.onPropertyChanged=function(N,S){N=="scale"&&this.processScale(S)},R.prototype.processScale=function(N){this._current_scale=N,this.notes_pitches=b.processScale(N);for(var S=0;S<12;++S)this.valid_notes[S]=this.notes_pitches.indexOf(S)!=-1;for(var S=0;S<12;++S){if(this.valid_notes[S]){this.offset_notes[S]=0;continue}for(var k=1;k<12;++k){if(this.valid_notes[(S-k)%12]){this.offset_notes[S]=-k;break}if(this.valid_notes[(S+k)%12]){this.offset_notes[S]=k;break}}}},R.prototype.onAction=function(N,S){if(!(!S||S.constructor!==a))if(S.data[0]==a.NOTEON||S.data[0]==a.NOTEOFF){this.midi_event=new a,this.midi_event.setup(S.data);var k=S.note,D=a.note_to_index[k],M=this.offset_notes[D];this.midi_event.data[1]+=M,this.trigger("out",this.midi_event)}else this.trigger("out",S)},R.prototype.onExecute=function(){var N=this.getInputData(1);N!=null&&N!=this._current_scale&&this.processScale(N)},t.registerNodeType("midi/quantize",R);function A(){this.properties={url:"",autoplay:!0},this.addInput("play",t.ACTION),this.addInput("pause",t.ACTION),this.addOutput("note",t.EVENT),this._midi=null,this._current_time=0,this._playing=!1,typeof MidiParser>"u"&&(console.error("midi-parser.js not included, LGMidiPlay requires that library: https://raw.githubusercontent.com/colxi/midi-parser-js/master/src/main.js"),this.boxcolor="red")}A.title="MIDI fromFile",A.desc="Plays a MIDI file",A.color=n,A.prototype.onAction=function(N){N=="play"?this.play():N=="pause"&&(this._playing=!this._playing)},A.prototype.onPropertyChanged=function(N,S){N=="url"&&this.loadMIDIFile(S)},A.prototype.onExecute=function(){if(this._midi&&this._playing){this._current_time+=this.graph.elapsed_time;for(var N=this._current_time*100,S=0;S<this._midi.tracks;++S){var k=this._midi.track[S];k._last_pos||(k._last_pos=0,k._time=0);var D=k.event[k._last_pos];if(D&&k._time+D.deltaTime<=N&&(k._last_pos++,k._time+=D.deltaTime,D.data)){var M=D.type<<4+D.channel,j=new a;j.setup([M,D.data[0],D.data[1]]),this.trigger("note",j)}}}},A.prototype.play=function(){if(this._playing=!0,this._current_time=0,!!this._midi)for(var N=0;N<this._midi.tracks;++N){var S=this._midi.track[N];S._last_pos=0,S._time=0}},A.prototype.loadMIDIFile=function(N){var S=this;t.fetchFile(N,"arraybuffer",function(k){S.boxcolor="#AFA",S._midi=MidiParser.parse(new Uint8Array(k)),S.properties.autoplay&&S.play()},function(k){S.boxcolor="#FAA",S._midi=null})},A.prototype.onDropFile=function(N){this.properties.url="",this.loadMIDIFile(N)},t.registerNodeType("midi/fromFile",A);function I(){if(this.properties={volume:.5,duration:1},this.addInput("note",t.ACTION),this.addInput("volume","number"),this.addInput("duration","number"),this.addOutput("note",t.EVENT),typeof AudioSynth>"u")console.error("Audiosynth.js not included, LGMidiPlay requires that library"),this.boxcolor="red";else{var N=this.synth=new AudioSynth;this.instrument=N.createInstrument("piano")}}I.title="MIDI Play",I.desc="Plays a MIDI note",I.color=n,I.prototype.onAction=function(N,S){if(!(!S||S.constructor!==a)){if(this.instrument&&S.data[0]==a.NOTEON){var k=S.note;if(!k||k=="undefined"||k.constructor!==String)return;this.instrument.play(k,S.octave,this.properties.duration,this.properties.volume)}this.trigger("note",S)}},I.prototype.onExecute=function(){var N=this.getInputData(1);N!=null&&(this.properties.volume=N);var S=this.getInputData(2);S!=null&&(this.properties.duration=S)},t.registerNodeType("midi/play",I);function P(){this.properties={num_octaves:2,start_octave:2},this.addInput("note",t.ACTION),this.addInput("reset",t.ACTION),this.addOutput("note",t.EVENT),this.size=[400,100],this.keys=[],this._last_key=-1}P.title="MIDI Keys",P.desc="Keyboard to play notes",P.color=n,P.keys=[{x:0,w:1,h:1,t:0},{x:.75,w:.5,h:.6,t:1},{x:1,w:1,h:1,t:0},{x:1.75,w:.5,h:.6,t:1},{x:2,w:1,h:1,t:0},{x:2.75,w:.5,h:.6,t:1},{x:3,w:1,h:1,t:0},{x:4,w:1,h:1,t:0},{x:4.75,w:.5,h:.6,t:1},{x:5,w:1,h:1,t:0},{x:5.75,w:.5,h:.6,t:1},{x:6,w:1,h:1,t:0}],P.prototype.onDrawForeground=function(N){if(!this.flags.collapsed){var S=this.properties.num_octaves*12;this.keys.length=S;var k=this.size[0]/(this.properties.num_octaves*7),D=this.size[1];N.globalAlpha=1;for(var M=0;M<2;M++)for(var j=0;j<S;++j){var H=P.keys[j%12];if(H.t==M){var X=Math.floor(j/12),K=X*7*k+H.x*k;M==0?N.fillStyle=this.keys[j]?"#CCC":"white":N.fillStyle=this.keys[j]?"#333":"black",N.fillRect(K+1,0,k*H.w-2,D*H.h)}}}},P.prototype.getKeyIndex=function(N){this.properties.num_octaves*12;for(var S=this.size[0]/(this.properties.num_octaves*7),k=this.size[1],D=1;D>=0;D--)for(var M=0;M<this.keys.length;++M){var j=P.keys[M%12];if(j.t==D){var H=Math.floor(M/12),X=H*7*S+j.x*S,K=S*j.w,re=k*j.h;if(!(N[0]<X||N[0]>X+K||N[1]>re))return M}}return-1},P.prototype.onAction=function(N,S){if(N=="reset"){for(var k=0;k<this.keys.length;++k)this.keys[k]=!1;return}if(!(!S||S.constructor!==a)){var D=S,M=(this.properties.start_octave-1)*12+29,j=D.data[1]-M;j>=0&&j<this.keys.length&&(D.data[0]==a.NOTEON?this.keys[j]=!0:D.data[0]==a.NOTEOFF&&(this.keys[j]=!1)),this.trigger("note",D)}},P.prototype.onMouseDown=function(N,S){if(!(S[1]<0)){var k=this.getKeyIndex(S);this.keys[k]=!0,this._last_key=k;var D=(this.properties.start_octave-1)*12+29+k,M=new a;return M.setup([a.NOTEON,D,100]),this.trigger("note",M),!0}},P.prototype.onMouseMove=function(N,S){if(!(S[1]<0||this._last_key==-1)){this.setDirtyCanvas(!0);var k=this.getKeyIndex(S);if(this._last_key==k)return!0;this.keys[this._last_key]=!1;var D=(this.properties.start_octave-1)*12+29+this._last_key,M=new a;M.setup([a.NOTEOFF,D,100]),this.trigger("note",M),this.keys[k]=!0;var D=(this.properties.start_octave-1)*12+29+k,M=new a;return M.setup([a.NOTEON,D,100]),this.trigger("note",M),this._last_key=k,!0}},P.prototype.onMouseUp=function(N,S){if(!(S[1]<0)){var k=this.getKeyIndex(S);this.keys[k]=!1,this._last_key=-1;var D=(this.properties.start_octave-1)*12+29+k,M=new a;return M.setup([a.NOTEOFF,D,100]),this.trigger("note",M),!0}},t.registerNodeType("midi/keys",P)})(litegraph),(function(e){var t=e.LiteGraph,n={};e.LGAudio=n,n.getAudioContext=function(){if(!this._audio_context){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,!window.AudioContext)return console.error("AudioContext not supported by browser"),null;this._audio_context=new AudioContext,this._audio_context.onmessage=function(S){console.log("msg",S)},this._audio_context.onended=function(S){console.log("ended",S)},this._audio_context.oncomplete=function(S){console.log("complete",S)}}return this._audio_context},n.connect=function(S,k){try{S.connect(k)}catch(D){console.warn("LGraphAudio:",D)}},n.disconnect=function(S,k){try{S.disconnect(k)}catch(D){console.warn("LGraphAudio:",D)}},n.changeAllAudiosConnections=function(S,k){if(S.inputs)for(var D=0;D<S.inputs.length;++D){var M=S.inputs[D],j=S.graph.links[M.link];if(j){var H=S.graph.getNodeById(j.origin_id),X=null;H.getAudioNodeInOutputSlot?X=H.getAudioNodeInOutputSlot(j.origin_slot):X=H.audionode;var K=null;S.getAudioNodeInInputSlot?K=S.getAudioNodeInInputSlot(D):K=S.audionode,k?n.connect(X,K):n.disconnect(X,K)}}if(S.outputs)for(var D=0;D<S.outputs.length;++D)for(var re=S.outputs[D],F=0;F<re.links.length;++F){var j=S.graph.links[re.links[F]];if(j){var X=null;S.getAudioNodeInOutputSlot?X=S.getAudioNodeInOutputSlot(D):X=S.audionode;var J=S.graph.getNodeById(j.target_id),K=null;J.getAudioNodeInInputSlot?K=J.getAudioNodeInInputSlot(j.target_slot):K=J.audionode,k?n.connect(X,K):n.disconnect(X,K)}}},n.onConnectionsChange=function(S,k,D,M){if(S==t.OUTPUT){var j=null;if(M&&(j=this.graph.getNodeById(M.target_id)),!!j){var H=null;this.getAudioNodeInOutputSlot?H=this.getAudioNodeInOutputSlot(k):H=this.audionode;var X=null;j.getAudioNodeInInputSlot?X=j.getAudioNodeInInputSlot(M.target_slot):X=j.audionode,D?n.connect(H,X):n.disconnect(H,X)}}},n.createAudioNodeWrapper=function(S){var k=S.prototype.onPropertyChanged;S.prototype.onPropertyChanged=function(D,M){k&&k.call(this,D,M),this.audionode&&this.audionode[D]!==void 0&&(this.audionode[D].value!==void 0?this.audionode[D].value=M:this.audionode[D]=M)},S.prototype.onConnectionsChange=n.onConnectionsChange},n.cached_audios={},n.loadSound=function(S,k,D){if(n.cached_audios[S]&&S.indexOf("blob:")==-1){k&&k(n.cached_audios[S]);return}n.onProcessAudioURL&&(S=n.onProcessAudioURL(S));var M=new XMLHttpRequest;M.open("GET",S,!0),M.responseType="arraybuffer";var j=n.getAudioContext();M.onload=function(){console.log("AudioSource loaded"),j.decodeAudioData(M.response,function(X){console.log("AudioSource decoded"),n.cached_audios[S]=X,k&&k(X)},H)},M.send();function H(X){console.log("Audio loading sample error:",X),D&&D(X)}return M};function a(){this.properties={src:"",gain:.5,loop:!0,autoplay:!0,playbackRate:1},this._loading_audio=!1,this._audiobuffer=null,this._audionodes=[],this._last_sourcenode=null,this.addOutput("out","audio"),this.addInput("gain","number");var S=n.getAudioContext();this.audionode=S.createGain(),this.audionode.graphnode=this,this.audionode.gain.value=this.properties.gain,this.properties.src&&this.loadSound(this.properties.src)}a.desc="Plays an audio file",a["@src"]={widget:"resource"},a.supported_extensions=["wav","ogg","mp3"],a.prototype.onAdded=function(S){S.status===LGraph.STATUS_RUNNING&&this.onStart()},a.prototype.onStart=function(){this._audiobuffer&&this.properties.autoplay&&this.playBuffer(this._audiobuffer)},a.prototype.onStop=function(){this.stopAllSounds()},a.prototype.onPause=function(){this.pauseAllSounds()},a.prototype.onUnpause=function(){this.unpauseAllSounds()},a.prototype.onRemoved=function(){this.stopAllSounds(),this._dropped_url&&URL.revokeObjectURL(this._url)},a.prototype.stopAllSounds=function(){for(var S=0;S<this._audionodes.length;++S)this._audionodes[S].started&&(this._audionodes[S].started=!1,this._audionodes[S].stop());this._audionodes.length=0},a.prototype.pauseAllSounds=function(){n.getAudioContext().suspend()},a.prototype.unpauseAllSounds=function(){n.getAudioContext().resume()},a.prototype.onExecute=function(){if(this.inputs)for(var S=0;S<this.inputs.length;++S){var k=this.inputs[S];if(k.link!=null){var D=this.getInputData(S);if(D!==void 0){if(k.name=="gain")this.audionode.gain.value=D;else if(k.name=="src")this.setProperty("src",D);else if(k.name=="playbackRate"){this.properties.playbackRate=D;for(var M=0;M<this._audionodes.length;++M)this._audionodes[M].playbackRate.value=D}}}}if(this.outputs)for(var S=0;S<this.outputs.length;++S){var j=this.outputs[S];j.name=="buffer"&&this._audiobuffer&&this.setOutputData(S,this._audiobuffer)}},a.prototype.onAction=function(S){this._audiobuffer&&(S=="Play"?this.playBuffer(this._audiobuffer):S=="Stop"&&this.stopAllSounds())},a.prototype.onPropertyChanged=function(S,k){if(S=="src")this.loadSound(k);else if(S=="gain")this.audionode.gain.value=k;else if(S=="playbackRate")for(var D=0;D<this._audionodes.length;++D)this._audionodes[D].playbackRate.value=k},a.prototype.playBuffer=function(S){var k=this,D=n.getAudioContext(),M=D.createBufferSource();return this._last_sourcenode=M,M.graphnode=this,M.buffer=S,M.loop=this.properties.loop,M.playbackRate.value=this.properties.playbackRate,this._audionodes.push(M),M.connect(this.audionode),this._audionodes.push(M),this.trigger("start"),M.onended=function(){k.trigger("ended");var j=k._audionodes.indexOf(M);j!=-1&&k._audionodes.splice(j,1)},M.started||(M.started=!0,M.start()),M},a.prototype.loadSound=function(S){var k=this;if(this._request&&(this._request.abort(),this._request=null),this._audiobuffer=null,this._loading_audio=!1,!S)return;this._request=n.loadSound(S,D),this._loading_audio=!0,this.boxcolor="#AA4";function D(M){this.boxcolor=t.NODE_DEFAULT_BOXCOLOR,k._audiobuffer=M,k._loading_audio=!1,k.graph&&k.graph.status===LGraph.STATUS_RUNNING&&k.onStart()}},a.prototype.onConnectionsChange=n.onConnectionsChange,a.prototype.onGetInputs=function(){return[["playbackRate","number"],["src","string"],["Play",t.ACTION],["Stop",t.ACTION]]},a.prototype.onGetOutputs=function(){return[["buffer","audiobuffer"],["start",t.EVENT],["ended",t.EVENT]]},a.prototype.onDropFile=function(S){this._dropped_url&&URL.revokeObjectURL(this._dropped_url);var k=URL.createObjectURL(S);this.properties.src=k,this.loadSound(k),this._dropped_url=k},a.title="Source",a.desc="Plays audio",t.registerNodeType("audio/source",a);function s(){this.properties={gain:.5},this._audionodes=[],this._media_stream=null,this.addOutput("out","audio"),this.addInput("gain","number");var S=n.getAudioContext();this.audionode=S.createGain(),this.audionode.graphnode=this,this.audionode.gain.value=this.properties.gain}s.prototype.onAdded=function(S){S.status===LGraph.STATUS_RUNNING&&this.onStart()},s.prototype.onStart=function(){this._media_stream==null&&!this._waiting_confirmation&&this.openStream()},s.prototype.onStop=function(){this.audionode.gain.value=0},s.prototype.onPause=function(){this.audionode.gain.value=0},s.prototype.onUnpause=function(){this.audionode.gain.value=this.properties.gain},s.prototype.onRemoved=function(){if(this.audionode.gain.value=0,this.audiosource_node&&(this.audiosource_node.disconnect(this.audionode),this.audiosource_node=null),this._media_stream){var S=this._media_stream.getTracks();S.length&&S[0].stop()}},s.prototype.openStream=function(){if(!navigator.mediaDevices){console.log("getUserMedia() is not supported in your browser, use chrome and enable WebRTC from about://flags");return}this._waiting_confirmation=!0,navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(this.streamReady.bind(this)).catch(k);var S=this;function k(D){console.log("Media rejected",D),S._media_stream=!1,S.boxcolor="red"}},s.prototype.streamReady=function(S){this._media_stream=S,this.audiosource_node&&this.audiosource_node.disconnect(this.audionode);var k=n.getAudioContext();this.audiosource_node=k.createMediaStreamSource(S),this.audiosource_node.graphnode=this,this.audiosource_node.connect(this.audionode),this.boxcolor="white"},s.prototype.onExecute=function(){if(this._media_stream==null&&!this._waiting_confirmation&&this.openStream(),this.inputs)for(var S=0;S<this.inputs.length;++S){var k=this.inputs[S];if(k.link!=null){var D=this.getInputData(S);D!==void 0&&k.name=="gain"&&(this.audionode.gain.value=this.properties.gain=D)}}},s.prototype.onAction=function(S){S=="Play"?this.audionode.gain.value=this.properties.gain:S=="Stop"&&(this.audionode.gain.value=0)},s.prototype.onPropertyChanged=function(S,k){S=="gain"&&(this.audionode.gain.value=k)},s.prototype.onConnectionsChange=n.onConnectionsChange,s.prototype.onGetInputs=function(){return[["playbackRate","number"],["Play",t.ACTION],["Stop",t.ACTION]]},s.title="MediaSource",s.desc="Plays microphone",t.registerNodeType("audio/media_source",s);function u(){this.properties={fftSize:2048,minDecibels:-100,maxDecibels:-10,smoothingTimeConstant:.5};var S=n.getAudioContext();this.audionode=S.createAnalyser(),this.audionode.graphnode=this,this.audionode.fftSize=this.properties.fftSize,this.audionode.minDecibels=this.properties.minDecibels,this.audionode.maxDecibels=this.properties.maxDecibels,this.audionode.smoothingTimeConstant=this.properties.smoothingTimeConstant,this.addInput("in","audio"),this.addOutput("freqs","array"),this.addOutput("samples","array"),this._freq_bin=null,this._time_bin=null}u.prototype.onPropertyChanged=function(S,k){this.audionode[S]=k},u.prototype.onExecute=function(){if(this.isOutputConnected(0)){var S=this.audionode.frequencyBinCount;(!this._freq_bin||this._freq_bin.length!=S)&&(this._freq_bin=new Uint8Array(S)),this.audionode.getByteFrequencyData(this._freq_bin),this.setOutputData(0,this._freq_bin)}if(this.isOutputConnected(1)){var S=this.audionode.frequencyBinCount;(!this._time_bin||this._time_bin.length!=S)&&(this._time_bin=new Uint8Array(S)),this.audionode.getByteTimeDomainData(this._time_bin),this.setOutputData(1,this._time_bin)}for(var k=1;k<this.inputs.length;++k){var D=this.inputs[k];if(D.link!=null){var M=this.getInputData(k);M!==void 0&&(this.audionode[D.name].value=M)}}},u.prototype.onGetInputs=function(){return[["minDecibels","number"],["maxDecibels","number"],["smoothingTimeConstant","number"]]},u.prototype.onGetOutputs=function(){return[["freqs","array"],["samples","array"]]},u.title="Analyser",u.desc="Audio Analyser",t.registerNodeType("audio/analyser",u);function c(){this.properties={gain:1},this.audionode=n.getAudioContext().createGain(),this.addInput("in","audio"),this.addInput("gain","number"),this.addOutput("out","audio")}c.prototype.onExecute=function(){if(!(!this.inputs||!this.inputs.length))for(var S=1;S<this.inputs.length;++S){var k=this.inputs[S],D=this.getInputData(S);D!==void 0&&(this.audionode[k.name].value=D)}},n.createAudioNodeWrapper(c),c.title="Gain",c.desc="Audio gain",t.registerNodeType("audio/gain",c);function h(){this.properties={impulse_src:"",normalize:!0},this.audionode=n.getAudioContext().createConvolver(),this.addInput("in","audio"),this.addOutput("out","audio")}n.createAudioNodeWrapper(h),h.prototype.onRemove=function(){this._dropped_url&&URL.revokeObjectURL(this._dropped_url)},h.prototype.onPropertyChanged=function(S,k){S=="impulse_src"?this.loadImpulse(k):S=="normalize"&&(this.audionode.normalize=k)},h.prototype.onDropFile=function(S){this._dropped_url&&URL.revokeObjectURL(this._dropped_url),this._dropped_url=URL.createObjectURL(S),this.properties.impulse_src=this._dropped_url,this.loadImpulse(this._dropped_url)},h.prototype.loadImpulse=function(S){var k=this;if(this._request&&(this._request.abort(),this._request=null),this._impulse_buffer=null,this._loading_impulse=!1,!S)return;this._request=n.loadSound(S,D),this._loading_impulse=!0;function D(M){k._impulse_buffer=M,k.audionode.buffer=M,console.log("Impulse signal set"),k._loading_impulse=!1}},h.title="Convolver",h.desc="Convolves the signal (used for reverb)",t.registerNodeType("audio/convolver",h);function f(){this.properties={threshold:-50,knee:40,ratio:12,reduction:-20,attack:0,release:.25},this.audionode=n.getAudioContext().createDynamicsCompressor(),this.addInput("in","audio"),this.addOutput("out","audio")}n.createAudioNodeWrapper(f),f.prototype.onExecute=function(){if(!(!this.inputs||!this.inputs.length))for(var S=1;S<this.inputs.length;++S){var k=this.inputs[S];if(k.link!=null){var D=this.getInputData(S);D!==void 0&&(this.audionode[k.name].value=D)}}},f.prototype.onGetInputs=function(){return[["threshold","number"],["knee","number"],["ratio","number"],["reduction","number"],["attack","number"],["release","number"]]},f.title="DynamicsCompressor",f.desc="Dynamics Compressor",t.registerNodeType("audio/dynamicsCompressor",f);function m(){this.properties={},this.audionode=n.getAudioContext().createWaveShaper(),this.addInput("in","audio"),this.addInput("shape","waveshape"),this.addOutput("out","audio")}m.prototype.onExecute=function(){if(!(!this.inputs||!this.inputs.length)){var S=this.getInputData(1);S!==void 0&&(this.audionode.curve=S)}},m.prototype.setWaveShape=function(S){this.audionode.curve=S},n.createAudioNodeWrapper(m);function _(){this.properties={gain1:.5,gain2:.5},this.audionode=n.getAudioContext().createGain(),this.audionode1=n.getAudioContext().createGain(),this.audionode1.gain.value=this.properties.gain1,this.audionode2=n.getAudioContext().createGain(),this.audionode2.gain.value=this.properties.gain2,this.audionode1.connect(this.audionode),this.audionode2.connect(this.audionode),this.addInput("in1","audio"),this.addInput("in1 gain","number"),this.addInput("in2","audio"),this.addInput("in2 gain","number"),this.addOutput("out","audio")}_.prototype.getAudioNodeInInputSlot=function(S){if(S==0)return this.audionode1;if(S==2)return this.audionode2},_.prototype.onPropertyChanged=function(S,k){S=="gain1"?this.audionode1.gain.value=k:S=="gain2"&&(this.audionode2.gain.value=k)},_.prototype.onExecute=function(){if(!(!this.inputs||!this.inputs.length))for(var S=1;S<this.inputs.length;++S){var k=this.inputs[S];if(!(k.link==null||k.type=="audio")){var D=this.getInputData(S);D!==void 0&&(S==1?this.audionode1.gain.value=D:S==3&&(this.audionode2.gain.value=D))}}},n.createAudioNodeWrapper(_),_.title="Mixer",_.desc="Audio mixer",t.registerNodeType("audio/mixer",_);function C(){this.properties={A:.1,D:.1,S:.1,R:.1},this.audionode=n.getAudioContext().createGain(),this.audionode.gain.value=0,this.addInput("in","audio"),this.addInput("gate","boolean"),this.addOutput("out","audio"),this.gate=!1}C.prototype.onExecute=function(){var S=n.getAudioContext(),k=S.currentTime,D=this.audionode,M=D.gain,j=this.getInputData(1),H=this.getInputOrProperty("A"),X=this.getInputOrProperty("D"),K=this.getInputOrProperty("S"),re=this.getInputOrProperty("R");!this.gate&&j?(M.cancelScheduledValues(0),M.setValueAtTime(0,k),M.linearRampToValueAtTime(1,k+H),M.linearRampToValueAtTime(K,k+H+X)):this.gate&&!j&&(M.cancelScheduledValues(0),M.setValueAtTime(M.value,k),M.linearRampToValueAtTime(0,k+re)),this.gate=j},C.prototype.onGetInputs=function(){return[["A","number"],["D","number"],["S","number"],["R","number"]]},n.createAudioNodeWrapper(C),C.title="ADSR",C.desc="Audio envelope",t.registerNodeType("audio/adsr",C);function b(){this.properties={delayTime:.5},this.audionode=n.getAudioContext().createDelay(10),this.audionode.delayTime.value=this.properties.delayTime,this.addInput("in","audio"),this.addInput("time","number"),this.addOutput("out","audio")}n.createAudioNodeWrapper(b),b.prototype.onExecute=function(){var S=this.getInputData(1);S!==void 0&&(this.audionode.delayTime.value=S)},b.title="Delay",b.desc="Audio delay",t.registerNodeType("audio/delay",b);function T(){this.properties={frequency:350,detune:0,Q:1},this.addProperty("type","lowpass","enum",{values:["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"]}),this.audionode=n.getAudioContext().createBiquadFilter(),this.addInput("in","audio"),this.addOutput("out","audio")}T.prototype.onExecute=function(){if(!(!this.inputs||!this.inputs.length))for(var S=1;S<this.inputs.length;++S){var k=this.inputs[S];if(k.link!=null){var D=this.getInputData(S);D!==void 0&&(this.audionode[k.name].value=D)}}},T.prototype.onGetInputs=function(){return[["frequency","number"],["detune","number"],["Q","number"]]},n.createAudioNodeWrapper(T),T.title="BiquadFilter",T.desc="Audio filter",t.registerNodeType("audio/biquadfilter",T);function R(){this.properties={frequency:440,detune:0,type:"sine"},this.addProperty("type","sine","enum",{values:["sine","square","sawtooth","triangle","custom"]}),this.audionode=n.getAudioContext().createOscillator(),this.addOutput("out","audio")}R.prototype.onStart=function(){if(!this.audionode.started){this.audionode.started=!0;try{this.audionode.start()}catch{}}},R.prototype.onStop=function(){this.audionode.started&&(this.audionode.started=!1,this.audionode.stop())},R.prototype.onPause=function(){this.onStop()},R.prototype.onUnpause=function(){this.onStart()},R.prototype.onExecute=function(){if(!(!this.inputs||!this.inputs.length))for(var S=0;S<this.inputs.length;++S){var k=this.inputs[S];if(k.link!=null){var D=this.getInputData(S);D!==void 0&&(this.audionode[k.name].value=D)}}},R.prototype.onGetInputs=function(){return[["frequency","number"],["detune","number"],["type","string"]]},n.createAudioNodeWrapper(R),R.title="Oscillator",R.desc="Oscillator",t.registerNodeType("audio/oscillator",R);function A(){this.properties={continuous:!0,mark:-1},this.addInput("data","array"),this.addInput("mark","number"),this.size=[300,200],this._last_buffer=null}A.prototype.onExecute=function(){this._last_buffer=this.getInputData(0);var S=this.getInputData(1);S!==void 0&&(this.properties.mark=S),this.setDirtyCanvas(!0,!1)},A.prototype.onDrawForeground=function(S){if(this._last_buffer){var k=this._last_buffer,D=k.length/this.size[0],M=this.size[1];S.fillStyle="black",S.fillRect(0,0,this.size[0],this.size[1]),S.strokeStyle="white",S.beginPath();var j=0;if(this.properties.continuous){S.moveTo(j,M);for(var H=0;H<k.length;H+=D)S.lineTo(j,M-k[H|0]/255*M),j++}else for(var H=0;H<k.length;H+=D)S.moveTo(j+.5,M),S.lineTo(j+.5,M-k[H|0]/255*M),j++;if(S.stroke(),this.properties.mark>=0){var X=n.getAudioContext().sampleRate,K=X/k.length,j=2*(this.properties.mark/K)/D;j>=this.size[0]&&(j=this.size[0]-1),S.strokeStyle="red",S.beginPath(),S.moveTo(j,M),S.lineTo(j,0),S.stroke()}}},A.title="Visualization",A.desc="Audio Visualization",t.registerNodeType("audio/visualization",A);function I(){this.properties={band:440,amplitude:1},this.addInput("freqs","array"),this.addOutput("signal","number")}I.prototype.onExecute=function(){if(this._freqs=this.getInputData(0),!!this._freqs){var S=this.properties.band,j=this.getInputData(1);j!==void 0&&(S=j);var k=n.getAudioContext().sampleRate,D=k/this._freqs.length,M=2*(S/D),j=0;if(M<0&&(j=this._freqs[0]),M>=this._freqs.length)j=this._freqs[this._freqs.length-1];else{var H=M|0,X=this._freqs[H],K=this._freqs[H+1],re=M-H;j=X*(1-re)+K*re}this.setOutputData(0,j/255*this.properties.amplitude)}},I.prototype.onGetInputs=function(){return[["band","number"]]},I.title="Signal",I.desc="extract the signal of some frequency",t.registerNodeType("audio/signal",I);function P(){if(!P.default_code){var S=P.default_function.toString(),k=S.indexOf("{")+1,D=S.lastIndexOf("}");P.default_code=S.substr(k,D-k)}this.properties={code:P.default_code};var M=n.getAudioContext();M.createScriptProcessor?this.audionode=M.createScriptProcessor(4096,1,1):(console.warn("ScriptProcessorNode deprecated"),this.audionode=M.createGain()),this.processCode(),P._bypass_function||(P._bypass_function=this.audionode.onaudioprocess),this.addInput("in","audio"),this.addOutput("out","audio")}P.prototype.onAdded=function(S){S.status==LGraph.STATUS_RUNNING&&(this.audionode.onaudioprocess=this._callback)},P["@code"]={widget:"code",type:"code"},P.prototype.onStart=function(){this.audionode.onaudioprocess=this._callback},P.prototype.onStop=function(){this.audionode.onaudioprocess=P._bypass_function},P.prototype.onPause=function(){this.audionode.onaudioprocess=P._bypass_function},P.prototype.onUnpause=function(){this.audionode.onaudioprocess=this._callback},P.prototype.onExecute=function(){},P.prototype.onRemoved=function(){this.audionode.onaudioprocess=P._bypass_function},P.prototype.processCode=function(){try{var S=new Function("properties",this.properties.code);this._script=new S(this.properties),this._old_code=this.properties.code,this._callback=this._script.onaudioprocess}catch(k){console.error("Error in onaudioprocess code",k),this._callback=P._bypass_function,this.audionode.onaudioprocess=this._callback}},P.prototype.onPropertyChanged=function(S,k){S=="code"&&(this.properties.code=k,this.processCode(),this.graph&&this.graph.status==LGraph.STATUS_RUNNING&&(this.audionode.onaudioprocess=this._callback))},P.default_function=function(){this.onaudioprocess=function(S){for(var k=S.inputBuffer,D=S.outputBuffer,M=0;M<D.numberOfChannels;M++)for(var j=k.getChannelData(M),H=D.getChannelData(M),X=0;X<k.length;X++)H[X]=j[X]}},n.createAudioNodeWrapper(P),P.title="Script",P.desc="apply script to signal",t.registerNodeType("audio/script",P);function N(){this.audionode=n.getAudioContext().destination,this.addInput("in","audio")}N.title="Destination",N.desc="Audio output",t.registerNodeType("audio/destination",N)})(litegraph),(function(e){var t=e.LiteGraph;function n(){this.size=[60,20],this.addInput("send",t.ACTION),this.addOutput("received",t.EVENT),this.addInput("in",0),this.addOutput("out",0),this.properties={url:"",room:"lgraph",only_send_changes:!0},this._ws=null,this._last_sent_data=[],this._last_received_data=[]}n.title="WebSocket",n.desc="Send data through a websocket",n.prototype.onPropertyChanged=function(u,c){u=="url"&&this.connectSocket()},n.prototype.onExecute=function(){if(!this._ws&&this.properties.url&&this.connectSocket(),!(!this._ws||this._ws.readyState!=WebSocket.OPEN)){for(var u=this.properties.room,c=this.properties.only_send_changes,h=1;h<this.inputs.length;++h){var f=this.getInputData(h);if(f!=null){var m;try{m=JSON.stringify({type:0,room:u,channel:h,data:f})}catch{continue}c&&this._last_sent_data[h]==m||(this._last_sent_data[h]=m,this._ws.send(m))}}for(var h=1;h<this.outputs.length;++h)this.setOutputData(h,this._last_received_data[h]);this.boxcolor=="#AFA"&&(this.boxcolor="#6C6")}},n.prototype.connectSocket=function(){var u=this,c=this.properties.url;c.substr(0,2)!="ws"&&(c="ws://"+c),this._ws=new WebSocket(c),this._ws.onopen=function(){console.log("ready"),u.boxcolor="#6C6"},this._ws.onmessage=function(h){u.boxcolor="#AFA";var f=JSON.parse(h.data);if(!(f.room&&f.room!=u.properties.room))if(f.type==1)if(f.data.object_class&&t[f.data.object_class]){var m=null;try{m=new t[f.data.object_class](f.data),u.triggerSlot(0,m)}catch{return}}else u.triggerSlot(0,f.data);else u._last_received_data[f.channel||0]=f.data},this._ws.onerror=function(h){console.log("couldnt connect to websocket"),u.boxcolor="#E88"},this._ws.onclose=function(h){console.log("connection closed"),u.boxcolor="#000"}},n.prototype.send=function(u){!this._ws||this._ws.readyState!=WebSocket.OPEN||this._ws.send(JSON.stringify({type:1,msg:u}))},n.prototype.onAction=function(u,c){!this._ws||this._ws.readyState!=WebSocket.OPEN||this._ws.send({type:1,room:this.properties.room,action:u,data:c})},n.prototype.onGetInputs=function(){return[["in",0]]},n.prototype.onGetOutputs=function(){return[["out",0]]},t.registerNodeType("network/websocket",n);function a(){this.room_widget=this.addWidget("text","Room","lgraph",this.setRoom.bind(this)),this.addWidget("button","Reconnect",null,this.connectSocket.bind(this)),this.addInput("send",t.ACTION),this.addOutput("received",t.EVENT),this.addInput("in",0),this.addOutput("out",0),this.properties={url:"tamats.com:55000",room:"lgraph",only_send_changes:!0},this._server=null,this.connectSocket(),this._last_sent_data=[],this._last_received_data=[],typeof SillyClient>"u"&&console.warn("remember to add SillyClient.js to your project: https://tamats.com/projects/sillyserver/src/sillyclient.js")}a.title="SillyClient",a.desc="Connects to SillyServer to broadcast messages",a.prototype.onPropertyChanged=function(u,c){u=="room"&&(this.room_widget.value=c),this.connectSocket()},a.prototype.setRoom=function(u){this.properties.room=u,this.room_widget.value=u,this.connectSocket()},a.prototype.onDrawForeground=function(){for(var u=1;u<this.inputs.length;++u){var c=this.inputs[u];c.label="in_"+u}for(var u=1;u<this.outputs.length;++u){var c=this.outputs[u];c.label="out_"+u}},a.prototype.onExecute=function(){if(!(!this._server||!this._server.is_connected)){for(var u=this.properties.only_send_changes,c=1;c<this.inputs.length;++c){var h=this.getInputData(c),f=this._last_sent_data[c];if(h!=null){if(u){var m=!0;if(h&&h.length&&f&&f.length==h.length&&h.constructor!==String){for(var _=0;_<h.length;++_)if(f[_]!=h[_]){m=!1;break}}else this._last_sent_data[c]!=h&&(m=!1);if(m)continue}if(this._server.sendMessage({type:0,channel:c,data:h}),h.length&&h.constructor!==String)if(this._last_sent_data[c]){this._last_sent_data[c].length=h.length;for(var _=0;_<h.length;++_)this._last_sent_data[c][_]=h[_]}else h.constructor===Array?this._last_sent_data[c]=h.concat():this._last_sent_data[c]=new h.constructor(h);else this._last_sent_data[c]=h}}for(var c=1;c<this.outputs.length;++c)this.setOutputData(c,this._last_received_data[c]);this.boxcolor=="#AFA"&&(this.boxcolor="#6C6")}},a.prototype.connectSocket=function(){var u=this;if(typeof SillyClient>"u"){this._error||console.error("SillyClient node cannot be used, you must include SillyServer.js"),this._error=!0;return}if(this._server=new SillyClient,this._server.on_ready=function(){console.log("ready"),u.boxcolor="#6C6"},this._server.on_message=function(c,h){var f=null;try{f=JSON.parse(h)}catch{return}if(f.type==1)if(f.data.object_class&&t[f.data.object_class]){var m=null;try{m=new t[f.data.object_class](f.data),u.triggerSlot(0,m)}catch{return}}else u.triggerSlot(0,f.data);else u._last_received_data[f.channel||0]=f.data;u.boxcolor="#AFA"},this._server.on_error=function(c){console.log("couldnt connect to websocket"),u.boxcolor="#E88"},this._server.on_close=function(c){console.log("connection closed"),u.boxcolor="#000"},this.properties.url&&this.properties.room){try{this._server.connect(this.properties.url,this.properties.room)}catch(c){console.error("SillyServer error: "+c),this._server=null;return}this._final_url=this.properties.url+"/"+this.properties.room}},a.prototype.send=function(u){!this._server||!this._server.is_connected||this._server.sendMessage({type:1,data:u})},a.prototype.onAction=function(u,c){!this._server||!this._server.is_connected||this._server.sendMessage({type:1,action:u,data:c})},a.prototype.onGetInputs=function(){return[["in",0]]},a.prototype.onGetOutputs=function(){return[["out",0]]},t.registerNodeType("network/sillyclient",a);function s(){this.addInput("request",t.ACTION),this.addInput("url","string"),this.addProperty("url",""),this.addOutput("ready",t.EVENT),this.addOutput("data","string"),this.addWidget("button","Fetch",null,this.fetch.bind(this)),this._data=null,this._fetching=null}s.title="HTTP Request",s.desc="Fetch data through HTTP",s.prototype.fetch=function(){var u=this.properties.url;if(u){this.boxcolor="#FF0";var c=this;this._fetching=fetch(u).then(h=>{if(!h.ok)this.boxcolor="#F00",c.trigger("error");else return this.boxcolor="#0F0",h.text()}).then(h=>{c._data=h,c._fetching=null,c.trigger("ready")})}},s.prototype.onAction=function(u){u=="request"&&this.fetch()},s.prototype.onExecute=function(){this.setOutputData(1,this._data)},s.prototype.onGetOutputs=function(){return[["error",t.EVENT]]},t.registerNodeType("network/httprequest",s)})(litegraph)})(litegraph)),litegraph}var litegraphExports=requireLitegraph();const GraphCanvas=reactExports.memo(e=>{const t=reactExports.useRef(null),n=reactExports.useContext(GraphCanvasContext);reactExports.useEffect(()=>{if(!t.current||!n)return;const s=new litegraphExports.LGraph,u=new litegraphExports.LGraphCanvas(t.current,s);u.show_info=!1,n.setCanvas(u)},[t]),reactExports.useEffect(()=>(a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)),[t]),reactExports.useEffect(()=>(t.current?.addEventListener("resize",a),window.addEventListener("resize",a),()=>{t.current?.removeEventListener("resize",a),window.removeEventListener("resize",a)}),[t.current]);function a(){if(!t.current)return;const s=new Scaler({isDevicePixelRatio:!0}),{width:u,height:c}=CanvasHelper.getCanvasSize(t.current);t.current.width=s.scale(u),t.current.height=s.scale(c),t.current.style.width=u+"px",t.current.style.height=c+"px",t.current.getContext("2d")?.scale(s.getRatio,s.getRatio)}return jsxRuntimeExports.jsx("canvas",{...e,ref:t,className:"!bg-[#222222] w-full h-full"})});class Scaler{_ratio=1;_isDevicePixelRatio=!1;constructor({source:t=1,target:n=1,isDevicePixelRatio:a=!1}){this._ratio=n/t*(a?window.devicePixelRatio:1)}get getRatio(){return this._ratio}get getRatioWithoutDevicePixelRatio(){return this._isDevicePixelRatio?this._ratio/window.devicePixelRatio:this._ratio}scale(t){return t*this._ratio}unscale(t){return this._isDevicePixelRatio?t/this._ratio:t/this._ratio/window.devicePixelRatio}}class CanvasHelper{static getCanvasContext(t){const n=t.getContext("2d");if(!n)throw new Error("Canvas context is null");return n}static getCanvasSize(t){const{width:n,height:a}=t.getBoundingClientRect();return{width:n,height:a}}}function useCanvasSize(e){return reactExports.useMemo(()=>e?CanvasHelper.getCanvasSize(e):null,[e])}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function isWindow(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function isNode(e){return"nodeType"in e}function getWindow(e){var t,n;return e?isWindow(e)?e:isNode(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function isDocument(e){const{Document:t}=getWindow(e);return e instanceof t}function isHTMLElement(e){return isWindow(e)?!1:e instanceof getWindow(e).HTMLElement}function isSVGElement(e){return e instanceof getWindow(e).SVGElement}function getOwnerDocument(e){return e?isWindow(e)?e.document:isNode(e)?isDocument(e)?e:isHTMLElement(e)||isSVGElement(e)?e.ownerDocument:document:document:document}const useIsomorphicLayoutEffect=canUseDOM?reactExports.useLayoutEffect:reactExports.useEffect;function useEvent(e){const t=reactExports.useRef(e);return useIsomorphicLayoutEffect(()=>{t.current=e}),reactExports.useCallback(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}function useInterval(){const e=reactExports.useRef(null),t=reactExports.useCallback((a,s)=>{e.current=setInterval(a,s)},[]),n=reactExports.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function useLatestValue(e,t){t===void 0&&(t=[e]);const n=reactExports.useRef(e);return useIsomorphicLayoutEffect(()=>{n.current!==e&&(n.current=e)},t),n}function useLazyMemo(e,t){const n=reactExports.useRef();return reactExports.useMemo(()=>{const a=e(n.current);return n.current=a,a},[...t])}function useNodeRef(e){const t=useEvent(e),n=reactExports.useRef(null),a=reactExports.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,a]}function usePrevious(e){const t=reactExports.useRef();return reactExports.useEffect(()=>{t.current=e},[e]),t.current}let ids={};function useUniqueId(e,t){return reactExports.useMemo(()=>{if(t)return t;const n=ids[e]==null?0:ids[e]+1;return ids[e]=n,e+"-"+n},[e,t])}function createAdjustmentFn(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];return a.reduce((u,c)=>{const h=Object.entries(c);for(const[f,m]of h){const _=u[f];_!=null&&(u[f]=_+e*m)}return u},{...t})}}const add=createAdjustmentFn(1),subtract=createAdjustmentFn(-1);function hasViewportRelativeCoordinates(e){return"clientX"in e&&"clientY"in e}function isKeyboardEvent(e){if(!e)return!1;const{KeyboardEvent:t}=getWindow(e.target);return t&&e instanceof t}function isTouchEvent(e){if(!e)return!1;const{TouchEvent:t}=getWindow(e.target);return t&&e instanceof t}function getEventCoordinates(e){if(isTouchEvent(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return hasViewportRelativeCoordinates(e)?{x:e.clientX,y:e.clientY}:null}const SELECTOR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function findFirstFocusableNode(e){return e.matches(SELECTOR)?e:e.querySelector(SELECTOR)}const hiddenStyles={display:"none"};function HiddenText(e){let{id:t,value:n}=e;return React.createElement("div",{id:t,style:hiddenStyles},n)}function LiveRegion(e){let{id:t,announcement:n,ariaLiveType:a="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return React.createElement("div",{id:t,style:s,role:"status","aria-live":a,"aria-atomic":!0},n)}function useAnnouncement(){const[e,t]=reactExports.useState("");return{announce:reactExports.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const DndMonitorContext=reactExports.createContext(null);function useDndMonitor(e){const t=reactExports.useContext(DndMonitorContext);reactExports.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function useDndMonitorProvider(){const[e]=reactExports.useState(()=>new Set),t=reactExports.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[reactExports.useCallback(a=>{let{type:s,event:u}=a;e.forEach(c=>{var h;return(h=c[s])==null?void 0:h.call(c,u)})},[e]),t]}const defaultScreenReaderInstructions={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},defaultAnnouncements={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Accessibility(e){let{announcements:t=defaultAnnouncements,container:n,hiddenTextDescribedById:a,screenReaderInstructions:s=defaultScreenReaderInstructions}=e;const{announce:u,announcement:c}=useAnnouncement(),h=useUniqueId("DndLiveRegion"),[f,m]=reactExports.useState(!1);if(reactExports.useEffect(()=>{m(!0)},[]),useDndMonitor(reactExports.useMemo(()=>({onDragStart(C){let{active:b}=C;u(t.onDragStart({active:b}))},onDragMove(C){let{active:b,over:T}=C;t.onDragMove&&u(t.onDragMove({active:b,over:T}))},onDragOver(C){let{active:b,over:T}=C;u(t.onDragOver({active:b,over:T}))},onDragEnd(C){let{active:b,over:T}=C;u(t.onDragEnd({active:b,over:T}))},onDragCancel(C){let{active:b,over:T}=C;u(t.onDragCancel({active:b,over:T}))}}),[u,t])),!f)return null;const _=React.createElement(React.Fragment,null,React.createElement(HiddenText,{id:a,value:s.draggable}),React.createElement(LiveRegion,{id:h,announcement:c}));return n?reactDomExports.createPortal(_,n):_}var Action;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Action||(Action={}));function noop(){}const defaultCoordinates=Object.freeze({x:0,y:0});function sortCollisionsDesc(e,t){let{data:{value:n}}=e,{data:{value:a}}=t;return a-n}function getFirstCollision(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function getIntersectionRatio(e,t){const n=Math.max(t.top,e.top),a=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),u=Math.min(t.top+t.height,e.top+e.height),c=s-a,h=u-n;if(a<s&&n<u){const f=t.width*t.height,m=e.width*e.height,_=c*h,C=_/(f+m-_);return Number(C.toFixed(4))}return 0}const rectIntersection=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:a}=e;const s=[];for(const u of a){const{id:c}=u,h=n.get(c);if(h){const f=getIntersectionRatio(h,t);f>0&&s.push({id:c,data:{droppableContainer:u,value:f}})}}return s.sort(sortCollisionsDesc)};function adjustScale(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function getRectDelta(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:defaultCoordinates}function createRectAdjustmentFn(e){return function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return s.reduce((c,h)=>({...c,top:c.top+e*h.y,bottom:c.bottom+e*h.y,left:c.left+e*h.x,right:c.right+e*h.x}),{...n})}}const getAdjustedRect=createRectAdjustmentFn(1);function parseTransform(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function inverseTransform(e,t,n){const a=parseTransform(t);if(!a)return e;const{scaleX:s,scaleY:u,x:c,y:h}=a,f=e.left-c-(1-s)*parseFloat(n),m=e.top-h-(1-u)*parseFloat(n.slice(n.indexOf(" ")+1)),_=s?e.width/s:e.width,C=u?e.height/u:e.height;return{width:_,height:C,top:m,right:f+_,bottom:m+C,left:f}}const defaultOptions={ignoreTransform:!1};function getClientRect(e,t){t===void 0&&(t=defaultOptions);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:m,transformOrigin:_}=getWindow(e).getComputedStyle(e);m&&(n=inverseTransform(n,m,_))}const{top:a,left:s,width:u,height:c,bottom:h,right:f}=n;return{top:a,left:s,width:u,height:c,bottom:h,right:f}}function getTransformAgnosticClientRect(e){return getClientRect(e,{ignoreTransform:!0})}function getWindowClientRect(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function isFixed(e,t){return t===void 0&&(t=getWindow(e).getComputedStyle(e)),t.position==="fixed"}function isScrollable(e,t){t===void 0&&(t=getWindow(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const u=t[s];return typeof u=="string"?n.test(u):!1})}function getScrollableAncestors(e,t){const n=[];function a(s){if(t!=null&&n.length>=t||!s)return n;if(isDocument(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!isHTMLElement(s)||isSVGElement(s)||n.includes(s))return n;const u=getWindow(e).getComputedStyle(s);return s!==e&&isScrollable(s,u)&&n.push(s),isFixed(s,u)?n:a(s.parentNode)}return e?a(e):n}function getFirstScrollableAncestor(e){const[t]=getScrollableAncestors(e,1);return t??null}function getScrollableElement(e){return!canUseDOM||!e?null:isWindow(e)?e:isNode(e)?isDocument(e)||e===getOwnerDocument(e).scrollingElement?window:isHTMLElement(e)?e:null:null}function getScrollXCoordinate(e){return isWindow(e)?e.scrollX:e.scrollLeft}function getScrollYCoordinate(e){return isWindow(e)?e.scrollY:e.scrollTop}function getScrollCoordinates(e){return{x:getScrollXCoordinate(e),y:getScrollYCoordinate(e)}}var Direction;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Direction||(Direction={}));function isDocumentScrollingElement(e){return!canUseDOM||!e?!1:e===document.scrollingElement}function getScrollPosition(e){const t={x:0,y:0},n=isDocumentScrollingElement(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,u=e.scrollLeft<=t.x,c=e.scrollTop>=a.y,h=e.scrollLeft>=a.x;return{isTop:s,isLeft:u,isBottom:c,isRight:h,maxScroll:a,minScroll:t}}const defaultThreshold={x:.2,y:.2};function getScrollDirectionAndSpeed(e,t,n,a,s){let{top:u,left:c,right:h,bottom:f}=n;a===void 0&&(a=10),s===void 0&&(s=defaultThreshold);const{isTop:m,isBottom:_,isLeft:C,isRight:b}=getScrollPosition(e),T={x:0,y:0},R={x:0,y:0},A={height:t.height*s.y,width:t.width*s.x};return!m&&u<=t.top+A.height?(T.y=Direction.Backward,R.y=a*Math.abs((t.top+A.height-u)/A.height)):!_&&f>=t.bottom-A.height&&(T.y=Direction.Forward,R.y=a*Math.abs((t.bottom-A.height-f)/A.height)),!b&&h>=t.right-A.width?(T.x=Direction.Forward,R.x=a*Math.abs((t.right-A.width-h)/A.width)):!C&&c<=t.left+A.width&&(T.x=Direction.Backward,R.x=a*Math.abs((t.left+A.width-c)/A.width)),{direction:T,speed:R}}function getScrollElementRect(e){if(e===document.scrollingElement){const{innerWidth:u,innerHeight:c}=window;return{top:0,left:0,right:u,bottom:c,width:u,height:c}}const{top:t,left:n,right:a,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:a,bottom:s,width:e.clientWidth,height:e.clientHeight}}function getScrollOffsets(e){return e.reduce((t,n)=>add(t,getScrollCoordinates(n)),defaultCoordinates)}function getScrollXOffset(e){return e.reduce((t,n)=>t+getScrollXCoordinate(n),0)}function getScrollYOffset(e){return e.reduce((t,n)=>t+getScrollYCoordinate(n),0)}function scrollIntoViewIfNeeded(e,t){if(t===void 0&&(t=getClientRect),!e)return;const{top:n,left:a,bottom:s,right:u}=t(e);getFirstScrollableAncestor(e)&&(s<=0||u<=0||n>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const properties=[["x",["left","right"],getScrollXOffset],["y",["top","bottom"],getScrollYOffset]];class Rect{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=getScrollableAncestors(n),s=getScrollOffsets(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[u,c,h]of properties)for(const f of c)Object.defineProperty(this,f,{get:()=>{const m=h(a),_=s[u]-m;return this.rect[f]+_},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Listeners{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...n)})},this.target=t}add(t,n,a){var s;(s=this.target)==null||s.addEventListener(t,n,a),this.listeners.push([t,n,a])}}function getEventListenerTarget(e){const{EventTarget:t}=getWindow(e);return e instanceof t?e:getOwnerDocument(e)}function hasExceededDistance(e,t){const n=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+a**2)>t:"x"in t&&"y"in t?n>t.x&&a>t.y:"x"in t?n>t.x:"y"in t?a>t.y:!1}var EventName;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(EventName||(EventName={}));function preventDefault(e){e.preventDefault()}function stopPropagation(e){e.stopPropagation()}var KeyboardCode;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(KeyboardCode||(KeyboardCode={}));const defaultKeyboardCodes={start:[KeyboardCode.Space,KeyboardCode.Enter],cancel:[KeyboardCode.Esc],end:[KeyboardCode.Space,KeyboardCode.Enter,KeyboardCode.Tab]},defaultKeyboardCoordinateGetter=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case KeyboardCode.Right:return{...n,x:n.x+25};case KeyboardCode.Left:return{...n,x:n.x-25};case KeyboardCode.Down:return{...n,y:n.y+25};case KeyboardCode.Up:return{...n,y:n.y-25}}};class KeyboardSensor{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Listeners(getOwnerDocument(n)),this.windowListeners=new Listeners(getWindow(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(EventName.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,a=t.node.current;a&&scrollIntoViewIfNeeded(a),n(defaultCoordinates)}handleKeyDown(t){if(isKeyboardEvent(t)){const{active:n,context:a,options:s}=this.props,{keyboardCodes:u=defaultKeyboardCodes,coordinateGetter:c=defaultKeyboardCoordinateGetter,scrollBehavior:h="smooth"}=s,{code:f}=t;if(u.end.includes(f)){this.handleEnd(t);return}if(u.cancel.includes(f)){this.handleCancel(t);return}const{collisionRect:m}=a.current,_=m?{x:m.left,y:m.top}:defaultCoordinates;this.referenceCoordinates||(this.referenceCoordinates=_);const C=c(t,{active:n,context:a.current,currentCoordinates:_});if(C){const b=subtract(C,_),T={x:0,y:0},{scrollableAncestors:R}=a.current;for(const A of R){const I=t.code,{isTop:P,isRight:N,isLeft:S,isBottom:k,maxScroll:D,minScroll:M}=getScrollPosition(A),j=getScrollElementRect(A),H={x:Math.min(I===KeyboardCode.Right?j.right-j.width/2:j.right,Math.max(I===KeyboardCode.Right?j.left:j.left+j.width/2,C.x)),y:Math.min(I===KeyboardCode.Down?j.bottom-j.height/2:j.bottom,Math.max(I===KeyboardCode.Down?j.top:j.top+j.height/2,C.y))},X=I===KeyboardCode.Right&&!N||I===KeyboardCode.Left&&!S,K=I===KeyboardCode.Down&&!k||I===KeyboardCode.Up&&!P;if(X&&H.x!==C.x){const re=A.scrollLeft+b.x,F=I===KeyboardCode.Right&&re<=D.x||I===KeyboardCode.Left&&re>=M.x;if(F&&!b.y){A.scrollTo({left:re,behavior:h});return}F?T.x=A.scrollLeft-re:T.x=I===KeyboardCode.Right?A.scrollLeft-D.x:A.scrollLeft-M.x,T.x&&A.scrollBy({left:-T.x,behavior:h});break}else if(K&&H.y!==C.y){const re=A.scrollTop+b.y,F=I===KeyboardCode.Down&&re<=D.y||I===KeyboardCode.Up&&re>=M.y;if(F&&!b.x){A.scrollTo({top:re,behavior:h});return}F?T.y=A.scrollTop-re:T.y=I===KeyboardCode.Down?A.scrollTop-D.y:A.scrollTop-M.y,T.y&&A.scrollBy({top:-T.y,behavior:h});break}}this.handleMove(t,add(subtract(C,this.referenceCoordinates),T))}}}handleMove(t,n){const{onMove:a}=this.props;t.preventDefault(),a(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KeyboardSensor.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:a=defaultKeyboardCodes,onActivation:s}=t,{active:u}=n;const{code:c}=e.nativeEvent;if(a.start.includes(c)){const h=u.activatorNode.current;return h&&e.target!==h?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function isDistanceConstraint(e){return!!(e&&"distance"in e)}function isDelayConstraint(e){return!!(e&&"delay"in e)}class AbstractPointerSensor{constructor(t,n,a){var s;a===void 0&&(a=getEventListenerTarget(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:u}=t,{target:c}=u;this.props=t,this.events=n,this.document=getOwnerDocument(c),this.documentListeners=new Listeners(this.document),this.listeners=new Listeners(a),this.windowListeners=new Listeners(getWindow(c)),this.initialCoordinates=(s=getEventCoordinates(u))!=null?s:defaultCoordinates,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(EventName.Resize,this.handleCancel),this.windowListeners.add(EventName.DragStart,preventDefault),this.windowListeners.add(EventName.VisibilityChange,this.handleCancel),this.windowListeners.add(EventName.ContextMenu,preventDefault),this.documentListeners.add(EventName.Keydown,this.handleKeydown),n){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(isDelayConstraint(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(isDistanceConstraint(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:a,onPending:s}=this.props;s(a,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(EventName.Click,stopPropagation,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(EventName.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:a,initialCoordinates:s,props:u}=this,{onMove:c,options:{activationConstraint:h}}=u;if(!s)return;const f=(n=getEventCoordinates(t))!=null?n:defaultCoordinates,m=subtract(s,f);if(!a&&h){if(isDistanceConstraint(h)){if(h.tolerance!=null&&hasExceededDistance(m,h.tolerance))return this.handleCancel();if(hasExceededDistance(m,h.distance))return this.handleStart()}if(isDelayConstraint(h)&&hasExceededDistance(m,h.tolerance))return this.handleCancel();this.handlePending(h,m);return}t.cancelable&&t.preventDefault(),c(f)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===KeyboardCode.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const events={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class PointerSensor extends AbstractPointerSensor{constructor(t){const{event:n}=t,a=getOwnerDocument(n.target);super(t,events,a)}}PointerSensor.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return!n.isPrimary||n.button!==0?!1:(a?.({event:n}),!0)}}];const events$1={move:{name:"mousemove"},end:{name:"mouseup"}};var MouseButton;(function(e){e[e.RightClick=2]="RightClick"})(MouseButton||(MouseButton={}));class MouseSensor extends AbstractPointerSensor{constructor(t){super(t,events$1,getOwnerDocument(t.event.target))}}MouseSensor.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;return n.button===MouseButton.RightClick?!1:(a?.({event:n}),!0)}}];const events$2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class TouchSensor extends AbstractPointerSensor{constructor(t){super(t,events$2)}static setup(){return window.addEventListener(events$2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(events$2.move.name,t)};function t(){}}}TouchSensor.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:a}=t;const{touches:s}=n;return s.length>1?!1:(a?.({event:n}),!0)}}];var AutoScrollActivator;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(AutoScrollActivator||(AutoScrollActivator={}));var TraversalOrder;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(TraversalOrder||(TraversalOrder={}));function useAutoScroller(e){let{acceleration:t,activator:n=AutoScrollActivator.Pointer,canScroll:a,draggingRect:s,enabled:u,interval:c=5,order:h=TraversalOrder.TreeOrder,pointerCoordinates:f,scrollableAncestors:m,scrollableAncestorRects:_,delta:C,threshold:b}=e;const T=useScrollIntent({delta:C,disabled:!u}),[R,A]=useInterval(),I=reactExports.useRef({x:0,y:0}),P=reactExports.useRef({x:0,y:0}),N=reactExports.useMemo(()=>{switch(n){case AutoScrollActivator.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case AutoScrollActivator.DraggableRect:return s}},[n,s,f]),S=reactExports.useRef(null),k=reactExports.useCallback(()=>{const M=S.current;if(!M)return;const j=I.current.x*P.current.x,H=I.current.y*P.current.y;M.scrollBy(j,H)},[]),D=reactExports.useMemo(()=>h===TraversalOrder.TreeOrder?[...m].reverse():m,[h,m]);reactExports.useEffect(()=>{if(!u||!m.length||!N){A();return}for(const M of D){if(a?.(M)===!1)continue;const j=m.indexOf(M),H=_[j];if(!H)continue;const{direction:X,speed:K}=getScrollDirectionAndSpeed(M,H,N,t,b);for(const re of["x","y"])T[re][X[re]]||(K[re]=0,X[re]=0);if(K.x>0||K.y>0){A(),S.current=M,R(k,c),I.current=K,P.current=X;return}}I.current={x:0,y:0},P.current={x:0,y:0},A()},[t,k,a,A,u,c,JSON.stringify(N),JSON.stringify(T),R,m,D,_,JSON.stringify(b)])}const defaultScrollIntent={x:{[Direction.Backward]:!1,[Direction.Forward]:!1},y:{[Direction.Backward]:!1,[Direction.Forward]:!1}};function useScrollIntent(e){let{delta:t,disabled:n}=e;const a=usePrevious(t);return useLazyMemo(s=>{if(n||!a||!s)return defaultScrollIntent;const u={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Direction.Backward]:s.x[Direction.Backward]||u.x===-1,[Direction.Forward]:s.x[Direction.Forward]||u.x===1},y:{[Direction.Backward]:s.y[Direction.Backward]||u.y===-1,[Direction.Forward]:s.y[Direction.Forward]||u.y===1}}},[n,t,a])}function useCachedNode(e,t){const n=t!=null?e.get(t):void 0,a=n?n.node.current:null;return useLazyMemo(s=>{var u;return t==null?null:(u=a??s)!=null?u:null},[a,t])}function useCombineActivators(e,t){return reactExports.useMemo(()=>e.reduce((n,a)=>{const{sensor:s}=a,u=s.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,a)}));return[...n,...u]},[]),[e,t])}var MeasuringStrategy;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(MeasuringStrategy||(MeasuringStrategy={}));var MeasuringFrequency;(function(e){e.Optimized="optimized"})(MeasuringFrequency||(MeasuringFrequency={}));const defaultValue=new Map;function useDroppableMeasuring(e,t){let{dragging:n,dependencies:a,config:s}=t;const[u,c]=reactExports.useState(null),{frequency:h,measure:f,strategy:m}=s,_=reactExports.useRef(e),C=I(),b=useLatestValue(C),T=reactExports.useCallback(function(P){P===void 0&&(P=[]),!b.current&&c(N=>N===null?P:N.concat(P.filter(S=>!N.includes(S))))},[b]),R=reactExports.useRef(null),A=useLazyMemo(P=>{if(C&&!n)return defaultValue;if(!P||P===defaultValue||_.current!==e||u!=null){const N=new Map;for(let S of e){if(!S)continue;if(u&&u.length>0&&!u.includes(S.id)&&S.rect.current){N.set(S.id,S.rect.current);continue}const k=S.node.current,D=k?new Rect(f(k),k):null;S.rect.current=D,D&&N.set(S.id,D)}return N}return P},[e,u,n,C,f]);return reactExports.useEffect(()=>{_.current=e},[e]),reactExports.useEffect(()=>{C||T()},[n,C]),reactExports.useEffect(()=>{u&&u.length>0&&c(null)},[JSON.stringify(u)]),reactExports.useEffect(()=>{C||typeof h!="number"||R.current!==null||(R.current=setTimeout(()=>{T(),R.current=null},h))},[h,C,T,...a]),{droppableRects:A,measureDroppableContainers:T,measuringScheduled:u!=null};function I(){switch(m){case MeasuringStrategy.Always:return!1;case MeasuringStrategy.BeforeDragging:return n;default:return!n}}}function useInitialValue(e,t){return useLazyMemo(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function useInitialRect(e,t){return useInitialValue(e,t)}function useMutationObserver(e){let{callback:t,disabled:n}=e;const a=useEvent(t),s=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:u}=window;return new u(a)},[a,n]);return reactExports.useEffect(()=>()=>s?.disconnect(),[s]),s}function useResizeObserver(e){let{callback:t,disabled:n}=e;const a=useEvent(t),s=reactExports.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:u}=window;return new u(a)},[n]);return reactExports.useEffect(()=>()=>s?.disconnect(),[s]),s}function defaultMeasure(e){return new Rect(getClientRect(e),e)}function useRect(e,t,n){t===void 0&&(t=defaultMeasure);const[a,s]=reactExports.useState(null);function u(){s(f=>{if(!e)return null;if(e.isConnected===!1){var m;return(m=f??n)!=null?m:null}const _=t(e);return JSON.stringify(f)===JSON.stringify(_)?f:_})}const c=useMutationObserver({callback(f){if(e)for(const m of f){const{type:_,target:C}=m;if(_==="childList"&&C instanceof HTMLElement&&C.contains(e)){u();break}}}}),h=useResizeObserver({callback:u});return useIsomorphicLayoutEffect(()=>{u(),e?(h?.observe(e),c?.observe(document.body,{childList:!0,subtree:!0})):(h?.disconnect(),c?.disconnect())},[e]),a}function useRectDelta(e){const t=useInitialValue(e);return getRectDelta(e,t)}const defaultValue$1=[];function useScrollableAncestors(e){const t=reactExports.useRef(e),n=useLazyMemo(a=>e?a&&a!==defaultValue$1&&e&&t.current&&e.parentNode===t.current.parentNode?a:getScrollableAncestors(e):defaultValue$1,[e]);return reactExports.useEffect(()=>{t.current=e},[e]),n}function useScrollOffsets(e){const[t,n]=reactExports.useState(null),a=reactExports.useRef(e),s=reactExports.useCallback(u=>{const c=getScrollableElement(u.target);c&&n(h=>h?(h.set(c,getScrollCoordinates(c)),new Map(h)):null)},[]);return reactExports.useEffect(()=>{const u=a.current;if(e!==u){c(u);const h=e.map(f=>{const m=getScrollableElement(f);return m?(m.addEventListener("scroll",s,{passive:!0}),[m,getScrollCoordinates(m)]):null}).filter(f=>f!=null);n(h.length?new Map(h):null),a.current=e}return()=>{c(e),c(u)};function c(h){h.forEach(f=>{const m=getScrollableElement(f);m?.removeEventListener("scroll",s)})}},[s,e]),reactExports.useMemo(()=>e.length?t?Array.from(t.values()).reduce((u,c)=>add(u,c),defaultCoordinates):getScrollOffsets(e):defaultCoordinates,[e,t])}function useScrollOffsetsDelta(e,t){t===void 0&&(t=[]);const n=reactExports.useRef(null);return reactExports.useEffect(()=>{n.current=null},t),reactExports.useEffect(()=>{const a=e!==defaultCoordinates;a&&!n.current&&(n.current=e),!a&&n.current&&(n.current=null)},[e]),n.current?subtract(e,n.current):defaultCoordinates}function useSensorSetup(e){reactExports.useEffect(()=>{if(!canUseDOM)return;const t=e.map(n=>{let{sensor:a}=n;return a.setup==null?void 0:a.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function useSyntheticListeners(e,t){return reactExports.useMemo(()=>e.reduce((n,a)=>{let{eventName:s,handler:u}=a;return n[s]=c=>{u(c,t)},n},{}),[e,t])}function useWindowRect(e){return reactExports.useMemo(()=>e?getWindowClientRect(e):null,[e])}const defaultValue$2=[];function useRects(e,t){t===void 0&&(t=getClientRect);const[n]=e,a=useWindowRect(n?getWindow(n):null),[s,u]=reactExports.useState(defaultValue$2);function c(){u(()=>e.length?e.map(f=>isDocumentScrollingElement(f)?a:new Rect(t(f),f)):defaultValue$2)}const h=useResizeObserver({callback:c});return useIsomorphicLayoutEffect(()=>{h?.disconnect(),c(),e.forEach(f=>h?.observe(f))},[e]),s}function getMeasurableNode(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return isHTMLElement(t)?t:e}function useDragOverlayMeasuring(e){let{measure:t}=e;const[n,a]=reactExports.useState(null),s=reactExports.useCallback(m=>{for(const{target:_}of m)if(isHTMLElement(_)){a(C=>{const b=t(_);return C?{...C,width:b.width,height:b.height}:b});break}},[t]),u=useResizeObserver({callback:s}),c=reactExports.useCallback(m=>{const _=getMeasurableNode(m);u?.disconnect(),_&&u?.observe(_),a(_?t(_):null)},[t,u]),[h,f]=useNodeRef(c);return reactExports.useMemo(()=>({nodeRef:h,rect:n,setRef:f}),[n,h,f])}const defaultSensors=[{sensor:PointerSensor,options:{}},{sensor:KeyboardSensor,options:{}}],defaultData={current:{}},defaultMeasuringConfiguration={draggable:{measure:getTransformAgnosticClientRect},droppable:{measure:getTransformAgnosticClientRect,strategy:MeasuringStrategy.WhileDragging,frequency:MeasuringFrequency.Optimized},dragOverlay:{measure:getClientRect}};class DroppableContainersMap extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,a;return(n=(a=this.get(t))==null?void 0:a.node.current)!=null?n:void 0}}const defaultPublicContext={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new DroppableContainersMap,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:noop},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:defaultMeasuringConfiguration,measureDroppableContainers:noop,windowRect:null,measuringScheduled:!1},defaultInternalContext={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:noop,draggableNodes:new Map,over:null,measureDroppableContainers:noop},InternalContext=reactExports.createContext(defaultInternalContext),PublicContext=reactExports.createContext(defaultPublicContext);function getInitialState(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new DroppableContainersMap}}}function reducer(e,t){switch(t.type){case Action.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Action.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Action.DragEnd:case Action.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Action.RegisterDroppable:{const{element:n}=t,{id:a}=n,s=new DroppableContainersMap(e.droppable.containers);return s.set(a,n),{...e,droppable:{...e.droppable,containers:s}}}case Action.SetDroppableDisabled:{const{id:n,key:a,disabled:s}=t,u=e.droppable.containers.get(n);if(!u||a!==u.key)return e;const c=new DroppableContainersMap(e.droppable.containers);return c.set(n,{...u,disabled:s}),{...e,droppable:{...e.droppable,containers:c}}}case Action.UnregisterDroppable:{const{id:n,key:a}=t,s=e.droppable.containers.get(n);if(!s||a!==s.key)return e;const u=new DroppableContainersMap(e.droppable.containers);return u.delete(n),{...e,droppable:{...e.droppable,containers:u}}}default:return e}}function RestoreFocus(e){let{disabled:t}=e;const{active:n,activatorEvent:a,draggableNodes:s}=reactExports.useContext(InternalContext),u=usePrevious(a),c=usePrevious(n?.id);return reactExports.useEffect(()=>{if(!t&&!a&&u&&c!=null){if(!isKeyboardEvent(u)||document.activeElement===u.target)return;const h=s.get(c);if(!h)return;const{activatorNode:f,node:m}=h;if(!f.current&&!m.current)return;requestAnimationFrame(()=>{for(const _ of[f.current,m.current]){if(!_)continue;const C=findFirstFocusableNode(_);if(C){C.focus();break}}})}},[a,t,s,c,u]),null}function applyModifiers(e,t){let{transform:n,...a}=t;return e!=null&&e.length?e.reduce((s,u)=>u({transform:s,...a}),n):n}function useMeasuringConfiguration(e){return reactExports.useMemo(()=>({draggable:{...defaultMeasuringConfiguration.draggable,...e?.draggable},droppable:{...defaultMeasuringConfiguration.droppable,...e?.droppable},dragOverlay:{...defaultMeasuringConfiguration.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function useLayoutShiftScrollCompensation(e){let{activeNode:t,measure:n,initialRect:a,config:s=!0}=e;const u=reactExports.useRef(!1),{x:c,y:h}=typeof s=="boolean"?{x:s,y:s}:s;useIsomorphicLayoutEffect(()=>{if(!c&&!h||!t){u.current=!1;return}if(u.current||!a)return;const m=t?.node.current;if(!m||m.isConnected===!1)return;const _=n(m),C=getRectDelta(_,a);if(c||(C.x=0),h||(C.y=0),u.current=!0,Math.abs(C.x)>0||Math.abs(C.y)>0){const b=getFirstScrollableAncestor(m);b&&b.scrollBy({top:C.y,left:C.x})}},[t,c,h,a,n])}const ActiveDraggableContext=reactExports.createContext({...defaultCoordinates,scaleX:1,scaleY:1});var Status;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Status||(Status={}));const DndContext=reactExports.memo(function e(t){var n,a,s,u;let{id:c,accessibility:h,autoScroll:f=!0,children:m,sensors:_=defaultSensors,collisionDetection:C=rectIntersection,measuring:b,modifiers:T,...R}=t;const A=reactExports.useReducer(reducer,void 0,getInitialState),[I,P]=A,[N,S]=useDndMonitorProvider(),[k,D]=reactExports.useState(Status.Uninitialized),M=k===Status.Initialized,{draggable:{active:j,nodes:H,translate:X},droppable:{containers:K}}=I,re=j!=null?H.get(j):null,F=reactExports.useRef({initial:null,translated:null}),J=reactExports.useMemo(()=>{var Et;return j!=null?{id:j,data:(Et=re?.data)!=null?Et:defaultData,rect:F}:null},[j,re]),z=reactExports.useRef(null),[$,L]=reactExports.useState(null),[W,U]=reactExports.useState(null),V=useLatestValue(R,Object.values(R)),B=useUniqueId("DndDescribedBy",c),Z=reactExports.useMemo(()=>K.getEnabled(),[K]),ne=useMeasuringConfiguration(b),{droppableRects:oe,measureDroppableContainers:ce,measuringScheduled:xe}=useDroppableMeasuring(Z,{dragging:M,dependencies:[X.x,X.y],config:ne.droppable}),de=useCachedNode(H,j),G=reactExports.useMemo(()=>W?getEventCoordinates(W):null,[W]),Y=en(),te=useInitialRect(de,ne.draggable.measure);useLayoutShiftScrollCompensation({activeNode:j!=null?H.get(j):null,config:Y.layoutShiftCompensation,initialRect:te,measure:ne.draggable.measure});const ee=useRect(de,ne.draggable.measure,te),se=useRect(de?de.parentElement:null),ue=reactExports.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=K.getNodeFor((n=ue.current.over)==null?void 0:n.id),ye=useDragOverlayMeasuring({measure:ne.dragOverlay.measure}),Re=(a=ye.nodeRef.current)!=null?a:de,Le=M?(s=ye.rect)!=null?s:ee:null,Oe=!!(ye.nodeRef.current&&ye.rect),Ue=useRectDelta(Oe?null:ee),qe=useWindowRect(Re?getWindow(Re):null),rt=useScrollableAncestors(M?be??de:null),He=useRects(rt),Ae=applyModifiers(T,{transform:{x:X.x-Ue.x,y:X.y-Ue.y,scaleX:1,scaleY:1},activatorEvent:W,active:J,activeNodeRect:ee,containerNodeRect:se,draggingNodeRect:Le,over:ue.current.over,overlayNodeRect:ye.rect,scrollableAncestors:rt,scrollableAncestorRects:He,windowRect:qe}),xt=G?add(G,X):null,lt=useScrollOffsets(rt),Gt=useScrollOffsetsDelta(lt),ot=useScrollOffsetsDelta(lt,[ee]),ze=add(Ae,Gt),et=Le?getAdjustedRect(Le,Ae):null,Qe=J&&et?C({active:J,collisionRect:et,droppableRects:oe,droppableContainers:Z,pointerCoordinates:xt}):null,Nt=getFirstCollision(Qe,"id"),[Xe,Jt]=reactExports.useState(null),er=Oe?Ae:add(Ae,ot),gr=adjustScale(er,(u=Xe?.rect)!=null?u:null,ee),Ge=reactExports.useRef(null),at=reactExports.useCallback((Et,jt)=>{let{sensor:Dt,options:Yt}=jt;if(z.current==null)return;const Ut=H.get(z.current);if(!Ut)return;const Bt=Et.nativeEvent,ae=new Dt({active:z.current,activeNode:Ut,event:Bt,options:Yt,context:ue,onAbort(ge){if(!H.get(ge))return;const{onDragAbort:we}=V.current,De={id:ge};we?.(De),N({type:"onDragAbort",event:De})},onPending(ge,Se,we,De){if(!H.get(ge))return;const{onDragPending:Ie}=V.current,Me={id:ge,constraint:Se,initialCoordinates:we,offset:De};Ie?.(Me),N({type:"onDragPending",event:Me})},onStart(ge){const Se=z.current;if(Se==null)return;const we=H.get(Se);if(!we)return;const{onDragStart:De}=V.current,Ne={activatorEvent:Bt,active:{id:Se,data:we.data,rect:F}};reactDomExports.unstable_batchedUpdates(()=>{De?.(Ne),D(Status.Initializing),P({type:Action.DragStart,initialCoordinates:ge,active:Se}),N({type:"onDragStart",event:Ne}),L(Ge.current),U(Bt)})},onMove(ge){P({type:Action.DragMove,coordinates:ge})},onEnd:he(Action.DragEnd),onCancel:he(Action.DragCancel)});Ge.current=ae;function he(ge){return async function(){const{active:we,collisions:De,over:Ne,scrollAdjustedTranslate:Ie}=ue.current;let Me=null;if(we&&Ie){const{cancelDrop:Fe}=V.current;Me={activatorEvent:Bt,active:we,collisions:De,delta:Ie,over:Ne},ge===Action.DragEnd&&typeof Fe=="function"&&await Promise.resolve(Fe(Me))&&(ge=Action.DragCancel)}z.current=null,reactDomExports.unstable_batchedUpdates(()=>{P({type:ge}),D(Status.Uninitialized),Jt(null),L(null),U(null),Ge.current=null;const Fe=ge===Action.DragEnd?"onDragEnd":"onDragCancel";if(Me){const ke=V.current[Fe];ke?.(Me),N({type:Fe,event:Me})}})}}},[H]),dt=reactExports.useCallback((Et,jt)=>(Dt,Yt)=>{const Ut=Dt.nativeEvent,Bt=H.get(Yt);if(z.current!==null||!Bt||Ut.dndKit||Ut.defaultPrevented)return;const ae={active:Bt};Et(Dt,jt.options,ae)===!0&&(Ut.dndKit={capturedBy:jt.sensor},z.current=Yt,at(Dt,jt))},[H,at]),tr=useCombineActivators(_,dt);useSensorSetup(_),useIsomorphicLayoutEffect(()=>{ee&&k===Status.Initializing&&D(Status.Initialized)},[ee,k]),reactExports.useEffect(()=>{const{onDragMove:Et}=V.current,{active:jt,activatorEvent:Dt,collisions:Yt,over:Ut}=ue.current;if(!jt||!Dt)return;const Bt={active:jt,activatorEvent:Dt,collisions:Yt,delta:{x:ze.x,y:ze.y},over:Ut};reactDomExports.unstable_batchedUpdates(()=>{Et?.(Bt),N({type:"onDragMove",event:Bt})})},[ze.x,ze.y]),reactExports.useEffect(()=>{const{active:Et,activatorEvent:jt,collisions:Dt,droppableContainers:Yt,scrollAdjustedTranslate:Ut}=ue.current;if(!Et||z.current==null||!jt||!Ut)return;const{onDragOver:Bt}=V.current,ae=Yt.get(Nt),he=ae&&ae.rect.current?{id:ae.id,rect:ae.rect.current,data:ae.data,disabled:ae.disabled}:null,ge={active:Et,activatorEvent:jt,collisions:Dt,delta:{x:Ut.x,y:Ut.y},over:he};reactDomExports.unstable_batchedUpdates(()=>{Jt(he),Bt?.(ge),N({type:"onDragOver",event:ge})})},[Nt]),useIsomorphicLayoutEffect(()=>{ue.current={activatorEvent:W,active:J,activeNode:de,collisionRect:et,collisions:Qe,droppableRects:oe,draggableNodes:H,draggingNode:Re,draggingNodeRect:Le,droppableContainers:K,over:Xe,scrollableAncestors:rt,scrollAdjustedTranslate:ze},F.current={initial:Le,translated:et}},[J,de,Qe,et,H,Re,Le,oe,K,Xe,rt,ze]),useAutoScroller({...Y,delta:X,draggingRect:et,pointerCoordinates:xt,scrollableAncestors:rt,scrollableAncestorRects:He});const wr=reactExports.useMemo(()=>({active:J,activeNode:de,activeNodeRect:ee,activatorEvent:W,collisions:Qe,containerNodeRect:se,dragOverlay:ye,draggableNodes:H,droppableContainers:K,droppableRects:oe,over:Xe,measureDroppableContainers:ce,scrollableAncestors:rt,scrollableAncestorRects:He,measuringConfiguration:ne,measuringScheduled:xe,windowRect:qe}),[J,de,ee,W,Qe,se,ye,H,K,oe,Xe,ce,rt,He,ne,xe,qe]),Un=reactExports.useMemo(()=>({activatorEvent:W,activators:tr,active:J,activeNodeRect:ee,ariaDescribedById:{draggable:B},dispatch:P,draggableNodes:H,over:Xe,measureDroppableContainers:ce}),[W,tr,J,ee,P,B,H,Xe,ce]);return React.createElement(DndMonitorContext.Provider,{value:S},React.createElement(InternalContext.Provider,{value:Un},React.createElement(PublicContext.Provider,{value:wr},React.createElement(ActiveDraggableContext.Provider,{value:gr},m)),React.createElement(RestoreFocus,{disabled:h?.restoreFocus===!1})),React.createElement(Accessibility,{...h,hiddenTextDescribedById:B}));function en(){const Et=$?.autoScrollEnabled===!1,jt=typeof f=="object"?f.enabled===!1:f===!1,Dt=M&&!Et&&!jt;return typeof f=="object"?{...f,enabled:Dt}:{enabled:Dt}}}),NullContext=reactExports.createContext(null),defaultRole="button",ID_PREFIX="Draggable";function useDraggable(e){let{id:t,data:n,disabled:a=!1,attributes:s}=e;const u=useUniqueId(ID_PREFIX),{activators:c,activatorEvent:h,active:f,activeNodeRect:m,ariaDescribedById:_,draggableNodes:C,over:b}=reactExports.useContext(InternalContext),{role:T=defaultRole,roleDescription:R="draggable",tabIndex:A=0}=s??{},I=f?.id===t,P=reactExports.useContext(I?ActiveDraggableContext:NullContext),[N,S]=useNodeRef(),[k,D]=useNodeRef(),M=useSyntheticListeners(c,t),j=useLatestValue(n);useIsomorphicLayoutEffect(()=>(C.set(t,{id:t,key:u,node:N,activatorNode:k,data:j}),()=>{const X=C.get(t);X&&X.key===u&&C.delete(t)}),[C,t]);const H=reactExports.useMemo(()=>({role:T,tabIndex:A,"aria-disabled":a,"aria-pressed":I&&T===defaultRole?!0:void 0,"aria-roledescription":R,"aria-describedby":_.draggable}),[a,T,A,I,R,_.draggable]);return{active:f,activatorEvent:h,activeNodeRect:m,attributes:H,isDragging:I,listeners:a?void 0:M,node:N,over:b,setNodeRef:S,setActivatorNodeRef:D,transform:P}}const ID_PREFIX$1="Droppable",defaultResizeObserverConfig={timeout:25};function useDroppable(e){let{data:t,disabled:n=!1,id:a,resizeObserverConfig:s}=e;const u=useUniqueId(ID_PREFIX$1),{active:c,dispatch:h,over:f,measureDroppableContainers:m}=reactExports.useContext(InternalContext),_=reactExports.useRef({disabled:n}),C=reactExports.useRef(!1),b=reactExports.useRef(null),T=reactExports.useRef(null),{disabled:R,updateMeasurementsFor:A,timeout:I}={...defaultResizeObserverConfig,...s},P=useLatestValue(A??a),N=reactExports.useCallback(()=>{if(!C.current){C.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{m(Array.isArray(P.current)?P.current:[P.current]),T.current=null},I)},[I]),S=useResizeObserver({callback:N,disabled:R||!c}),k=reactExports.useCallback((H,X)=>{S&&(X&&(S.unobserve(X),C.current=!1),H&&S.observe(H))},[S]),[D,M]=useNodeRef(k),j=useLatestValue(t);return reactExports.useEffect(()=>{!S||!D.current||(S.disconnect(),C.current=!1,S.observe(D.current))},[D,S]),reactExports.useEffect(()=>(h({type:Action.RegisterDroppable,element:{id:a,key:u,disabled:n,node:D,rect:b,data:j}}),()=>h({type:Action.UnregisterDroppable,key:u,id:a})),[a]),reactExports.useEffect(()=>{n!==_.current.disabled&&(h({type:Action.SetDroppableDisabled,id:a,key:u,disabled:n}),_.current.disabled=n)},[a,u,n,h]),{active:c,rect:b,isOver:f?.id===a,node:D,over:f,setNodeRef:M}}function restrictToBoundingRect(e,t,n){const a={...e};return t.top+e.y<=n.top?a.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(a.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?a.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(a.x=n.left+n.width-t.right),a}const restrictToWindowEdges=e=>{let{transform:t,draggingNodeRect:n,windowRect:a}=e;return!n||!a?t:restrictToBoundingRect(t,n,a)};class CustomNodeHelper{static combineFullname(t,n){return`${t.replaceAll("/","-")}/${n}`}static getNodeDto(t,n){return{templateId:n,key:t.id.toString(),name:t.title,props:t.properties}}}class CustomNode extends litegraphExports.LGraphNode{__templateId;onRemove;constructor({config:t,onRemove:n}){if(super(t.name),this.title=t.name,this.onRemove=n,this.__templateId=t.id,t.inputs.forEach(a=>{this.addInput(a.name,a.type)}),t.outputs.forEach(a=>{this.addOutput(a.name,a.type)}),!!t.jsonSchema)try{const a=JSON.parse(t.jsonSchema);this.properties=a.properties,a.properties&&Object.keys(a.properties).forEach(s=>{const u=a.properties[s];this.properties[s]=u.default!==void 0?u.default:null})}catch(a){console.error("Error parsing JSON schema:",a),this.properties={}}}get templateId(){return this.__templateId}get getProperties(){return this.properties}onRemoved(){this.onRemove&&this.onRemove(this.id)}getMenuOptions(t){return[]}}class CustomNodeFactory{static registerNodes(...t){for(const n of t){const a=CustomNodeHelper.combineFullname(n.config.category,n.config.name);if(Object.keys(litegraphExports.LiteGraph.registered_node_types).includes(a))continue;class u extends CustomNode{static title=n.config.name;constructor(){super(n)}}litegraphExports.LiteGraph.registerNodeType(a,u)}}static clearNodes(){litegraphExports.LiteGraph.registered_node_types={}}static createNode(t,n,a){const s=litegraphExports.LiteGraph.createNode(t);return s.pos=[n,a],s}static getNodes(){return Object.keys(litegraphExports.LiteGraph.registered_node_types)}static getCategories(){const t=new Set;return Object.keys(litegraphExports.LiteGraph.registered_node_types).forEach(n=>{const[a]=n.split("/");t.add(a)}),Array.from(t).sort()}static getCategoriesWithNodes(){return CustomNodeFactory.getNodes().reduce((n,a)=>{const[s,u]=a.split("/");return n[s]||(n[s]=[]),n[s].push(u),n},{})}}const GraphDndContext=reactExports.createContext(!1),GraphDndProvider=({children:e,nonDroppablePaddingLeft:t=0})=>{const n=reactExports.useContext(GraphCanvasContext),[a,s]=reactExports.useState(!1);function u(c){if(s(!1),!n?.canvas||!c.over)return;const h=c.active.data.current,f=n.canvas.ds.visible_area,m=n.canvas.ds.scale,_=(h?.x??0)/m+f[0],C=(h?.y??0)/m+f[1],b=c.delta.x/m+_,T=c.delta.y/m+C;if(c.delta.x<t)return;const R=CustomNodeFactory.createNode(c.active.id,b,T);n.canvas.graph.add(R),n.canvas.graph.afterChange()}return jsxRuntimeExports.jsx(DndContext,{modifiers:[restrictToWindowEdges],autoScroll:!1,onDragEnd:u,onDragStart:()=>s(!0),children:jsxRuntimeExports.jsx(GraphDndContext.Provider,{value:a,children:e})})},DraggableComponent=reactExports.memo(({id:e,children:t,onDragEnd:n,onDragStart:a})=>{const s=reactExports.useRef(null),{attributes:u,listeners:c,setNodeRef:h,transform:f}=useDraggable({id:e,data:{x:s.current?.offsetLeft??0,y:s.current?.offsetTop??0}}),m=reactExports.useMemo(()=>f?{transform:`translate3d(${f.x}px, ${f.y}px, 0)`,cursor:"grab"}:{cursor:"grab"},[f]),_=reactExports.useMemo(()=>({...u,...c,ref:C=>{s.current=C,h(C)}}),[u,c]);return reactExports.useEffect(()=>{f?a&&a():n&&n()},[f]),jsxRuntimeExports.jsx(Box,{..._,style:m,children:t})}),DroppableGraph=reactExports.memo(()=>{const{setNodeRef:e}=useDroppable({id:"graph"});return jsxRuntimeExports.jsx(Box,{className:"w-full h-full",ref:e,children:jsxRuntimeExports.jsx(GraphCanvas,{})})});class TemplatesStore{_templates=new Map;constructor(){makeAutoObservable(this)}get templates(){return Array.from(this._templates.values())}addTemplates(...t){t.forEach(n=>{this._templates.set(CustomNodeHelper.combineFullname(n.category,n.name),n)})}getByFullname(t){return this._templates.get(t)??null}getById(t){const n=this.templates.find(a=>a.id===t);return n?CustomNodeHelper.combineFullname(n.category,n.name):null}}const TemplatesContext=reactExports.createContext(new TemplatesStore),TemplatesProvider=({children:e})=>{const t=useLocalObservable(()=>new TemplatesStore);return jsxRuntimeExports.jsx(TemplatesContext.Provider,{value:t,children:e})},BaseSidebar=reactExports.memo(({open:e,children:t,...n})=>jsxRuntimeExports.jsx(Drawer,{variant:"persistent",open:e,PaperProps:{style:{boxShadow:"none",borderLeft:"none",backgroundImage:"none",background:"none"},className:"!bg-[#1b1a1a] !text-gray-200 no-scrollbar",...n},hideBackdrop:!0,className:"!w-fit",children:jsxRuntimeExports.jsx(Stack,{className:"p-2",children:t})})),BaseSkeleton=reactExports.memo(({width:e,height:t})=>jsxRuntimeExports.jsx(Skeleton,{width:e,height:t,className:"!bg-gray-700"})),FolderIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"})),ExpandLessOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),ExpandMoreOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),Folder=reactExports.memo(({name:e,children:t})=>{const[n,a]=reactExports.useState(!1);function s(){a(!n)}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ListItemButton,{onClick:s,className:"folder !pl-1 !pr-1",children:jsxRuntimeExports.jsxs(ListItemIcon,{className:"flex justify-between items-center w-full",children:[jsxRuntimeExports.jsxs(Box,{display:"flex",gap:"0.2rem",alignItems:"center",children:[jsxRuntimeExports.jsx(FolderIcon,{sx:{fontSize:20},className:"text-gray-200"}),e&&jsxRuntimeExports.jsx(ListItemText,{primary:e,className:"text-gray-200 folder__name"})]}),n?jsxRuntimeExports.jsx(ExpandLessOutlinedIcon,{className:"text-gray-200",sx:{fontSize:20}}):jsxRuntimeExports.jsx(ExpandMoreOutlinedIcon,{className:"text-gray-200",sx:{fontSize:20}})]})}),jsxRuntimeExports.jsx(Collapse,{in:n,className:"pl-1",unmountOnExit:!0,children:t})]})}),File$1=reactExports.memo(({icon:e,name:t})=>jsxRuntimeExports.jsxs(ListItemButton,{className:"flex justify-start items-center gap-1 file !pl-1 !pr-1",children:[jsxRuntimeExports.jsx(Box,{className:"!w-[25px] !h-[25px] !overflow-hidden",children:e}),t&&jsxRuntimeExports.jsx(ListItemText,{primary:t,className:"text-gray-200 file__name"})]})),HCBotTemplatesSidebar=observer(({open:e,nodeSlot:t,style:n})=>{const{loading:a}=useTemplatesInit(),s=useNodes();return jsxRuntimeExports.jsxs(BaseSidebar,{open:e,style:{width:`${HCBOT_TEMPLATES_SIDEBAR_WIDTH}px`,...n},children:[a&&Array(8).fill(null).map((u,c)=>jsxRuntimeExports.jsx(BaseSkeleton,{width:"100%",height:"60px"},c)),!a&&Object.keys(s).map(u=>jsxRuntimeExports.jsx(Folder,{name:u,children:s[u].map(c=>jsxRuntimeExports.jsx(reactExports.Fragment,{children:t(u,c)},CustomNodeHelper.combineFullname(u,c)))},u))]})}),BaseIconButton=reactExports.memo(({children:e,color:t,...n})=>jsxRuntimeExports.jsx(IconButton,{color:t??"info",...n,children:e})),BaseButton=reactExports.memo(({children:e,className:t,variant:n,...a})=>jsxRuntimeExports.jsx(Button,{variant:n??"contained",className:clsx("!normal-case",t),...a,children:e})),BaseImage=reactExports.memo(({className:e,...t})=>jsxRuntimeExports.jsx("img",{...t,className:clsx("w-full h-full object-fit",e)})),HCBotTemplatesSidebarButton=reactExports.memo(({onClick:e})=>jsxRuntimeExports.jsx(BaseIconButton,{onClick:()=>e(HCBOT_TEMPLATES_SIDEBAR),children:jsxRuntimeExports.jsx(BaseImage,{src:"/images/nodes/IconNodePrimitive.png"})})),TemplateIcon=observer(({fullname:e})=>{const t=reactExports.useContext(TemplatesContext),n=reactExports.useMemo(()=>{const a=t.getByFullname(e);return a?.kind==="primitive"?"IconNodePrimitive.png":a?.kind==="composite"?"IconNodeComposite.png":null},[e,t.getByFullname]);return n?jsxRuntimeExports.jsx(BaseImage,{src:`/images/nodes/${n}`}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})});function useNodes(){const e=reactExports.useContext(TemplatesContext),[t,n]=reactExports.useState({});return reactExports.useEffect(()=>{const a=e.templates.map(s=>({config:s}));CustomNodeFactory.registerNodes(...a),n(CustomNodeFactory.getCategoriesWithNodes())},[e.templates]),t}function useTemplatesInit(e){const[t,n]=useService({getTemplates:TemplatesService.getTemplates}),a=reactExports.useContext(TemplatesContext);reactExports.useEffect(()=>{s()},[]);async function s(){CustomNodeFactory.clearNodes();const u=await t.getTemplates();if(!u)return;a.addTemplates(...u);const c=u.map(h=>({config:h}));CustomNodeFactory.registerNodes(...c)}return{loading:n,getNodes:s}}class TemplatesService{static async getTemplates(){return(await API.get("/templates")).data}}const HCBOT_TEMPLATES_SIDEBAR="HCBOT_TEMPLATES_SIDEBAR",HCBOT_TEMPLATES_SIDEBAR_WIDTH=200;class HistoryStore{_history=observable([]);_current=-1;_max=50;constructor(){makeAutoObservable(this)}get getCurrent(){const t=this._history[this._current];return t?toJS(t):null}add(t){this._history.length>=this._max&&this._history.shift(),this._current<this._history.length-1&&(this._history=this._history.slice(0,this._current+1)),this._history.push(t),this._current=this._history.length-1}undo(){this._history[this._current-1]&&(this._current-=1)}redo(){this._history[this._current+1]&&(this._current+=1)}}const HistoryContext=reactExports.createContext(new HistoryStore),HCBotHistoryProvider=({children:e})=>{const t=useLocalObservable(()=>new HistoryStore);return jsxRuntimeExports.jsx(HistoryContext.Provider,{value:t,children:e})},UndoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"})),RedoOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"})),HCBotHistoryButtons=observer(()=>{const e=reactExports.useContext(HistoryContext),t=reactExports.useContext(GraphCanvasContext),n=reactExports.useCallback(()=>{if(!t?.canvas||!e.getCurrent)return;t.canvas.graph.clear();const u=new litegraphExports.LGraph;u.configure(e.getCurrent),u._nodes.forEach(f=>t?.canvas?.graph?.add(f)),t.canvas.graph.configure(e.getCurrent),t.canvas.graph.last_node_id=e.getCurrent.last_node_id,t.canvas.graph.last_link_id=e.getCurrent.last_link_id,t.canvas.graph.config={...e.getCurrent.config};const c=t.canvas.graph.links,h=t.canvas.graph._nodes;c.forEach(f=>{if(!f)return;const m=h.find(C=>C.id===f.origin_id),_=h.find(C=>C.id===f.target_id);!m||!_||m.connect(f.origin_slot,_,f.target_slot)}),t.canvas.graph.links=c.filter(f=>!!f).reduce((f,m)=>(f[m.id]=m,f),{}),t.canvas.draw(!0,!0)},[t?.canvas,e.getCurrent]),a=reactExports.useCallback(()=>{e.undo(),n()},[n]),s=reactExports.useCallback(()=>{e.redo(),n()},[n]);return useHistoryInit(),jsxRuntimeExports.jsxs(Box,{display:"flex",className:"items-center gap-2",children:[jsxRuntimeExports.jsx(BaseIconButton,{color:"primary",onClick:a,children:jsxRuntimeExports.jsx(UndoOutlinedIcon,{sx:{fontSize:30}})}),jsxRuntimeExports.jsx(BaseIconButton,{color:"primary",onClick:s,children:jsxRuntimeExports.jsx(RedoOutlinedIcon,{sx:{fontSize:30}})})]})});function useHistoryInit(){const e=reactExports.useContext(HistoryContext),t=reactExports.useContext(GraphCanvasContext);reactExports.useEffect(()=>{if(!t?.canvas)return;let n;function a(){clearTimeout(n),n=setTimeout(()=>{t?.canvas&&e.add(structuredClone(t.canvas.graph.serialize()))},50)}return t.setAfterChange(a),()=>t.removeAfterChange(a)},[t?.canvas])}var RunStatus=(e=>(e.PENDING="Pending",e.RUNNING="Running",e.PAUSED="Paused",e.FINISHED="Finished",e.NONE="None",e))(RunStatus||{});class RunningStore{_runId=null;_status="None";_reader=null;constructor(){makeAutoObservable(this)}get runId(){return this._runId}get status(){return this._status}get reader(){return this._reader}set runId(t){this._runId=t}set status(t){this._status=t}set reader(t){this._reader=t}}class EventStore{__events=[];constructor(){makeAutoObservable(this)}get events(){return this.__events}get lastEvent(){return this.__events[this.__events.length-1]??null}push(t){this.__events.push(t)}clear(){this.__events=observable([])}}class DynamicElementStore{__opened=!1;constructor(t=!1){makeAutoObservable(this),this.__opened=t}get opened(){return this.__opened}toggle(){this.__opened=!this.__opened}close(){this.__opened=!1}open(){this.__opened=!0}}const RunningContext=reactExports.createContext(new RunningStore),EventContext=reactExports.createContext(new EventStore),ConsoleStateContext=reactExports.createContext(new DynamicElementStore),HCBotRunningProvider=observer(({children:e})=>{const t=useLocalObservable(()=>new RunningStore),n=useLocalObservable(()=>new EventStore),a=useLocalObservable(()=>new DynamicElementStore);reactExports.useEffect(()=>{s()},[t.reader]);async function s(){if(t.reader)try{for(;;){t.status===RunStatus.FINISHED&&t.reader?.releaseLock();const{value:u,done:c}=await t.reader.read();if(c)break;u&&n.push(u)}}finally{t.reader.releaseLock(),t.reader=null}}return jsxRuntimeExports.jsx(RunningContext.Provider,{value:t,children:jsxRuntimeExports.jsx(EventContext.Provider,{value:n,children:jsxRuntimeExports.jsx(ConsoleStateContext.Provider,{value:a,children:e})})})}),HCBotRunningBaseButtons=observer(()=>{const e=reactExports.useContext(RunningContext),{loading:t,pause:n,resume:a,stop:s,runWorkflow:u}=useRunning();return useRunningEvents(),e.status===RunStatus.NONE||e.status===RunStatus.FINISHED?jsxRuntimeExports.jsx(BaseButton,{color:"error",className:"!min-w-[90px]",loading:t,onClick:u,children:"Run"}):e.status===RunStatus.PENDING?jsxRuntimeExports.jsx(BaseButton,{color:"error",className:"!min-w-[90px]",loading:!0,children:"Run"}):e.status===RunStatus.RUNNING?jsxRuntimeExports.jsxs(Box,{className:"flex w-fit gap-3",children:[jsxRuntimeExports.jsx(BaseButton,{color:"info",className:"!min-w-[90px]",loading:t,onClick:n,children:"Pause"}),jsxRuntimeExports.jsx(BaseButton,{color:"error",className:"!min-w-[90px]",loading:t,onClick:s,children:"Stop"})]}):e.status===RunStatus.PAUSED?jsxRuntimeExports.jsxs(Box,{className:"flex w-fit gap-3",children:[jsxRuntimeExports.jsx(BaseButton,{color:"info",className:"!min-w-[90px]",loading:t,onClick:a,children:"Resume"}),jsxRuntimeExports.jsx(BaseButton,{color:"error",className:"!min-w-[90px]",loading:t,onClick:s,children:"Stop"})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}),HCBotConsoleButton=reactExports.memo(()=>{const e=reactExports.useContext(ConsoleStateContext),t=reactExports.useCallback(()=>e.toggle(),[]);return jsxRuntimeExports.jsx(BaseIconButton,{onClick:t,children:jsxRuntimeExports.jsx(BaseImage,{src:"/images/log/Iconlogs.svg"})})}),HCBotConsole=observer(()=>{const e=reactExports.useContext(ConsoleStateContext),t=useEventLogs();return jsxRuntimeExports.jsx(Box,{className:clsx("w-full bg-[#1b1a1a] minimal-scrollbar",e.opened?"h-[25vh] p-2 overflow-y-auto":"h-0 overflow-hidden"),children:t.map((n,a)=>jsxRuntimeExports.jsx(Typography,{className:"text-orange-500",children:n.message},(n.stepDbId??0)+a))})});class RunningService{static async run(t){return(await API.post("/runs",t)).data}static async pause(t){await API.post(`/runs/${t}/pause`)}static async resume(t){await API.post(`/runs/${t}/resume`)}static async stop(t){await API.post(`/runs/${t}/stop`)}static async runSse(t){return(await API.get(`/runs/${t}/sse`,{headers:{Accept:"text/event-stream"},responseType:"stream",adapter:"fetch"})).data.pipeThrough(new TextDecoderStream).getReader()}static async getLogs(t,n){return(await API.get(`/runs/${t}/logs`,{params:{after:n}})).data}}function useRunning(){const e=reactExports.useContext(RunningContext),[t,n]=useService({run:RunningService.run,pause:RunningService.pause,resume:RunningService.resume,stop:RunningService.stop,runSse:RunningService.runSse}),a=reactExports.useContext(GraphCanvasContext);async function s(){if(!a?.canvas?.graph)return;const f=getDtoFromNodes(...a.canvas.graph._nodes),m=getDtoFromLinks(a.canvas.graph.links),_=await t.run({graph:{nodes:f,edges:m}});_&&(e.runId=_.runId,e.status=_.state,e.reader=await t.runSse(_.runId))}async function u(){if(!e.runId)return;await t.pause(e.runId)!==null&&(e.status=RunStatus.PAUSED)}async function c(){if(!e.runId)return;await t.resume(e.runId)!==null&&(e.status=RunStatus.RUNNING)}async function h(){if(!e.runId)return;await t.stop(e.runId)!==null&&(e.status=RunStatus.FINISHED)}return{loading:n,runWorkflow:s,pause:u,resume:c,stop:h}}class RunStatusAdapter{static fromStatus(t){return t.startsWith("event: connected")?RunStatus.RUNNING:t.startsWith("event: step.finished")?RunStatus.FINISHED:null}static isLogStatus(t){return!!t.startsWith("event: step.log")}}function useRunningEvents(){const e=reactExports.useContext(RunningContext),t=reactExports.useContext(EventContext);reactExports.useEffect(()=>{n()},[t.lastEvent]);async function n(){t.lastEvent&&t.lastEvent.split(`
`).forEach(a=>{const s=RunStatusAdapter.fromStatus(a??"");s&&(e.status=s)})}}function useEventLogs(){const e=reactExports.useContext(EventContext),t=reactExports.useContext(RunningContext),[n,a]=useService({getLogs:RunningService.getLogs}),[s,u]=reactExports.useState([]);reactExports.useEffect(()=>{a||c()},[e.lastEvent]);async function c(){if(!t.runId)return;const h=await n.getLogs(t.runId,s[s.length-1]?.ts??void 0);h&&u(f=>{const m=new Map;return f.forEach(_=>m.set(_.id,_)),h.forEach(_=>m.set(_.id,_)),Array.from(m.values())})}return s}const HCBOT_WORKFLOW_SIDEBAR="HCBOT_WORKFLOW_SIDEBAR",HCBOT_WORKFLOW_SIDEBAR_WIDTH=200;class WorkflowStatusStore{_saved=!0;constructor(){makeAutoObservable(this)}get saved(){return this._saved}save(){this._saved=!0}unsave(){this._saved=!1}}const MenuIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"})),HCBotWorkflowButton=reactExports.memo(({onClick:e})=>{const t=reactExports.useCallback(()=>e(HCBOT_WORKFLOW_SIDEBAR),[e]);return jsxRuntimeExports.jsx(BaseIconButton,{onClick:t,children:jsxRuntimeExports.jsx(MenuIcon,{sx:{fontSize:40,color:"#fff"}})})}),HCBotWorkflowSidebar=reactExports.memo(({open:e,style:t})=>jsxRuntimeExports.jsx(BaseSidebar,{open:e,style:{width:HCBOT_WORKFLOW_SIDEBAR_WIDTH+"px",...t},children:jsxRuntimeExports.jsxs(Box,{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsx(HCBotWorkflowSidebarButton,{text:"Load",modal:LoadWorkflowModal}),jsxRuntimeExports.jsx(HCBotSaveWorkflow,{}),jsxRuntimeExports.jsx(HCBotWorkflowSidebarButton,{text:"Save as",modal:SaveAsWorkflowModal}),jsxRuntimeExports.jsx(HCBotWorkflowSidebarButton,{text:"Publicate as Node",modal:PublicateWorkflowAsNodeModal})]})})),BaseModal=reactExports.memo(({open:e,title:t,buttonsSlot:n,children:a,onClose:s})=>jsxRuntimeExports.jsxs(Dialog,{open:e,PaperProps:{className:"!bg-[#171717] min-w-[300px] max-w-full !pl-5 !pr-5 !pb-5"},onClose:s,children:[t&&jsxRuntimeExports.jsx(DialogTitle,{className:"!pl-0 !pr-0",children:t}),jsxRuntimeExports.jsx(DialogContent,{className:"!pl-0 !pr-0",children:a}),n&&jsxRuntimeExports.jsx(DialogActions,{className:"!justify-between !pl-0 !pr-0",children:n()})]}));function useModal(){const[e,t]=reactExports.useState(!1),n=reactExports.useCallback(()=>t(!0),[]),a=reactExports.useCallback(()=>t(!1),[]);return{opened:e,open:n,close:a}}const HCBotWorkflowSidebarButton=reactExports.memo(({text:e,modal:t})=>{const{opened:n,open:a,close:s}=useModal();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseButton,{color:"warning",variant:"outlined",onClick:a,children:e}),jsxRuntimeExports.jsx(t,{open:n,onClose:s})]})}),LoadWorkflowModal=reactExports.memo(({open:e,onClose:t})=>{const{workflows:n,getWorkflows:a,clear:s,loading:u}=useWorkflows(),c=useNavigate(),[h,f]=reactExports.useState(""),m=reactExports.useCallback(C=>f(C.target.value),[]),_=reactExports.useCallback(()=>{if(!h)return;const C=JSON.parse(h);c(`/?id=${C.id}&name=${C.name}`),t()},[h,t,c]);return reactExports.useEffect(()=>{e?a():s()},[e]),jsxRuntimeExports.jsx(BaseModal,{open:e,onClose:t,title:"Select workflow",buttonsSlot:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseButton,{color:"error",onClick:t,children:"Cancel"}),jsxRuntimeExports.jsx(BaseButton,{color:"success",loading:u,disabled:!h,onClick:_,children:"Load"})]}),children:jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,className:"!mt-3",children:[jsxRuntimeExports.jsx(InputLabel,{id:"load-workflow-select",children:"Workflow"}),jsxRuntimeExports.jsx(Select,{id:"load-workflow-select",label:"Workflow",disabled:u,value:h,onChange:m,children:n.map(C=>jsxRuntimeExports.jsx(MenuItem,{value:JSON.stringify(C),children:C.name},C.id))})]})})}),WorkflowContext=reactExports.createContext(new WorkflowStatusStore),HCBotWorkflowProvider=({children:e})=>{const t=useLocalObservable(()=>new WorkflowStatusStore);return jsxRuntimeExports.jsx(WorkflowContext.Provider,{value:t,children:e})},HCBotSaveWorkflow=observer(()=>{const{save:e,loading:t}=useSaveWorkflow(),n=reactExports.useContext(WorkflowContext),[a]=useSearchParams(),s=reactExports.useMemo(()=>n.saved||!a.get("id")||!a.get("name"),[n.saved,a]);return jsxRuntimeExports.jsx(BaseButton,{color:"warning",variant:"outlined",onClick:e,loading:t,disabled:s,children:"Save"})}),SaveAsWorkflowModal=reactExports.memo(({open:e,onClose:t})=>{const[n,a]=reactExports.useState(""),{saveAs:s,loading:u}=useSaveWorkflow(),c=reactExports.useCallback(f=>a(f.target.value),[]),h=reactExports.useCallback(async()=>{n&&(await s(n),a(""),t())},[s,n,t]);return jsxRuntimeExports.jsx(BaseModal,{open:e,onClose:t,title:"Save as",buttonsSlot:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseButton,{color:"error",onClick:t,children:"Cancel"}),jsxRuntimeExports.jsx(BaseButton,{color:"success",loading:u,disabled:!n,onClick:h,children:"Save"})]}),children:jsxRuntimeExports.jsx(FormControl,{fullWidth:!0,className:"!mt-3",children:jsxRuntimeExports.jsx(TextField,{label:"Enter the name",value:n,onChange:c,className:"w-full"})})})}),PublicateWorkflowAsNodeModal=reactExports.memo(({onClose:e,open:t})=>{const[n,a]=reactExports.useState(""),{saveAsNode:s,loading:u}=useSaveWorkflow(),c=reactExports.useCallback(f=>a(f.target.value),[]),h=reactExports.useCallback(async()=>{n&&(await s(n),a(""),e())},[s,n,e]);return jsxRuntimeExports.jsx(BaseModal,{open:t,onClose:e,title:"Publicate as Node",buttonsSlot:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseButton,{color:"error",onClick:e,children:"Cancel"}),jsxRuntimeExports.jsx(BaseButton,{color:"success",loading:u,disabled:!n,onClick:h,children:"Save"})]}),children:jsxRuntimeExports.jsx(FormControl,{fullWidth:!0,className:"!mt-3",children:jsxRuntimeExports.jsx(TextField,{label:"Enter the name",value:n,onChange:c,className:"w-full"})})})}),HCBotBlockerModal=observer(()=>{const{isBlocked:e,loading:t,onSave:n,proceed:a}=useWorkflowBlocker();return jsxRuntimeExports.jsx(BaseModal,{open:e,onClose:a,title:"Are you sure you want to leave this page?",buttonsSlot:()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(BaseButton,{color:"error",onClick:a,children:"Don't save"}),jsxRuntimeExports.jsx(BaseButton,{color:"success",onClick:n,loading:t,children:"Save"})]}),children:jsxRuntimeExports.jsx(DialogContentText,{className:"!pl-0 !pr-0",children:"Unsaved data will be lost."})})});class WorkflowService{static async getWorkflows(){return(await API.get("/workflows")).data}static async getWorkflow(t){return(await API.get(`/workflows/${t}`)).data}static async putWorkflow(t){await API.put(`/workflows/${t.id}`,t)}static async saveAs(t,n){await API.post(`/workflows/${t}/save-as`,{name:n,resetVersion:!0,resetVariables:!0})}static async saveAsCompositeNode(t,n){await API.post(`/workflows/${t}/publish`,{alias:n,visibility:"private",uiMetaJson:"",description:"Custom composite node",deprecatePrevious:!0,publishedBy:"Anonymous"})}}function useWorkflows(){const[e,t]=reactExports.useState([]),[n,a]=useService({getWorkflows:WorkflowService.getWorkflows});async function s(){const c=await n.getWorkflows();c&&t(c)}function u(){t([])}return{workflows:e,loading:a,getWorkflows:s,clear:u}}const useWorkflowInit=({getNodeFullname:e})=>{const[t]=useSearchParams(),n=reactExports.useMemo(()=>t.get("id")??null,[t]),a=reactExports.useContext(GraphCanvasContext),[s]=useService({getWorkflow:WorkflowService.getWorkflow});reactExports.useEffect(()=>{u()},[n,a?.canvas]);async function u(){if(!a?.canvas||(a.canvas.graph.clear(),!n))return;const c=await s.getWorkflow(n);if(!c)return;const h=c.nodes.map(f=>{const m=e(f);if(m)return CustomNodeFactory.createNode(m,f.props?.x??0,f.props?.y??0)}).filter(f=>!!f);for(const f of h)a.canvas.graph.add(f)}};function useWorkflowStatusInit(){const[e]=useSearchParams(),t=reactExports.useMemo(()=>e.get("name"),[e]),n=reactExports.useContext(WorkflowContext),a=reactExports.useContext(GraphCanvasContext);reactExports.useEffect(()=>{s()},[t,n.saved]),reactExports.useEffect(()=>{if(!a?.canvas?.graph)return;function u(){n.unsave()}return a.setAfterChange(u),()=>a.removeAfterChange(u)},[a?.canvas?.graph,n.unsave]);function s(){let u=t?decodeURIComponent(t):"Hot Code Bot";n.saved||(u="*"+u),document.title=u}}function useSaveWorkflow(){const e=reactExports.useContext(GraphCanvasContext),t=reactExports.useContext(WorkflowContext),[n]=useSearchParams(),[a,s]=useService({save:WorkflowService.putWorkflow,saveAs:WorkflowService.saveAs,saveAsNode:WorkflowService.saveAsCompositeNode}),u=reactExports.useCallback(async()=>{const f=n.get("id"),m=n.get("name");if(!e?.canvas||!f||!m)return;const _=getDtoFromNodes(...e.canvas.graph._nodes),C=getDtoFromLinks(e.canvas.graph.links);await a.save({id:f,name:m,nodes:_,links:C,variables:{}})&&t.save()},[n,e?.canvas,t.save,a.save]),c=reactExports.useCallback(async f=>{const m=n.get("id");m&&(await u(),await a.saveAs(m,f))},[n,a.saveAs,u]),h=reactExports.useCallback(async f=>{const m=n.get("id");m&&(await u(),await a.saveAsNode(m,f))},[n,u,a.saveAsNode]);return{save:u,saveAs:c,saveAsNode:h,loading:s}}function useWorkflowBlocker(){const e=reactExports.useContext(WorkflowContext),{save:t,loading:n}=useSaveWorkflow(),a=useBlocker(!e.saved),[s,u]=reactExports.useState(!1),c=reactExports.useMemo(()=>a.state==="blocked"&&!!a.location||s,[a.state,a.location,s]);reactExports.useEffect(()=>{function m(_){e.saved||(_.preventDefault(),_.returnValue="",u(!0))}return window.addEventListener("beforeunload",m),()=>window.removeEventListener("beforeunload",m)},[e.saved]);const h=reactExports.useCallback(()=>{a?.proceed&&a.proceed(),s&&u(!1)},[a.proceed,s]),f=reactExports.useCallback(async()=>{await t(),h()},[t,h]);return{isBlocked:c,loading:n,proceed:h,onSave:f}}class SideMenuStore{_openedElement="";constructor(){makeAutoObservable(this)}get openedElement(){return this._openedElement}toggleOpenedElement(t){this._openedElement===t?this.close():this._openedElement=t}close(){this._openedElement=""}}const SidemenuContext=reactExports.createContext(new SideMenuStore),HCBotSidemenuProvider=({children:e})=>{const t=useLocalObservable(()=>new SideMenuStore);return jsxRuntimeExports.jsx(SidemenuContext.Provider,{value:t,children:e})},HCBotSidemenu=reactExports.memo(({itemSlot:e,staticItems:t})=>{const n=reactExports.useContext(SidemenuContext),a=reactExports.useCallback(s=>n.toggleOpenedElement(s),[n.toggleOpenedElement]);return jsxRuntimeExports.jsx(Drawer,{variant:"permanent",open:!0,PaperProps:{style:{zIndex:1201,position:"relative"},className:"w-full h-full !bg-[#1b1a1a] !text-gray-200 no-scrollbar"},className:"h-full",children:jsxRuntimeExports.jsxs(Stack,{className:"p-1 flex flex-col gap-1 h-full",children:[jsxRuntimeExports.jsx(Box,{className:"w-full h-[50px] overflow-hidden mb-3",children:jsxRuntimeExports.jsx(BaseImage,{src:"/images/logo/logo.png"})}),e&&e(a),jsxRuntimeExports.jsx(Stack,{className:"p-1 flex flex-col gap-1 mt-auto",children:t})]})})}),EditorPageProvider=({children:e})=>jsxRuntimeExports.jsx(GraphCanvasProvider,{children:jsxRuntimeExports.jsx(GraphDndProvider,{nonDroppablePaddingLeft:SIDEAREA_WIDTH+HCBOT_TEMPLATES_SIDEBAR_WIDTH,children:jsxRuntimeExports.jsx(TemplatesProvider,{children:jsxRuntimeExports.jsx(HCBotSidemenuProvider,{children:jsxRuntimeExports.jsx(HCBotHistoryProvider,{children:jsxRuntimeExports.jsx(HCBotWorkflowProvider,{children:jsxRuntimeExports.jsx(HCBotRunningProvider,{children:e})})})})})})});class GraphSchemaDrawer{_canvas;_ctx;_xScaler;_yScaler;constructor({canvas:t,xScaler:n=new Scaler({source:1,target:1,isDevicePixelRatio:!0}),yScaler:a=new Scaler({source:1,target:1,isDevicePixelRatio:!0})}){this._canvas=t,this._ctx=CanvasHelper.getCanvasContext(this._canvas),this._xScaler=n,this._yScaler=a}updateScale(t,n){this._canvas.width=this._xScaler.scale(t),this._canvas.height=this._yScaler.scale(n),this._canvas.style.width=`${this._canvas.width}px`,this._canvas.style.height=`${this._canvas.height}px`,this._ctx.scale(this._xScaler.getRatio,this._yScaler.getRatio)}render({nodes:t,links:n,xOffset:a,yOffset:s,scale:u}){const{width:c,height:h}=CanvasHelper.getCanvasSize(this._canvas);this._ctx.clearRect(0,0,this._xScaler.unscale(c)*c,this._yScaler.unscale(h)*h),t.forEach(f=>{this.drawNode({node:f,xOffset:a,yOffset:s,scale:u})}),n.forEach(f=>{const m=t.find(C=>C.id===f.origin_id),_=t.find(C=>C.id===f.target_id);m&&_&&this.drawLink({originNode:m,targetNode:_,xOffset:a,yOffset:s,scale:u})})}drawNode({node:t,xOffset:n=0,yOffset:a=0,scale:s=1}){this._ctx.fillStyle="#240186ff";const u=(t.pos[0]-n)*s,c=(t.pos[1]-a)*s,h=t.size[0]*s,f=t.size[1]*s;this._ctx.fillRect(u,c,h,f)}drawLink({originNode:t,targetNode:n,xOffset:a=0,yOffset:s=0,scale:u=1}){this._ctx.strokeStyle="#0ba800ff",this._ctx.lineWidth=2,this._ctx.beginPath(),this._ctx.moveTo((t.pos[0]+t.size[0]-a)*u,(t.pos[1]+t.size[1]/2-s)*u),this._ctx.lineTo((n.pos[0]-a)*u,(n.pos[1]+n.size[1]/2-s)*u),this._ctx.stroke()}}function useMapNavigation({xScaler:e,yScaler:t}){const n=reactExports.useRef(!1),a=reactExports.useRef(0),s=reactExports.useRef(0),{moveTo:u,scale:c}=useCamera(),h=reactExports.useCallback((b,T)=>{if(!n)return;const R=e.unscale(b),A=t.unscale(T);u(R,A)},[e,t,u]),f=reactExports.useCallback(useThrottle(b=>{if(!n.current)return;const T=b.nativeEvent.offsetX,R=b.nativeEvent.offsetY;h(a.current-T,s.current-R),a.current=T,s.current=R},25),[h,a,s]),m=reactExports.useCallback(b=>{n.current=!0;const T=b.nativeEvent.offsetX,R=b.nativeEvent.offsetY;a.current=T,s.current=R},[n,a,s]),_=reactExports.useCallback(()=>{n.current=!1},[n]),C=reactExports.useCallback(useThrottle(b=>{b.deltaY>0?c(-.1):c(.1)},50),[c]);return{mouseEvents:{onMouseDown:m,onMouseMove:f,onMouseUp:_,onMouseLeave:_,onWheel:C}}}function useCamera(){const e=reactExports.useContext(GraphCanvasContext),t=reactExports.useCallback(()=>{e?.canvas&&(e.canvas.ds.scale=1,e.canvas.ds.offset[0]=0,e.canvas.ds.offset[1]=0,e.canvas.adjustNodesSize(),e.canvas.draw(!0))},[e]),n=reactExports.useCallback((s,u)=>{if(!e?.canvas)return;const c=e.canvas.ds.scale;e.canvas.ds.offset[0]+=s/c,e.canvas.ds.offset[1]+=u/c,e.canvas.adjustNodesSize(),e.canvas.draw(!0)},[e]),a=reactExports.useCallback(s=>{e?.canvas&&(e.canvas.ds.scale+=s,e.canvas.adjustNodesSize(),e.canvas.draw(!0))},[e]);return{centerCamera:t,moveTo:n,scale:a}}const GraphMinimap=reactExports.memo(({width:e,height:t,bottom:n,right:a})=>{const s=reactExports.useRef(null),u=reactExports.useContext(GraphCanvasContext),c=useCanvasSize(u?.canvas?.canvas??null),h=useCanvasSize(s.current),[f,m]=reactExports.useMemo(()=>!c||!h?[null,null]:[new Scaler({source:c.width,target:h.width}),new Scaler({source:c.height,target:h.height})],[c,h]),_=reactExports.useMemo(()=>!s.current||!f||!m?null:new GraphSchemaDrawer({canvas:s.current,xScaler:f,yScaler:m}),[s.current,f,m]),{mouseEvents:C}=useMapNavigation({xScaler:f??new Scaler({}),yScaler:m??new Scaler({})}),b=useThrottle(()=>{if(!_||!u?.canvas)return;const[T,R]=u.canvas.visible_area,A=u.canvas.ds.scale,I=u.canvas.graph._nodes,P=Object.values(u.canvas.graph.links);_.render({nodes:I,links:P,xOffset:T,yOffset:R,scale:A})},100);return reactExports.useEffect(()=>{!c||!_||!u?.canvas||(_.updateScale(c.width,c.height),b(),u.canvas.onDrawForeground=b)},[u,b,c,_]),jsxRuntimeExports.jsx(Box,{style:{width:e,height:t,bottom:n,right:a},className:"bg-[#111111] absolute z-1 border border-gray-700 before:block before:w-full before:h-full before:absolute before:left-0 before:top-0 before:bg-[rgba(255,255,255,0.05)]",...C,children:jsxRuntimeExports.jsx("canvas",{ref:s,className:"w-full h-full"})})}),ZoomInMapOutlinedIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M9 9V3H7v2.59L3.91 2.5 2.5 3.91 5.59 7H3v2zm12 0V7h-2.59l3.09-3.09-1.41-1.41L17 5.59V3h-2v6zM3 15v2h2.59L2.5 20.09l1.41 1.41L7 18.41V21h2v-6zm12 0v6h2v-2.59l3.09 3.09 1.41-1.41L18.41 17H21v-2z"})),CenterButton=reactExports.memo(()=>{const{centerCamera:e}=useCamera();return jsxRuntimeExports.jsx(BaseIconButton,{color:"info",onClick:e,children:jsxRuntimeExports.jsx(ZoomInMapOutlinedIcon,{sx:{fontSize:30}})})}),MainArea=observer(()=>{const e=reactExports.useContext(SidemenuContext),t=reactExports.useMemo(()=>e.openedElement===HCBOT_TEMPLATES_SIDEBAR?HCBOT_TEMPLATES_SIDEBAR_WIDTH:e.openedElement===HCBOT_WORKFLOW_SIDEBAR?HCBOT_WORKFLOW_SIDEBAR_WIDTH:0,[e.openedElement]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(DroppableGraph,{}),jsxRuntimeExports.jsx(GraphMinimap,{width:"145px",height:"100px",right:"1rem",bottom:"1rem"}),jsxRuntimeExports.jsxs(Box,{className:"absolute z-1 left-[1rem] bottom-[1rem] flex items-center gap-2 transition-transform",style:{transform:`translateX(${t}px)`},children:[jsxRuntimeExports.jsx(HCBotHistoryButtons,{}),jsxRuntimeExports.jsx(CenterButton,{})]}),jsxRuntimeExports.jsx(Box,{className:"absolute z-1 right-[1rem] top-[1rem]",children:jsxRuntimeExports.jsx(HCBotRunningBaseButtons,{})})]})}),SideArea=observer(()=>{const e=reactExports.useContext(GraphDndContext),t=reactExports.useContext(SidemenuContext),n=reactExports.useContext(TemplatesContext);return useWorkflowInit({getNodeFullname:a=>n.getById(a.templateId)}),useWorkflowStatusInit(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HCBotSidemenu,{itemSlot:a=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(HCBotTemplatesSidebarButton,{onClick:a}),jsxRuntimeExports.jsx(HCBotWorkflowButton,{onClick:a})]}),staticItems:jsxRuntimeExports.jsx(HCBotConsoleButton,{})}),jsxRuntimeExports.jsx(HCBotTemplatesSidebar,{open:t.openedElement===HCBOT_TEMPLATES_SIDEBAR,style:{overflow:e?"visible":"auto",marginLeft:`${SIDEAREA_WIDTH}px`},nodeSlot:(a,s)=>jsxRuntimeExports.jsx(DraggableComponent,{id:CustomNodeHelper.combineFullname(a,s),children:jsxRuntimeExports.jsx(File$1,{name:s,icon:jsxRuntimeExports.jsx(TemplateIcon,{fullname:CustomNodeHelper.combineFullname(a,s)})})})}),jsxRuntimeExports.jsx(HCBotWorkflowSidebar,{open:t.openedElement===HCBOT_WORKFLOW_SIDEBAR,style:{marginLeft:`${SIDEAREA_WIDTH}px`}}),jsxRuntimeExports.jsx(HCBotBlockerModal,{})]})}),BottomArea=observer(()=>{const e=reactExports.useContext(SidemenuContext),t=reactExports.useMemo(()=>e.openedElement===HCBOT_TEMPLATES_SIDEBAR?HCBOT_TEMPLATES_SIDEBAR_WIDTH:e.openedElement===HCBOT_WORKFLOW_SIDEBAR?HCBOT_WORKFLOW_SIDEBAR_WIDTH:0,[e.openedElement]);return jsxRuntimeExports.jsx(Box,{className:"h-full transition bg-[#1b1a1a]",style:{paddingLeft:t+"px",transition:"padding-left ease-in-out 0.15s"},children:jsxRuntimeExports.jsx(HCBotConsole,{})})}),SIDEAREA_WIDTH=60,routes=[{path:"/",component:EditorPage}];class RouteHelper{static clearPath(t){return t.replace(/\/\*/g,"").replace(/\/:[^/]+/g,"").replace(/\/$/,"")||"/"}}const AppRouter=createBrowserRouter(createRoutesFromElements(jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[routes.map(e=>jsxRuntimeExports.jsx(Route,{path:e.path,element:reactExports.createElement(e.component),children:e.children&&e.children.map(t=>jsxRuntimeExports.jsx(Route,{path:t.path,element:reactExports.createElement(e.component)},`childRoute:${e.path}/${t.path}`))},`route:${e.path}`)),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:RouteHelper.clearPath(routes?.[0]?.path??"/"),replace:!0})})]}))),theme=createTheme({palette:{mode:"dark"}});clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(ThemeProvider,{theme,children:jsxRuntimeExports.jsx(RouterProvider2,{router:AppRouter})})}));
